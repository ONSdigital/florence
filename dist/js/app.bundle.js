!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1156)}([,,,function(e,t,n){e.exports=n(241)()},function(e,t,n){"use strict";e.exports=n(46)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,l){if(a(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,l],p=0;u=new Error(t.replace(/%s/g,function(){return c[p++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var a=function(e){};e.exports=r},function(e,t,n){"use strict";var r=n(18),a=r;e.exports=a},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var a=new Error(n);throw a.name="Invariant Violation",a.framesToPop=1,a}e.exports=r},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=r(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)i.call(n,c)&&(l[c]=n[c]);if(a){s=a(n);for(var p=0;p<s.length;p++)o.call(n,s[p])&&(l[s[p]]=n[s[p]])}}return l}},function(e,t,n){"use strict";function r(e,t){return 1===e.nodeType&&e.getAttribute(h)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function a(e){for(var t;t=e._renderedComponent;)e=t;return e}function i(e,t){var n=a(e);n._hostNode=t,t[g]=n}function o(e){var t=e._hostNode;t&&(delete t[g],e._hostNode=null)}function s(e,t){if(!(e._flags&m.hasCachedChildNodes)){var n=e._renderedChildren,o=t.firstChild;e:for(var s in n)if(n.hasOwnProperty(s)){var l=n[s],u=a(l)._domID;if(0!==u){for(;null!==o;o=o.nextSibling)if(r(o,u)){i(l,o);continue e}p("32",u)}}e._flags|=m.hasCachedChildNodes}}function l(e){if(e[g])return e[g];for(var t=[];!e[g];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[g]);e=t.pop())n=r,t.length&&s(r,e);return n}function u(e){var t=l(e);return null!=t&&t._hostNode===e?t:null}function c(e){if(void 0===e._hostNode&&p("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||p("34"),e=e._hostParent;for(;t.length;e=t.pop())s(e,e._hostNode);return e._hostNode}var p=n(7),d=n(44),f=n(145),h=(n(5),d.ID_ATTRIBUTE_NAME),m=f,g="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:l,getInstanceFromNode:u,getNodeFromInstance:c,precacheChildNodes:s,precacheNode:i,uncacheNode:o};e.exports=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(22),i=n(171),o=n(23),s=n(81),l=n.n(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(){r(this,e)}return u(e,null,[{key:"add",value:function(t){var r=this;if(!t)return void console.warn("Couldn't show notification - no notification data supplied");var s={type:t.type||"neutral",message:t.message||"",id:l()(),buttons:t.buttons||[],isVisible:!1,isDismissable:null==t.isDismissable||t.isDismissable};if(t.autoDismiss&&t.autoDismiss>0)var u=window.setTimeout(function(){window.clearTimeout(u),r.remove(s.id)},t.autoDismiss);s.isDismissable&&s.buttons.push({text:"Close",onClick:function(){e.remove(s.id)}}),o.a.event("Notification shown",o.a.data({type:s.type,message:s.message})),i.a.dispatch(n.i(a.b)(s));var c=window.setTimeout(function(){i.a.dispatch(n.i(a.c)(s.id)),window.clearTimeout(c)},50);return s.id}},{key:"remove",value:function(e){i.a.dispatch(n.i(a.c)(e));var t=window.setTimeout(function(){i.a.dispatch(n.i(a.d)(e)),window.clearTimeout(t)},50)}}]),e}();t.a=c},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.routerMiddleware=t.routerActions=t.goForward=t.goBack=t.go=t.replace=t.push=t.CALL_HISTORY_METHOD=t.routerReducer=t.LOCATION_CHANGE=t.syncHistoryWithStore=void 0;var a=n(623);Object.defineProperty(t,"LOCATION_CHANGE",{enumerable:!0,get:function(){return a.LOCATION_CHANGE}}),Object.defineProperty(t,"routerReducer",{enumerable:!0,get:function(){return a.routerReducer}});var i=n(622);Object.defineProperty(t,"CALL_HISTORY_METHOD",{enumerable:!0,get:function(){return i.CALL_HISTORY_METHOD}}),Object.defineProperty(t,"push",{enumerable:!0,get:function(){return i.push}}),Object.defineProperty(t,"replace",{enumerable:!0,get:function(){return i.replace}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return i.go}}),Object.defineProperty(t,"goBack",{enumerable:!0,get:function(){return i.goBack}}),Object.defineProperty(t,"goForward",{enumerable:!0,get:function(){return i.goForward}}),Object.defineProperty(t,"routerActions",{enumerable:!0,get:function(){return i.routerActions}});var o=n(1110),s=r(o),l=n(1109),u=r(l);t.syncHistoryWithStore=s.default,t.routerMiddleware=u.default},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1100),a=n(618),i=n(1101);n.d(t,"Provider",function(){return r.a}),n.d(t,"createProvider",function(){return r.b}),n.d(t,"connectAdvanced",function(){return a.a}),n.d(t,"connect",function(){return i.a})},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=a},function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(23),i=n(10),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(){r(this,e)}return s(e,null,[{key:"sanitise",value:function(e){var t=e.replace(/[^a-z0-9]/gi,"_").toLowerCase();return encodeURIComponent(t)}},{key:"slug",value:function(e){return e.startsWith("/")?e.replace("/","").replace(/\//g,"-"):e.replace(/\//g,"-")}},{key:"resolve",value:function(e,t){if("string"!=typeof e)return console.error("Unable to parse relative URL path because non-string type given"),a.a.event("Unable to parse relative URL path because non-string type given",a.a.data({type:void 0===e?"undefined":o(e)})),location.pathname;try{if("/"===e)return"/florence";if("/"===e[0]&&(e="/florence"+e),"/florence"===location.pathname&&(e="/florence/"+e),0===e.indexOf("../")){var n=new URL(e,location.href+"/");return n.pathname.replace(/\/+$/,"")+(t?"":n.search)}var r=new URL(e,location.href);return r.pathname+(t?"":r.search)}catch(t){console.error("Error trying to parse relative URL:\n",t);var s={type:"warning",message:"There was an unexpected error trying to resolve the path '"+e+"' ... ¯\\_(ツ)_/¯"};return i.a.add(s),void a.a.event("Error trying to parse relative URL",a.a.error(t))}}}]),e}();t.a=l},function(e,t,n){"use strict";var r=null;e.exports={debugTool:r}},function(e,t,n){"use strict";function r(e){return{type:V,config:e}}function a(e,t,n){return{type:W,email:e,userType:t,isAdmin:n}}function i(){return{type:z}}function o(e){return{type:Y,collections:e}}function s(e){return{type:J,collectionID:e}}function l(e){return{type:$,collectionID:e}}function u(e){return{type:X,collection:e}}function c(e){return{type:K,collection:e}}function p(e){return{type:G,teams:e}}function d(){return{type:Q,collection:null}}function f(e,t){return{type:Z,workingOn:{id:e,name:t}}}function h(){return{type:ee}}function m(e){return{type:te,user:e}}function g(e){return{type:ne,users:e}}function v(e){return{type:re,userID:e}}function y(e){return{type:le,allDatasets:e}}function b(e){return{type:ue,dataset:e}}function w(){return{type:ce}}function E(e){return{type:de,collectionID:e}}function _(e,t){return{type:pe,lastEditedBy:e,reviewState:t}}function C(e){return{type:fe,allRecipes:e}}function k(e){return{type:he,allJobs:e}}function S(e){return{type:me,job:e}}function D(e){return{type:ge,job:e}}function O(e){return{type:ve,instance:e}}function T(){return{type:be}}function R(e){return{type:we,version:e}}function P(e,t){return{type:ye,lastEditedBy:e,reviewState:t}}function x(){return{type:Ee}}function N(e){return{type:ae,allTeams:e}}function I(e){return{type:ie,allTeamIDsAndNames:e}}function A(e){return{type:oe,activeTeam:e}}function j(e){return{type:se,members:e}}function M(){return{type:oe,activeTeam:{}}}function L(e){return{type:_e,notification:e}}function U(e){return{type:Ce,notificationID:e}}function F(e){return{type:ke,notificationID:e}}function q(e){return{type:Se,preview:e}}function B(e){return{type:Oe,selectedPage:e}}function H(){return{type:Te,selectedPage:{}}}n.d(t,"P",function(){return V}),n.d(t,"Q",function(){return Y}),n.d(t,"R",function(){return J}),n.d(t,"S",function(){return $}),n.d(t,"T",function(){return X}),n.d(t,"U",function(){return K}),n.d(t,"V",function(){return G}),n.d(t,"W",function(){return Q}),n.d(t,"X",function(){return Z}),n.d(t,"Y",function(){return ee}),n.d(t,"Z",function(){return te}),n.d(t,"_0",function(){return ne}),n.d(t,"_1",function(){return re}),n.d(t,"_2",function(){return ie}),n.d(t,"_10",function(){return ue}),n.d(t,"_9",function(){return ce}),n.d(t,"_11",function(){return pe}),n.d(t,"_12",function(){return de}),n.d(t,"_8",function(){return me}),n.d(t,"_3",function(){return ve}),n.d(t,"_6",function(){return ye}),n.d(t,"_4",function(){return be}),n.d(t,"_5",function(){return we}),n.d(t,"_7",function(){return Ee}),n.d(t,"_13",function(){return Se}),n.d(t,"_14",function(){return De}),n.d(t,"_15",function(){return Oe}),n.d(t,"_16",function(){return Te}),t.a=r,t.e=a,t.f=i,t.I=o,t.N=s,t.J=l,t.K=u,t.L=c,t.M=p,t.H=d,t.C=f,t.E=h,t.w=m,t.x=g,t.v=v,t.r=y,t.i=b,t.o=w,t.q=E,t.p=_,t.k=C,t.t=k,t.s=S,t.u=D,t.l=O,t.m=T,t.h=R,t.j=P,t.n=x,t.A=N,t.O=I,t.y=A,t.B=j,t.z=M,t.b=L,t.d=U,t.c=F,t.G=q,t.D=B,t.F=H;var V="SET_CONFIG",W="USER_LOGGED_IN",z="USER_LOGGED_OUT",Y="ADD_ALL_COLLECTIONS",J="MARK_COLLECTION_FOR_DELETE_FROM_ALL_COLLECTIONS",$="DELETE_COLLECTION_FROM_ALL_COLLECTIONS",X="UPDATE_ACTIVE_COLLECTION",K="UPDATE_PAGES_IN_ACTIVE_COLLECTION",G="UPDATE_TEAMS_IN_ACTIVE_COLLECTION",Q="EMPTY_ACTIVE_COLLECTION",Z="UPDATE_WORKING_ON",ee="EMPTY_WORKING_ON",te="UPDATE_ACTIVE_USER",ne="ADD_ALL_USERS",re="REMOVE_USER_FROM_ALL_USERS",ae="UPDATE_ALL_TEAMS",ie="UPDATE_ALL_TEAM_IDS_AND_NAMES",oe="UPDATE_ACTIVE_TEAM",se="UPDATE_ACTIVE_TEAM_MEMBERS",le="UPDATE_ALL_DATASETS",ue="UPDATE_ACTIVE_DATASET",ce="EMPTY_ACTIVE_DATASET",pe="UPDATE_ACTIVE_DATASET_REVIEW_STATE",de="UPDATE_ACTIVE_DATASET_COLLECTION_ID",fe="UPDATE_ALL_RECIPES",he="UPDATE_ALL_JOBS",me="UPDATE_ACTIVE_JOB",ge="ADD_NEW_JOB",ve="UPDATE_ACTIVE_INSTANCE",ye="UPDATE_ACTIVE_VERSION_REVIEW_STATE",be="EMPTY_ACTIVE_INSTANCE",we="UPDATE_ACTIVE_VERSION",Ee="EMPTY_ACTIVE_VERSION",_e="ADD_NOTIFICATION",Ce="REMOVE_NOTIFICATION",ke="TOGGLE_NOTIFICATION_VISIBILITY",Se="ADD_PREVIEW_COLLECTION",De="REMOVE_PREVIEW_COLLECTION",Oe="UPDATE_PREVIEW_SELECTED_PAGE",Te="REMOVE_PREVIEW_SELECTED_PAGE"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=void 0;if(e.stack)try{var n=e.stack.split("\n");t=n.map(function(e){return{line:e.trim()}})}catch(n){console.error(n),t=e.stack}return{message:e.message,stack_trace:t}}var i=n(30),o=n(334),s=n(335),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=new Date(Date.now()).toISOString(),p=function(){function e(){r(this,e)}return u(e,null,[{key:"initialise",value:function(){this.event("App initialised"),i.f.listen(function(t){e.event("Route change",e.data(l({},t)))})}},{key:"getAll",value:function(e,t,n){return o.a.getAll(e,t,n)}},{key:"length",value:function(){return o.a.length()}},{key:"removeAll",value:function(){return o.a.removeAll()}}]),e}();p.event=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a={event:e,created_at:new Date(Date.now()).toISOString(),namespace:"florence",client_loaded_at:c,severity:3};return n&&n.map(function(e){e.attach(a)}),o.a.add(a),s.a.send("log:"+JSON.stringify(a)),a},p.http=function(e,t,n,r,a,i){return new d(e,t,n,r,a,i)},p.data=function(e){return new h(e)},p.fatal=function(e){return new m(e)},p.error=function(e){return new g(e)},p.warn=function(e){return new v(e)},p.info=function(){return new y},t.a=p;var d=function e(t,n,a,i,o,s){r(this,e),f.call(this),this.requestID=t,this.method=n,this.url=a,this.statusCode=o,this.startedAt=i,this.endedAt=s},f=function(){var e=this;this.attach=function(t){var n=Date.parse(e.endedAt)-Date.parse(e.startedAt),r=new URL(e.url);return t.trace_id=e.requestID,t.http={method:e.method,path:r.pathname||void 0,query:r.search||void 0,scheme:r.protocol||void 0,host:r.hostname||void 0,port:r.port?parseInt(r.port):void 0,status_code:e.statusCode,started_at:e.startedAt,ended_at:e.endedAt,duration:n||void 0},t}},h=function e(t){var n=this;r(this,e),this.attach=function(e){return e.data=n.dataEvent,e},this.dataEvent=t},m=function e(t){var n=this;r(this,e),this.attach=function(e){return e.severity=0,e.error=n.error?a(n.error):void 0,e},this.error=t},g=function e(t){var n=this;r(this,e),this.attach=function(e){return e.severity=1,e.error=n.error?a(n.error):void 0,e},this.error=t},v=function e(t){var n=this;r(this,e),this.attach=function(e){return e.severity=2,e.error=n.error?a(n.error):void 0,e},this.error=t},y=function e(){r(this,e),this.attach=function(e){return e.severity=3,e}}},,,,function(e,t,n){"use strict";function r(){T.ReactReconcileTransaction&&_||c("123")}function a(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=d.getPooled(),this.reconcileTransaction=T.ReactReconcileTransaction.getPooled(!0)}function i(e,t,n,a,i,o){return r(),_.batchedUpdates(e,t,n,a,i,o)}function o(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==y.length&&c("124",t,y.length),y.sort(o),b++;for(var n=0;n<t;n++){var r=y[n],a=r._pendingCallbacks;r._pendingCallbacks=null;var i;if(h.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),i="React update: "+s.getName(),console.time(i)}if(m.performUpdateIfNecessary(r,e.reconcileTransaction,b),i&&console.timeEnd(i),a)for(var l=0;l<a.length;l++)e.callbackQueue.enqueue(a[l],r.getPublicInstance())}}function l(e){if(r(),!_.isBatchingUpdates)return void _.batchedUpdates(l,e);y.push(e),null==e._updateBatchNumber&&(e._updateBatchNumber=b+1)}function u(e,t){v(_.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),w.enqueue(e,t),E=!0}var c=n(7),p=n(8),d=n(143),f=n(35),h=n(148),m=n(45),g=n(78),v=n(5),y=[],b=0,w=d.getPooled(),E=!1,_=null,C={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),D()):y.length=0}},k={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},S=[C,k];p(a.prototype,g,{getTransactionWrappers:function(){return S},destructor:function(){this.dirtyComponentsLength=null,d.release(this.callbackQueue),this.callbackQueue=null,T.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return g.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(a);var D=function(){for(;y.length||E;){if(y.length){var e=a.getPooled();e.perform(s,null,e),a.release(e)}if(E){E=!1;var t=w;w=d.getPooled(),t.notifyAll(),d.release(t)}}},O={injectReconcileTransaction:function(e){e||c("126"),T.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||c("127"),"function"!=typeof e.batchedUpdates&&c("128"),"boolean"!=typeof e.isBatchingUpdates&&c("129"),_=e}},T={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:l,flushBatchedUpdates:D,injection:O,asap:u};e.exports=T},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={id:u.a.string.isRequired,name:u.a.string,label:u.a.string,type:u.a.string,onChange:u.a.func,onBlur:u.a.func,error:u.a.string,disabled:u.a.bool,isFocused:u.a.bool,inline:u.a.bool,accept:u.a.string,value:u.a.string,min:u.a.string,max:u.a.string,allowAutoComplete:u.a.bool,placeholder:u.a.string},d={type:"text",disabled:!1,isFocused:!1},f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={type:n.props.type,displayShowHide:"password"===n.props.type},n.showHide=n.showHide.bind(n),n.moveCaretToEnd=n.moveCaretToEnd.bind(n),n}return i(t,e),c(t,[{key:"showHide",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({type:"text"===this.state.type?"password":"text"})}},{key:"moveCaretToEnd",value:function(e){var t=e.target.value;e.target.value="",e.target.value=t}},{key:"render",value:function(){return s.a.createElement("div",{className:"form__input"+(this.props.error?" form__input--error":"")+(this.props.inline?" form__input--flush":"")},!this.props.inline&&s.a.createElement("label",{className:"form__label",htmlFor:this.props.id},this.props.label),this.props.error?s.a.createElement("div",{id:"input-error-"+this.props.id,className:"error-msg"},this.props.error):"","textarea"!==this.props.type?s.a.createElement("input",{id:this.props.id,type:this.state.type,className:"input"+(this.state.displayShowHide?" input--show-hide":""),name:this.props.name||this.props.id,disabled:this.props.disabled,onChange:this.props.onChange,onBlur:this.props.onBlur,autoFocus:this.props.isFocused,onFocus:this.moveCaretToEnd,placeholder:this.props.inline?this.props.label:this.props.placeholder,accept:this.props.accept,value:this.props.value,min:this.props.min,max:this.props.max,autoComplete:!this.props.allowAutoComplete&&"new-password"}):s.a.createElement("textarea",{id:this.props.id,className:"input input__textarea",name:this.props.name||this.props.id,disabled:this.props.disabled,onChange:this.props.onChange,onBlur:this.props.onBlur,autoFocus:this.props.isFocused,placeholder:this.props.inline?this.props.label:"",value:this.props.value}),this.state.displayShowHide?s.a.createElement("span",{className:"btn btn--password",onClick:this.showHide,onKeyPress:this.showHide,tabIndex:"0",role:"button"},"text"===this.state.type?"Hide":"Show"):"")}}]),t}(o.Component);t.a=f,f.propTypes=p,f.defaultProps=d},function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var a=this.constructor.Interface;for(var i in a)if(a.hasOwnProperty(i)){var s=a[i];s?this[i]=s(n):"target"===i?this.target=r:this[i]=n[i]}var l=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=l?o.thatReturnsTrue:o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse,this}var a=n(8),i=n(35),o=n(18),s=(n(6),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),l={type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};a(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=l,r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var o=new r;a(o,e.prototype),e.prototype=o,e.prototype.constructor=e,e.Interface=a({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.fourArgumentPooler)},i.addPoolingTo(r,i.fourArgumentPooler),e.exports=r},function(e,t,n){"use strict";var r=n(1115);n.d(t,"a",function(){return r.a});var a=n(624);n.d(t,"g",function(){return a.a});var i=(n(1111),n(1126),n(1112));n.d(t,"e",function(){return i.a});var o=n(1113);n.d(t,"d",function(){return o.a});var s=n(626);n.d(t,"c",function(){return s.a});var l=n(1114);n.d(t,"b",function(){return l.a});var u=(n(87),n(310),n(309),n(1124),n(631),n(128),n(1117),n(1118));n.d(t,"f",function(){return u.a});n(1122),n(628)},function(e,t,n){"use strict";var r={current:null};e.exports=r},,function(e,t,n){"use strict";var r=function(e,t,n,r,a,i,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,i,o,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=r},,function(e,t,n){"use strict";var r=n(7),a=(n(5),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var a=r.instancePool.pop();return r.call(a,e,t,n),a}return new r(e,t,n)},s=function(e,t,n,r){var a=this;if(a.instancePool.length){var i=a.instancePool.pop();return a.call(i,e,t,n,r),i}return new a(e,t,n,r)},l=function(e){var t=this;e instanceof t||r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},u=a,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||u,n.poolSize||(n.poolSize=10),n.release=l,n},p={addPoolingTo:c,oneArgumentPooler:a,twoArgumentPooler:i,threeArgumentPooler:o,fourArgumentPooler:s};e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(125),i=n.n(a),o=n(23),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(){r(this,e)}return s(e,null,[{key:"getNow",value:function(){return new Date(Date.now())}},{key:"addYear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];t||(t=this.getNow());var n=void 0;try{n=new Date(t),n.setFullYear(t.getFullYear()+e)}catch(r){n=t,o.a.event("Error adding year(s) to the date",o.a.error(r),o.a.data({extra_years:e,date:t})),console.error("Error adding "+e+"year(s) to the date "+t,r)}return n}},{key:"format",value:function(e,t){return e||(e=this.getNow()),i()(e,t)}}]),e}();t.a=l},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(54),o=n(20),s=this,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(){a(this,e)}return c(e,null,[{key:"getAll",value:function(){return i.a.get("/dataset/datasets").then(function(e){return e})}},{key:"getInstance",value:function(e){return i.a.get("/dataset/instances/"+e).then(function(e){return e})}},{key:"getEdition",value:function(e,t){return i.a.get("/dataset/datasets/"+e+"/editions/"+t).then(function(e){return e})}},{key:"getEditions",value:function(e){return i.a.get("/dataset/datasets/"+e+"/editions").then(function(e){return e})}},{key:"getVersion",value:function(e,t,n){return i.a.get("/dataset/datasets/"+e+"/editions/"+t+"/versions/"+n).then(function(e){return e})}},{key:"getVersions",value:function(e,t){return i.a.get("/dataset/datasets/"+e+"/editions/"+t+"/versions").then(function(e){return e})}},{key:"getLatestVersion",value:function(e){var t=this,n="/dataset/datasets/"+e;return new Promise(function(){var e=r(regeneratorRuntime.mark(function e(r,a){var s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(n).catch(function(e){return a(e)});case 2:if((s=e.sent)&&s.current&&s.current.links.latest_version){e.next=6;break}return r(),e.abrupt("return");case 6:return l=o.a.resolve(s.current.links.latest_version.href),e.next=9,i.a.get("/dataset"+l).catch(function(e){return a(e)});case 9:u=e.sent,r(u);case 11:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"getVersionDimensions",value:function(e,t,n){return i.a.get("/dataset/datasets/"+e+"/editions/"+t+"/versions/"+n+"/dimensions").then(function(e){return e})}},{key:"updateInstanceDimensions",value:function(e,t){var n={dimensions:t};return i.a.put("/instances/"+e,n)}},{key:"updateDimensionLabelAndDescription",value:function(e,t,n,r){var a={label:n,description:r};return i.a.put("/instances/"+e+"/dimensions/"+t,a,!0).then(function(e){return e})}},{key:"updateVersionMetadata",value:function(e,t,n,r){return"object"!==(void 0===r?"undefined":u(r))?Promise.reject({status:400}):i.a.put("/dataset/datasets/"+e+"/editions/"+t+"/versions/"+n,r,!0).then(function(e){return e})}},{key:"updateInstanceEdition",value:function(e,t){var n={edition:t};return i.a.put("/dataset/instances/"+e,n,!0).then(function(e){return e})}},{key:"confirmEditionAndCreateVersion",value:function(e,t,n){var r={edition:t,state:"edition-confirmed"};return n&&"object"===(void 0===n?"undefined":u(n))&&(r=l({},r,n)),i.a.put("/dataset/instances/"+e,r,!0)}},{key:"updateDatasetMetadata",value:function(e,t){return i.a.put("/dataset/datasets/"+e,t,!0).then(function(e){return e})}},{key:"getAllInstances",value:function(){return i.a.get("/dataset/instances").then(function(e){return e})}},{key:"getCompletedInstancesForDataset",value:function(e){return i.a.get("/dataset/instances?dataset="+e+"&state=completed").then(function(e){return e})}},{key:"getCompletedInstances",value:function(){return i.a.get("/dataset/instances?state=completed").then(function(e){return e})}},{key:"getNewVersionsAndCompletedInstances",value:function(){return i.a.get("/dataset/instances?state=completed,edition-confirmed,associated").then(function(e){return e})}}]),e}();p.get=function(e){return i.a.get("/dataset/datasets/"+e).then(function(e){return e})},p.getLatestVersionForEditions=function(){var e=r(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=r(regeneratorRuntime.mark(function e(r,a){var o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.map(function(e){return i.a.get("/dataset/datasets/"+t+"/editions/"+e.id+"/versions/"+e.latestVersion).then(function(e){return e}).catch(function(e){a(e)})}),e.next=3,Promise.all(o).then(function(e){return e}).catch(function(e){console.error(e),a(e)});case 3:l=e.sent,r(l);case 5:case"end":return e.stop()}},e,s)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,s)}));return function(t,n){return e.apply(this,arguments)}}(),p.getLatestVersionURL=function(){var e=r(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/dataset/datasets/"+t,e.abrupt("return",i.a.get(n).then(function(e){var t=e.next||e.current||e;return new URL(t.links.latest_version.href).pathname}).catch(function(e){return e}));case 2:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}(),t.a=p},,,,,function(e,t,n){var r,a,i,o,s,l,u,c,p,d,f;f=n(58),r=n(127),a=n(729),i=n(86).compileDocumentSelector,o=n(86).compileSort,u=function(){if(!window.localStorage)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(e){return e,!1}},t.compileDocumentSelector=i,t.autoselectLocalDb=function(e,t,r){var i,o,s,l,c;return i=n(498),l=n(501),o=n(499),s=n(500),c=a.browser,u()?window.cordova?(console.log("Selecting WebSQLDb for Cordova"),new l(e,t,r)):c.android||c.ios||c.chrome||c.safari||c.opera||c.blackberry?(console.log("Selecting WebSQLDb for browser"),new l(e,t,function(n){return function(n){return console.log("Failed to create WebSQLDb: "+(n?n.message:void 0)),new i(e,t,function(n){return console.log("Failed to create IndexedDb: "+(n?n.message:void 0)),new s(e,t)})}}())):c.firefox&&c.version>=16?(console.log("Selecting IndexedDb for browser"),new i(e,t,function(n){return function(n){return console.log("Failed to create IndexedDb: "+(n?n.message:void 0)),new s(e,t)}}())):(console.log("Selecting LocalStorageDb for fallback"),new o(e,t,r)):new s(e,t)},t.migrateLocalDb=function(e,t,r,a){var i,o,s,l;i=n(497),o=new i(e,t),l=e.collections;for(s in l)l[s],t[s]&&o.addCollection(s);return o.upload(r,a)},t.cloneLocalDb=function(e,t,n,a){var i,o;o=e.collections;for(i in o)o[i],t[i]||t.addCollection(i);return r.each(f.values(e.collections),function(e){return function(e,n){var a;return a=t[e.name],e.find({}).fetch(function(t){return a.seed(t,function(){return e.pendingUpserts(function(t){return a.upsert(f.pluck(t,"doc"),f.pluck(t,"base"),function(){return e.pendingRemoves(function(e){return r.eachSeries(e,function(e,t){return a.remove(e,function(){return t()},t)},n)},n)},n)},n)},n)},n)}}(),function(e){return function(e){return e?a(e):n()}}())},t.processFind=function(e,n,r){var a;return a=f.filter(e,i(n)),a=d(n,a),a=p(n,a),r&&r.sort&&a.sort(o(r.sort)),r&&r.skip&&(a=f.slice(a,r.skip)),r&&r.limit&&(a=f.take(a,r.limit)),r&&r.fields&&(a=t.filterFields(a,r.fields)),a},t.filterFields=function(e,t){return null==t&&(t={}),0===f.keys(t).length?e:f.map(e,function(e){var n,r,a,i,o,s,l,u,c,p,d,h,m,g,v,y,b,w,E,_,C;if(a={},1===f.first(f.values(t))){for(w=f.keys(t).concat(["_id"]),u=0,h=w.length;u<h;u++){for(n=w[u],o=n.split("."),i=e,c=0,m=o.length;c<m;c++)s=o[c],i&&(i=i[s]);if(null!=i){for(r=e,l=a,E=f.initial(o),p=0,g=E.length;p<g;p++)s=E[p],l[s]=l[s]||{},l=l[s],r=r[s];l[f.last(o)]=r[f.last(o)]}}return a}for(e=f.cloneDeep(e),_=f.keys(t),d=0,v=_.length;d<v;d++){for(n=_[d],o=n.split("."),i=e,C=f.initial(o),b=0,y=C.length;b<y;b++)s=C[b],i&&(i=i[s]);null!=i&&delete i[f.last(o)]}return e})},t.createUid=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=16*Math.random()|0,n="x"===e?t:3&t|8,n.toString(16)})},d=function(e,t){var n,r,a,i;for(a in e)if(null!=(i=e[a])&&i.$near){if(r=i.$near.$geometry,"Point"!==r.type)break;t=f.filter(t,function(e){return e[a]&&"Point"===e[a].type}),n=f.map(t,function(e){return{doc:e,distance:l(r.coordinates[1],r.coordinates[0],e[a].coordinates[1],e[a].coordinates[0])}}),n=f.filter(n,function(e){return e.distance>=0}),n=f.sortBy(n,"distance"),i.$near.$maxDistance&&(n=f.filter(n,function(e){return e.distance<=i.$near.$maxDistance})),t=f.pluck(n,"doc")}return t},c=function(e,t){if(!f.isEqual(f.first(t.coordinates[0]),f.last(t.coordinates[0])))throw new Error("First must equal last");return!(e.coordinates[0]<Math.min.apply(this,f.map(t.coordinates[0],function(e){return e[0]})))&&(!(e.coordinates[1]<Math.min.apply(this,f.map(t.coordinates[0],function(e){return e[1]})))&&(!(e.coordinates[0]>Math.max.apply(this,f.map(t.coordinates[0],function(e){return e[0]})))&&!(e.coordinates[1]>Math.max.apply(this,f.map(t.coordinates[0],function(e){return e[1]})))))},l=function(e,t,n,r){var a,i,o,l,u;return a=6370986,l=s(n-e),u=s(r-t),i=Math.sin(l/2)*Math.sin(l/2)+Math.cos(s(e))*Math.cos(s(n))*Math.sin(u/2)*Math.sin(u/2),o=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),a*o},s=function(e){return e*(Math.PI/180)},p=function(e,t){var n,r,a;for(r in e)if(null!=(a=e[r])&&a.$geoIntersects){if(n=a.$geoIntersects.$geometry,"Polygon"!==n.type)break;t=f.filter(t,function(e){return!(!e[r]||"Point"!==e[r].type)&&c(e[r],n)})}return t},t.regularizeUpsert=function(e,n,r,a){var i,o,s,l,u;for(f.isFunction(n)&&(u=[void 0,n,r],n=u[0],r=u[1],a=u[2]),f.isArray(e)?n=n||[]:(e=[e],n=[n]),o=f.map(e,function(e,t){return{doc:e,base:t<n.length?n[t]:void 0}}),s=0,l=o.length;s<l;s++){if(i=o[s],i.doc._id||(i.doc._id=t.createUid()),i.base&&!i.base._id)throw new Error("Base needs _id");if(i.base&&i.base._id!==i.doc._id)throw new Error("Base needs same _id")}return[o,r,a]}},function(e,t,n){"use strict";function r(e){if(h){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)m(t,n[r],null);else null!=e.html?p(t,e.html):null!=e.text&&f(t,e.text)}}function a(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function i(e,t){h?e.children.push(t):e.node.appendChild(t.node)}function o(e,t){h?e.html=t:p(e.node,t)}function s(e,t){h?e.text=t:f(e.node,t)}function l(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:l}}var c=n(104),p=n(80),d=n(112),f=n(161),h="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),m=d(function(e,t,n){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});u.insertTreeBefore=m,u.replaceChildWithTree=a,u.queueChild=i,u.queueHTML=o,u.queueText=s,e.exports=u},function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var a=n(7),i=(n(5),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=i,n=e.Properties||{},o=e.DOMAttributeNamespaces||{},l=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var p in n){s.properties.hasOwnProperty(p)&&a("48",p);var d=p.toLowerCase(),f=n[p],h={attributeName:d,attributeNamespace:null,propertyName:p,mutationMethod:null,mustUseProperty:r(f,t.MUST_USE_PROPERTY),hasBooleanValue:r(f,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(f,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(f,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(f,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1||a("50",p),l.hasOwnProperty(p)){var m=l[p];h.attributeName=m}o.hasOwnProperty(p)&&(h.attributeNamespace=o[p]),u.hasOwnProperty(p)&&(h.propertyName=u[p]),c.hasOwnProperty(p)&&(h.mutationMethod=c[p]),s.properties[p]=h}}}),o=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:o,ATTRIBUTE_NAME_CHAR:o+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){if((0,s._isCustomAttributeFunctions[t])(e))return!0}return!1},injection:i};e.exports=s},function(e,t,n){"use strict";function r(){a.attachRefs(this,this._currentElement)}var a=n(279),i=(n(21),n(6),{mountComponent:function(e,t,n,a,i,o){var s=e.mountComponent(t,n,a,i,o);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){a.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,i){var o=e._currentElement;if(t!==o||i!==e._context){var s=a.shouldUpdateRefs(o,t);s&&a.detachRefs(e,o),e.receiveComponent(t,n,i),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=i},function(e,t,n){"use strict";var r=n(8),a=n(164),i=n(313),o=n(314),s=n(47),l=n(315),u=n(316),c=n(317),p=n(321),d=s.createElement,f=s.createFactory,h=s.cloneElement,m=r,g=function(e){return e},v={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:p},Component:a.Component,PureComponent:a.PureComponent,createElement:d,cloneElement:h,isValidElement:s.isValidElement,PropTypes:l,createClass:c,createFactory:f,createMixin:g,DOM:o,version:u,__spread:m};e.exports=v},function(e,t,n){"use strict";function r(e){return void 0!==e.ref}function a(e){return void 0!==e.key}var i=n(8),o=n(31),s=(n(6),n(168),Object.prototype.hasOwnProperty),l=n(166),u={key:!0,ref:!0,__self:!0,__source:!0},c=function(e,t,n,r,a,i,o){var s={$$typeof:l,type:e,key:t,ref:n,props:o,_owner:i};return s};c.createElement=function(e,t,n){var i,l={},p=null,d=null;if(null!=t){r(t)&&(d=t.ref),a(t)&&(p=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source;for(i in t)s.call(t,i)&&!u.hasOwnProperty(i)&&(l[i]=t[i])}var f=arguments.length-2;if(1===f)l.children=n;else if(f>1){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];l.children=h}if(e&&e.defaultProps){var g=e.defaultProps;for(i in g)void 0===l[i]&&(l[i]=g[i])}return c(e,p,d,0,0,o.current,l)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){return c(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},c.cloneElement=function(e,t,n){var l,p=i({},e.props),d=e.key,f=e.ref,h=(e._self,e._source,e._owner);if(null!=t){r(t)&&(f=t.ref,h=o.current),a(t)&&(d=""+t.key);var m;e.type&&e.type.defaultProps&&(m=e.type.defaultProps);for(l in t)s.call(t,l)&&!u.hasOwnProperty(l)&&(void 0===t[l]&&void 0!==m?p[l]=m[l]:p[l]=t[l])}var g=arguments.length-2;if(1===g)p.children=n;else if(g>1){for(var v=Array(g),y=0;y<g;y++)v[y]=arguments[y+2];p.children=v}return c(e.type,d,f,0,0,h,p)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===l},e.exports=c},,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={sizeClass:"grid__col-3"},d={children:u.a.node,sizeClass:u.a.string},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"componentWillMount",value:function(){document.querySelector("body").style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.querySelector("body").style.overflow="initial"}},{key:"render",value:function(){return s.a.createElement("div",{className:"modal__overlay"},s.a.createElement("div",{className:"modal__inner "+this.props.sizeClass},this.props.children))}}]),t}(o.Component);t.a=f,f.propTypes=d,f.defaultProps=p},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(54),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){a(this,e)}return o(e,null,[{key:"get",value:function(e){return i.a.get("/zebedee/collectionDetails/"+e)}},{key:"getAll",value:function(){return i.a.get("/zebedee/collections").then(function(e){return e})}},{key:"create",value:function(e){return i.a.post("/zebedee/collection",e).then(function(e){return e})}},{key:"approve",value:function(e){return i.a.post("/zebedee/approve/"+e)}},{key:"delete",value:function(e){return i.a.delete("/zebedee/collection/"+e)}},{key:"update",value:function(e,t){return t.id=e,i.a.put("/zebedee/collection/"+e,t)}},{key:"deletePageIncludingDatasetImport",value:function(e,t){return i.a.delete("/zebedee/page/"+e+"?uri="+t)}},{key:"deletePage",value:function(e,t){return i.a.delete("/zebedee/content/"+e+"?uri="+t)}},{key:"cancelDelete",value:function(e,t){return i.a.delete("/zebedee/DeleteContent/"+e+"?uri="+t)}},{key:"addDataset",value:function(e,t){var n={state:"InProgress"};return i.a.put("/zebedee/collections/"+e+"/datasets/"+t,n,!0).then(function(e){return e})}},{key:"setDatasetStatusToComplete",value:function(e,t){var n={state:"Complete"};return i.a.put("/zebedee/collections/"+e+"/datasets/"+t,n,!0).then(function(e){return e})}},{key:"setDatasetStatusToReviewed",value:function(e,t){var n={state:"Reviewed"};return i.a.put("/zebedee/collections/"+e+"/datasets/"+t,n,!0).then(function(e){return e})}},{key:"removeDataset",value:function(e,t){console.log("/zebedee/collections/"+e+"/datasets/"+t)}},{key:"addDatasetVersion",value:function(e,t,n,r){var a={state:"InProgress"};return i.a.put("/zebedee/collections/"+e+"/datasets/"+t+"/editions/"+n+"/versions/"+r,a,!0).then(function(e){return e})}},{key:"setDatasetVersionStatusToComplete",value:function(e,t,n,r){var a={state:"Complete"};return i.a.put("/zebedee/collections/"+e+"/datasets/"+t+"/editions/"+n+"/versions/"+r,a,!0)}},{key:"setDatasetVersionStatusToReviewed",value:function(e,t,n,r){var a={state:"Reviewed"};return i.a.put("/zebedee/collections/"+e+"/datasets/"+t+"/editions/"+n+"/versions/"+r,a,!0)}},{key:"removeDatasetVersion",value:function(e,t,n,r){console.log("/zebedee/collections/"+e+"/datasets/"+t+"/editions/"+n+"/versions/"+r)}},{key:"checkContentIsInCollection",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.get("/zebedee/checkcollectionsforuri?uri="+t));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getInProgressContent",value:function(e){return i.a.get("/zebedee/collectionDetails/"+e).then(function(e){return e.inProgress})}}]),e}();t.a=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(54),i=n(171),o=n(22),s=n(89),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return l(e,null,[{key:"get",value:function(e){return a.a.get("/zebedee/users?email="+e)}},{key:"getAll",value:function(){return a.a.get("/zebedee/users")}},{key:"create",value:function(e){return a.a.post("/zebedee/users",e)}},{key:"remove",value:function(e){return a.a.delete('/zebedee/users?email=" + '+e)}},{key:"setPassword",value:function(e){return a.a.post("/zebedee/password",e)}},{key:"setPermissions",value:function(e){return a.a.post("/zebedee/permission",e)}},{key:"getPermissions",value:function(e){return a.a.get("/zebedee/permission?email="+e,!0,!0)}},{key:"getOldUserType",value:function(e){return e.admin?"PUBLISHING_SUPPORT":e.editor&&!e.dataVisPublisher?"PUBLISHING_SUPPORT":e.editor&&e.dataVisPublisher?"DATA_VISUALISATION":e.admin||e.editor||e.dataVisPublisher?void 0:"VIEWER"}},{key:"getUserRole",value:function(e,t){var n="";return t&&(n="EDITOR"),e&&(n="ADMIN"),t||e||(n="VIEWER"),n}},{key:"setUserState",value:function(e){var t=e.email,r=this.getUserRole(e.admin,e.editor),a=!!e.admin;i.a.dispatch(n.i(o.e)(t,r,a)),localStorage.setItem("loggedInAs",t),localStorage.setItem("userType",this.getOldUserType(e))}},{key:"logOut",value:function(){if(!s.a.remove("access_token"))return void console.warn("Error trying to remove 'access_token' cookie");s.a.get("collection")&&s.a.remove("collection"),localStorage.removeItem("loggedInAs"),localStorage.removeItem("userType"),i.a.dispatch(n.i(o.f)()),i.a.dispatch(n.i(o.reset)())}},{key:"updatePassword",value:function(e){return a.a.post("/zebedee/password",e,void 0,!0)}}]),e}();t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(670),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"delete",value:function(e,t,r){return n.i(a.a)("DELETE",e,t,void 0,void 0,r)}},{key:"get",value:function(e,t,r){return n.i(a.a)("GET",e,t,void 0,void 0,r)}},{key:"post",value:function(e,t,r,i){return n.i(a.a)("POST",e,r,void 0,t,i)}},{key:"put",value:function(e,t,r,i){return n.i(a.a)("PUT",e,r,void 0,t,i)}},{key:"head",value:function(e,t,r){return n.i(a.a)("HEAD",e,r,t)}}]),e}();t.a=o},,,,function(e,t,n){(function(e,r){var a;(function(){function i(e,t){if(e!==t){var n=null===e,r=e===O,a=e===e,i=null===t,o=t===O,s=t===t;if(e>t&&!i||!a||n&&!o&&s||r&&s)return 1;if(e<t&&!n||!s||i&&!r&&a||o&&a)return-1}return 0}function o(e,t,n){for(var r=e.length,a=n?r:-1;n?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function s(e,t,n){if(t!==t)return y(e,n);for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}function l(e){return"function"==typeof e||!1}function u(e){return null==e?"":e+""}function c(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function p(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function d(e,t){return i(e.criteria,t.criteria)||e.index-t.index}function f(e,t,n){for(var r=-1,a=e.criteria,o=t.criteria,s=a.length,l=n.length;++r<s;){var u=i(a[r],o[r]);if(u){if(r>=l)return u;var c=n[r];return u*("asc"===c||!0===c?1:-1)}}return e.index-t.index}function h(e){return Ve[e]}function m(e){return We[e]}function g(e,t,n){return t?e=Je[e]:n&&(e=$e[e]),"\\"+e}function v(e){return"\\"+$e[e]}function y(e,t,n){for(var r=e.length,a=t+(n?0:-1);n?a--:++a<r;){var i=e[a];if(i!==i)return a}return-1}function b(e){return!!e&&"object"==typeof e}function w(e){return e<=160&&e>=9&&e<=13||32==e||160==e||5760==e||6158==e||e>=8192&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function E(e,t){for(var n=-1,r=e.length,a=-1,i=[];++n<r;)e[n]===t&&(e[n]=Y,i[++a]=n);return i}function _(e,t){for(var n,r=-1,a=e.length,i=-1,o=[];++r<a;){var s=e[r],l=t?t(s,r,e):s;r&&n===l||(n=l,o[++i]=s)}return o}function C(e){for(var t=-1,n=e.length;++t<n&&w(e.charCodeAt(t)););return t}function k(e){for(var t=e.length;t--&&w(e.charCodeAt(t)););return t}function S(e){return ze[e]}function D(e){function t(e){if(b(e)&&!Rs(e)&&!(e instanceof a)){if(e instanceof r)return e;if(eo.call(e,"__chain__")&&eo.call(e,"__wrapped__"))return fr(e)}return new r(e)}function n(){}function r(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function a(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=To,this.__views__=[]}function w(){var e=new a(this.__wrapped__);return e.__actions__=nt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nt(this.__views__),e}function Ve(){if(this.__filtered__){var e=new a(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function We(){var e=this.__wrapped__.value(),t=this.__dir__,n=Rs(e),r=t<0,a=n?e.length:0,i=Yn(0,a,this.__views__),o=i.start,s=i.end,l=s-o,u=r?s:o-1,c=this.__iteratees__,p=c.length,d=0,f=Co(l,this.__takeCount__);if(!n||a<H||a==l&&f==l)return nn(r&&n?e.reverse():e,this.__actions__);var h=[];e:for(;l--&&d<f;){u+=t;for(var m=-1,g=e[u];++m<p;){var v=c[m],y=v.iteratee,b=v.type,w=y(g);if(b==W)g=w;else if(!w){if(b==V)continue e;break e}}h[d++]=g}return h}function ze(){this.__data__={}}function Ye(e){return this.has(e)&&delete this.__data__[e]}function Je(e){return"__proto__"==e?O:this.__data__[e]}function $e(e){return"__proto__"!=e&&eo.call(this.__data__,e)}function Xe(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Ke(e){var t=e?e.length:0;for(this.data={hash:vo(null),set:new co};t--;)this.push(e[t])}function Ge(e,t){var n=e.data;return("string"==typeof t||Aa(t)?n.set.has(t):n.hash[t])?0:-1}function Qe(e){var t=this.data;"string"==typeof e||Aa(e)?t.set.add(e):t.hash[e]=!0}function Ze(e,t){for(var n=-1,r=e.length,a=-1,i=t.length,o=qi(r+i);++n<r;)o[n]=e[n];for(;++a<i;)o[n++]=t[a];return o}function nt(e,t){var n=-1,r=e.length;for(t||(t=qi(r));++n<r;)t[n]=e[n];return t}function rt(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e}function it(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ot(e,t,n,r){for(var a=-1,i=e.length,o=r,s=o;++a<i;){var l=e[a],u=+t(l);n(u,o)&&(o=u,s=l)}return s}function st(e,t){for(var n=-1,r=e.length,a=-1,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[++a]=o)}return i}function lt(e,t){for(var n=-1,r=e.length,a=qi(r);++n<r;)a[n]=t(e[n],n,e);return a}function ut(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function ct(e,t,n,r){var a=-1,i=e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function pt(e,t,n,r){var a=e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function dt(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ft(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}function ht(e,t){return e===O?t:e}function mt(e,t,n,r){return e!==O&&eo.call(r,n)?e:t}function gt(e,t,n){for(var r=-1,a=qs(t),i=a.length;++r<i;){var o=a[r],s=e[o],l=n(s,t[o],o,e,t);(l===l?l===s:s!==s)&&(s!==O||o in e)||(e[o]=l)}return e}function vt(e,t){return null==t?e:bt(t,qs(t),e)}function yt(e,t){for(var n=-1,r=null==e,a=!r&&Gn(e),i=a?e.length:0,o=t.length,s=qi(o);++n<o;){var l=t[n];s[n]=a?Qn(l,i)?e[l]:O:r?O:e[l]}return s}function bt(e,t,n){n||(n={});for(var r=-1,a=t.length;++r<a;){var i=t[r];n[i]=e[i]}return n}function wt(e,t,n){var r=typeof e;return"function"==r?t===O?e:on(e,t,n):null==e?Oi:"object"==r?Ft(e):t===O?Ii(e):qt(e,t)}function Et(e,t,n,r,a,i,o){var s;if(n&&(s=a?n(e,r,a):n(e)),s!==O)return s;if(!Aa(e))return e;var l=Rs(e);if(l){if(s=Jn(e),!t)return nt(e,s)}else{var u=no.call(e),c=u==Q;if(u!=ee&&u!=J&&(!c||a))return He[u]?Xn(e,u,t):a?e:{};if(s=$n(c?{}:e),!t)return vt(s,e)}i||(i=[]),o||(o=[]);for(var p=i.length;p--;)if(i[p]==e)return o[p];return i.push(e),o.push(s),(l?rt:xt)(e,function(r,a){s[a]=Et(r,t,n,a,e,i,o)}),s}function _t(e,t,n){if("function"!=typeof e)throw new Xi(z);return po(function(){e.apply(O,n)},t)}function Ct(e,t){var n=e?e.length:0,r=[];if(!n)return r;var a=-1,i=Vn(),o=i==s,l=o&&t.length>=H?mn(t):null,u=t.length;l&&(i=Ge,o=!1,t=l);e:for(;++a<n;){var c=e[a];if(o&&c===c){for(var p=u;p--;)if(t[p]===c)continue e;r.push(c)}else i(t,c,0)<0&&r.push(c)}return r}function kt(e,t){var n=!0;return Mo(e,function(e,r,a){return n=!!t(e,r,a)}),n}function St(e,t,n,r){var a=r,i=a;return Mo(e,function(e,o,s){var l=+t(e,o,s);(n(l,a)||l===r&&l===i)&&(a=l,i=e)}),i}function Dt(e,t,n,r){var a=e.length;for(n=null==n?0:+n||0,n<0&&(n=-n>a?0:a+n),r=r===O||r>a?a:+r||0,r<0&&(r+=a),a=n>r?0:r>>>0,n>>>=0;n<a;)e[n++]=t;return e}function Ot(e,t){var n=[];return Mo(e,function(e,r,a){t(e,r,a)&&n.push(e)}),n}function Tt(e,t,n,r){var a;return n(e,function(e,n,i){if(t(e,n,i))return a=r?n:e,!1}),a}function Rt(e,t,n,r){r||(r=[]);for(var a=-1,i=e.length;++a<i;){var o=e[a];b(o)&&Gn(o)&&(n||Rs(o)||Sa(o))?t?Rt(o,t,n,r):ut(r,o):n||(r[r.length]=o)}return r}function Pt(e,t){return Uo(e,t,ei)}function xt(e,t){return Uo(e,t,qs)}function Nt(e,t){return Fo(e,t,qs)}function It(e,t){for(var n=-1,r=t.length,a=-1,i=[];++n<r;){var o=t[n];Ia(e[o])&&(i[++a]=o)}return i}function At(e,t,n){if(null!=e){n!==O&&n in pr(e)&&(t=[n]);for(var r=0,a=t.length;null!=e&&r<a;)e=e[t[r++]];return r&&r==a?e:O}}function jt(e,t,n,r,a,i){return e===t||(null==e||null==t||!Aa(e)&&!b(t)?e!==e&&t!==t:Mt(e,t,jt,n,r,a,i))}function Mt(e,t,n,r,a,i,o){var s=Rs(e),l=Rs(t),u=$,c=$;s||(u=no.call(e),u==J?u=ee:u!=ee&&(s=Va(e))),l||(c=no.call(t),c==J?c=ee:c!=ee&&(l=Va(t)));var p=u==ee,d=c==ee,f=u==c;if(f&&!s&&!p)return Fn(e,t,u);if(!a){var h=p&&eo.call(e,"__wrapped__"),m=d&&eo.call(t,"__wrapped__");if(h||m)return n(h?e.value():e,m?t.value():t,r,a,i,o)}if(!f)return!1;i||(i=[]),o||(o=[]);for(var g=i.length;g--;)if(i[g]==e)return o[g]==t;i.push(e),o.push(t);var v=(s?Un:qn)(e,t,n,r,a,i,o);return i.pop(),o.pop(),v}function Lt(e,t,n){var r=t.length,a=r,i=!n;if(null==e)return!a;for(e=pr(e);r--;){var o=t[r];if(i&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++r<a;){o=t[r];var s=o[0],l=e[s],u=o[1];if(i&&o[2]){if(l===O&&!(s in e))return!1}else{var c=n?n(l,u,s):O;if(!(c===O?jt(u,l,n,!0):c))return!1}}return!0}function Ut(e,t){var n=-1,r=Gn(e)?qi(e.length):[];return Mo(e,function(e,a,i){r[++n]=t(e,a,i)}),r}function Ft(e){var t=Wn(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&(e[n]===r&&(r!==O||n in pr(e)))}}return function(e){return Lt(e,t)}}function qt(e,t){var n=Rs(e),r=er(e)&&rr(t),a=e+"";return e=dr(e),function(i){if(null==i)return!1;var o=a;if(i=pr(i),(n||!r)&&!(o in i)){if(null==(i=1==e.length?i:At(i,$t(e,0,-1))))return!1;o=Dr(e),i=pr(i)}return i[o]===t?t!==O||o in i:jt(t,i[o],O,!0)}}function Bt(e,t,n,r,a){if(!Aa(e))return e;var i=Gn(t)&&(Rs(t)||Va(t)),o=i?O:qs(t);return rt(o||t,function(s,l){if(o&&(l=s,s=t[l]),b(s))r||(r=[]),a||(a=[]),Ht(e,t,l,Bt,n,r,a);else{var u=e[l],c=n?n(u,s,l,e,t):O,p=c===O;p&&(c=s),c===O&&(!i||l in e)||!p&&(c===c?c===u:u!==u)||(e[l]=c)}}),e}function Ht(e,t,n,r,a,i,o){for(var s=i.length,l=t[n];s--;)if(i[s]==l)return void(e[n]=o[s]);var u=e[n],c=a?a(u,l,n,e,t):O,p=c===O;p&&(c=l,Gn(l)&&(Rs(l)||Va(l))?c=Rs(u)?u:Gn(u)?nt(u):[]:qa(l)||Sa(l)?c=Sa(u)?$a(u):qa(u)?u:{}:p=!1),i.push(l),o.push(c),p?e[n]=r(c,l,a,i,o):(c===c?c!==u:u===u)&&(e[n]=c)}function Vt(e){return function(t){return null==t?O:t[e]}}function Wt(e){var t=e+"";return e=dr(e),function(n){return At(n,e,t)}}function zt(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=a&&Qn(r)){var a=r;fo.call(e,r,1)}}return e}function Yt(e,t){return e+yo(Do()*(t-e+1))}function Jt(e,t,n,r,a){return a(e,function(e,a,i){n=r?(r=!1,e):t(n,e,a,i)}),n}function $t(e,t,n){var r=-1,a=e.length;t=null==t?0:+t||0,t<0&&(t=-t>a?0:a+t),n=n===O||n>a?a:+n||0,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=qi(a);++r<a;)i[r]=e[r+t];return i}function Xt(e,t){var n;return Mo(e,function(e,r,a){return!(n=t(e,r,a))}),!!n}function Kt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Gt(e,t,n){var r=Bn(),a=-1;return t=lt(t,function(e){return r(e)}),Kt(Ut(e,function(e){return{criteria:lt(t,function(t){return t(e)}),index:++a,value:e}}),function(e,t){return f(e,t,n)})}function Qt(e,t){var n=0;return Mo(e,function(e,r,a){n+=+t(e,r,a)||0}),n}function Zt(e,t){var n=-1,r=Vn(),a=e.length,i=r==s,o=i&&a>=H,l=o?mn():null,u=[];l?(r=Ge,i=!1):(o=!1,l=t?[]:u);e:for(;++n<a;){var c=e[n],p=t?t(c,n,e):c;if(i&&c===c){for(var d=l.length;d--;)if(l[d]===p)continue e;t&&l.push(p),u.push(c)}else r(l,p,0)<0&&((t||o)&&l.push(p),u.push(c))}return u}function en(e,t){for(var n=-1,r=t.length,a=qi(r);++n<r;)a[n]=e[t[n]];return a}function tn(e,t,n,r){for(var a=e.length,i=r?a:-1;(r?i--:++i<a)&&t(e[i],i,e););return n?$t(e,r?0:i,r?i+1:a):$t(e,r?i+1:0,r?a:i)}function nn(e,t){var n=e;n instanceof a&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=t[r];n=o.func.apply(o.thisArg,ut([n],o.args))}return n}function rn(e,t,n){var r=0,a=e?e.length:r;if("number"==typeof t&&t===t&&a<=xo){for(;r<a;){var i=r+a>>>1,o=e[i];(n?o<=t:o<t)&&null!==o?r=i+1:a=i}return a}return an(e,t,Oi,n)}function an(e,t,n,r){t=n(t);for(var a=0,i=e?e.length:0,o=t!==t,s=null===t,l=t===O;a<i;){var u=yo((a+i)/2),c=n(e[u]),p=c!==O,d=c===c;if(o)var f=d||r;else f=s?d&&p&&(r||null!=c):l?d&&(r||p):null!=c&&(r?c<=t:c<t);f?a=u+1:i=u}return Co(i,Po)}function on(e,t,n){if("function"!=typeof e)return Oi;if(t===O)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,i){return e.call(t,n,r,a,i)};case 5:return function(n,r,a,i,o){return e.call(t,n,r,a,i,o)}}return function(){return e.apply(t,arguments)}}function sn(e){var t=new io(e.byteLength);return new ho(t).set(new ho(e)),t}function ln(e,t,n){for(var r=n.length,a=-1,i=_o(e.length-r,0),o=-1,s=t.length,l=qi(s+i);++o<s;)l[o]=t[o];for(;++a<r;)l[n[a]]=e[a];for(;i--;)l[o++]=e[a++];return l}function un(e,t,n){for(var r=-1,a=n.length,i=-1,o=_o(e.length-a,0),s=-1,l=t.length,u=qi(o+l);++i<o;)u[i]=e[i];for(var c=i;++s<l;)u[c+s]=t[s];for(;++r<a;)u[c+n[r]]=e[i++];return u}function cn(e,t){return function(n,r,a){var i=t?t():{};if(r=Bn(r,a,3),Rs(n))for(var o=-1,s=n.length;++o<s;){var l=n[o];e(i,l,r(l,o,n),n)}else Mo(n,function(t,n,a){e(i,t,r(t,n,a),a)});return i}}function pn(e){return va(function(t,n){var r=-1,a=null==t?0:n.length,i=a>2?n[a-2]:O,o=a>2?n[2]:O,s=a>1?n[a-1]:O;for("function"==typeof i?(i=on(i,s,5),a-=2):(i="function"==typeof s?s:O,a-=i?1:0),o&&Zn(n[0],n[1],o)&&(i=a<3?O:i,a=1);++r<a;){var l=n[r];l&&e(t,l,i)}return t})}function dn(e,t){return function(n,r){var a=n?Ho(n):0;if(!nr(a))return e(n,r);for(var i=t?a:-1,o=pr(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}function fn(e){return function(t,n,r){for(var a=pr(t),i=r(t),o=i.length,s=e?o:-1;e?s--:++s<o;){var l=i[s];if(!1===n(a[l],l,a))break}return t}}function hn(e,t){function n(){return(this&&this!==et&&this instanceof n?r:e).apply(t,arguments)}var r=vn(e);return n}function mn(e){return vo&&co?new Ke(e):null}function gn(e){return function(t){for(var n=-1,r=ki(ci(t)),a=r.length,i="";++n<a;)i=e(i,r[n],n);return i}}function vn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=jo(e.prototype),r=e.apply(n,t);return Aa(r)?r:n}}function yn(e){function t(n,r,a){a&&Zn(n,r,a)&&(r=O);var i=Ln(n,e,O,O,O,O,O,r);return i.placeholder=t.placeholder,i}return t}function bn(e,t){return va(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(O,n))})}function wn(e,t){return function(n,r,a){if(a&&Zn(n,r,a)&&(r=O),r=Bn(r,a,3),1==r.length){n=Rs(n)?n:cr(n);var i=ot(n,r,e,t);if(!n.length||i!==t)return i}return St(n,r,e,t)}}function En(e,t){return function(n,r,a){if(r=Bn(r,a,3),Rs(n)){var i=o(n,r,t);return i>-1?n[i]:O}return Tt(n,r,e)}}function _n(e){return function(t,n,r){return t&&t.length?(n=Bn(n,r,3),o(t,n,e)):-1}}function Cn(e){return function(t,n,r){return n=Bn(n,r,3),Tt(t,n,e,!0)}}function kn(e){return function(){for(var t,n=arguments.length,a=e?n:-1,i=0,o=qi(n);e?a--:++a<n;){var s=o[i++]=arguments[a];if("function"!=typeof s)throw new Xi(z);!t&&r.prototype.thru&&"wrapper"==Hn(s)&&(t=new r([],!0))}for(a=t?-1:n;++a<n;){s=o[a];var l=Hn(s),u="wrapper"==l?Bo(s):O;t=u&&tr(u[0])&&u[1]==(M|N|A|L)&&!u[4].length&&1==u[9]?t[Hn(u[0])].apply(t,u[3]):1==s.length&&tr(s)?t[l]():t.thru(s)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Rs(r)&&r.length>=H)return t.plant(r).value();for(var a=0,i=n?o[a].apply(this,e):r;++a<n;)i=o[a].call(this,i);return i}}}function Sn(e,t){return function(n,r,a){return"function"==typeof r&&a===O&&Rs(n)?e(n,r):t(n,on(r,a,3))}}function Dn(e){return function(t,n,r){return"function"==typeof n&&r===O||(n=on(n,r,3)),e(t,n,ei)}}function On(e){return function(t,n,r){return"function"==typeof n&&r===O||(n=on(n,r,3)),e(t,n)}}function Tn(e){return function(t,n,r){var a={};return n=Bn(n,r,3),xt(t,function(t,r,i){var o=n(t,r,i);r=e?o:r,t=e?t:o,a[r]=t}),a}}function Rn(e){return function(t,n,r){return t=u(t),(e?t:"")+In(t,n,r)+(e?"":t)}}function Pn(e){var t=va(function(n,r){var a=E(r,t.placeholder);return Ln(n,e,O,r,a)});return t}function xn(e,t){return function(n,r,a,i){var o=arguments.length<3;return"function"==typeof r&&i===O&&Rs(n)?e(n,r,a,o):Jt(n,Bn(r,i,4),a,o,t)}}function Nn(e,t,n,r,a,i,o,s,l,u){function c(){for(var y=arguments.length,b=y,w=qi(y);b--;)w[b]=arguments[b];if(r&&(w=ln(w,r,a)),i&&(w=un(w,i,o)),h||g){var _=c.placeholder,C=E(w,_);if((y-=C.length)<u){var k=s?nt(s):O,S=_o(u-y,0),D=h?C:O,T=h?O:C,x=h?w:O,N=h?O:w;t|=h?A:j,t&=~(h?j:A),m||(t&=~(R|P));var I=[e,t,n,x,D,N,T,k,l,S],M=Nn.apply(O,I);return tr(e)&&Vo(M,I),M.placeholder=_,M}}var L=d?n:this,U=f?L[e]:e;return s&&(w=lr(w,s)),p&&l<w.length&&(w.length=l),this&&this!==et&&this instanceof c&&(U=v||vn(e)),U.apply(L,w)}var p=t&M,d=t&R,f=t&P,h=t&N,m=t&x,g=t&I,v=f?O:vn(e);return c}function In(e,t,n){var r=e.length;if(t=+t,r>=t||!wo(t))return"";var a=t-r;return n=null==n?" ":n+"",gi(n,go(a/n.length)).slice(0,a)}function An(e,t,n,r){function a(){for(var t=-1,s=arguments.length,l=-1,u=r.length,c=qi(u+s);++l<u;)c[l]=r[l];for(;s--;)c[l++]=arguments[++t];return(this&&this!==et&&this instanceof a?o:e).apply(i?n:this,c)}var i=t&R,o=vn(e);return a}function jn(e){var t=Wi[e];return function(e,n){return n=n===O?0:+n||0,n?(n=lo(10,n),t(e*n)/n):t(e)}}function Mn(e){return function(t,n,r,a){var i=Bn(r);return null==r&&i===wt?rn(t,n,e):an(t,n,i(r,a,1),e)}}function Ln(e,t,n,r,a,i,o,s){var l=t&P;if(!l&&"function"!=typeof e)throw new Xi(z);var u=r?r.length:0;if(u||(t&=~(A|j),r=a=O),u-=a?a.length:0,t&j){var c=r,p=a;r=a=O}var d=l?O:Bo(e),f=[e,t,n,r,a,c,p,i,o,s];if(d&&(ar(f,d),t=f[1],s=f[9]),f[9]=null==s?l?0:e.length:_o(s-u,0)||0,t==R)var h=hn(f[0],f[2]);else h=t!=A&&t!=(R|A)||f[4].length?Nn.apply(O,f):An.apply(O,f);return(d?qo:Vo)(h,f)}function Un(e,t,n,r,a,i,o){var s=-1,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;for(;++s<l;){var c=e[s],p=t[s],d=r?r(a?p:c,a?c:p,s):O;if(d!==O){if(d)continue;return!1}if(a){if(!dt(t,function(e){return c===e||n(c,e,r,a,i,o)}))return!1}else if(c!==p&&!n(c,p,r,a,i,o))return!1}return!0}function Fn(e,t,n){switch(n){case X:case K:return+e==+t;case G:return e.name==t.name&&e.message==t.message;case Z:return e!=+e?t!=+t:e==+t;case te:case ne:return e==t+""}return!1}function qn(e,t,n,r,a,i,o){var s=qs(e),l=s.length;if(l!=qs(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:eo.call(t,c)))return!1}for(var p=a;++u<l;){c=s[u];var d=e[c],f=t[c],h=r?r(a?f:d,a?d:f,c):O;if(!(h===O?n(d,f,r,a,i,o):h))return!1;p||(p="constructor"==c)}if(!p){var m=e.constructor,g=t.constructor;if(m!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g))return!1}return!0}function Bn(e,n,r){var a=t.callback||Si;return a=a===Si?wt:a,r?a(e,n,r):a}function Hn(e){for(var t=e.name,n=Ao[t],r=n?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==e)return a.name}return t}function Vn(e,n,r){var a=t.indexOf||kr;return a=a===kr?s:a,e?a(e,n,r):a}function Wn(e){for(var t=ti(e),n=t.length;n--;)t[n][2]=rr(t[n][1]);return t}function zn(e,t){var n=null==e?O:e[t];return La(n)?n:O}function Yn(e,t,n){for(var r=-1,a=n.length;++r<a;){var i=n[r],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Co(t,e+o);break;case"takeRight":e=_o(e,t-o)}}return{start:e,end:t}}function Jn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&eo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function $n(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Yi),new t}function Xn(e,t,n){var r=e.constructor;switch(t){case re:return sn(e);case X:case K:return new r(+e);case ae:case ie:case oe:case se:case le:case ue:case ce:case pe:case de:var a=e.buffer;return new r(n?sn(a):a,e.byteOffset,e.length);case Z:case ne:return new r(e);case te:var i=new r(e.source,xe.exec(e));i.lastIndex=e.lastIndex}return i}function Kn(e,t,n){null==e||er(t,e)||(t=dr(t),e=1==t.length?e:At(e,$t(t,0,-1)),t=Dr(t));var r=null==e?e:e[t];return null==r?O:r.apply(e,n)}function Gn(e){return null!=e&&nr(Ho(e))}function Qn(e,t){return e="number"==typeof e||Ae.test(e)?+e:-1,t=null==t?No:t,e>-1&&e%1==0&&e<t}function Zn(e,t,n){if(!Aa(n))return!1;var r=typeof t;if("number"==r?Gn(n)&&Qn(t,n.length):"string"==r&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}function er(e,t){var n=typeof e;return!!("string"==n&&ke.test(e)||"number"==n)||!Rs(e)&&(!Ce.test(e)||null!=t&&e in pr(t))}function tr(e){var n=Hn(e);if(!(n in a.prototype))return!1;var r=t[n];if(e===r)return!0;var i=Bo(r);return!!i&&e===i[0]}function nr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=No}function rr(e){return e===e&&!Aa(e)}function ar(e,t){var n=e[1],r=t[1],a=n|r,i=a<M,o=r==M&&n==N||r==M&&n==L&&e[7].length<=t[8]||r==(M|L)&&n==N;if(!i&&!o)return e;r&R&&(e[2]=t[2],a|=n&R?0:x);var s=t[3];if(s){var l=e[3];e[3]=l?ln(l,s,t[4]):nt(s),e[4]=l?E(e[3],Y):nt(t[4])}return s=t[5],s&&(l=e[5],e[5]=l?un(l,s,t[6]):nt(s),e[6]=l?E(e[5],Y):nt(t[6])),s=t[7],s&&(e[7]=nt(s)),r&M&&(e[8]=null==e[8]?t[8]:Co(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function ir(e,t){return e===O?t:Ps(e,t,ir)}function or(e,t){e=pr(e);for(var n=-1,r=t.length,a={};++n<r;){var i=t[n];i in e&&(a[i]=e[i])}return a}function sr(e,t){var n={};return Pt(e,function(e,r,a){t(e,r,a)&&(n[r]=e)}),n}function lr(e,t){for(var n=e.length,r=Co(t.length,n),a=nt(e);r--;){var i=t[r];e[r]=Qn(i,n)?a[i]:O}return e}function ur(e){for(var t=ei(e),n=t.length,r=n&&e.length,a=!!r&&nr(r)&&(Rs(e)||Sa(e)),i=-1,o=[];++i<n;){var s=t[i];(a&&Qn(s,r)||eo.call(e,s))&&o.push(s)}return o}function cr(e){return null==e?[]:Gn(e)?Aa(e)?e:Yi(e):ii(e)}function pr(e){return Aa(e)?e:Yi(e)}function dr(e){if(Rs(e))return e;var t=[];return u(e).replace(Se,function(e,n,r,a){t.push(r?a.replace(Re,"$1"):n||e)}),t}function fr(e){return e instanceof a?e.clone():new r(e.__wrapped__,e.__chain__,nt(e.__actions__))}function hr(e,t,n){t=(n?Zn(e,t,n):null==t)?1:_o(yo(t)||1,1);for(var r=0,a=e?e.length:0,i=-1,o=qi(go(a/t));r<a;)o[++i]=$t(e,r,r+=t);return o}function mr(e){for(var t=-1,n=e?e.length:0,r=-1,a=[];++t<n;){var i=e[t];i&&(a[++r]=i)}return a}function gr(e,t,n){return(e?e.length:0)?((n?Zn(e,t,n):null==t)&&(t=1),$t(e,t<0?0:t)):[]}function vr(e,t,n){var r=e?e.length:0;return r?((n?Zn(e,t,n):null==t)&&(t=1),t=r-(+t||0),$t(e,0,t<0?0:t)):[]}function yr(e,t,n){return e&&e.length?tn(e,Bn(t,n,3),!0,!0):[]}function br(e,t,n){return e&&e.length?tn(e,Bn(t,n,3),!0):[]}function wr(e,t,n,r){var a=e?e.length:0;return a?(n&&"number"!=typeof n&&Zn(e,t,n)&&(n=0,r=a),Dt(e,t,n,r)):[]}function Er(e){return e?e[0]:O}function _r(e,t,n){var r=e?e.length:0;return n&&Zn(e,t,n)&&(t=!1),r?Rt(e,t):[]}function Cr(e){return(e?e.length:0)?Rt(e,!0):[]}function kr(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?_o(r+n,0):n;else if(n){var a=rn(e,t);return a<r&&(t===t?t===e[a]:e[a]!==e[a])?a:-1}return s(e,t,n||0)}function Sr(e){return vr(e,1)}function Dr(e){var t=e?e.length:0;return t?e[t-1]:O}function Or(e,t,n){var r=e?e.length:0;if(!r)return-1;var a=r;if("number"==typeof n)a=(n<0?_o(r+n,0):Co(n||0,r-1))+1;else if(n){a=rn(e,t,!0)-1;var i=e[a];return(t===t?t===i:i!==i)?a:-1}if(t!==t)return y(e,a,!0);for(;a--;)if(e[a]===t)return a;return-1}function Tr(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Vn(),a=e.length;++n<a;)for(var i=0,o=e[n];(i=r(t,o,i))>-1;)fo.call(t,i,1);return t}function Rr(e,t,n){var r=[];if(!e||!e.length)return r;var a=-1,i=[],o=e.length;for(t=Bn(t,n,3);++a<o;){var s=e[a];t(s,a,e)&&(r.push(s),i.push(a))}return zt(e,i),r}function Pr(e){return gr(e,1)}function xr(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Zn(e,t,n)&&(t=0,n=r),$t(e,t,n)):[]}function Nr(e,t,n){return(e?e.length:0)?((n?Zn(e,t,n):null==t)&&(t=1),$t(e,0,t<0?0:t)):[]}function Ir(e,t,n){var r=e?e.length:0;return r?((n?Zn(e,t,n):null==t)&&(t=1),t=r-(+t||0),$t(e,t<0?0:t)):[]}function Ar(e,t,n){return e&&e.length?tn(e,Bn(t,n,3),!1,!0):[]}function jr(e,t,n){return e&&e.length?tn(e,Bn(t,n,3)):[]}function Mr(e,t,n,r){if(!(e?e.length:0))return[];null!=t&&"boolean"!=typeof t&&(r=n,n=Zn(e,t,r)?O:t,t=!1);var a=Bn();return null==n&&a===wt||(n=a(n,r,3)),t&&Vn()==s?_(e,n):Zt(e,n)}function Lr(e){if(!e||!e.length)return[];var t=-1,n=0;e=st(e,function(e){if(Gn(e))return n=_o(e.length,n),!0});for(var r=qi(n);++t<n;)r[t]=lt(e,Vt(t));return r}function Ur(e,t,n){if(!(e?e.length:0))return[];var r=Lr(e);return null==t?r:(t=on(t,n,4),lt(r,function(e){return ct(e,t,O,!0)}))}function Fr(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Gn(n))var r=r?ut(Ct(r,n),Ct(n,r)):n}return r?Zt(r):[]}function qr(e,t){var n=-1,r=e?e.length:0,a={};for(!r||t||Rs(e[0])||(t=[]);++n<r;){var i=e[n];t?a[i]=t[n]:i&&(a[i[0]]=i[1])}return a}function Br(e){var n=t(e);return n.__chain__=!0,n}function Hr(e,t,n){return t.call(n,e),e}function Vr(e,t,n){return t.call(n,e)}function Wr(){return Br(this)}function zr(){return new r(this.value(),this.__chain__)}function Yr(e){for(var t,r=this;r instanceof n;){var a=fr(r);t?i.__wrapped__=a:t=a;var i=a;r=r.__wrapped__}return i.__wrapped__=e,t}function Jr(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof a){var n=e;return this.__actions__.length&&(n=new a(this)),n=n.reverse(),n.__actions__.push({func:Vr,args:[t],thisArg:O}),new r(n,this.__chain__)}return this.thru(t)}function $r(){return this.value()+""}function Xr(){return nn(this.__wrapped__,this.__actions__)}function Kr(e,t,n){var r=Rs(e)?it:kt;return n&&Zn(e,t,n)&&(t=O),"function"==typeof t&&n===O||(t=Bn(t,n,3)),r(e,t)}function Gr(e,t,n){var r=Rs(e)?st:Ot;return t=Bn(t,n,3),r(e,t)}function Qr(e,t){return as(e,Ft(t))}function Zr(e,t,n,r){var a=e?Ho(e):0;return nr(a)||(e=ii(e),a=e.length),n="number"!=typeof n||r&&Zn(t,n,r)?0:n<0?_o(a+n,0):n||0,"string"==typeof e||!Rs(e)&&Ha(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&Vn(e,t,n)>-1}function ea(e,t,n){var r=Rs(e)?lt:Ut;return t=Bn(t,n,3),r(e,t)}function ta(e,t){return ea(e,Ii(t))}function na(e,t,n){var r=Rs(e)?st:Ot;return t=Bn(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function ra(e,t,n){if(n?Zn(e,t,n):null==t){e=cr(e);var r=e.length;return r>0?e[Yt(0,r-1)]:O}var a=-1,i=Ja(e),r=i.length,o=r-1;for(t=Co(t<0?0:+t||0,r);++a<t;){var s=Yt(a,o),l=i[s];i[s]=i[a],i[a]=l}return i.length=t,i}function aa(e){return ra(e,To)}function ia(e){var t=e?Ho(e):0;return nr(t)?t:qs(e).length}function oa(e,t,n){var r=Rs(e)?dt:Xt;return n&&Zn(e,t,n)&&(t=O),"function"==typeof t&&n===O||(t=Bn(t,n,3)),r(e,t)}function sa(e,t,n){if(null==e)return[];n&&Zn(e,t,n)&&(t=O);var r=-1;return t=Bn(t,n,3),Kt(Ut(e,function(e,n,a){return{criteria:t(e,n,a),index:++r,value:e}}),d)}function la(e,t,n,r){return null==e?[]:(r&&Zn(t,n,r)&&(n=O),Rs(t)||(t=null==t?[]:[t]),Rs(n)||(n=null==n?[]:[n]),Gt(e,t,n))}function ua(e,t){return Gr(e,Ft(t))}function ca(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Xi(z);var n=e;e=t,t=n}return e=wo(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}}function pa(e,t,n){return n&&Zn(e,t,n)&&(t=O),t=e&&null==t?e.length:_o(+t||0,0),Ln(e,M,O,O,O,O,t)}function da(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Xi(z);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=O),n}}function fa(e,t,n){function r(){f&&oo(f),u&&oo(u),m=0,u=f=h=O}function a(t,n){n&&oo(n),u=f=h=O,t&&(m=ms(),c=e.apply(d,l),f||u||(l=d=O))}function i(){var e=t-(ms()-p);e<=0||e>t?a(h,u):f=po(i,e)}function o(){a(v,f)}function s(){if(l=arguments,p=ms(),d=this,h=v&&(f||!y),!1===g)var n=y&&!f;else{u||y||(m=p);var r=g-(p-m),a=r<=0||r>g;a?(u&&(u=oo(u)),m=p,c=e.apply(d,l)):u||(u=po(o,r))}return a&&f?f=oo(f):f||t===g||(f=po(i,t)),n&&(a=!0,c=e.apply(d,l)),!a||f||u||(l=d=O),c}var l,u,c,p,d,f,h,m=0,g=!1,v=!0;if("function"!=typeof e)throw new Xi(z);if(t=t<0?0:+t||0,!0===n){var y=!0;v=!1}else Aa(n)&&(y=!!n.leading,g="maxWait"in n&&_o(+n.maxWait||0,t),v="trailing"in n?!!n.trailing:v);return s.cancel=r,s}function ha(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Xi(z);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o),o};return n.cache=new ha.Cache,n}function ma(e){if("function"!=typeof e)throw new Xi(z);return function(){return!e.apply(this,arguments)}}function ga(e){return da(2,e)}function va(e,t){if("function"!=typeof e)throw new Xi(z);return t=_o(t===O?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,a=_o(n.length-t,0),i=qi(a);++r<a;)i[r]=n[t+r];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,n[0],i);case 2:return e.call(this,n[0],n[1],i)}var o=qi(t+1);for(r=-1;++r<t;)o[r]=n[r];return o[t]=i,e.apply(this,o)}}function ya(e){if("function"!=typeof e)throw new Xi(z);return function(t){return e.apply(this,t)}}function ba(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new Xi(z);return!1===n?r=!1:Aa(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),fa(e,t,{leading:r,maxWait:+t,trailing:a})}function wa(e,t){return t=null==t?Oi:t,Ln(t,A,O,[e],[])}function Ea(e,t,n,r){return t&&"boolean"!=typeof t&&Zn(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?Et(e,t,on(n,r,1)):Et(e,t)}function _a(e,t,n){return"function"==typeof t?Et(e,!0,on(t,n,1)):Et(e,!0)}function Ca(e,t){return e>t}function ka(e,t){return e>=t}function Sa(e){return b(e)&&Gn(e)&&eo.call(e,"callee")&&!uo.call(e,"callee")}function Da(e){return!0===e||!1===e||b(e)&&no.call(e)==X}function Oa(e){return b(e)&&no.call(e)==K}function Ta(e){return!!e&&1===e.nodeType&&b(e)&&!qa(e)}function Ra(e){return null==e||(Gn(e)&&(Rs(e)||Ha(e)||Sa(e)||b(e)&&Ia(e.splice))?!e.length:!qs(e).length)}function Pa(e,t,n,r){n="function"==typeof n?on(n,r,3):O;var a=n?n(e,t):O;return a===O?jt(e,t,n):!!a}function xa(e){return b(e)&&"string"==typeof e.message&&no.call(e)==G}function Na(e){return"number"==typeof e&&wo(e)}function Ia(e){return Aa(e)&&no.call(e)==Q}function Aa(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ja(e,t,n,r){return n="function"==typeof n?on(n,r,3):O,Lt(e,Wn(t),n)}function Ma(e){return Fa(e)&&e!=+e}function La(e){return null!=e&&(Ia(e)?ao.test(Zi.call(e)):b(e)&&Ie.test(e))}function Ua(e){return null===e}function Fa(e){return"number"==typeof e||b(e)&&no.call(e)==Z}function qa(e){var t;if(!b(e)||no.call(e)!=ee||Sa(e)||!eo.call(e,"constructor")&&"function"==typeof(t=e.constructor)&&!(t instanceof t))return!1;var n;return Pt(e,function(e,t){n=t}),n===O||eo.call(e,n)}function Ba(e){return Aa(e)&&no.call(e)==te}function Ha(e){return"string"==typeof e||b(e)&&no.call(e)==ne}function Va(e){return b(e)&&nr(e.length)&&!!Be[no.call(e)]}function Wa(e){return e===O}function za(e,t){return e<t}function Ya(e,t){return e<=t}function Ja(e){var t=e?Ho(e):0;return nr(t)?t?nt(e):[]:ii(e)}function $a(e){return bt(e,ei(e))}function Xa(e,t,n){var r=jo(e);return n&&Zn(e,t,n)&&(t=O),t?vt(r,t):r}function Ka(e){return It(e,ei(e))}function Ga(e,t,n){var r=null==e?O:At(e,dr(t),t+"");return r===O?n:r}function Qa(e,t){if(null==e)return!1;var n=eo.call(e,t);if(!n&&!er(t)){if(t=dr(t),null==(e=1==t.length?e:At(e,$t(t,0,-1))))return!1;t=Dr(t),n=eo.call(e,t)}return n||nr(e.length)&&Qn(t,e.length)&&(Rs(e)||Sa(e))}function Za(e,t,n){n&&Zn(e,t,n)&&(t=O);for(var r=-1,a=qs(e),i=a.length,o={};++r<i;){var s=a[r],l=e[s];t?eo.call(o,l)?o[l].push(s):o[l]=[s]:o[l]=s}return o}function ei(e){if(null==e)return[];Aa(e)||(e=Yi(e));var t=e.length;t=t&&nr(t)&&(Rs(e)||Sa(e))&&t||0;for(var n=e.constructor,r=-1,a="function"==typeof n&&n.prototype===e,i=qi(t),o=t>0;++r<t;)i[r]=r+"";for(var s in e)o&&Qn(s,t)||"constructor"==s&&(a||!eo.call(e,s))||i.push(s);return i}function ti(e){e=pr(e);for(var t=-1,n=qs(e),r=n.length,a=qi(r);++t<r;){var i=n[t];a[t]=[i,e[i]]}return a}function ni(e,t,n){var r=null==e?O:e[t];return r===O&&(null==e||er(t,e)||(t=dr(t),e=1==t.length?e:At(e,$t(t,0,-1)),r=null==e?O:e[Dr(t)]),r=r===O?n:r),Ia(r)?r.call(e):r}function ri(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||er(t,e)?[r]:dr(t);for(var a=-1,i=t.length,o=i-1,s=e;null!=s&&++a<i;){var l=t[a];Aa(s)&&(a==o?s[l]=n:null==s[l]&&(s[l]=Qn(t[a+1])?[]:{})),s=s[l]}return e}function ai(e,t,n,r){var a=Rs(e)||Va(e);if(t=Bn(t,r,4),null==n)if(a||Aa(e)){var i=e.constructor;n=a?Rs(e)?new i:[]:jo(Ia(i)?i.prototype:O)}else n={};return(a?rt:xt)(e,function(e,r,a){return t(n,e,r,a)}),n}function ii(e){return en(e,qs(e))}function oi(e){return en(e,ei(e))}function si(e,t,n){return t=+t||0,n===O?(n=t,t=0):n=+n||0,e>=Co(t,n)&&e<_o(t,n)}function li(e,t,n){n&&Zn(e,t,n)&&(t=n=O);var r=null==e,a=null==t;if(null==n&&(a&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,a=!0)),r&&a&&(t=1,a=!1),e=+e||0,a?(t=e,e=0):t=+t||0,n||e%1||t%1){var i=Do();return Co(e+i*(t-e+so("1e-"+((i+"").length-1))),t)}return Yt(e,t)}function ui(e){return(e=u(e))&&e.charAt(0).toUpperCase()+e.slice(1)}function ci(e){return(e=u(e))&&e.replace(je,h).replace(Te,"")}function pi(e,t,n){e=u(e),t+="";var r=e.length;return n=n===O?r:Co(n<0?0:+n||0,r),(n-=t.length)>=0&&e.indexOf(t,n)==n}function di(e){return e=u(e),e&&be.test(e)?e.replace(ve,m):e}function fi(e){return e=u(e),e&&Oe.test(e)?e.replace(De,g):e||"(?:)"}function hi(e,t,n){e=u(e),t=+t;var r=e.length;if(r>=t||!wo(t))return e;var a=(t-r)/2,i=yo(a);return n=In("",go(a),n),n.slice(0,i)+e+n}function mi(e,t,n){return(n?Zn(e,t,n):null==t)?t=0:t&&(t=+t),e=bi(e),So(e,t||(Ne.test(e)?16:10))}function gi(e,t){var n="";if(e=u(e),(t=+t)<1||!e||!wo(t))return n;do{t%2&&(n+=e),t=yo(t/2),e+=e}while(t);return n}function vi(e,t,n){return e=u(e),n=null==n?0:Co(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function yi(e,n,r){var a=t.templateSettings;r&&Zn(e,n,r)&&(n=r=O),e=u(e),n=gt(vt({},r||n),a,mt);var i,o,s=gt(vt({},n.imports),a.imports,mt),l=qs(s),c=en(s,l),p=0,d=n.interpolate||Me,f="__p += '",h=Ji((n.escape||Me).source+"|"+d.source+"|"+(d===_e?Pe:Me).source+"|"+(n.evaluate||Me).source+"|$","g"),m="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++qe+"]")+"\n";e.replace(h,function(t,n,r,a,s,l){return r||(r=a),f+=e.slice(p,l).replace(Le,v),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),p=l+t.length,t}),f+="';\n";var g=n.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(fe,""):f).replace(he,"$1").replace(me,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var y=Gs(function(){return Vi(l,m+"return "+f).apply(O,c)});if(y.source=f,xa(y))throw y;return y}function bi(e,t,n){var r=e;return(e=u(e))?(n?Zn(r,t,n):null==t)?e.slice(C(e),k(e)+1):(t+="",e.slice(c(e,t),p(e,t)+1)):e}function wi(e,t,n){var r=e;return e=u(e),e?(n?Zn(r,t,n):null==t)?e.slice(C(e)):e.slice(c(e,t+"")):e}function Ei(e,t,n){var r=e;return e=u(e),e?(n?Zn(r,t,n):null==t)?e.slice(0,k(e)+1):e.slice(0,p(e,t+"")+1):e}function _i(e,t,n){n&&Zn(e,t,n)&&(t=O);var r=U,a=F;if(null!=t)if(Aa(t)){var i="separator"in t?t.separator:i;r="length"in t?+t.length||0:r,a="omission"in t?u(t.omission):a}else r=+t||0;if(e=u(e),r>=e.length)return e;var o=r-a.length;if(o<1)return a;var s=e.slice(0,o);if(null==i)return s+a;if(Ba(i)){if(e.slice(o).search(i)){var l,c,p=e.slice(0,o);for(i.global||(i=Ji(i.source,(xe.exec(i)||"")+"g")),i.lastIndex=0;l=i.exec(p);)c=l.index;s=s.slice(0,null==c?o:c)}}else if(e.indexOf(i,o)!=o){var d=s.lastIndexOf(i);d>-1&&(s=s.slice(0,d))}return s+a}function Ci(e){return e=u(e),e&&ye.test(e)?e.replace(ge,S):e}function ki(e,t,n){return n&&Zn(e,t,n)&&(t=O),e=u(e),e.match(t||Ue)||[]}function Si(e,t,n){return n&&Zn(e,t,n)&&(t=O),b(e)?Ti(e):wt(e,t)}function Di(e){return function(){return e}}function Oi(e){return e}function Ti(e){return Ft(Et(e,!0))}function Ri(e,t){return qt(e,Et(t,!0))}function Pi(e,t,n){if(null==n){var r=Aa(t),a=r?qs(t):O,i=a&&a.length?It(t,a):O;(i?i.length:r)||(i=!1,n=t,t=e,e=this)}i||(i=It(t,qs(t)));var o=!0,s=-1,l=Ia(e),u=i.length;!1===n?o=!1:Aa(n)&&"chain"in n&&(o=n.chain);for(;++s<u;){var c=i[s],p=t[c];e[c]=p,l&&(e.prototype[c]=function(t){return function(){var n=this.__chain__;if(o||n){var r=e(this.__wrapped__);return(r.__actions__=nt(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,ut([this.value()],arguments))}}(p))}return e}function xi(){return et._=ro,this}function Ni(){}function Ii(e){return er(e)?Vt(e):Wt(e)}function Ai(e){return function(t){return At(e,dr(t),t+"")}}function ji(e,t,n){n&&Zn(e,t,n)&&(t=n=O),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,a=_o(go((t-e)/(n||1)),0),i=qi(a);++r<a;)i[r]=e,e+=n;return i}function Mi(e,t,n){if((e=yo(e))<1||!wo(e))return[];var r=-1,a=qi(Co(e,Ro));for(t=on(t,n,1);++r<e;)r<Ro?a[r]=t(r):t(r);return a}function Li(e){var t=++to;return u(e)+t}function Ui(e,t){return(+e||0)+(+t||0)}function Fi(e,t,n){return n&&Zn(e,t,n)&&(t=O),t=Bn(t,n,3),1==t.length?ft(Rs(e)?e:cr(e),t):Qt(e,t)}e=e?tt.defaults(et.Object(),e,tt.pick(et,Fe)):et;var qi=e.Array,Bi=e.Date,Hi=e.Error,Vi=e.Function,Wi=e.Math,zi=e.Number,Yi=e.Object,Ji=e.RegExp,$i=e.String,Xi=e.TypeError,Ki=qi.prototype,Gi=Yi.prototype,Qi=$i.prototype,Zi=Vi.prototype.toString,eo=Gi.hasOwnProperty,to=0,no=Gi.toString,ro=et._,ao=Ji("^"+Zi.call(eo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),io=e.ArrayBuffer,oo=e.clearTimeout,so=e.parseFloat,lo=Wi.pow,uo=Gi.propertyIsEnumerable,co=zn(e,"Set"),po=e.setTimeout,fo=Ki.splice,ho=e.Uint8Array,mo=zn(e,"WeakMap"),go=Wi.ceil,vo=zn(Yi,"create"),yo=Wi.floor,bo=zn(qi,"isArray"),wo=e.isFinite,Eo=zn(Yi,"keys"),_o=Wi.max,Co=Wi.min,ko=zn(Bi,"now"),So=e.parseInt,Do=Wi.random,Oo=zi.NEGATIVE_INFINITY,To=zi.POSITIVE_INFINITY,Ro=4294967295,Po=Ro-1,xo=Ro>>>1,No=9007199254740991,Io=mo&&new mo,Ao={};t.support={};t.templateSettings={escape:we,evaluate:Ee,interpolate:_e,variable:"",imports:{_:t}};var jo=function(){function e(){}return function(t){if(Aa(t)){e.prototype=t;var n=new e;e.prototype=O}return n||{}}}(),Mo=dn(xt),Lo=dn(Nt,!0),Uo=fn(),Fo=fn(!0),qo=Io?function(e,t){return Io.set(e,t),e}:Oi,Bo=Io?function(e){return Io.get(e)}:Ni,Ho=Vt("length"),Vo=function(){var e=0,t=0;return function(n,r){var a=ms(),i=B-(a-t);if(t=a,i>0){if(++e>=q)return n}else e=0;return qo(n,r)}}(),Wo=va(function(e,t){return b(e)&&Gn(e)?Ct(e,Rt(t,!1,!0)):[]}),zo=_n(),Yo=_n(!0),Jo=va(function(e){for(var t=e.length,n=t,r=qi(p),a=Vn(),i=a==s,o=[];n--;){var l=e[n]=Gn(l=e[n])?l:[];r[n]=i&&l.length>=120?mn(n&&l):null}var u=e[0],c=-1,p=u?u.length:0,d=r[0];e:for(;++c<p;)if(l=u[c],(d?Ge(d,l):a(o,l,0))<0){for(var n=t;--n;){var f=r[n];if((f?Ge(f,l):a(e[n],l,0))<0)continue e}d&&d.push(l),o.push(l)}return o}),$o=va(function(e,t){t=Rt(t);var n=yt(e,t);return zt(e,t.sort(i)),n}),Xo=Mn(),Ko=Mn(!0),Go=va(function(e){return Zt(Rt(e,!1,!0))}),Qo=va(function(e,t){return Gn(e)?Ct(e,t):[]}),Zo=va(Lr),es=va(function(e){var t=e.length,n=t>2?e[t-2]:O,r=t>1?e[t-1]:O;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):O,r=O),e.length=t,Ur(e,n,r)}),ts=va(function(e){return e=Rt(e),this.thru(function(t){return Ze(Rs(t)?t:[pr(t)],e)})}),ns=va(function(e,t){return yt(e,Rt(t))}),rs=cn(function(e,t,n){eo.call(e,n)?++e[n]:e[n]=1}),as=En(Mo),is=En(Lo,!0),os=Sn(rt,Mo),ss=Sn(at,Lo),ls=cn(function(e,t,n){eo.call(e,n)?e[n].push(t):e[n]=[t]}),us=cn(function(e,t,n){e[n]=t}),cs=va(function(e,t,n){var r=-1,a="function"==typeof t,i=er(t),o=Gn(e)?qi(e.length):[];return Mo(e,function(e){var s=a?t:i&&null!=e?e[t]:O;o[++r]=s?s.apply(e,n):Kn(e,t,n)}),o}),ps=cn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ds=xn(ct,Mo),fs=xn(pt,Lo),hs=va(function(e,t){if(null==e)return[];var n=t[2];return n&&Zn(t[0],t[1],n)&&(t.length=1),Gt(e,Rt(t),[])}),ms=ko||function(){return(new Bi).getTime()},gs=va(function(e,t,n){var r=R;if(n.length){var a=E(n,gs.placeholder);r|=A}return Ln(e,r,t,n,a)}),vs=va(function(e,t){t=t.length?Rt(t):Ka(e);for(var n=-1,r=t.length;++n<r;){var a=t[n];e[a]=Ln(e[a],R,e)}return e}),ys=va(function(e,t,n){var r=R|P;if(n.length){var a=E(n,ys.placeholder);r|=A}return Ln(t,r,e,n,a)}),bs=yn(N),ws=yn(I),Es=va(function(e,t){return _t(e,1,t)}),_s=va(function(e,t,n){return _t(e,t,n)}),Cs=kn(),ks=kn(!0),Ss=va(function(e,t){if(t=Rt(t),"function"!=typeof e||!it(t,l))throw new Xi(z);var n=t.length;return va(function(r){for(var a=Co(r.length,n);a--;)r[a]=t[a](r[a]);return e.apply(this,r)})}),Ds=Pn(A),Os=Pn(j),Ts=va(function(e,t){return Ln(e,L,O,O,O,Rt(t))}),Rs=bo||function(e){return b(e)&&nr(e.length)&&no.call(e)==$},Ps=pn(Bt),xs=pn(function(e,t,n){return n?gt(e,t,n):vt(e,t)}),Ns=bn(xs,ht),Is=bn(Ps,ir),As=Cn(xt),js=Cn(Nt),Ms=Dn(Uo),Ls=Dn(Fo),Us=On(xt),Fs=On(Nt),qs=Eo?function(e){var t=null==e?O:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Gn(e)?ur(e):Aa(e)?Eo(e):[]}:ur,Bs=Tn(!0),Hs=Tn(),Vs=va(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=lt(Rt(t),$i);return or(e,Ct(ei(e),t))}var n=on(t[0],t[1],3);return sr(e,function(e,t,r){return!n(e,t,r)})}),Ws=va(function(e,t){return null==e?{}:"function"==typeof t[0]?sr(e,on(t[0],t[1],3)):or(e,Rt(t))}),zs=gn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ys=gn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Js=Rn(),$s=Rn(!0),Xs=gn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ks=gn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Gs=va(function(e,t){try{return e.apply(O,t)}catch(e){return xa(e)?e:new Hi(e)}}),Qs=va(function(e,t){return function(n){return Kn(n,e,t)}}),Zs=va(function(e,t){return function(n){return Kn(e,n,t)}}),el=jn("ceil"),tl=jn("floor"),nl=wn(Ca,Oo),rl=wn(za,To),al=jn("round");return t.prototype=n.prototype,r.prototype=jo(n.prototype),r.prototype.constructor=r,a.prototype=jo(n.prototype),a.prototype.constructor=a,ze.prototype.delete=Ye,ze.prototype.get=Je,ze.prototype.has=$e,ze.prototype.set=Xe,Ke.prototype.push=Qe,ha.Cache=ze,t.after=ca,t.ary=pa,t.assign=xs,t.at=ns,t.before=da,t.bind=gs,t.bindAll=vs,t.bindKey=ys,t.callback=Si,t.chain=Br,t.chunk=hr,t.compact=mr,t.constant=Di,t.countBy=rs,t.create=Xa,t.curry=bs,t.curryRight=ws,t.debounce=fa,t.defaults=Ns,t.defaultsDeep=Is,t.defer=Es,t.delay=_s,t.difference=Wo,t.drop=gr,t.dropRight=vr,t.dropRightWhile=yr,t.dropWhile=br,t.fill=wr,t.filter=Gr,t.flatten=_r,t.flattenDeep=Cr,t.flow=Cs,t.flowRight=ks,t.forEach=os,t.forEachRight=ss,t.forIn=Ms,t.forInRight=Ls,t.forOwn=Us,t.forOwnRight=Fs,t.functions=Ka,t.groupBy=ls,t.indexBy=us,t.initial=Sr,t.intersection=Jo,t.invert=Za,t.invoke=cs,t.keys=qs,t.keysIn=ei,t.map=ea,t.mapKeys=Bs,t.mapValues=Hs,t.matches=Ti,t.matchesProperty=Ri,t.memoize=ha,t.merge=Ps,t.method=Qs,t.methodOf=Zs,t.mixin=Pi,t.modArgs=Ss,t.negate=ma,t.omit=Vs,t.once=ga,t.pairs=ti,t.partial=Ds,t.partialRight=Os,t.partition=ps,t.pick=Ws,t.pluck=ta,t.property=Ii,t.propertyOf=Ai,t.pull=Tr,t.pullAt=$o,t.range=ji,t.rearg=Ts,t.reject=na,t.remove=Rr,t.rest=Pr,t.restParam=va,t.set=ri,t.shuffle=aa,t.slice=xr,t.sortBy=sa,t.sortByAll=hs,t.sortByOrder=la,t.spread=ya,t.take=Nr,t.takeRight=Ir,t.takeRightWhile=Ar,t.takeWhile=jr,t.tap=Hr,t.throttle=ba,t.thru=Vr,t.times=Mi,t.toArray=Ja,t.toPlainObject=$a,t.transform=ai,t.union=Go,t.uniq=Mr,t.unzip=Lr,t.unzipWith=Ur,t.values=ii,t.valuesIn=oi,t.where=ua,t.without=Qo,t.wrap=wa,t.xor=Fr,t.zip=Zo,t.zipObject=qr,t.zipWith=es,t.backflow=ks,t.collect=ea,t.compose=ks,t.each=os,t.eachRight=ss,t.extend=xs,t.iteratee=Si,t.methods=Ka,t.object=qr,t.select=Gr,t.tail=Pr,t.unique=Mr,Pi(t,t),t.add=Ui,t.attempt=Gs,t.camelCase=zs,t.capitalize=ui,t.ceil=el,t.clone=Ea,t.cloneDeep=_a,t.deburr=ci,t.endsWith=pi,t.escape=di,t.escapeRegExp=fi,t.every=Kr,t.find=as,t.findIndex=zo,t.findKey=As,t.findLast=is,t.findLastIndex=Yo,t.findLastKey=js,t.findWhere=Qr,t.first=Er,t.floor=tl,t.get=Ga,t.gt=Ca,t.gte=ka,t.has=Qa,t.identity=Oi,t.includes=Zr,t.indexOf=kr,t.inRange=si,t.isArguments=Sa,t.isArray=Rs,t.isBoolean=Da,t.isDate=Oa,t.isElement=Ta,t.isEmpty=Ra,t.isEqual=Pa,t.isError=xa,t.isFinite=Na,t.isFunction=Ia,t.isMatch=ja,t.isNaN=Ma,t.isNative=La,t.isNull=Ua,t.isNumber=Fa,t.isObject=Aa,t.isPlainObject=qa,t.isRegExp=Ba,t.isString=Ha,t.isTypedArray=Va,t.isUndefined=Wa,t.kebabCase=Ys,t.last=Dr,t.lastIndexOf=Or,t.lt=za,t.lte=Ya,t.max=nl,t.min=rl,t.noConflict=xi,t.noop=Ni,t.now=ms,t.pad=hi,t.padLeft=Js,t.padRight=$s,t.parseInt=mi,t.random=li,t.reduce=ds,t.reduceRight=fs,t.repeat=gi,t.result=ni,t.round=al,t.runInContext=D,t.size=ia,t.snakeCase=Xs,t.some=oa,t.sortedIndex=Xo,t.sortedLastIndex=Ko,t.startCase=Ks,t.startsWith=vi,t.sum=Fi,t.template=yi,t.trim=bi,t.trimLeft=wi,t.trimRight=Ei,t.trunc=_i,t.unescape=Ci,t.uniqueId=Li,t.words=ki,t.all=Kr,t.any=oa,t.contains=Zr,t.eq=Pa,t.detect=as,t.foldl=ds,t.foldr=fs,t.head=Er,t.include=Zr,t.inject=ds,Pi(t,function(){var e={};return xt(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.sample=ra,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ra(t,e)}):ra(this.value())},t.VERSION=T,rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),rt(["drop","take"],function(e,t){a.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new a(this);n=null==n?1:_o(yo(n)||0,0);var i=this.clone();return r?i.__takeCount__=Co(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i},a.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),rt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=W;a.prototype[e]=function(e,t){var a=this.clone();return a.__iteratees__.push({iteratee:Bn(e,t,1),type:n}),a.__filtered__=a.__filtered__||r,a}}),rt(["first","last"],function(e,t){var n="take"+(t?"Right":"");a.prototype[e]=function(){return this[n](1).value()[0]}}),rt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");a.prototype[e]=function(){return this.__filtered__?new a(this):this[n](1)}}),rt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Ft:Ii;a.prototype[e]=function(e){return this[n](r(e))}}),a.prototype.compact=function(){return this.filter(Oi)},a.prototype.reject=function(e,t){return e=Bn(e,t,1),this.filter(function(t){return!e(t)})},a.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||t<0)?new a(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==O&&(t=+t||0,n=t<0?n.dropRight(-t):n.take(t-e)),n)},a.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},a.prototype.toArray=function(){return this.take(To)},xt(a.prototype,function(e,n){var i=/^(?:filter|map|reject)|While$/.test(n),o=/^(?:first|last)$/.test(n),s=t[o?"take"+("last"==n?"Right":""):n];s&&(t.prototype[n]=function(){var t=o?[1]:arguments,n=this.__chain__,l=this.__wrapped__,u=!!this.__actions__.length,c=l instanceof a,p=t[0],d=c||Rs(l);d&&i&&"function"==typeof p&&1!=p.length&&(c=d=!1);var f=function(e){return o&&n?s(e,1)[0]:s.apply(O,ut([e],t))},h={func:Vr,args:[f],thisArg:O},m=c&&!u;if(o&&!n)return m?(l=l.clone(),l.__actions__.push(h),e.call(l)):s.call(O,this.value())[0];if(!o&&d){l=m?l:new a(this);var g=e.apply(l,t);return g.__actions__.push(h),new r(g,n)}return this.thru(f)})}),rt(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?Qi:Ki)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return a&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),xt(a.prototype,function(e,n){var r=t[n];if(r){var a=r.name;(Ao[a]||(Ao[a]=[])).push({name:n,func:r})}}),Ao[Nn(O,P).name]=[{name:"wrapper",func:O}],a.prototype.clone=w,a.prototype.reverse=Ve,a.prototype.value=We,t.prototype.chain=Wr,t.prototype.commit=zr,t.prototype.concat=ts,t.prototype.plant=Yr,t.prototype.reverse=Jr,t.prototype.toString=$r,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Xr,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var O,T="3.10.1",R=1,P=2,x=4,N=8,I=16,A=32,j=64,M=128,L=256,U=30,F="...",q=150,B=16,H=200,V=1,W=2,z="Expected a function",Y="__lodash_placeholder__",J="[object Arguments]",$="[object Array]",X="[object Boolean]",K="[object Date]",G="[object Error]",Q="[object Function]",Z="[object Number]",ee="[object Object]",te="[object RegExp]",ne="[object String]",re="[object ArrayBuffer]",ae="[object Float32Array]",ie="[object Float64Array]",oe="[object Int8Array]",se="[object Int16Array]",le="[object Int32Array]",ue="[object Uint8Array]",ce="[object Uint8ClampedArray]",pe="[object Uint16Array]",de="[object Uint32Array]",fe=/\b__p \+= '';/g,he=/\b(__p \+=) '' \+/g,me=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ge=/&(?:amp|lt|gt|quot|#39|#96);/g,ve=/[&<>"'`]/g,ye=RegExp(ge.source),be=RegExp(ve.source),we=/<%-([\s\S]+?)%>/g,Ee=/<%([\s\S]+?)%>/g,_e=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ke=/^\w*$/,Se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,De=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Oe=RegExp(De.source),Te=/[\u0300-\u036f\ufe20-\ufe23]/g,Re=/\\(\\)?/g,Pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xe=/\w*$/,Ne=/^0[xX]/,Ie=/^\[object .+?Constructor\]$/,Ae=/^\d+$/,je=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Me=/($^)/,Le=/['\n\r\u2028\u2029\\]/g,Ue=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Fe=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],qe=-1,Be={};Be[ae]=Be[ie]=Be[oe]=Be[se]=Be[le]=Be[ue]=Be[ce]=Be[pe]=Be[de]=!0,Be[J]=Be[$]=Be[re]=Be[X]=Be[K]=Be[G]=Be[Q]=Be["[object Map]"]=Be[Z]=Be[ee]=Be[te]=Be["[object Set]"]=Be[ne]=Be["[object WeakMap]"]=!1;var He={};He[J]=He[$]=He[re]=He[X]=He[K]=He[ae]=He[ie]=He[oe]=He[se]=He[le]=He[Z]=He[ee]=He[te]=He[ne]=He[ue]=He[ce]=He[pe]=He[de]=!0,He[G]=He[Q]=He["[object Map]"]=He["[object Set]"]=He["[object WeakMap]"]=!1;var Ve={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},We={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},ze={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ye={function:!0,object:!0},Je={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},$e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xe=Ye[typeof t]&&t&&!t.nodeType&&t,Ke=Ye[typeof e]&&e&&!e.nodeType&&e,Ge=Xe&&Ke&&"object"==typeof r&&r&&r.Object&&r,Qe=Ye[typeof self]&&self&&self.Object&&self,Ze=Ye[typeof window]&&window&&window.Object&&window,et=(Ke&&Ke.exports,Ge||Ze!==(this&&this.window)&&Ze||Qe||this),tt=D();et._=tt,(a=function(){return tt}.call(t,n,t,e))!==O&&(e.exports=a)}).call(this)}).call(t,n(130)(e),n(65))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function o(){m&&f&&(m=!1,f.length?h=f.concat(h):g=-1,h.length&&s())}function s(){if(!m){var e=a(o);m=!0;for(var t=h.length;t;){for(f=h,h=[];++g<t;)f&&f[g].run();g=-1,t=h.length}f=null,m=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,p,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var f,h=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||m||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function a(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(t));default:return!1}}var i=n(7),o=n(105),s=n(106),l=n(110),u=n(154),c=n(155),p=(n(5),{}),d=null,f=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},h=function(e){return f(e,!0)},m=function(e){return f(e,!1)},g=function(e){return"."+e._rootNodeID},v={injection:{injectEventPluginOrder:o.injectEventPluginOrder,injectEventPluginsByName:o.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n&&i("94",t,typeof n);var r=g(e);(p[t]||(p[t]={}))[r]=n;var a=o.registrationNameModules[t];a&&a.didPutListener&&a.didPutListener(e,t,n)},getListener:function(e,t){var n=p[t];if(a(t,e._currentElement.type,e._currentElement.props))return null;var r=g(e);return n&&n[r]},deleteListener:function(e,t){var n=o.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=p[t];if(r){delete r[g(e)]}},deleteAllListeners:function(e){var t=g(e);for(var n in p)if(p.hasOwnProperty(n)&&p[n][t]){var r=o.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete p[n][t]}},extractEvents:function(e,t,n,r){for(var a,i=o.plugins,s=0;s<i.length;s++){var l=i[s];if(l){var c=l.extractEvents(e,t,n,r);c&&(a=u(a,c))}}return a},enqueueEvents:function(e){e&&(d=u(d,e))},processEventQueue:function(e){var t=d;d=null,e?c(t,h):c(t,m),d&&i("95"),l.rethrowCaughtError()},__purge:function(){p={}},__getListenerBank:function(){return p}};e.exports=v},function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return v(e,r)}function a(e,t,n){var a=r(e,n,t);a&&(n._dispatchListeners=m(n._dispatchListeners,a),n._dispatchInstances=m(n._dispatchInstances,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.traverseTwoPhase(e._targetInst,a,e)}function o(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?h.getParentInstance(t):null;h.traverseTwoPhase(n,a,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,a=v(e,r);a&&(n._dispatchListeners=m(n._dispatchListeners,a),n._dispatchInstances=m(n._dispatchInstances,e))}}function l(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function u(e){g(e,i)}function c(e){g(e,o)}function p(e,t,n,r){h.traverseEnterLeave(n,r,s,e,t)}function d(e){g(e,l)}var f=n(60),h=n(106),m=n(154),g=n(155),v=(n(6),f.getListener),y={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:p};e.exports=y},function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(29),i=n(115),o={view:function(e){if(e.view)return e.view;var t=i(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};a.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var a=new Error(n);throw a.name="Invariant Violation",a.framesToPop=1,a}e.exports=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,,,,,function(e,t,n){"use strict";var r={};e.exports=r},,,function(e,t,n){"use strict";var r=n(4),a=n(186);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new r.Component).updater;e.exports=a(r.Component,r.isValidElement,i)},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=f++,p[e[m]]={}),p[e[m]]}var a,i=n(8),o=n(105),s=n(271),l=n(153),u=n(303),c=n(116),p={},d=!1,f=0,h={topAbort:"abort",topAnimationEnd:u("animationend")||"animationend",topAnimationIteration:u("animationiteration")||"animationiteration",topAnimationStart:u("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:u("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),g=i({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,a=r(n),i=o.registrationNameDependencies[e],s=0;s<i.length;s++){var l=i[s];a.hasOwnProperty(l)&&a[l]||("topWheel"===l?c("wheel")?g.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):c("mousewheel")?g.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):g.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===l?c("scroll",!0)?g.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):g.ReactEventListener.trapBubbledEvent("topScroll","scroll",g.ReactEventListener.WINDOW_HANDLE):"topFocus"===l||"topBlur"===l?(c("focus",!0)?(g.ReactEventListener.trapCapturedEvent("topFocus","focus",n),g.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):c("focusin")&&(g.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),g.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),a.topBlur=!0,a.topFocus=!0):h.hasOwnProperty(l)&&g.ReactEventListener.trapBubbledEvent(l,h[l],n),a[l]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===a&&(a=g.supportsEventPageXY()),!a&&!d){var e=l.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),d=!0}}});e.exports=g},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(63),i=n(153),o=n(114),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};a.augmentClass(r,s),e.exports=r},function(e,t,n){"use strict";var r=n(7),a=(n(5),{}),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,a,i,o,s,l){this.isInTransaction()&&r("27");var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=e.call(t,n,a,i,o,s,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=a,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===a)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,o=t[n],s=this.wrapperInitData[n];try{i=!0,s!==a&&o.close&&o.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};e.exports=i},function(e,t,n){"use strict";function r(e){var t=""+e,n=i.exec(t);if(!n)return t;var r,a="",o=0,s=0;for(o=n.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==o&&(a+=t.substring(s,o)),s=o+1,a+=r}return s!==o?a+t.substring(s,o):a}function a(e){return"boolean"==typeof e||"number"==typeof e?""+e:r(e)}var i=/["'&<>]/;e.exports=a},function(e,t,n){"use strict";var r,a=n(17),i=n(104),o=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(112),u=l(function(e,t){if(e.namespaceURI!==i.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(a.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(u=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),o.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}e.exports=u},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[r+s]=o[s];return t||i(o)}var a=n(1153),i=n(1152);e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={id:u.a.string,label:u.a.string,contents:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,name:u.a.string.isRequired,disabled:u.a.bool})).isRequired,name:u.a.string,selectedOption:u.a.string,defaultOption:u.a.string,onChange:u.a.func,error:u.a.string,disabled:u.a.bool},d={disabled:!1},f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFocused:!1},n.handleFocus=n.handleFocus.bind(n),n}return i(t,e),c(t,[{key:"handleFocus",value:function(){this.state.isFocused?this.setState({isFocused:!1}):this.setState({isFocused:!0})}},{key:"render",value:function(){return s.a.createElement("div",{className:"form__input"+(this.props.error?" form__input--error":"")},s.a.createElement("label",{className:"form__label",htmlFor:this.props.id},this.props.label),this.props.error&&s.a.createElement("div",{className:"error-msg"},this.props.error),s.a.createElement("div",{className:"select-wrap "+(this.state.isFocused?"select-wrap--focus":"")+(this.props.error?"select-wrap--error":"")+(this.props.disabled?"select-wrap--disabled":"")},s.a.createElement("select",{className:"select",id:this.props.id,name:this.props.name||this.props.id,disabled:this.props.disabled,onChange:this.props.onChange,onFocus:this.handleFocus,onBlur:this.handleFocus,value:this.props.selectedOption},s.a.createElement("option",{value:"default-option"},this.props.defaultOption||"Select an option"),this.props.contents.map(function(e,t){return s.a.createElement("option",{disabled:e.disabled,key:t,value:e.id},e.name)}))))}}]),t}(o.Component);f.propTypes=p,f.defaultProps=d,t.a=f},,,function(e,t,n){"use strict";t.__esModule=!0,t.createPath=t.parsePath=t.getQueryStringValueFromPath=t.stripQueryStringValueFromPath=t.addQueryStringValueToPath=void 0;var r=n(88),a=(function(e){e&&e.__esModule}(r),t.addQueryStringValueToPath=function(e,t,n){var r=i(e),a=r.pathname,s=r.search,l=r.hash;return o({pathname:a,search:s+(-1===s.indexOf("?")?"?":"&")+t+"="+n,hash:l})},t.stripQueryStringValueFromPath=function(e,t){var n=i(e),r=n.pathname,a=n.search,s=n.hash;return o({pathname:r,search:a.replace(new RegExp("([?&])"+t+"=[a-zA-Z0-9]+(&?)"),function(e,t,n){return"?"===t?t:n}),hash:s})},t.getQueryStringValueFromPath=function(e,t){var n=i(e),r=n.search,a=r.match(new RegExp("[?&]"+t+"=([a-zA-Z0-9]+)"));return a&&a[1]},function(e){var t=e.match(/^(https?:)?\/\/[^\/]*/);return null==t?e:e.substring(t[0].length)}),i=t.parsePath=function(e){var t=a(e),n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substring(i),t=t.substring(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substring(o),t=t.substring(0,o)),""===t&&(t="/"),{pathname:t,search:n,hash:r}},o=t.createPath=function(e){if(null==e||"string"==typeof e)return e;var t=e.basename,n=e.pathname,r=e.search,a=e.hash,i=(t||"")+n;return r&&"?"!==r&&(i+=r),a&&(i+=a),i}},function(e,t,n){LocalCollection={},EJSON=n(1024);var r=n(58),a=function(e){return r.isArray(e)&&!EJSON.isBinary(e)},i=function(e,t){return a(e)?r.any(e,t):t(e)},o=function(e,t){return!!t(e)||a(e)&&r.any(e,t)},s=function(e){var t=void 0;for(var n in e){var r="$"===n.substr(0,1);if(void 0===t)t=r;else if(t!==r)throw new Error("Inconsistent selector: "+e)}return!!t},l=function(e){if(null==e)return function(e){return i(e,function(e){return null==e})};if(!r.isObject(e))return function(t){return i(t,function(t){return t===e})};if(e instanceof RegExp)return function(t){return void 0!==t&&i(t,function(t){return e.test(t)})};if(a(e))return function(t){return!!a(t)&&o(t,function(t){return LocalCollection._f._equal(e,t)})};if(s(e)){var t=[];return r.each(e,function(n,a){if(!r.has(c,a))throw new Error("Unrecognized operator: "+a);t.push(c[a](n,e.$options))}),function(e){return r.all(t,function(t){return t(e)})}}return function(t){return i(t,function(t){return LocalCollection._f._equal(e,t)})}},u={$and:function(e){if(!a(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,p);return function(e){return r.all(t,function(t){return t(e)})}},$or:function(e){if(!a(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,p);return function(e){return r.any(t,function(t){return t(e)})}},$nor:function(e){if(!a(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,p);return function(e){return r.all(t,function(t){return!t(e)})}},$where:function(e){return e instanceof Function||(e=Function("return "+e)),function(t){return e.call(t)}}},c={$in:function(e){if(!a(e))throw new Error("Argument to $in must be array");var t=null;return r.all(e,r.isString)&&(t=r.indexBy(e)),function(n){return o(n,function(n){return r.isString(n)&&null!==t?void 0!=t[n]:r.any(e,function(e){return LocalCollection._f._equal(e,n)})})}},$all:function(e){if(!a(e))throw new Error("Argument to $all must be array");return function(t){return!!a(t)&&r.all(e,function(e){return r.any(t,function(t){return LocalCollection._f._equal(e,t)})})}},$lt:function(e){return function(t){return i(t,function(t){return LocalCollection._f._cmp(t,e)<0})}},$lte:function(e){return function(t){return i(t,function(t){return LocalCollection._f._cmp(t,e)<=0})}},$gt:function(e){return function(t){return i(t,function(t){return LocalCollection._f._cmp(t,e)>0})}},$gte:function(e){return function(t){return i(t,function(t){return LocalCollection._f._cmp(t,e)>=0})}},$ne:function(e){return function(t){return!o(t,function(t){return LocalCollection._f._equal(t,e)})}},$nin:function(e){if(!a(e))throw new Error("Argument to $nin must be array");var t=c.$in(e);return function(e){return void 0===e||!t(e)}},$exists:function(e){return function(t){return e===(void 0!==t)}},$mod:function(e){var t=e[0],n=e[1];return function(e){return i(e,function(e){return e%t===n})}},$size:function(e){return function(t){return a(t)&&e===t.length}},$type:function(e){return function(t){return void 0!==t&&i(t,function(t){return LocalCollection._f._type(t)===e})}},$regex:function(e,t){if(void 0!==t){if(/[^gim]/.test(t))throw new Error("Only the i, m, and g regexp options are supported");var n=e instanceof RegExp?e.source:e;e=new RegExp(n,t)}else e instanceof RegExp||(e=new RegExp(e));return function(t){return void 0!==t&&i(t,function(t){return e.test(t)})}},$options:function(e){return function(e){return!0}},$elemMatch:function(e){var t=p(e);return function(e){return!!a(e)&&r.any(e,function(e){return t(e)})}},$not:function(e){var t=l(e);return function(e){return!t(e)}},$near:function(e){return function(e){return!0}},$geoIntersects:function(e){return function(e){return!0}}};LocalCollection._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:a(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:EJSON.isBinary(e)?5:e instanceof Meteor.Collection.ObjectID?7:3},_equal:function(e,t){return EJSON.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,t){if(void 0===e)return void 0===t?0:-1;if(void 0===t)return 1;var n=LocalCollection._f._type(e),r=LocalCollection._f._type(t),a=LocalCollection._f._typeorder(n),i=LocalCollection._f._typeorder(r);if(a!==i)return a<i?-1:1;if(n!==r)throw Error("Missing type coercion logic in _cmp");if(7===n&&(n=r=2,e=e.toHexString(),t=t.toHexString()),9===n&&(n=r=1,e=e.getTime(),t=t.getTime()),1===n)return e-t;if(2===r)return e<t?-1:e===t?0:1;if(3===n){var o=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return LocalCollection._f._cmp(o(e),o(t))}if(4===n)for(var s=0;;s++){if(s===e.length)return s===t.length?0:-1;if(s===t.length)return 1;var l=LocalCollection._f._cmp(e[s],t[s]);if(0!==l)return l}if(5===n){if(e.length!==t.length)return e.length-t.length;for(s=0;s<e.length;s++){if(e[s]<t[s])return-1;if(e[s]>t[s])return 1}return 0}if(8===n)return e?t?0:1:t?-1:0;if(10===n)return 0;if(11===n)throw Error("Sorting not supported on regular expression");if(13===n)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},LocalCollection._matches=function(e,t){return LocalCollection._compileSelector(e)(t)},LocalCollection._makeLookupFunction=function(e){var t,n,i,o=e.indexOf(".");if(-1===o)t=e;else{t=e.substr(0,o);var s=e.substr(o+1);n=LocalCollection._makeLookupFunction(s),i=/^\d+(\.|$)/.test(s)}return function(e){if(null==e)return[void 0];var o=e[t];return n?a(o)&&0===o.length?[void 0]:(a(o)&&!i||(o=[o]),Array.prototype.concat.apply([],r.map(o,n))):[o]}};var p=function(e){var t=[];return r.each(e,function(e,n){if("$"===n.substr(0,1)){if(!r.has(u,n))throw new Error("Unrecognized logical operator: "+n);t.push(u[n](e))}else{var a=LocalCollection._makeLookupFunction(n),i=l(e);t.push(function(e){var t=a(e);return r.any(t,i)})}}),function(e){return r.all(t,function(t){return t(e)})}};LocalCollection._compileSelector=function(e){if(e instanceof Function)return function(t){return e.call(t)};if(LocalCollection._selectorIsId(e))return function(t){return EJSON.equals(t._id,e)};if(!e||"_id"in e&&!e._id)return function(e){return!1};if("boolean"==typeof e||a(e)||EJSON.isBinary(e))throw new Error("Invalid selector: "+e);return p(e)},LocalCollection._compileSort=function(e){var t=[];if(e instanceof Array)for(var n=0;n<e.length;n++)"string"==typeof e[n]?t.push({lookup:LocalCollection._makeLookupFunction(e[n]),ascending:!0}):t.push({lookup:LocalCollection._makeLookupFunction(e[n][0]),ascending:"desc"!==e[n][1]});else{if("object"!=typeof e)throw Error("Bad sort specification: ",JSON.stringify(e));for(var i in e)t.push({lookup:LocalCollection._makeLookupFunction(i),ascending:e[i]>=0})}if(0===t.length)return function(){return 0};var o=function(e,t){var n,i=!0;return r.each(e,function(e){a(e)||(e=[e]),a(e)&&0===e.length&&(e=[void 0]),r.each(e,function(e){if(i)n=e,i=!1;else{var r=LocalCollection._f._cmp(n,e);(t&&r>0||!t&&r<0)&&(n=e)}})}),n};return function(e,n){for(var r=0;r<t.length;++r){var a=t[r],i=o(a.lookup(e),a.ascending),s=o(a.lookup(n),a.ascending),l=LocalCollection._f._cmp(i,s);if(0!==l)return a.ascending?l:-l}return 0}},t.compileDocumentSelector=p,t.compileSort=LocalCollection._compileSort},function(e,t,n){"use strict";function r(e){return null==e||c.a.isValidElement(e)}function a(e){return r(e)||Array.isArray(e)&&e.every(r)}function i(e,t){return p({},e,t)}function o(e){var t=e.type,n=i(t.defaultProps,e.props);if(n.children){var r=s(n.children,n);r.length&&(n.childRoutes=r),delete n.children}return n}function s(e,t){var n=[];return c.a.Children.forEach(e,function(e){if(c.a.isValidElement(e))if(e.type.createRouteFromReactElement){var r=e.type.createRouteFromReactElement(e,t);r&&n.push(r)}else n.push(o(e))}),n}function l(e){return a(e)?e=s(e):e&&!Array.isArray(e)&&(e=[e]),e}t.a=a,t.c=o,t.b=l;var u=n(4),c=n.n(u),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return a(e,null,[{key:"getAll",value:function(){var e=document.cookie.split(";"),t={};return e.forEach(function(e){var n=e.split("=");t[n[0].trim()]=n[1]}),t}},{key:"add",value:function(e,t,n,r){return e&&"string"==typeof e?t?(n||(n="/"),r||(r=location.hostname),void(document.cookie=e+"="+t+";path="+n+";domain="+r)):(console.error("cookie.add() requires a cookie value as an argument"),!1):(console.error("cookie.add() requires a cookie name (type=string) as an argument"),!1)}},{key:"get",value:function(e){if(!e||"string"!=typeof e)return console.error("cookie.get() requires a cookie name (type=string) as an argument"),!1;var t=this.getAll(),n=t[e];return n||!1}},{key:"remove",value:function(e){return e&&"string"==typeof e?this.get(e)?(document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",console.log("Removed cookie: '"+e+"'"),!0):(console.error("Unable to find '"+e+"' cookie"),!1):(console.error("cookie.get() requires a cookie name (type=string) as an argument"),!1)}}]),e}();t.a=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"b",function(){return p});var a=n(30),i=n(81),o=n.n(i),s=n(335),l=n(334),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={shownNotification:"SHOWN_NOTIFICATION",shownWarning:"SHOWN_WARNING",changedRoute:"CHANGED_ROUTE",appInitialised:"APP_INITIALISED",requestSent:"REQUEST_SENT",requestReceived:"REQUEST_RECEIVED",requestFailed:"REQUEST_FAILED",passwordChangeSuccess:"PASSWORD_CHANGE_SUCCESS",passwordChangeError:"PASSWORD_CHANGE_ERROR",editedTeamMembers:"EDITED_TEAM_MEMBERS",pingSent:"PING_SENT",pingReceived:"PING_RECEIVED",pingFailed:"PING_FAILED",socketBufferFull:"SOCKET_BUFFER_FULL",socketOpen:"SOCKET_OPEN",socketError:"SOCKET_ERROR",unexpectedRuntimeError:"UNEXPECTED_RUNTIME_ERROR",runtimeWarning:"RUNTIME_WARNING"},d=o()(),f=[p.pingSent,p.pingReceived,p.socketBufferFull],h=function(){function e(){r(this,e)}return c(e,null,[{key:"initialise",value:function(){this.add(p.appInitialised),a.f.listen(function(t){e.add(p.changedRoute,u({},t))})}},{key:"add",value:function(e,t){var n=new Date,r={type:e,location:location.href,instanceID:d,created:n.toISOString(),timestamp:n.getTime(),payload:t||null};if(l.a.add(r),!f.includes(e))return void s.a.send("log:"+JSON.stringify(r))}},{key:"getAll",value:function(e,t,n){return l.a.getAll(e,t,n)}},{key:"length",value:function(){return l.a.length()}},{key:"removeAll",value:function(){return l.a.removeAll()}}]),e}();t.a=h},,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function a(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var o=0;o<n.length;o++)if(!i.call(t,n[o])||!r(e[n[o]],t[n[o]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=a},function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function a(e,t,n){c.insertTreeBefore(e,t,n)}function i(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):m(e,t,n)}function o(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],l(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var a=t;;){var i=a.nextSibling;if(m(e,a,r),a===n)break;a=i}}function l(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function u(e,t,n){var r=e.parentNode,a=e.nextSibling;a===t?n&&m(r,document.createTextNode(n),a):n?(h(a,n),l(r,a,t)):l(r,e,t)}var c=n(43),p=n(248),d=(n(9),n(21),n(112)),f=n(80),h=n(161),m=d(function(e,t,n){e.insertBefore(t,n)}),g=p.dangerouslyReplaceNodeWithMarkup,v={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:u,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"INSERT_MARKUP":a(e,s.content,r(e,s.afterNode));break;case"MOVE_EXISTING":i(e,s.fromNode,r(e,s.afterNode));break;case"SET_MARKUP":f(e,s.content);break;case"TEXT_CONTENT":h(e,s.content);break;case"REMOVE_NODE":o(e,s.fromNode)}}}};e.exports=v},function(e,t,n){"use strict";var r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=r},function(e,t,n){"use strict";function r(){if(s)for(var e in l){var t=l[e],n=s.indexOf(e);if(n>-1||o("96",e),!u.plugins[n]){t.extractEvents||o("97",e),u.plugins[n]=t;var r=t.eventTypes;for(var i in r)a(r[i],t,i)||o("98",i,e)}}}function a(e,t,n){u.eventNameDispatchConfigs.hasOwnProperty(n)&&o("99",n),u.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];i(s,t,n)}return!0}return!!e.registrationName&&(i(e.registrationName,t,n),!0)}function i(e,t,n){u.registrationNameModules[e]&&o("100",e),u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=n(7),s=(n(5),null),l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s&&o("101"),s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];l.hasOwnProperty(n)&&l[n]===a||(l[n]&&o("102",n),l[n]=a,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var a=u.registrationNameModules[n[r]];if(a)return a}}return null},_resetEventPlugins:function(){s=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=u.registrationNameModules;for(var a in r)r.hasOwnProperty(a)&&delete r[a]}};e.exports=u},function(e,t,n){"use strict";function r(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function a(e){return"topMouseMove"===e||"topTouchMove"===e}function i(e){return"topMouseDown"===e||"topTouchStart"===e}function o(e,t,n,r){var a=e.type||"unknown-event";e.currentTarget=v.getNodeFromInstance(r),t?m.invokeGuardedCallbackWithCatch(a,n,e):m.invokeGuardedCallback(a,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var a=0;a<n.length&&!e.isPropagationStopped();a++)o(e,t,n[a],r[a]);else n&&o(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function u(e){var t=l(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)&&h("103"),e.currentTarget=t?v.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function p(e){return!!e._dispatchListeners}var d,f,h=n(7),m=n(110),g=(n(5),n(6),{injectComponentTree:function(e){d=e},injectTreeTraversal:function(e){f=e}}),v={isEndish:r,isMoveish:a,isStartish:i,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:p,getInstanceFromNode:function(e){return d.getInstanceFromNode(e)},getNodeFromInstance:function(e){return d.getNodeFromInstance(e)},isAncestor:function(e,t){return f.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return f.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return f.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return f.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,a){return f.traverseEnterLeave(e,t,n,r,a)},injection:g};e.exports=v},function(e,t,n){"use strict";function r(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function a(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var i={escape:r,unescape:a};e.exports=i},function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink&&s("87")}function a(e){r(e),(null!=e.value||null!=e.onChange)&&s("88")}function i(e){r(e),(null!=e.checked||null!=e.onChange)&&s("89")}function o(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(7),l=n(277),u=n(140),c=n(46),p=u(c.isValidElement),d=(n(5),n(6),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),f={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:p.func},h={},m={checkPropTypes:function(e,t,n){for(var r in f){if(f.hasOwnProperty(r))var a=f[r](t,r,e,"prop",null,l);if(a instanceof Error&&!(a.message in h)){h[a.message]=!0;o(n)}}},getValue:function(e){return e.valueLink?(a(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(i(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(a(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(i(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=m},function(e,t,n){"use strict";var r=n(7),a=(n(5),!1),i={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){a&&r("104"),i.replaceNodeWithMarkup=e.replaceNodeWithMarkup,i.processChildrenUpdates=e.processChildrenUpdates,a=!0}}};e.exports=i},function(e,t,n){"use strict";function r(e,t,n){try{t(n)}catch(e){null===a&&(a=e)}}var a=null,i={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(a){var e=a;throw a=null,e}}};e.exports=i},function(e,t,n){"use strict";function r(e){l.enqueueUpdate(e)}function a(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function i(e,t){var n=s.get(e);if(!n){return null}return n}var o=n(7),s=(n(31),n(62)),l=(n(21),n(27)),u=(n(5),n(6),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){u.validateCallback(t,n);var a=i(e);if(!a)return null;a._pendingCallbacks?a._pendingCallbacks.push(t):a._pendingCallbacks=[t],r(a)},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t,n){var a=i(e,"replaceState");a&&(a._pendingStateQueue=[t],a._pendingReplaceState=!0,void 0!==n&&null!==n&&(u.validateCallback(n,"replaceState"),a._pendingCallbacks?a._pendingCallbacks.push(n):a._pendingCallbacks=[n]),r(a))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){(n._pendingStateQueue||(n._pendingStateQueue=[])).push(t),r(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!=typeof e&&o("122",t,a(e))}});e.exports=u},function(e,t,n){"use strict";var r=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e};e.exports=r},function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,t>=32||13===t?t:0}e.exports=r},function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return!!r&&!!n[r]}function a(e){return r}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=a},function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=r},function(e,t,n){"use strict";/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function r(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var o=document.createElement("div");o.setAttribute(n,"return;"),r="function"==typeof o[n]}return!r&&a&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var a,i=n(17);i.canUseDOM&&(a=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=null===e||!1===e,r=null===t||!1===t;if(n||r)return n===r;var a=typeof e,i=typeof t;return"string"===a||"number"===a?"string"===i||"number"===i:"object"===i&&e.type===t.type&&e.key===t.key}e.exports=r},function(e,t,n){"use strict";var r=(n(8),n(18)),a=(n(6),r);e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(54),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"getAll",value:function(){return a.a.get("/recipes",!0).then(function(e){return e})}},{key:"get",value:function(e){return a.a.get("/recipes/"+e,!0).then(function(e){return e})}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(54),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"getAll",value:function(){return a.a.get("/zebedee/teams").then(function(e){return e.teams})}},{key:"get",value:function(e){return a.a.get("/zebedee/teams/"+e).then(function(e){return e})}},{key:"add",value:function(e){return a.a.post("/zebedee/teams/"+e).then(function(e){return e})}},{key:"remove",value:function(e){return a.a.delete("/zebedee/teams/"+e).then(function(e){return e})}},{key:"addMember",value:function(e,t){return a.a.post("/zebedee/teams/"+e+"?email="+t).then(function(e){return e})}},{key:"removeMember",value:function(e,t){return a.a.delete("/zebedee/teams/"+e+"?email="+t).then(function(e){return e})}}]),e}();t.a=o},,,,,function(e,t,n){var r;!function(a){"use strict";function i(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function o(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var a=(t-n)/6048e5;return 1+Math.floor(a)}function s(e){var t=e.getDay();return 0===t&&(t=7),t}function l(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}var u=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g;return function(r,a,c,p){if(1!==arguments.length||"string"!==l(r)||/\d/.test(r)||(a=r,r=void 0),r=r||new Date,r instanceof Date||(r=new Date(r)),isNaN(r))throw TypeError("Invalid date");a=String(u.masks[a]||a||u.masks.default);var d=a.slice(0,4);"UTC:"!==d&&"GMT:"!==d||(a=a.slice(4),c=!0,"GMT:"===d&&(p=!0));var f=c?"getUTC":"get",h=r[f+"Date"](),m=r[f+"Day"](),g=r[f+"Month"](),v=r[f+"FullYear"](),y=r[f+"Hours"](),b=r[f+"Minutes"](),w=r[f+"Seconds"](),E=r[f+"Milliseconds"](),_=c?0:r.getTimezoneOffset(),C=o(r),k=s(r),S={d:h,dd:i(h),ddd:u.i18n.dayNames[m],dddd:u.i18n.dayNames[m+7],m:g+1,mm:i(g+1),mmm:u.i18n.monthNames[g],mmmm:u.i18n.monthNames[g+12],yy:String(v).slice(2),yyyy:v,h:y%12||12,hh:i(y%12||12),H:y,HH:i(y),M:b,MM:i(b),s:w,ss:i(w),l:i(E,3),L:i(Math.round(E/10)),t:y<12?"a":"p",tt:y<12?"am":"pm",T:y<12?"A":"P",TT:y<12?"AM":"PM",Z:p?"GMT":c?"UTC":(String(r).match(t)||[""]).pop().replace(n,""),o:(_>0?"-":"+")+i(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:["th","st","nd","rd"][h%10>3?0:(h%100-h%10!=10)*h%10],W:C,N:k};return a.replace(e,function(e){return e in S?S[e]:e.slice(1,e.length-1)})}}();u.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},u.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},void 0!==(r=function(){return u}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.statesAreEqual=t.createLocation=t.createQuery=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(33),s=r(o),l=n(88),u=(r(l),n(85)),c=n(188),p=(t.createQuery=function(e){return i(Object.create(null),e)},t.createLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.POP,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="string"==typeof e?(0,u.parsePath)(e):e;return{pathname:r.pathname||"/",search:r.search||"",hash:r.hash||"",state:r.state,action:t,key:n}},function(e){return"[object Date]"===Object.prototype.toString.call(e)}),d=t.statesAreEqual=function e(t,n){if(t===n)return!0;var r=void 0===t?"undefined":a(t);if(r!==(void 0===n?"undefined":a(n)))return!1;if("function"===r&&(0,s.default)(!1),"object"===r){if(p(t)&&p(n)&&(0,s.default)(!1),!Array.isArray(t)){var i=Object.keys(t),o=Object.keys(n);return i.length===o.length&&i.every(function(r){return e(t[r],n[r])})}return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])})}return!1};t.locationsAreEqual=function(e,t){return e.key===t.key&&e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&d(e.state,t.state)}},function(e,t,n){(function(n,r,a){var i,o;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){function s(){}function l(e){return e}function u(e){return!!e}function c(e){return!e}function p(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function d(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function f(e){return V(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function h(e,t){for(var n=-1,r=e.length;++n<r;)t(e[n],n,e)}function m(e,t){for(var n=-1,r=e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function g(e){return m(Array(e),function(e,t){return t})}function v(e,t,n){return h(e,function(e,r,a){n=t(n,e,r,a)}),n}function y(e,t){h(z(e),function(n){t(e[n],n)})}function b(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function w(e){var t,n,r=-1;return f(e)?(t=e.length,function(){return r++,r<t?r:null}):(n=z(e),t=n.length,function(){return r++,r<t?n[r]:null})}function E(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),a=0;a<n;a++)r[a]=arguments[a+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r)}}}function _(e){return function(t,n,r){return e(t,r)}}function C(e){return function(t,n,r){r=d(r||s),t=t||[];var a=w(t);if(e<=0)return r(null);var i=!1,o=0,l=!1;!function s(){if(i&&o<=0)return r(null);for(;o<e&&!l;){var u=a();if(null===u)return i=!0,void(o<=0&&r(null));o+=1,n(t[u],u,p(function(e){o-=1,e?(r(e),l=!0):s()}))}}()}}function k(e){return function(t,n,r){return e(q.eachOf,t,n,r)}}function S(e){return function(t,n,r,a){return e(C(n),t,r,a)}}function D(e){return function(t,n,r){return e(q.eachOfSeries,t,n,r)}}function O(e,t,n,r){r=d(r||s),t=t||[];var a=f(t)?[]:{};e(t,function(e,t,r){n(e,function(e,n){a[t]=n,r(e)})},function(e){r(e,a)})}function T(e,t,n,r){var a=[];e(t,function(e,t,r){n(e,function(n){n&&a.push({index:t,value:e}),r()})},function(){r(m(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function R(e,t,n,r){T(e,t,function(e,t){n(e,function(e){t(!e)})},r)}function P(e,t,n){return function(r,a,i,o){function s(){o&&o(n(!1,void 0))}function l(e,r,a){if(!o)return a();i(e,function(r){o&&t(r)&&(o(n(!0,e)),o=i=!1),a()})}arguments.length>3?e(r,a,l,s):(o=i,i=a,e(r,l,s))}}function x(e,t){return t}function N(e,t,n){n=n||s;var r=f(t)?[]:{};e(t,function(e,t,n){e(E(function(e,a){a.length<=1&&(a=a[0]),r[t]=a,n(e)}))},function(e){n(e,r)})}function I(e,t,n,r){var a=[];e(t,function(e,t,r){n(e,function(e,t){a=a.concat(t||[]),r(e)})},function(e){r(e,a)})}function A(e,t,n){function r(e,t,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(e.started=!0,V(t)||(t=[t]),0===t.length&&e.idle())return q.setImmediate(function(){e.drain()});h(t,function(t){var a={data:t,callback:r||s};n?e.tasks.unshift(a):e.tasks.push(a),e.tasks.length===e.concurrency&&e.saturated()}),q.setImmediate(e.process)}function a(e,t){return function(){i-=1;var n=!1,r=arguments;h(t,function(e){h(o,function(t,r){t!==e||n||(o.splice(r,1),n=!0)}),e.callback.apply(e,r)}),e.tasks.length+i===0&&e.drain(),e.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,o=[],l={tasks:[],concurrency:t,payload:n,saturated:s,empty:s,drain:s,started:!1,paused:!1,push:function(e,t){r(l,e,!1,t)},kill:function(){l.drain=s,l.tasks=[]},unshift:function(e,t){r(l,e,!0,t)},process:function(){for(;!l.paused&&i<l.concurrency&&l.tasks.length;){var t=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),n=m(t,function(e){return e.data});0===l.tasks.length&&l.empty(),i+=1,o.push(t[0]);var r=p(a(l,t));e(n,r)}},length:function(){return l.tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return l.tasks.length+i===0},pause:function(){l.paused=!0},resume:function(){if(!1!==l.paused){l.paused=!1;for(var e=Math.min(l.concurrency,l.tasks.length),t=1;t<=e;t++)q.setImmediate(l.process)}}};return l}function j(e){return E(function(t,n){t.apply(null,n.concat([E(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&h(n,function(t){console[e](t)}))})]))})}function M(e){return function(t,n,r){e(g(t),n,r)}}function L(e){return E(function(t,n){var r=E(function(n){var r=this,a=n.pop();return e(t,function(e,t,a){e.apply(r,n.concat([a]))},a)});return n.length?r.apply(this,n):r})}function U(e){return E(function(t){var n=t.pop();t.push(function(){var e=arguments;r?q.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var r=!0;e.apply(this,t),r=!1})}var F,q={},B="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=B&&(F=B.async),q.noConflict=function(){return B.async=F,q};var H=Object.prototype.toString,V=Array.isArray||function(e){return"[object Array]"===H.call(e)},W=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},z=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},Y="function"==typeof r&&r,J=Y?function(e){Y(e)}:function(e){setTimeout(e,0)};"object"==typeof a&&"function"==typeof a.nextTick?q.nextTick=a.nextTick:q.nextTick=J,q.setImmediate=Y?J:q.nextTick,q.forEach=q.each=function(e,t,n){return q.eachOf(e,_(t),n)},q.forEachSeries=q.eachSeries=function(e,t,n){return q.eachOfSeries(e,_(t),n)},q.forEachLimit=q.eachLimit=function(e,t,n,r){return C(t)(e,_(n),r)},q.forEachOf=q.eachOf=function(e,t,n){function r(e){o--,e?n(e):null===a&&o<=0&&n(null)}n=d(n||s),e=e||[];for(var a,i=w(e),o=0;null!=(a=i());)o+=1,t(e[a],a,p(r));0===o&&n(null)},q.forEachOfSeries=q.eachOfSeries=function(e,t,n){function r(){var o=!0;if(null===i)return n(null);t(e[i],i,p(function(e){if(e)n(e);else{if(null===(i=a()))return n(null);o?q.setImmediate(r):r()}})),o=!1}n=d(n||s),e=e||[];var a=w(e),i=a();r()},q.forEachOfLimit=q.eachOfLimit=function(e,t,n,r){C(t)(e,n,r)},q.map=k(O),q.mapSeries=D(O),q.mapLimit=S(O),q.inject=q.foldl=q.reduce=function(e,t,n,r){q.eachOfSeries(e,function(e,r,a){n(t,e,function(e,n){t=n,a(e)})},function(e){r(e,t)})},q.foldr=q.reduceRight=function(e,t,n,r){var a=m(e,l).reverse();q.reduce(a,t,n,r)},q.transform=function(e,t,n,r){3===arguments.length&&(r=n,n=t,t=V(e)?[]:{}),q.eachOf(e,function(e,r,a){n(t,e,r,a)},function(e){r(e,t)})},q.select=q.filter=k(T),q.selectLimit=q.filterLimit=S(T),q.selectSeries=q.filterSeries=D(T),q.reject=k(R),q.rejectLimit=S(R),q.rejectSeries=D(R),q.any=q.some=P(q.eachOf,u,l),q.someLimit=P(q.eachOfLimit,u,l),q.all=q.every=P(q.eachOf,c,c),q.everyLimit=P(q.eachOfLimit,c,c),q.detect=P(q.eachOf,l,x),q.detectSeries=P(q.eachOfSeries,l,x),q.detectLimit=P(q.eachOfLimit,l,x),q.sortBy=function(e,t,n){function r(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}q.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);n(null,m(t.sort(r),function(e){return e.value}))})},q.auto=function(e,t,n){function r(e){f.unshift(e)}function a(e){var t=b(f,e);t>=0&&f.splice(t,1)}function i(){l--,h(f.slice(0),function(e){e()})}"function"==typeof arguments[1]&&(n=t,t=null),n=d(n||s);var o=z(e),l=o.length;if(!l)return n(null);t||(t=l);var u={},c=0,p=!1,f=[];r(function(){l||n(null,u)}),h(o,function(o){function s(){return c<t&&v(m,function(e,t){return e&&u.hasOwnProperty(t)},!0)&&!u.hasOwnProperty(o)}function l(){s()&&(c++,a(l),f[f.length-1](h,u))}if(!p){for(var d,f=V(e[o])?e[o]:[e[o]],h=E(function(e,t){if(c--,t.length<=1&&(t=t[0]),e){var r={};y(u,function(e,t){r[t]=e}),r[o]=t,p=!0,n(e,r)}else u[o]=t,q.setImmediate(i)}),m=f.slice(0,f.length-1),g=m.length;g--;){if(!(d=e[m[g]]))throw new Error("Has nonexistent dependency in "+m.join(", "));if(V(d)&&b(d,o)>=0)throw new Error("Has cyclic dependencies")}s()?(c++,f[f.length-1](h,u)):r(l)}})},q.retry=function(e,t,n){function r(e,t){for(;s.times;){var n=!(s.times-=1);o.push(function(e,n){return function(r){e(function(e,t){r(!e||n,{err:e,result:t})},t)}}(s.task,n)),!n&&s.interval>0&&o.push(function(e){return function(t){setTimeout(function(){t(null)},e)}}(s.interval))}q.series(o,function(t,n){n=n[n.length-1],(e||s.callback)(n.err,n.result)})}var a=5,i=0,o=[],s={times:a,interval:i},l=arguments.length;if(l<1||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return l<=2&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&function(e,t){if("number"==typeof t)e.times=parseInt(t,10)||a;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||a,e.interval=parseInt(t.interval,10)||i}}(s,e),s.callback=n,s.task=t,s.callback?r():r},q.waterfall=function(e,t){function n(e){return E(function(r,a){if(r)t.apply(null,[r].concat(a));else{var i=e.next();i?a.push(n(i)):a.push(t),U(e).apply(null,a)}})}if(t=d(t||s),!V(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();n(q.iterator(e))()},q.parallel=function(e,t){N(q.eachOf,e,t)},q.parallelLimit=function(e,t,n){N(C(t),e,n)},q.series=function(e,t){N(q.eachOfSeries,e,t)},q.iterator=function(e){function t(n){function r(){return e.length&&e[n].apply(null,arguments),r.next()}return r.next=function(){return n<e.length-1?t(n+1):null},r}return t(0)},q.apply=E(function(e,t){return E(function(n){return e.apply(null,t.concat(n))})}),q.concat=k(I),q.concatSeries=D(I),q.whilst=function(e,t,n){if(n=n||s,e()){var r=E(function(a,i){a?n(a):e.apply(this,i)?t(r):n.apply(null,[null].concat(i))});t(r)}else n(null)},q.doWhilst=function(e,t,n){var r=0;return q.whilst(function(){return++r<=1||t.apply(this,arguments)},e,n)},q.until=function(e,t,n){return q.whilst(function(){return!e.apply(this,arguments)},t,n)},q.doUntil=function(e,t,n){return q.doWhilst(e,function(){return!t.apply(this,arguments)},n)},q.during=function(e,t,n){n=n||s;var r=E(function(t,r){t?n(t):(r.push(a),e.apply(this,r))}),a=function(e,a){e?n(e):a?t(r):n(null)};e(a)},q.doDuring=function(e,t,n){var r=0;q.during(function(e){r++<1?e(null,!0):t.apply(this,arguments)},e,n)},q.queue=function(e,t){return A(function(t,n){e(t[0],n)},t,1)},q.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}function r(e,t,n){for(var r=-1,a=e.length-1;r<a;){var i=r+(a-r+1>>>1);n(t,e[i])>=0?r=i:a=i-1}return r}function a(e,t,a,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(e.started=!0,V(t)||(t=[t]),0===t.length)return q.setImmediate(function(){e.drain()});h(t,function(t){var o={data:t,priority:a,callback:"function"==typeof i?i:s};e.tasks.splice(r(e.tasks,o,n)+1,0,o),e.tasks.length===e.concurrency&&e.saturated(),q.setImmediate(e.process)})}var i=q.queue(e,t);return i.push=function(e,t,n){a(i,e,t,n)},delete i.unshift,i},q.cargo=function(e,t){return A(e,1,t)},q.log=j("log"),q.dir=j("dir"),q.memoize=function(e,t){var n={},r={},a=Object.prototype.hasOwnProperty;t=t||l;var i=E(function(i){var o=i.pop(),s=t.apply(null,i);a.call(n,s)?q.setImmediate(function(){o.apply(null,n[s])}):a.call(r,s)?r[s].push(o):(r[s]=[o],e.apply(null,i.concat([E(function(e){n[s]=e;var t=r[s];delete r[s];for(var a=0,i=t.length;a<i;a++)t[a].apply(null,e)})])))});return i.memo=n,i.unmemoized=e,i},q.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},q.times=M(q.map),q.timesSeries=M(q.mapSeries),q.timesLimit=function(e,t,n,r){return q.mapLimit(g(e),t,n,r)},q.seq=function(){var e=arguments;return E(function(t){var n=this,r=t[t.length-1];"function"==typeof r?t.pop():r=s,q.reduce(e,t,function(e,t,r){t.apply(n,e.concat([E(function(e,t){r(e,t)})]))},function(e,t){r.apply(n,[e].concat(t))})})},q.compose=function(){return q.seq.apply(null,Array.prototype.reverse.call(arguments))},q.applyEach=L(q.eachOf),q.applyEachSeries=L(q.eachOfSeries),q.forever=function(e,t){function n(e){if(e)return r(e);a(n)}var r=p(t||s),a=U(e);n()},q.ensureAsync=U,q.constant=E(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),q.wrapSync=q.asyncify=function(e){return E(function(t){var n,r=t.pop();try{n=e.apply(this,t)}catch(e){return r(e)}W(n)&&"function"==typeof n.then?n.then(function(e){r(null,e)}).catch(function(e){r(e.message?e:new Error(e))}):r(null,n)})},"object"==typeof e&&e.exports?e.exports=q:(i=[],void 0!==(o=function(){return q}.apply(t,i))&&(e.exports=o))}()}).call(t,n(65),n(1149).setImmediate,n(59))},function(e,t,n){"use strict";function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){for(var t="",n=[],a=[],i=void 0,o=0,s=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)|\\\(|\\\)/g;i=s.exec(e);)i.index!==o&&(a.push(e.slice(o,i.index)),t+=r(e.slice(o,i.index))),i[1]?(t+="([^/]+)",n.push(i[1])):"**"===i[0]?(t+="(.*)",n.push("splat")):"*"===i[0]?(t+="(.*?)",n.push("splat")):"("===i[0]?t+="(?:":")"===i[0]?t+=")?":"\\("===i[0]?t+="\\(":"\\)"===i[0]&&(t+="\\)"),a.push(i[0]),o=s.lastIndex;return o!==e.length&&(a.push(e.slice(o,e.length)),t+=r(e.slice(o,e.length))),{pattern:e,regexpSource:t,paramNames:n,tokens:a}}function i(e){return p[e]||(p[e]=a(e)),p[e]}function o(e,t){"/"!==e.charAt(0)&&(e="/"+e);var n=i(e),r=n.regexpSource,a=n.paramNames,o=n.tokens;"/"!==e.charAt(e.length-1)&&(r+="/?"),"*"===o[o.length-1]&&(r+="$");var s=t.match(new RegExp("^"+r,"i"));if(null==s)return null;var l=s[0],u=t.substr(l.length);if(u){if("/"!==l.charAt(l.length-1))return null;u="/"+u}return{remainingPathname:u,paramNames:a,paramValues:s.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}function s(e){return i(e).paramNames}function l(e,t){t=t||{};for(var n=i(e),r=n.tokens,a=0,o="",s=0,l=[],u=void 0,p=void 0,d=void 0,f=0,h=r.length;f<h;++f)if("*"===(u=r[f])||"**"===u)d=Array.isArray(t.splat)?t.splat[s++]:t.splat,null!=d||a>0||c()(!1),null!=d&&(o+=encodeURI(d));else if("("===u)l[a]="",a+=1;else if(")"===u){var m=l.pop();a-=1,a?l[a-1]+=m:o+=m}else if("\\("===u)o+="(";else if("\\)"===u)o+=")";else if(":"===u.charAt(0))if(p=u.substring(1),d=t[p],null!=d||a>0||c()(!1),null==d){if(a){l[a-1]="";for(var g=r.indexOf(u),v=r.slice(g,r.length),y=-1,b=0;b<v.length;b++)if(")"==v[b]){y=b;break}y>0||c()(!1),f=g+y-1}}else a?l[a-1]+=encodeURIComponent(d):o+=encodeURIComponent(d);else a?l[a-1]+=u:o+=u;return a<=0||c()(!1),o.replace(/\/+/g,"/")}t.b=o,t.a=s,t.c=l;var u=n(33),c=n.n(u),p=Object.create(null)},function(e,t,n){"use strict";var r=n(88);n.n(r)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(648),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={radioData:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,value:u.a.string.isRequired,label:u.a.string.isRequired})).isRequired,legend:u.a.string,groupName:u.a.string.isRequired,onChange:u.a.func,selectedValue:u.a.string,inline:u.a.bool,disabled:u.a.bool},h=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=n.handleChange.bind(n),n}return i(t,e),d(t,[{key:"handleChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.radioData,n=this.props.groupName,r=this.props.selectedValue;return s.a.createElement("fieldset",{className:"fieldset"},this.props.legend?s.a.createElement("legend",{className:"fieldset__legend"},this.props.legend):"",t.map(function(t,a){return s.a.createElement(c.a,p({inline:e.props.inline,key:a},t,{group:n,onChange:e.handleChange,checked:r===t.value,disabled:e.props.disabled}))}))}}]),t}(o.Component);t.a=h,h.propTypes=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return a(e,null,[{key:"isAuthenticated",value:function(e){return e.isAuthenticated}},{key:"isViewer",value:function(e){return"VIEWER"==e.userType}},{key:"isAdminOrEditor",value:function(e){return"ADMIN"==e.userType||"EDITOR"==e.userType}},{key:"isAdmin",value:function(e){return"ADMIN"===e.userType}},{key:"canViewCollectionsDetails",value:function(e){return"ADMIN"==e.userType||"EDITOR"==e.userType}}]),e}();t.a=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(125),p=n.n(c),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={children:u.a.node,created:u.a.string.isRequired,type:u.a.string.isRequired,location:u.a.string.isRequired,instanceID:u.a.string.isRequired,isFailure:u.a.bool},h=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),d(t,[{key:"render",value:function(){var e=new Date(this.props.created),t=p()(e,"HH:MM:ss.L, ddd d mmm yyyy");return s.a.createElement("div",{className:"log"+(this.props.isFailure?" log--failure":"")},s.a.createElement("div",{className:"log__type"+(this.props.isFailure?" log__type--failure":"")},this.props.type.replace("_"," ").toLowerCase()),s.a.createElement("div",{className:"log__date"},"Logged: ",t),s.a.createElement("div",null,"Location: ",this.props.location),s.a.createElement("div",null,"Session ID: ",this.props.instanceID),this.props.children)}}]),t}(o.Component);h.propTypes=f,t.a=h},,,,function(e,t,n){"use strict";var r=n(18),a={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=a},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}e.exports=r},function(e,t,n){"use strict";function r(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t,n){"use strict";var r=n(242);e.exports=function(e){return r(e,!1)}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var a={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(a).forEach(function(e){i.forEach(function(t){a[r(t,e)]=a[e]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:a,shorthandPropertyExpansions:o};e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(7),i=n(35),o=(n(5),function(){function e(t){r(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,n=this._arg;if(e&&t){e.length!==t.length&&a("24"),this._callbacks=null,this._contexts=null;for(var r=0;r<e.length;r++)e[r].call(t[r],n);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());e.exports=i.addPoolingTo(o)},function(e,t,n){"use strict";function r(e){return!!u.hasOwnProperty(e)||!l.hasOwnProperty(e)&&(s.test(e)?(u[e]=!0,!0):(l[e]=!0,!1))}function a(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var i=n(44),o=(n(9),n(21),n(304)),s=(n(6),new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$")),l={},u={},c={createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+o(e)},setAttributeForID:function(e,t){e.setAttribute(i.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){if(a(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t?r+'=""':r+"="+o(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+o(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+o(t):""},setValueForProperty:function(e,t,n){var r=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(r){var o=r.mutationMethod;if(o)o(e,n);else{if(a(r,n))return void this.deleteValueForProperty(e,t);if(r.mustUseProperty)e[r.propertyName]=n;else{var s=r.attributeName,l=r.attributeNamespace;l?e.setAttributeNS(l,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(i.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(r(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var a=n.propertyName;n.hasBooleanValue?e[a]=!1:e[a]=""}else e.removeAttribute(n.attributeName)}else i.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=c},function(e,t,n){"use strict";var r={hasCachedChildNodes:1};e.exports=r},function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=s.getValue(e);null!=t&&a(this,Boolean(e.multiple),t)}}function a(e,t,n){var r,a,i=l.getNodeFromInstance(e).options;if(t){for(r={},a=0;a<n.length;a++)r[""+n[a]]=!0;for(a=0;a<i.length;a++){var o=r.hasOwnProperty(i[a].value);i[a].selected!==o&&(i[a].selected=o)}}else{for(r=""+n,a=0;a<i.length;a++)if(i[a].value===r)return void(i[a].selected=!0);i.length&&(i[0].selected=!0)}}function i(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),u.asap(r,this),n}var o=n(8),s=n(108),l=n(9),u=n(27),c=(n(6),!1),p={getHostProps:function(e,t){return o({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=s.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:i.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||c||(c=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=s.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,a(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?a(e,Boolean(t.multiple),t.defaultValue):a(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=p},function(e,t,n){"use strict";var r,a={injectEmptyComponentFactory:function(e){r=e}},i={create:function(e){return r(e)}};i.injection=a,e.exports=i},function(e,t,n){"use strict";var r={logTopLevelRenders:!1};e.exports=r},function(e,t,n){"use strict";function r(e){return s||o("111",e.type),new s(e)}function a(e){return new l(e)}function i(e){return e instanceof l}var o=n(7),s=(n(5),null),l=null,u={injectGenericComponentClass:function(e){s=e},injectTextComponentClass:function(e){l=e}},c={createInternalComponent:r,createInstanceForText:a,isTextComponent:i,injection:u};e.exports=c},function(e,t,n){"use strict";function r(e){return i(document.documentElement,e)}var a=n(264),i=n(224),o=n(138),s=n(139),l={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,a=e.selectionRange;t!==n&&r(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,a),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=a.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if(void 0===r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r-n),i.select()}else a.setOffsets(e,t)}};e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function a(e){return e?e.nodeType===A?e.documentElement:e.firstChild:null}function i(e){return e.getAttribute&&e.getAttribute(x)||""}function o(e,t,n,r,a){var i;if(E.logTopLevelRenders){var o=e._currentElement.props.child,s=o.type;i="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(i)}var l=k.mountComponent(e,n,null,b(e,t),a,0);i&&console.timeEnd(i),e._renderedComponent._topLevelWrapper=e,F._mountImageIntoNode(l,t,e,r,n)}function s(e,t,n,r){var a=D.ReactReconcileTransaction.getPooled(!n&&w.useCreateElement);a.perform(o,null,e,t,a,n,r),D.ReactReconcileTransaction.release(a)}function l(e,t,n){for(k.unmountComponent(e,n),t.nodeType===A&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=a(e);if(t){var n=y.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==I&&e.nodeType!==A&&e.nodeType!==j)}function p(e){var t=a(e),n=t&&y.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function d(e){var t=p(e);return t?t._hostContainerInfo._topLevelWrapper:null}var f=n(7),h=n(43),m=n(44),g=n(46),v=n(76),y=(n(31),n(9)),b=n(258),w=n(260),E=n(148),_=n(62),C=(n(21),n(274)),k=n(45),S=n(111),D=n(27),O=n(72),T=n(159),R=(n(5),n(80)),P=n(117),x=(n(6),m.ID_ATTRIBUTE_NAME),N=m.ROOT_ATTRIBUTE_NAME,I=1,A=9,j=11,M={},L=1,U=function(){this.rootID=L++};U.prototype.isReactComponent={},U.prototype.render=function(){return this.props.child},U.isReactTopLevelWrapper=!0;var F={TopLevelWrapper:U,_instancesByReactRootID:M,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,a){return F.scrollMonitor(r,function(){S.enqueueElementInternal(e,t,n),a&&S.enqueueCallbackInternal(e,a)}),e},_renderNewRootComponent:function(e,t,n,r){c(t)||f("37"),v.ensureScrollValueMonitoring();var a=T(e,!1);D.batchedUpdates(s,a,t,n,r);var i=a._instance.rootID;return M[i]=a,a},renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&_.has(e)||f("38"),F._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){S.validateCallback(r,"ReactDOM.render"),g.isValidElement(t)||f("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var o,s=g.createElement(U,{child:t});if(e){var l=_.get(e);o=l._processChildContext(l._context)}else o=O;var c=d(n);if(c){var p=c._currentElement,h=p.props.child;if(P(h,t)){var m=c._renderedComponent.getPublicInstance(),v=r&&function(){r.call(m)};return F._updateRootComponent(c,s,o,n,v),m}F.unmountComponentAtNode(n)}var y=a(n),b=y&&!!i(y),w=u(n),E=b&&!c&&!w,C=F._renderNewRootComponent(s,n,E,o)._renderedComponent.getPublicInstance();return r&&r.call(C),C},render:function(e,t,n){return F._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)||f("40");var t=d(e);if(!t){u(e),1===e.nodeType&&e.hasAttribute(N);return!1}return delete M[t._instance.rootID],D.batchedUpdates(l,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,i,o){if(c(t)||f("41"),i){var s=a(t);if(C.canReuseMarkup(e,s))return void y.precacheNode(n,s);var l=s.getAttribute(C.CHECKSUM_ATTR_NAME);s.removeAttribute(C.CHECKSUM_ATTR_NAME);var u=s.outerHTML;s.setAttribute(C.CHECKSUM_ATTR_NAME,l);var p=e,d=r(p,u),m=" (client) "+p.substring(d-20,d+20)+"\n (server) "+u.substring(d-20,d+20);t.nodeType===A&&f("42",m)}if(t.nodeType===A&&f("43"),o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);h.insertTreeBefore(t,e,null)}else R(t,e),y.precacheNode(n,t.firstChild)}};e.exports=F},function(e,t,n){"use strict";var r=n(7),a=n(46),i=(n(5),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?i.EMPTY:a.isValidElement(e)?"function"==typeof e.type?i.COMPOSITE:i.HOST:void r("26",e)}});e.exports=i},function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};e.exports=r},function(e,t,n){"use strict";function r(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var a=n(7);n(5);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}e.exports=r},function(e,t,n){"use strict";function r(e){for(var t;(t=e._renderedNodeType)===a.COMPOSITE;)e=e._renderedComponent;return t===a.HOST?e._renderedComponent:t===a.EMPTY?null:void 0}var a=n(152);e.exports=r},function(e,t,n){"use strict";function r(){return!i&&a.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var a=n(17),i=null;e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function a(e){return e._wrapperState.valueTracker}function i(e,t){e._wrapperState.valueTracker=t}function o(e){e._wrapperState.valueTracker=null}function s(e){var t;return e&&(t=r(e)?""+e.checked:e.value),t}var l=n(9),u={_getTrackerFromNode:function(e){return a(l.getInstanceFromNode(e))},track:function(e){if(!a(e)){var t=l.getNodeFromInstance(e),n=r(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];t.hasOwnProperty(n)||"function"!=typeof s.get||"function"!=typeof s.set||(Object.defineProperty(t,n,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(e){u=""+e,s.set.call(this,e)}}),i(e,{getValue:function(){return u},setValue:function(e){u=""+e},stopTracking:function(){o(e),delete t[n]}}))}},updateValueIfChanged:function(e){if(!e)return!1;var t=a(e);if(!t)return u.track(e),!0;var n=t.getValue(),r=s(l.getNodeFromInstance(e));return r!==n&&(t.setValue(r),!0)},stopTracking:function(e){var t=a(e);t&&t.stopTracking()}};e.exports=u},function(e,t,n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function a(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var n;if(null===e||!1===e)n=u.create(i);else if("object"==typeof e){var s=e,l=s.type;if("function"!=typeof l&&"string"!=typeof l){var d="";d+=r(s._owner),o("130",null==l?l:typeof l,d)}"string"==typeof s.type?n=c.createInternalComponent(s):a(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new p(s)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):o("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var o=n(7),s=n(8),l=n(255),u=n(147),c=n(149),p=(n(319),n(5),n(6),function(e){this.construct(e)});s(p.prototype,l,{_instantiateReactComponent:i}),e.exports=i},function(e,t,n){"use strict";function r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!a[e.type]:"textarea"===t}var a={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=r},function(e,t,n){"use strict";var r=n(17),a=n(79),i=n(80),o=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){if(3===e.nodeType)return void(e.nodeValue=t);i(e,a(t))})),e.exports=o},function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?u.escape(e.key):t.toString(36)}function a(e,t,n,i){var d=typeof e;if("undefined"!==d&&"boolean"!==d||(e=null),null===e||"string"===d||"number"===d||"object"===d&&e.$$typeof===s)return n(i,e,""===t?c+r(e,0):t),1;var f,h,m=0,g=""===t?c:t+p;if(Array.isArray(e))for(var v=0;v<e.length;v++)f=e[v],h=g+r(f,v),m+=a(f,h,n,i);else{var y=l(e);if(y){var b,w=y.call(e);if(y!==e.entries)for(var E=0;!(b=w.next()).done;)f=b.value,h=g+r(f,E++),m+=a(f,h,n,i);else for(;!(b=w.next()).done;){var _=b.value;_&&(f=_[1],h=g+u.escape(_[0])+p+r(f,0),m+=a(f,h,n,i))}}else if("object"===d){var C="",k=String(e);o("31","[object Object]"===k?"object with keys {"+Object.keys(e).join(", ")+"}":k,C)}}return m}function i(e,t,n){return null==e?0:a(e,"",t,n)}var o=n(7),s=(n(31),n(270)),l=n(301),u=(n(5),n(107)),c=(n(6),"."),p=":";e.exports=i},function(e,t,n){"use strict";function r(e,t,n){if(e[t])return new Error("<"+n+'> should not have a "'+t+'" prop')}t.c=r,n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return l});var a=n(3),i=(n.n(a),n.i(a.shape)({listen:a.func.isRequired,push:a.func.isRequired,replace:a.func.isRequired,go:a.func.isRequired,goBack:a.func.isRequired,goForward:a.func.isRequired}),n.i(a.oneOfType)([a.func,a.string])),o=n.i(a.oneOfType)([i,a.object]),s=n.i(a.oneOfType)([a.object,a.element]),l=n.i(a.oneOfType)([s,n.i(a.arrayOf)(s)])},function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=u,this.updater=n||l}function a(e,t,n){this.props=e,this.context=t,this.refs=u,this.updater=n||l}function i(){}var o=n(64),s=n(8),l=n(167),u=(n(168),n(72));n(5),n(320);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&o("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};i.prototype=r.prototype,a.prototype=new i,a.prototype.constructor=a,s(a.prototype,r.prototype),a.prototype.isPureReactComponent=!0,e.exports={Component:r,PureComponent:a}},function(e,t,n){"use strict";function r(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var a=t.call(e);return r.test(a)}catch(e){return!1}}function a(e){var t=u(e);if(t){var n=t.childIDs;c(e),n.forEach(a)}}function i(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function o(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function s(e){var t,n=S.getDisplayName(e),r=S.getElement(e),a=S.getOwnerID(e);return a&&(t=S.getDisplayName(a)),i(n,r&&r._source,t)}var l,u,c,p,d,f,h,m=n(64),g=n(31),v=(n(5),n(6),"function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys));if(v){var y=new Map,b=new Set;l=function(e,t){y.set(e,t)},u=function(e){return y.get(e)},c=function(e){y.delete(e)},p=function(){return Array.from(y.keys())},d=function(e){b.add(e)},f=function(e){b.delete(e)},h=function(){return Array.from(b.keys())}}else{var w={},E={},_=function(e){return"."+e},C=function(e){return parseInt(e.substr(1),10)};l=function(e,t){var n=_(e);w[n]=t},u=function(e){var t=_(e);return w[t]},c=function(e){var t=_(e);delete w[t]},p=function(){return Object.keys(w).map(C)},d=function(e){var t=_(e);E[t]=!0},f=function(e){var t=_(e);delete E[t]},h=function(){return Object.keys(E).map(C)}}var k=[],S={onSetChildren:function(e,t){var n=u(e);n||m("144"),n.childIDs=t;for(var r=0;r<t.length;r++){var a=t[r],i=u(a);i||m("140"),null==i.childIDs&&"object"==typeof i.element&&null!=i.element&&m("141"),i.isMounted||m("71"),null==i.parentID&&(i.parentID=e),i.parentID!==e&&m("142",a,i.parentID,e)}},onBeforeMountComponent:function(e,t,n){l(e,{element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0})},onBeforeUpdateComponent:function(e,t){var n=u(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=u(e);t||m("144"),t.isMounted=!0,0===t.parentID&&d(e)},onUpdateComponent:function(e){var t=u(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=u(e);if(t){t.isMounted=!1;0===t.parentID&&f(e)}k.push(e)},purgeUnmountedComponents:function(){if(!S._preventPurging){for(var e=0;e<k.length;e++){a(k[e])}k.length=0}},isMounted:function(e){var t=u(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=o(e),r=e._owner;t+=i(n,e._source,r&&r.getName())}var a=g.current,s=a&&a._debugID;return t+=S.getStackAddendumByID(s)},getStackAddendumByID:function(e){for(var t="";e;)t+=s(e),e=S.getParentID(e);return t},getChildIDs:function(e){var t=u(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=S.getElement(e);return t?o(t):null},getElement:function(e){var t=u(e);return t?t.element:null},getOwnerID:function(e){var t=S.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=u(e);return t?t.parentID:null},getSource:function(e){var t=u(e),n=t?t.element:null;return null!=n?n._source:null},getText:function(e){var t=S.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=u(e);return t?t.updateCount:0},getRootIDs:h,getRegisteredIDs:p,pushNonStandardWarningStack:function(e,t){if("function"==typeof console.reactStack){var n=[],r=g.current,a=r&&r._debugID;try{for(e&&n.push({name:a?S.getDisplayName(a):null,fileName:t?t.fileName:null,lineNumber:t?t.lineNumber:null});a;){var i=S.getElement(a),o=S.getParentID(a),s=S.getOwnerID(a),l=s?S.getDisplayName(s):null,u=i&&i._source;n.push({name:l,fileName:u?u.fileName:null,lineNumber:u?u.lineNumber:null}),a=o}}catch(e){}console.reactStack(n)}},popNonStandardWarningStack:function(){"function"==typeof console.reactStackEnd&&console.reactStackEnd()}};e.exports=S},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=r},function(e,t,n){"use strict";var r=(n(6),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}});e.exports=r},function(e,t,n){"use strict";var r=!1;e.exports=r},function(e,t,n){"use strict";e.exports=n(256)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(649),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={columns:u.a.arrayOf(u.a.shape({heading:u.a.string.isRequired,width:u.a.string.isRequired})).isRequired,rows:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,columnValues:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.element])),returnValue:u.a.object.isRequired})).isRequired,activeRowID:u.a.string,handleItemClick:u.a.func.isRequired,isUpdating:u.a.bool.isRequired},h=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindItemClick=n.bindItemClick.bind(n),n}return i(t,e),d(t,[{key:"bindItemClick",value:function(e){this.props.handleItemClick(e)}},{key:"renderList",value:function(){var e=this;return s.a.createElement("ul",{className:"selectable-box__list"},this.props.rows.map(function(t){return s.a.createElement(c.a,p({columns:e.props.columns,key:t.id},t,{isSelected:e.props.activeRowID===t.id,handleClick:e.bindItemClick}))}))}},{key:"renderHeadings",value:function(){var e=this;return s.a.createElement("div",{className:"grid"},this.props.columns.map(function(t,n){var r=e.props.columns.length===n+1;return s.a.createElement("h2",{key:"selectable-box__heading-"+n,className:"selectable-box__heading grid__col-"+t.width+" grid__cell"},t.heading,e.props.isUpdating&&r?s.a.createElement("span",{className:"selectable-box__status pull-right loader"}):"")}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"selectable-box"},this.renderHeadings(),this.renderList())}}]),t}(o.Component);t.a=h,h.propTypes=f},function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return m});var r=n(323),a=n(30),i=n(14),o=(n.n(i),n(1139)),s=n.n(o),l=n(1138),u=(n.n(l),n(659)),c=n(660),p=a.f,d=n.i(i.routerMiddleware)(p),f=n.i(l.composeWithDevTools)(n.i(r.applyMiddleware)(s.a,d,u.a)),h=n.i(r.createStore)(n.i(r.combineReducers)({state:c.a,routing:i.routerReducer}),f),m=n.i(i.syncHistoryWithStore)(p,h)},,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e}function a(e,t,n){function a(e,t){var n=y.hasOwnProperty(t)?y[t]:null;_.hasOwnProperty(t)&&s("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&s("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function u(e,n){if(n){s("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;n.hasOwnProperty(l)&&b.mixins(e,n.mixins);for(var o in n)if(n.hasOwnProperty(o)&&o!==l){var u=n[o],c=r.hasOwnProperty(o);if(a(c,o),b.hasOwnProperty(o))b[o](e,u);else{var p=y.hasOwnProperty(o),h="function"==typeof u,m=h&&!p&&!c&&!1!==n.autobind;if(m)i.push(o,u),r[o]=u;else if(c){var g=y[o];s(p&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,o),"DEFINE_MANY_MERGED"===g?r[o]=d(r[o],u):"DEFINE_MANY"===g&&(r[o]=f(r[o],u))}else r[o]=u}}}else;}function c(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var a=n in b;s(!a,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in e;s(!i,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=r}}}function p(e,t){s(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(s(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function d(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var a={};return p(a,n),p(a,r),a}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];e[r]=h(e,a)}}function g(e){var t=r(function(e,r,a){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=r,this.refs=o,this.updater=a||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;s("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new C,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(u.bind(null,t)),u(t,w),u(t,e),u(t,E),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),s(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var a in y)t.prototype[a]||(t.prototype[a]=null);return t}var v=[],y={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)u(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=i({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=i({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=d(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=i({},e.propTypes,t)},statics:function(e,t){c(e,t)},autobind:function(){}},w={componentDidMount:function(){this.__isMounted=!0}},E={componentWillUnmount:function(){this.__isMounted=!1}},_={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},C=function(){};return i(C.prototype,e.prototype,_),g}var i=n(8),o=n(72),s=n(5),l="mixins";e.exports=a},,function(e,t,n){"use strict";t.__esModule=!0;t.PUSH="PUSH",t.REPLACE="REPLACE",t.POP="POP"},function(e,t,n){"use strict";t.__esModule=!0;t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.supportsPopstateOnHashchange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={isVisible:u.a.bool,isAnimatable:u.a.bool,handleTransitionEnd:u.a.func,children:u.a.node},d={handleTransitionEnd:function(){}},f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasFinishedAnimation:!1},n.handleTransitionEnd=n.handleTransitionEnd.bind(n),n}return i(t,e),c(t,[{key:"handleTransitionEnd",value:function(){this.props.handleTransitionEnd(),this.setState({hasFinishedAnimation:!0})}},{key:"addAnimationClasses",value:function(){var e=[];return this.props.isAnimatable&&e.push("animatable"),this.props.isVisible&&e.push("visible"),this.state.hasFinishedAnimation&&e.push("animation-finished"),e.join(" ")}},{key:"render",value:function(){return s.a.createElement("div",{className:"drawer "+this.addAnimationClasses(),onTransitionEnd:this.handleTransitionEnd},this.props.children)}}]),t}(o.Component);f.propTypes=p,f.defaultProps=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(657),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={rows:u.a.arrayOf(u.a.shape({title:u.a.string.isRequired,id:u.a.string.isRequired,url:u.a.string.isRequired,details:u.a.arrayOf(u.a.string)})).isRequired,showLoadingState:u.a.bool},h=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),d(t,[{key:"render",value:function(){var e=this.props.showLoadingState,t=this.props.rows.length;return s.a.createElement("ul",{className:"list list--neutral simple-select-list"},t?this.props.rows.map(function(e){return s.a.createElement(c.a,p({key:e.id},e))}):null,e&&s.a.createElement("span",{className:"margin-top--1 loader loader--dark"}),t||e?"":s.a.createElement("p",null,"Nothing to show"))}}]),t}(o.Component);t.a=h,h.propTypes=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(54),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"create",value:function(e){var t={recipe:e};return a.a.post("/import/jobs",t,!0).then(function(e){return e})}},{key:"addFile",value:function(e,t,n){var r={alias_name:t,url:n};return a.a.put("/import/jobs/"+e+"/files",r,!0).then(function(e){return e})}},{key:"updateStatus",value:function(e,t){return e?a.a.put("/import/jobs/"+e,{state:t},!0).then(function(e){return e}):(console.warn("No job ID given to update status for. Request cancelled"),Promise.reject())}},{key:"getAll",value:function(){return a.a.get("/import/jobs",!0).then(function(e){return e})}},{key:"getCompleted",value:function(){return a.a.get("/import/jobs?state=completed",!0).then(function(e){return e})}},{key:"get",value:function(e){return a.a.get("/import/jobs/"+e,!0).then(function(e){return e})}},{key:"getDimensions",value:function(e){return a.a.get("/dataset/instances/"+e,!0).then(function(e){return e.dimensions})}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(10),i=n(23),o=n(36),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return l(e,null,[{key:"collectionResponseToState",value:function(e){try{var t=this.publishState(e);return{id:e.id,name:e.name,publishDate:e.publishDate,status:{neutral:t.inProgress,warning:t.thrownError,success:t.completed,message:t.message},type:e.type,isForcedManualType:this.isForcedManualType(e),release:e.releaseUri,selectableBox:{firstColumn:e.name,secondColumn:this.publishDate(e)},canBeApproved:!1,canBeDeleted:!1,inProgress:e.inProgress,complete:e.complete,reviewed:e.reviewed,datasets:e.datasets,datasetVersions:e.datasetVersions,teams:e.teamsDetails?e.teamsDetails.map(function(e){return{id:e.id.toString(),name:e.name}}):[],deletes:e.pendingDeletes}}catch(e){var n={type:"warning",message:"Error whilst mapping list of collections to screen",isDismissable:!0,autoDismiss:3e3};return a.a.add(n),console.error("Error mapping collections to component state: ",e),i.a.event("Error mapping collections to component state",i.a.error(e)),!1}}},{key:"pagesToCollectionState",value:function(e){try{var t=this.collectionCanBeApproved(e),n=this.collectionCanBeDeleted(e),r=function(e){return e?e.map(function(e){var t={};try{t={lastEdit:{email:e.events&&e.events.length>0?e.events[0].email:"",date:e.events&&e.events.length>0?e.events[0].date:""},title:e.description.title,edition:e.description.edition||"",uri:e.uri,type:e.type}}catch(e){i.a.event("Error mapping a page to Florence's state",i.a.error(e)),console.error("Error mapping a page to Florence's state",e)}return t}):(i.a.event("Collections pages array (e.g. inProgress) wasn't set, had to hardcode a default value of null",i.a.warn()),null)},a=s({},e,{canBeApproved:t,canBeDeleted:n,inProgress:r(e.inProgress),complete:r(e.complete),reviewed:r(e.reviewed)}),o=this.datasetsToCollectionState(a);return s({},o,{canBeDeleted:this.collectionCanBeDeleted(o),canBeApproved:this.collectionCanBeApproved(o)})}catch(e){return i.a.event("Error mapping collection GET response to Florence's state",i.a.error(e)),console.error("Error mapping collection GET response to Florence's state",e),null}}},{key:"datasetsToCollectionState",value:function(e){try{var t=function(e){return{title:e.title,edition:e.edition,version:e.version,datasetID:e.id,id:e.id+"/editions/"+e.edition+"/versions/"+e.version,type:"dataset_version",uri:"/datasets/"+e.id+"/editions/"+e.edition+"/versions/"+e.version,lastEditedBy:e.lastEditedBy}},n=function(e){return{title:e.title,type:"dataset_details",id:e.id,uri:"/datasets/"+e.id,lastEditedBy:e.lastEditedBy}};return s({},e,function(){var r=e.inProgress||[],a=e.complete||[],i=e.reviewed||[];return e.datasetVersions&&e.datasetVersions.forEach(function(e){"InProgress"===e.state&&r.push(t(e)),"Complete"===e.state&&a.push(t(e)),"Reviewed"===e.state&&i.push(t(e))}),e.datasets&&e.datasets.forEach(function(e){"InProgress"===e.state&&r.push(n(e)),"Complete"===e.state&&a.push(n(e)),"Reviewed"===e.state&&i.push(n(e))}),{inProgress:r,complete:a,reviewed:i}}())}catch(e){return i.a.event("Error mapping collection datasets response to Florence's state",i.a.error(e)),console.error("Error mapping collection datasets response to Florence's state",e),null}}},{key:"isForcedManualType",value:function(e){return!(!e.publishDate||"manual"!==e.type)}},{key:"publishState",value:function(e){var t={inProgress:!1,thrownError:!1,completed:!1,notStarted:!1,message:""};try{switch(e.approvalStatus){case void 0:break;case"NOT_STARTED":t.notStarted=!0;break;case"IN_PROGRESS":t.inProgress=!0,t.message="preparing publish";break;case"COMPLETE":t.completed=!0;break;case"ERROR":t.thrownError=!0,t.message="error whilst preparing publish"}return t}catch(e){return console.error(e),null}}},{key:"publishDate",value:function(e){return e.publishDate&&"manual"===e.type?o.a.format(e.publishDate,"ddd, dd/mm/yyyy h:MMTT")+" [rolled back]":e.publishDate?o.a.format(e.publishDate,"ddd, dd/mm/yyyy h:MMTT"):e.publishDate?void 0:"[manual collection]"}},{key:"collectionCanBeApproved",value:function(e){return!!(e.inProgress&&e.complete&&e.reviewed&&e.deletes)&&(e.reviewed.length>=1&&0===e.inProgress.length&&0===e.complete.length||e.deletes.length>=1&&0===e.inProgress.length&&0===e.complete.length)}},{key:"collectionCanBeDeleted",value:function(e){return!!(e.inProgress&&e.complete&&e.reviewed&&e.deletes)&&(0===e.reviewed.length&&0===e.inProgress.length&&0===e.complete.length&&0===e.deletes.length)}},{key:"pagesExcludingPendingDeletedPages",value:function(e,t){if(e)return t&&0!==t.length?e.filter(function(e){return!t.includes(e.uri)}):e}}]),e}();t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={areDisabled:u.a.bool,includeSaveLabels:u.a.bool,reviewState:u.a.string,userEmail:u.a.string.isRequired,lastEditedBy:u.a.string,onSubmit:u.a.func,onApprove:u.a.func,notInCollectionYet:u.a.bool},d=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"renderSubmit",value:function(){return s.a.createElement("button",{id:"submit-for-review",type:"button",onClick:this.props.onSubmit,disabled:this.props.areDisabled,className:"btn btn--positive"},this.props.includeSaveLabels?"Save and submit for review":"Submit for review")}},{key:"renderApprove",value:function(){return s.a.createElement("button",{id:"mark-as-reviewed",type:"button",onClick:this.props.onApprove,disabled:this.props.areDisabled,className:"btn btn--positive"},this.props.includeSaveLabels?"Save and submit for approval":"Submit for approval")}},{key:"render",value:function(){return"reviewed"===this.props.reviewState?s.a.createElement("span",null):this.props.notInCollectionYet||"inProgress"===this.props.reviewState?this.renderSubmit():this.props.userEmail===this.props.lastEditedBy&&"complete"===this.props.reviewState?this.renderSubmit():this.props.userEmail!==this.props.lastEditedBy&&"complete"===this.props.reviewState?this.renderApprove():s.a.createElement("span",null)}}]),t}(o.Component);d.propTypes=p,t.a=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e.replace(a,function(e,t){return t.toUpperCase()})}var a=/-(.)/g;e.exports=r},function(e,t,n){"use strict";function r(e){return a(e.replace(i,"ms-"))}var a=n(222),i=/^-ms-/;e.exports=r},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!a(e)&&(a(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var a=n(232);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&o(!1),"number"!=typeof t&&o(!1),0===t||t-1 in e||o(!1),"function"==typeof e.callee&&o(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function a(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return a(e)?Array.isArray(e)?e.slice():r(e):[e]}var o=n(5);e.exports=i},function(e,t,n){"use strict";function r(e){var t=e.match(c);return t&&t[1].toLowerCase()}function a(e,t){var n=u;u||l(!1);var a=r(e),i=a&&s(a);if(i){n.innerHTML=i[1]+e+i[2];for(var c=i[0];c--;)n=n.lastChild}else n.innerHTML=e;var p=n.getElementsByTagName("script");p.length&&(t||l(!1),o(p).forEach(t));for(var d=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}var i=n(17),o=n(225),s=n(227),l=n(5),u=i.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=a},function(e,t,n){"use strict";function r(e){return o||i(!1),d.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||(o.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",s[e]=!o.firstChild),s[e]?d[e]:null}var a=n(17),i=n(5),o=a.canUseDOM?document.createElement("div"):null,s={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){d[e]=p,s[e]=!0}),e.exports=r},function(e,t,n){"use strict";function r(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(a,"-$1").toLowerCase()}var a=/([A-Z])/g;e.exports=r},function(e,t,n){"use strict";function r(e){return a(e).replace(i,"-ms-")}var a=n(229),i=/^ms-/;e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e){return a(e)&&3==e.nodeType}var a=n(231);e.exports=r},function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=r},function(e,t,n){"use strict";t.__esModule=!0,t.go=t.replaceLocation=t.pushLocation=t.startListener=t.getUserConfirmation=t.getCurrentLocation=void 0;var r=n(126),a=n(189),i=n(493),o=n(85),s=n(235),l=s.canUseDOM&&!(0,a.supportsPopstateOnHashchange)(),u=function(e){var t=e&&e.key;return(0,r.createLocation)({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:t?(0,i.readState)(t):void 0},void 0,t)},c=t.getCurrentLocation=function(){var e=void 0;try{e=window.history.state||{}}catch(t){e={}}return u(e)},p=(t.getUserConfirmation=function(e,t){return t(window.confirm(e))},t.startListener=function(e){var t=function(t){(0,a.isExtraneousPopstateEvent)(t)||e(u(t.state))};(0,a.addEventListener)(window,"popstate",t);var n=function(){return e(c())};return l&&(0,a.addEventListener)(window,"hashchange",n),function(){(0,a.removeEventListener)(window,"popstate",t),l&&(0,a.removeEventListener)(window,"hashchange",n)}},function(e,t){var n=e.state,r=e.key;void 0!==n&&(0,i.saveState)(r,n),t({key:r},(0,o.createPath)(e))});t.pushLocation=function(e){return p(e,function(e,t){return window.history.pushState(e,null,t)})},t.replaceLocation=function(e){return p(e,function(e,t){return window.history.replaceState(e,null,t)})},t.go=function(e){e&&window.history.go(e)}},function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1005),a=n(85),i=n(237),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(188),l=n(126),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getCurrentLocation,n=e.getUserConfirmation,i=e.pushLocation,u=e.replaceLocation,c=e.go,p=e.keyLength,d=void 0,f=void 0,h=[],m=[],g=[],v=function(){return f&&f.action===s.POP?g.indexOf(f.key):d?g.indexOf(d.key):-1},y=function(e){var t=v();d=e,d.action===s.PUSH?g=[].concat(g.slice(0,t+1),[d.key]):d.action===s.REPLACE&&(g[t]=d.key),m.forEach(function(e){return e(d)})},b=function(e){return h.push(e),function(){return h=h.filter(function(t){return t!==e})}},w=function(e){return m.push(e),function(){return m=m.filter(function(t){return t!==e})}},E=function(e,t){(0,r.loopAsync)(h.length,function(t,n,r){(0,o.default)(h[t],e,function(e){return null!=e?r(e):n()})},function(e){n&&"string"==typeof e?n(e,function(e){return t(!1!==e)}):t(!1!==e)})},_=function(e){d&&(0,l.locationsAreEqual)(d,e)||f&&(0,l.locationsAreEqual)(f,e)||(f=e,E(e,function(t){if(f===e)if(f=null,t){if(e.action===s.PUSH){var n=(0,a.createPath)(d),r=(0,a.createPath)(e);r===n&&(0,l.statesAreEqual)(d.state,e.state)&&(e.action=s.REPLACE)}e.action===s.POP?y(e):e.action===s.PUSH?!1!==i(e)&&y(e):e.action===s.REPLACE&&!1!==u(e)&&y(e)}else if(d&&e.action===s.POP){var o=g.indexOf(d.key),p=g.indexOf(e.key);-1!==o&&-1!==p&&c(o-p)}}))},C=function(e){return _(R(e,s.PUSH))},k=function(e){return _(R(e,s.REPLACE))},S=function(){return c(-1)},D=function(){return c(1)},O=function(){return Math.random().toString(36).substr(2,p||6)},T=function(e){return(0,a.createPath)(e)},R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O();return(0,l.createLocation)(e,t,n)};return{getCurrentLocation:t,listenBefore:b,listen:w,transitionTo:_,push:C,replace:k,go:c,goBack:S,goForward:D,createKey:O,createPath:a.createPath,createHref:T,createLocation:R}};t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var r=n(88),a=(function(e){e&&e.__esModule}(r),function(e,t,n){var r=e(t,n);e.length<2&&n(r)});t.default=a},function(e,t){function n(e){return!(!e||"object"!=typeof e||r(e))&&!Object.keys(e).length}var r=Array.isArray;e.exports=n},function(e,t,n){"use strict";function r(e){if(!n.i(o.a)(e)||n.i(a.a)(e)!=s)return!1;var t=n.i(i.a)(e);if(null===t)return!0;var r=p.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==d}var a=n(1015),i=n(1017),o=n(1022),s="[object Object]",l=Function.prototype,u=Object.prototype,c=l.toString,p=u.hasOwnProperty,d=c.call(Object);t.a=r},function(e,t,n){"use strict";function r(e,t,n,r,a){}e.exports=r},function(e,t,n){"use strict";var r=n(18),a=n(5),i=n(141);e.exports=function(){function e(e,t,n,r,o,s){s!==i&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";var r=n(18),a=n(5),i=n(6),o=n(8),s=n(141),l=n(240);e.exports=function(e,t){function n(e){var t=e&&(D&&e[D]||e[O]);if("function"==typeof t)return t}function u(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function c(e){this.message=e,this.stack=""}function p(e){function n(n,r,i,o,l,u,p){if(o=o||T,u=u||i,p!==s)if(t)a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[i]?n?new c(null===r[i]?"The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+l+" `"+u+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(r,i,o,l,u)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function d(e){function t(t,n,r,a,i,o){var s=t[n];if(_(s)!==e)return new c("Invalid "+a+" `"+i+"` of type `"+C(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return p(t)}function f(e){function t(t,n,r,a,i){if("function"!=typeof e)return new c("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o)){return new c("Invalid "+a+" `"+i+"` of type `"+_(o)+"` supplied to `"+r+"`, expected an array.")}for(var l=0;l<o.length;l++){var u=e(o,l,r,a,i+"["+l+"]",s);if(u instanceof Error)return u}return null}return p(t)}function h(e){function t(t,n,r,a,i){if(!(t[n]instanceof e)){var o=e.name||T;return new c("Invalid "+a+" `"+i+"` of type `"+S(t[n])+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}return null}return p(t)}function m(e){function t(t,n,r,a,i){for(var o=t[n],s=0;s<e.length;s++)if(u(o,e[s]))return null;return new c("Invalid "+a+" `"+i+"` of value `"+o+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?p(t):r.thatReturnsNull}function g(e){function t(t,n,r,a,i){if("function"!=typeof e)return new c("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o=t[n],l=_(o);if("object"!==l)return new c("Invalid "+a+" `"+i+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var u in o)if(o.hasOwnProperty(u)){var p=e(o,u,r,a,i+"."+u,s);if(p instanceof Error)return p}return null}return p(t)}function v(e){function t(t,n,r,a,i){for(var o=0;o<e.length;o++){if(null==(0,e[o])(t,n,r,a,i,s))return null}return new c("Invalid "+a+" `"+i+"` supplied to `"+r+"`.")}if(!Array.isArray(e))return r.thatReturnsNull;for(var n=0;n<e.length;n++){var a=e[n];if("function"!=typeof a)return i(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",k(a),n),r.thatReturnsNull}return p(t)}function y(e){function t(t,n,r,a,i){var o=t[n],l=_(o);if("object"!==l)return new c("Invalid "+a+" `"+i+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var p=e[u];if(p){var d=p(o,u,r,a,i+"."+u,s);if(d)return d}}return null}return p(t)}function b(e){function t(t,n,r,a,i){var l=t[n],u=_(l);if("object"!==u)return new c("Invalid "+a+" `"+i+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var p=o({},t[n],e);for(var d in p){var f=e[d];if(!f)return new c("Invalid "+a+" `"+i+"` key `"+d+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var h=f(l,d,r,a,i+"."+d,s);if(h)return h}return null}return p(t)}function w(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(w);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var a,i=r.call(t);if(r!==t.entries){for(;!(a=i.next()).done;)if(!w(a.value))return!1}else for(;!(a=i.next()).done;){var o=a.value;if(o&&!w(o[1]))return!1}return!0;default:return!1}}function E(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function _(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":E(t,e)?"symbol":t}function C(e){if(void 0===e||null===e)return""+e;var t=_(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function k(e){var t=C(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function S(e){return e.constructor&&e.constructor.name?e.constructor.name:T}var D="function"==typeof Symbol&&Symbol.iterator,O="@@iterator",T="<<anonymous>>",R={array:d("array"),bool:d("boolean"),func:d("function"),number:d("number"),object:d("object"),string:d("string"),symbol:d("symbol"),any:function(){return p(r.thatReturnsNull)}(),arrayOf:f,element:function(){function t(t,n,r,a,i){var o=t[n];if(!e(o)){return new c("Invalid "+a+" `"+i+"` of type `"+_(o)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return p(t)}(),instanceOf:h,node:function(){function e(e,t,n,r,a){return w(e[t])?null:new c("Invalid "+r+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")}return p(e)}(),objectOf:g,oneOf:m,oneOfType:v,shape:y,exact:b};return c.prototype=Error.prototype,R.checkPropTypes=l,R.PropTypes=R,R}},function(e,t,n){"use strict";var r={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};e.exports=r},function(e,t,n){"use strict";var r=n(9),a=n(138),i={focusDOMComponent:function(){a(r.getNodeFromInstance(this))}};e.exports=i},function(e,t,n){"use strict";function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function a(e){switch(e){case"topCompositionStart":return S.compositionStart;case"topCompositionEnd":return S.compositionEnd;case"topCompositionUpdate":return S.compositionUpdate}}function i(e,t){return"topKeyDown"===e&&t.keyCode===y}function o(e,t){switch(e){case"topKeyUp":return-1!==v.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==y;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function s(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function l(e,t,n,r){var l,u;if(b?l=a(e):O?o(e,n)&&(l=S.compositionEnd):i(e,n)&&(l=S.compositionStart),!l)return null;_&&(O||l!==S.compositionStart?l===S.compositionEnd&&O&&(u=O.getData()):O=h.getPooled(r));var c=m.getPooled(l,t,n,r);if(u)c.data=u;else{var p=s(n);null!==p&&(c.data=p)}return d.accumulateTwoPhaseDispatches(c),c}function u(e,t){switch(e){case"topCompositionEnd":return s(t);case"topKeyPress":return t.which!==C?null:(D=!0,k);case"topTextInput":var n=t.data;return n===k&&D?null:n;default:return null}}function c(e,t){if(O){if("topCompositionEnd"===e||!b&&o(e,t)){var n=O.getData();return h.release(O),O=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!r(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return _?null:t.data;default:return null}}function p(e,t,n,r){var a;if(!(a=E?u(e,n):c(e,n)))return null;var i=g.getPooled(S.beforeInput,t,n,r);return i.data=a,d.accumulateTwoPhaseDispatches(i),i}var d=n(61),f=n(17),h=n(251),m=n(288),g=n(291),v=[9,13,27,32],y=229,b=f.canUseDOM&&"CompositionEvent"in window,w=null;f.canUseDOM&&"documentMode"in document&&(w=document.documentMode);var E=f.canUseDOM&&"TextEvent"in window&&!w&&!function(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}(),_=f.canUseDOM&&(!b||w&&w>8&&w<=11),C=32,k=String.fromCharCode(C),S={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},D=!1,O=null,T={eventTypes:S,extractEvents:function(e,t,n,r){return[l(e,t,n,r),p(e,t,n,r)]}};e.exports=T},function(e,t,n){"use strict";var r=n(142),a=n(17),i=(n(21),n(223),n(297)),o=n(230),s=n(233),l=(n(6),s(function(e){return o(e)})),u=!1,c="cssFloat";if(a.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(e){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var d={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var a=0===r.indexOf("--"),o=e[r];null!=o&&(n+=l(r)+":",n+=i(r,o,t,a)+";")}return n||null},setValueForStyles:function(e,t,n){var a=e.style;for(var o in t)if(t.hasOwnProperty(o)){var s=0===o.indexOf("--"),l=i(o,t[o],n,s);if("float"!==o&&"cssFloat"!==o||(o=c),s)a.setProperty(o,l);else if(l)a[o]=l;else{var p=u&&r.shorthandPropertyExpansions[o];if(p)for(var d in p)a[d]="";else a[o]=""}}}};e.exports=d},function(e,t,n){"use strict";function r(e,t,n){var r=D.getPooled(x.change,e,t,n);return r.type="change",_.accumulateTwoPhaseDispatches(r),r}function a(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function i(e){var t=r(I,e,T(e));S.batchedUpdates(o,t)}function o(e){E.enqueueEvents(e),E.processEventQueue(!1)}function s(e,t){N=e,I=t,N.attachEvent("onchange",i)}function l(){N&&(N.detachEvent("onchange",i),N=null,I=null)}function u(e,t){var n=O.updateValueIfChanged(e),r=!0===t.simulated&&M._allowSimulatedPassThrough;if(n||r)return e}function c(e,t){if("topChange"===e)return t}function p(e,t,n){"topFocus"===e?(l(),s(t,n)):"topBlur"===e&&l()}function d(e,t){N=e,I=t,N.attachEvent("onpropertychange",h)}function f(){N&&(N.detachEvent("onpropertychange",h),N=null,I=null)}function h(e){"value"===e.propertyName&&u(I,e)&&i(e)}function m(e,t,n){"topFocus"===e?(f(),d(t,n)):"topBlur"===e&&f()}function g(e,t,n){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return u(I,n)}function v(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function y(e,t,n){if("topClick"===e)return u(t,n)}function b(e,t,n){if("topInput"===e||"topChange"===e)return u(t,n)}function w(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;if(n&&n.controlled&&"number"===t.type){var r=""+t.value;t.getAttribute("value")!==r&&t.setAttribute("value",r)}}}var E=n(60),_=n(61),C=n(17),k=n(9),S=n(27),D=n(29),O=n(158),T=n(115),R=n(116),P=n(160),x={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},N=null,I=null,A=!1;C.canUseDOM&&(A=R("change")&&(!document.documentMode||document.documentMode>8));var j=!1;C.canUseDOM&&(j=R("input")&&(!document.documentMode||document.documentMode>9));var M={eventTypes:x,_allowSimulatedPassThrough:!0,_isInputEventSupported:j,extractEvents:function(e,t,n,i){var o,s,l=t?k.getNodeFromInstance(t):window;if(a(l)?A?o=c:s=p:P(l)?j?o=b:(o=g,s=m):v(l)&&(o=y),o){var u=o(e,t,n);if(u){return r(u,n,i)}}s&&s(e,l,t),"topBlur"===e&&w(t,l)}};e.exports=M},function(e,t,n){"use strict";var r=n(7),a=n(43),i=n(17),o=n(226),s=n(18),l=(n(5),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(i.canUseDOM||r("56"),t||r("57"),"HTML"===e.nodeName&&r("58"),"string"==typeof t){var n=o(t,s)[0];e.parentNode.replaceChild(n,e)}else a.replaceChildWithTree(e,t)}});e.exports=l},function(e,t,n){"use strict";var r=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];e.exports=r},function(e,t,n){"use strict";var r=n(61),a=n(9),i=n(77),o={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:o,extractEvents:function(e,t,n,s){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var l;if(s.window===s)l=s;else{var u=s.ownerDocument;l=u?u.defaultView||u.parentWindow:window}var c,p;if("topMouseOut"===e){c=t;var d=n.relatedTarget||n.toElement;p=d?a.getClosestInstanceFromNode(d):null}else c=null,p=t;if(c===p)return null;var f=null==c?l:a.getNodeFromInstance(c),h=null==p?l:a.getNodeFromInstance(p),m=i.getPooled(o.mouseLeave,c,n,s);m.type="mouseleave",m.target=f,m.relatedTarget=h;var g=i.getPooled(o.mouseEnter,p,n,s);return g.type="mouseenter",g.target=h,g.relatedTarget=f,r.accumulateEnterLeaveDispatches(m,g,c,p),[m,g]}};e.exports=s},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var a=n(8),i=n(35),o=n(157);a(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,a=this.getText(),i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=a.slice(e,s),this._fallbackText}}),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";var r=n(44),a=r.injection.MUST_USE_PROPERTY,i=r.injection.HAS_BOOLEAN_VALUE,o=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,l=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,as:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:a|i,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:i,defer:i,dir:0,disabled:i,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:a|i,muted:a|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,playsInline:i,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,referrerPolicy:0,rel:0,required:i,reversed:i,role:0,rows:s,rowSpan:o,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:a|i,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:o,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}};e.exports=u},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){var a=void 0===e[n];null!=t&&a&&(e[n]=i(t,!0))}var a=n(45),i=n(159),o=(n(107),n(117)),s=n(162);n(6);void 0!==t&&t.env;var l={instantiateChildren:function(e,t,n,a){if(null==e)return null;var i={};return s(e,r,i),i},updateChildren:function(e,t,n,r,s,l,u,c,p){if(t||e){var d,f;for(d in t)if(t.hasOwnProperty(d)){f=e&&e[d];var h=f&&f._currentElement,m=t[d];if(null!=f&&o(h,m))a.receiveComponent(f,m,s,c),t[d]=f;else{f&&(r[d]=a.getHostNode(f),a.unmountComponent(f,!1));var g=i(m,!0);t[d]=g;var v=a.mountComponent(g,s,l,u,c,p);n.push(v)}}for(d in e)!e.hasOwnProperty(d)||t&&t.hasOwnProperty(d)||(f=e[d],r[d]=a.getHostNode(f),a.unmountComponent(f,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];a.unmountComponent(r,t)}}};e.exports=l}).call(t,n(59))},function(e,t,n){"use strict";var r=n(103),a=n(261),i={processChildrenUpdates:a.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};e.exports=i},function(e,t,n){"use strict";function r(e){}function a(e){return!(!e.prototype||!e.prototype.isReactComponent)}function i(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var o=n(7),s=n(8),l=n(46),u=n(109),c=n(31),p=n(110),d=n(62),f=(n(21),n(152)),h=n(45),m=n(72),g=(n(5),n(102)),v=n(117),y=(n(6),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var e=d.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return t};var b=1,w={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,s){this._context=s,this._mountOrder=b++,this._hostParent=t,this._hostContainerInfo=n;var u,c=this._currentElement.props,p=this._processContext(s),f=this._currentElement.type,h=e.getUpdateQueue(),g=a(f),v=this._constructComponent(g,c,p,h);g||null!=v&&null!=v.render?i(f)?this._compositeType=y.PureClass:this._compositeType=y.ImpureClass:(u=v,null===v||!1===v||l.isValidElement(v)||o("105",f.displayName||f.name||"Component"),v=new r(f),this._compositeType=y.StatelessFunctional);v.props=c,v.context=p,v.refs=m,v.updater=h,this._instance=v,d.set(v,this);var w=v.state;void 0===w&&(v.state=w=null),("object"!=typeof w||Array.isArray(w))&&o("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var E;return E=v.unstable_handleError?this.performInitialMountWithErrorHandling(u,t,n,e,s):this.performInitialMount(u,t,n,e,s),v.componentDidMount&&e.getReactMountReady().enqueue(v.componentDidMount,v),E},_constructComponent:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)},_constructComponentWithoutOwner:function(e,t,n,r){var a=this._currentElement.type;return e?new a(t,n,r):a(t,n,r)},performInitialMountWithErrorHandling:function(e,t,n,r,a){var i,o=r.checkpoint();try{i=this.performInitialMount(e,t,n,r,a)}catch(s){r.rollback(o),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),o=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(o),i=this.performInitialMount(e,t,n,r,a)}return i},performInitialMount:function(e,t,n,r,a){var i=this._instance,o=0;i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===e&&(e=this._renderValidatedComponent());var s=f.getType(e);this._renderedNodeType=s;var l=this._instantiateReactComponent(e,s!==f.EMPTY);this._renderedComponent=l;var u=h.mountComponent(l,r,t,n,this._processChildContext(a),o);return u},getHostNode:function(){return h.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(h.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,d.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return m;var r={};for(var a in n)r[a]=e[a];return r},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(t=r.getChildContext()),t){"object"!=typeof n.childContextTypes&&o("107",this.getName()||"ReactCompositeComponent");for(var a in t)a in n.childContextTypes||o("108",this.getName()||"ReactCompositeComponent",a);return s({},e,t)}return e},_checkContextTypes:function(e,t,n){},receiveComponent:function(e,t,n){var r=this._currentElement,a=this._context;this._pendingElement=null,this.updateComponent(t,r,e,a,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?h.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,r,a){var i=this._instance;null==i&&o("136",this.getName()||"ReactCompositeComponent");var s,l=!1;this._context===a?s=i.context:(s=this._processContext(a),l=!0);var u=t.props,c=n.props;t!==n&&(l=!0),l&&i.componentWillReceiveProps&&i.componentWillReceiveProps(c,s);var p=this._processPendingState(c,s),d=!0;this._pendingForceUpdate||(i.shouldComponentUpdate?d=i.shouldComponentUpdate(c,p,s):this._compositeType===y.PureClass&&(d=!g(u,c)||!g(i.state,p))),this._updateBatchNumber=null,d?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,p,s,e,a)):(this._currentElement=n,this._context=a,i.props=c,i.state=p,i.context=s)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,a=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(a&&1===r.length)return r[0];for(var i=s({},a?r[0]:n.state),o=a?1:0;o<r.length;o++){var l=r[o];s(i,"function"==typeof l?l.call(n,i,e,t):l)}return i},_performComponentUpdate:function(e,t,n,r,a,i){var o,s,l,u=this._instance,c=Boolean(u.componentDidUpdate);c&&(o=u.props,s=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(t,n,r),this._currentElement=e,this._context=i,u.props=t,u.state=n,u.context=r,this._updateRenderedComponent(a,i),c&&a.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,o,s,l),u)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,a=this._renderValidatedComponent(),i=0;if(v(r,a))h.receiveComponent(n,a,e,this._processChildContext(t));else{var o=h.getHostNode(n);h.unmountComponent(n,!1);var s=f.getType(a);this._renderedNodeType=s;var l=this._instantiateReactComponent(a,s!==f.EMPTY);this._renderedComponent=l;var u=h.mountComponent(l,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),i);this._replaceNodeWithMarkup(o,u,n)}},_replaceNodeWithMarkup:function(e,t,n){u.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance;return e.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==y.StatelessFunctional){c.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||!1===e||l.isValidElement(e)||o("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&o("110");var r=t.getPublicInstance();(n.refs===m?n.refs={}:n.refs)[e]=r},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===y.StatelessFunctional?null:e},_instantiateReactComponent:null};e.exports=w},function(e,t,n){"use strict";var r=n(9),a=n(269),i=n(151),o=n(45),s=n(27),l=n(282),u=n(298),c=n(156),p=n(305);n(6);a.inject();var d={findDOMNode:u,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:p};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?r.getNodeFromInstance(e):null}},Mount:i,Reconciler:o});e.exports=d},function(e,t,n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function a(e,t){t&&(X[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&g("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&g("60"),"object"==typeof t.dangerouslySetInnerHTML&&V in t.dangerouslySetInnerHTML||g("61")),null!=t.style&&"object"!=typeof t.style&&g("62",r(e)))}function i(e,t,n,r){if(!(r instanceof A)){var a=e._hostContainerInfo,i=a._node&&a._node.nodeType===z,s=i?a._node:a._ownerDocument;q(t,s),r.getReactMountReady().enqueue(o,{inst:e,registrationName:t,listener:n})}}function o(){var e=this;k.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;R.postMountWrapper(e)}function l(){var e=this;N.postMountWrapper(e)}function u(){var e=this;P.postMountWrapper(e)}function c(){M.track(this)}function p(){var e=this;e._rootNodeID||g("63");var t=F(e);switch(t||g("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[D.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in Y)Y.hasOwnProperty(n)&&e._wrapperState.listeners.push(D.trapBubbledEvent(n,Y[n],t));break;case"source":e._wrapperState.listeners=[D.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[D.trapBubbledEvent("topError","error",t),D.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[D.trapBubbledEvent("topReset","reset",t),D.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[D.trapBubbledEvent("topInvalid","invalid",t)]}}function d(){x.postUpdateWrapper(this)}function f(e){Q.call(G,e)||(K.test(e)||g("65",e),G[e]=!0)}function h(e,t){return e.indexOf("-")>=0||null!=t.is}function m(e){var t=e.type;f(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var g=n(7),v=n(8),y=n(244),b=n(246),w=n(43),E=n(104),_=n(44),C=n(144),k=n(60),S=n(105),D=n(76),O=n(145),T=n(9),R=n(262),P=n(263),x=n(146),N=n(266),I=(n(21),n(275)),A=n(280),j=(n(18),n(79)),M=(n(5),n(116),n(102),n(158)),L=(n(118),n(6),O),U=k.deleteListener,F=T.getNodeFromInstance,q=D.listenTo,B=S.registrationNameModules,H={string:!0,number:!0},V="__html",W={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},z=11,Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},J={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},$={listing:!0,pre:!0,textarea:!0},X=v({menuitem:!0},J),K=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,G={},Q={}.hasOwnProperty,Z=1;m.displayName="ReactDOMComponent",m.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=Z++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var i=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(p,this);break;case"input":R.mountWrapper(this,i,t),i=R.getHostProps(this,i),e.getReactMountReady().enqueue(c,this),e.getReactMountReady().enqueue(p,this);break;case"option":P.mountWrapper(this,i,t),i=P.getHostProps(this,i);break;case"select":x.mountWrapper(this,i,t),i=x.getHostProps(this,i),e.getReactMountReady().enqueue(p,this);break;case"textarea":N.mountWrapper(this,i,t),i=N.getHostProps(this,i),e.getReactMountReady().enqueue(c,this),e.getReactMountReady().enqueue(p,this)}a(this,i);var o,d;null!=t?(o=t._namespaceURI,d=t._tag):n._tag&&(o=n._namespaceURI,d=n._tag),(null==o||o===E.svg&&"foreignobject"===d)&&(o=E.html),o===E.html&&("svg"===this._tag?o=E.svg:"math"===this._tag&&(o=E.mathml)),this._namespaceURI=o;var f;if(e.useCreateElement){var h,m=n._ownerDocument;if(o===E.html)if("script"===this._tag){var g=m.createElement("div"),v=this._currentElement.type;g.innerHTML="<"+v+"></"+v+">",h=g.removeChild(g.firstChild)}else h=i.is?m.createElement(this._currentElement.type,i.is):m.createElement(this._currentElement.type);else h=m.createElementNS(o,this._currentElement.type);T.precacheNode(this,h),this._flags|=L.hasCachedChildNodes,this._hostParent||C.setAttributeForRoot(h),this._updateDOMProperties(null,i,e);var b=w(h);this._createInitialChildren(e,i,r,b),f=b}else{var _=this._createOpenTagMarkupAndPutListeners(e,i),k=this._createContentMarkup(e,i,r);f=!k&&J[this._tag]?_+"/>":_+">"+k+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),i.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(l,this),i.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"select":case"button":i.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(u,this)}return f},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];if(null!=a)if(B.hasOwnProperty(r))a&&i(this,r,a,e);else{"style"===r&&(a&&(a=this._previousStyleCopy=v({},t.style)),a=b.createMarkupForStyles(a,this));var o=null;null!=this._tag&&h(this._tag,t)?W.hasOwnProperty(r)||(o=C.createMarkupForCustomAttribute(r,a)):o=C.createMarkupForProperty(r,a),o&&(n+=" "+o)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+C.createMarkupForRoot()),n+=" "+C.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&(r=a.__html);else{var i=H[typeof t.children]?t.children:null,o=null!=i?null:t.children;if(null!=i)r=j(i);else if(null!=o){var s=this.mountChildren(o,e,n);r=s.join("")}}return $[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&w.queueHTML(r,a.__html);else{var i=H[typeof t.children]?t.children:null,o=null!=i?null:t.children;if(null!=i)""!==i&&w.queueText(r,i);else if(null!=o)for(var s=this.mountChildren(o,e,n),l=0;l<s.length;l++)w.queueChild(r,s[l])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var i=t.props,o=this._currentElement.props;switch(this._tag){case"input":i=R.getHostProps(this,i),o=R.getHostProps(this,o);break;case"option":i=P.getHostProps(this,i),o=P.getHostProps(this,o);break;case"select":i=x.getHostProps(this,i),o=x.getHostProps(this,o);break;case"textarea":i=N.getHostProps(this,i),o=N.getHostProps(this,o)}switch(a(this,o),this._updateDOMProperties(i,o,e),this._updateDOMChildren(i,o,e,r),this._tag){case"input":R.updateWrapper(this),M.updateValueIfChanged(this);break;case"textarea":N.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(d,this)}},_updateDOMProperties:function(e,t,n){var r,a,o;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if("style"===r){var s=this._previousStyleCopy;for(a in s)s.hasOwnProperty(a)&&(o=o||{},o[a]="");this._previousStyleCopy=null}else B.hasOwnProperty(r)?e[r]&&U(this,r):h(this._tag,e)?W.hasOwnProperty(r)||C.deleteValueForAttribute(F(this),r):(_.properties[r]||_.isCustomAttribute(r))&&C.deleteValueForProperty(F(this),r);for(r in t){var l=t[r],u="style"===r?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&l!==u&&(null!=l||null!=u))if("style"===r)if(l?l=this._previousStyleCopy=v({},l):this._previousStyleCopy=null,u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(o=o||{},o[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(o=o||{},o[a]=l[a])}else o=l;else if(B.hasOwnProperty(r))l?i(this,r,l,n):u&&U(this,r);else if(h(this._tag,t))W.hasOwnProperty(r)||C.setValueForAttribute(F(this),r,l);else if(_.properties[r]||_.isCustomAttribute(r)){var c=F(this);null!=l?C.setValueForProperty(c,r,l):C.deleteValueForProperty(c,r)}}o&&b.setValueForStyles(F(this),o,this)},_updateDOMChildren:function(e,t,n,r){var a=H[typeof e.children]?e.children:null,i=H[typeof t.children]?t.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=a?null:e.children,u=null!=i?null:t.children,c=null!=a||null!=o,p=null!=i||null!=s;null!=l&&null==u?this.updateChildren(null,n,r):c&&!p&&this.updateTextContent(""),null!=i?a!==i&&this.updateTextContent(""+i):null!=s?o!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,n,r)},getHostNode:function(){return F(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"input":case"textarea":M.stopTracking(this);break;case"html":case"head":case"body":g("66",this._tag)}this.unmountChildren(e),T.uncacheNode(this),k.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return F(this)}},v(m.prototype,m.Mixin,I.Mixin),e.exports=m},function(e,t,n){"use strict";function r(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===a?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var a=(n(118),9);e.exports=r},function(e,t,n){"use strict";var r=n(8),a=n(43),i=n(9),o=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(o.prototype,{mountComponent:function(e,t,n,r){var o=n._idCounter++;this._domID=o,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument,u=l.createComment(s);return i.precacheNode(this,u),a(u)}return e.renderToStaticMarkup?"":"\x3c!--"+s+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),e.exports=o},function(e,t,n){"use strict";var r={useCreateElement:!0,useFiber:!1};e.exports=r},function(e,t,n){"use strict";var r=n(103),a=n(9),i={dangerouslyProcessChildrenUpdates:function(e,t){var n=a.getNodeFromInstance(e);r.processUpdates(n,t)}};e.exports=i},function(e,t,n){"use strict";function r(){this._rootNodeID&&d.updateWrapper(this)}function a(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function i(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);p.asap(r,this);var a=t.name;if("radio"===t.type&&null!=a){for(var i=c.getNodeFromInstance(this),s=i;s.parentNode;)s=s.parentNode;for(var l=s.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),d=0;d<l.length;d++){var f=l[d];if(f!==i&&f.form===i.form){var h=c.getInstanceFromNode(f);h||o("90"),p.asap(r,h)}}}return n}var o=n(7),s=n(8),l=n(144),u=n(108),c=n(9),p=n(27),d=(n(5),n(6),{getHostProps:function(e,t){var n=u.getValue(t),r=u.getChecked(t);return s({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:i.bind(e),controlled:a(t)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&l.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var r=c.getNodeFromInstance(e),a=u.getValue(t);if(null!=a)if(0===a&&""===r.value)r.value="0";else if("number"===t.type){var i=parseFloat(r.value,10)||0;(a!=i||a==i&&r.value!=a)&&(r.value=""+a)}else r.value!==""+a&&(r.value=""+a);else null==t.value&&null!=t.defaultValue&&r.defaultValue!==""+t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});e.exports=d},function(e,t,n){"use strict";function r(e){var t="";return i.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:l||(l=!0))}),t}var a=n(8),i=n(46),o=n(9),s=n(146),l=(n(6),!1),u={mountWrapper:function(e,t,n){var a=null;if(null!=n){var i=n;"optgroup"===i._tag&&(i=i._hostParent),null!=i&&"select"===i._tag&&(a=s.getSelectValueContext(i))}var o=null;if(null!=a){var l;if(l=null!=t.value?t.value+"":r(t.children),o=!1,Array.isArray(a)){for(var u=0;u<a.length;u++)if(""+a[u]===l){o=!0;break}}else o=""+a===l}e._wrapperState={selected:o}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){o.getNodeFromInstance(e).setAttribute("value",t.value)}},getHostProps:function(e,t){var n=a({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var i=r(t.children);return i&&(n.children=i),n}};e.exports=u},function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function a(e){var t=document.selection,n=t.createRange(),r=n.text.length,a=n.duplicate();a.moveToElementText(e),a.setEndPoint("EndToStart",n);var i=a.text.length;return{start:i,end:i+r}}function i(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,a=t.anchorOffset,i=t.focusNode,o=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var l=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),u=l?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(e),c.setEnd(s.startContainer,s.startOffset);var p=r(c.startContainer,c.startOffset,c.endContainer,c.endOffset),d=p?0:c.toString().length,f=d+u,h=document.createRange();h.setStart(n,a),h.setEnd(i,o);var m=h.collapsed;return{start:m?f:d,end:m?d:f}}function o(e,t){var n,r,a=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),a.moveToElementText(e),a.moveStart("character",n),a.setEndPoint("EndToStart",a),a.moveEnd("character",r-n),a.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[c()].length,a=Math.min(t.start,r),i=void 0===t.end?a:Math.min(t.end,r);if(!n.extend&&a>i){var o=i;i=a,a=o}var s=u(e,a),l=u(e,i);if(s&&l){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),a>i?(n.addRange(p),n.extend(l.node,l.offset)):(p.setEnd(l.node,l.offset),n.addRange(p))}}}var l=n(17),u=n(302),c=n(157),p=l.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:p?a:i,setOffsets:p?o:s};e.exports=d},function(e,t,n){"use strict";var r=n(7),a=n(8),i=n(103),o=n(43),s=n(9),l=n(79),u=(n(5),n(118),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});a(u.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++,i=" react-text: "+a+" ";if(this._domID=a,this._hostParent=t,e.useCreateElement){var u=n._ownerDocument,c=u.createComment(i),p=u.createComment(" /react-text "),d=o(u.createDocumentFragment());return o.queueChild(d,o(c)),this._stringText&&o.queueChild(d,o(u.createTextNode(this._stringText))),o.queueChild(d,o(p)),s.precacheNode(this,c),this._closingComment=p,d}var f=l(this._stringText);return e.renderToStaticMarkup?f:"\x3c!--"+i+"--\x3e"+f+"\x3c!-- /react-text --\x3e"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();i.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n&&r("67",this._domID),8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),e.exports=u},function(e,t,n){"use strict";function r(){this._rootNodeID&&c.updateWrapper(this)}function a(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return u.asap(r,this),n}var i=n(7),o=n(8),s=n(108),l=n(9),u=n(27),c=(n(5),n(6),{getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&i("91"),o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=s.getValue(t),r=n;if(null==n){var o=t.defaultValue,l=t.children;null!=l&&(null!=o&&i("92"),Array.isArray(l)&&(l.length<=1||i("93"),l=l[0]),o=""+l),null==o&&(o=""),r=o}e._wrapperState={initialValue:""+r,listeners:null,onChange:a.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=l.getNodeFromInstance(e),r=s.getValue(t);if(null!=r){var a=""+r;a!==n.value&&(n.value=a),null==t.defaultValue&&(n.defaultValue=a)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=l.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}});e.exports=c},function(e,t,n){"use strict";function r(e,t){"_hostNode"in e||l("33"),"_hostNode"in t||l("33");for(var n=0,r=e;r;r=r._hostParent)n++;for(var a=0,i=t;i;i=i._hostParent)a++;for(;n-a>0;)e=e._hostParent,n--;for(;a-n>0;)t=t._hostParent,a--;for(var o=n;o--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function a(e,t){"_hostNode"in e||l("35"),"_hostNode"in t||l("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function i(e){return"_hostNode"in e||l("36"),e._hostParent}function o(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var a;for(a=r.length;a-- >0;)t(r[a],"captured",n);for(a=0;a<r.length;a++)t(r[a],"bubbled",n)}function s(e,t,n,a,i){for(var o=e&&t?r(e,t):null,s=[];e&&e!==o;)s.push(e),e=e._hostParent;for(var l=[];t&&t!==o;)l.push(t),t=t._hostParent;var u;for(u=0;u<s.length;u++)n(s[u],"bubbled",a);for(u=l.length;u-- >0;)n(l[u],"captured",i)}var l=n(7);n(5);e.exports={isAncestor:a,getLowestCommonAncestor:r,getParentInstance:i,traverseTwoPhase:o,traverseEnterLeave:s}},function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var a=n(8),i=n(27),o=n(78),s=n(18),l={initialize:s,close:function(){d.isBatchingUpdates=!1}},u={initialize:s,close:i.flushBatchedUpdates.bind(i)},c=[u,l];a(r.prototype,o,{getTransactionWrappers:function(){return c}});var p=new r,d={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,a,i){var o=d.isBatchingUpdates;return d.isBatchingUpdates=!0,o?e(t,n,r,a,i):p.perform(e,null,t,n,r,a,i)}};e.exports=d},function(e,t,n){"use strict";function r(){C||(C=!0,y.EventEmitter.injectReactEventListener(v),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(d),y.EventPluginUtils.injectTreeTraversal(h),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:_,EnterLeaveEventPlugin:l,ChangeEventPlugin:o,SelectEventPlugin:E,BeforeInputEventPlugin:i}),y.HostComponent.injectGenericComponentClass(p),y.HostComponent.injectTextComponentClass(m),y.DOMProperty.injectDOMPropertyConfig(a),y.DOMProperty.injectDOMPropertyConfig(u),y.DOMProperty.injectDOMPropertyConfig(w),y.EmptyComponent.injectEmptyComponentFactory(function(e){return new f(e)}),y.Updates.injectReconcileTransaction(b),y.Updates.injectBatchingStrategy(g),y.Component.injectEnvironment(c))}var a=n(243),i=n(245),o=n(247),s=n(249),l=n(250),u=n(252),c=n(254),p=n(257),d=n(9),f=n(259),h=n(267),m=n(265),g=n(268),v=n(272),y=n(273),b=n(278),w=n(283),E=n(284),_=n(285),C=!1;e.exports={inject:r}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=r},function(e,t,n){"use strict";function r(e){a.enqueueEvents(e),a.processEventQueue(!1)}var a=n(60),i={handleTopLevel:function(e,t,n,i){r(a.extractEvents(e,t,n,i))}};e.exports=i},function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=p.getNodeFromInstance(e),n=t.parentNode;return p.getClosestInstanceFromNode(n)}function a(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){var t=f(e.nativeEvent),n=p.getClosestInstanceFromNode(t),a=n;do{e.ancestors.push(a),a=a&&r(a)}while(a);for(var i=0;i<e.ancestors.length;i++)n=e.ancestors[i],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,f(e.nativeEvent))}function o(e){e(h(window))}var s=n(8),l=n(137),u=n(17),c=n(35),p=n(9),d=n(27),f=n(115),h=n(228);s(a.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(a,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?l.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?l.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=a.getPooled(e,t);try{d.batchedUpdates(i,n)}finally{a.release(n)}}}};e.exports=m},function(e,t,n){"use strict";var r=n(44),a=n(60),i=n(106),o=n(109),s=n(147),l=n(76),u=n(149),c=n(27),p={Component:o.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:a.injection,EventPluginUtils:i.injection,EventEmitter:l.injection,HostComponent:u.injection,Updates:c.injection};e.exports=p},function(e,t,n){"use strict";var r=n(296),a=/\/?>/,i=/^<\!\-\-/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return i.test(e)?e:e.replace(a," "+o.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(o.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),r(e)===n}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function a(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:d.getHostNode(e),toIndex:n,afterNode:t}}function i(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function o(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(e,t){return t&&(e=e||[],e.push(t)),e}function u(e,t){p.processChildrenUpdates(e,t)}var c=n(7),p=n(109),d=(n(62),n(21),n(31),n(45)),f=n(253),h=(n(18),n(299)),m=(n(5),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return f.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,a,i){var o,s=0;return o=h(t,s),f.updateChildren(e,o,n,r,a,this,this._hostContainerInfo,i,s),o},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var a=[],i=0;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o],l=0,u=d.mountComponent(s,t,this,this._hostContainerInfo,n,l);s._mountIndex=i++,a.push(u)}return a},updateTextContent:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");u(this,[s(e)])},updateMarkup:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");u(this,[o(e)])},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,a={},i=[],o=this._reconcilerUpdateChildren(r,e,i,a,t,n);if(o||r){var s,c=null,p=0,f=0,h=0,m=null;for(s in o)if(o.hasOwnProperty(s)){var g=r&&r[s],v=o[s];g===v?(c=l(c,this.moveChild(g,m,p,f)),f=Math.max(g._mountIndex,f),g._mountIndex=p):(g&&(f=Math.max(g._mountIndex,f)),c=l(c,this._mountChildAtIndex(v,i[h],m,p,t,n)),h++),p++,m=d.getHostNode(v)}for(s in a)a.hasOwnProperty(s)&&(c=l(c,this._unmountChild(r[s],a[s])));c&&u(this,c),this._renderedChildren=o}},unmountChildren:function(e){var t=this._renderedChildren;f.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return a(e,t,n)},createChild:function(e,t,n){return r(n,t,e._mountIndex)},removeChild:function(e,t){return i(e,t)},_mountChildAtIndex:function(e,t,n,r,a,i){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});e.exports=m},function(e,t,n){"use strict";function r(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var a=n(7),i=(n(5),{addComponentAsRefTo:function(e,t,n){r(n)||a("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(n)||a("120");var i=n.getPublicInstance();i&&i.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});e.exports=i},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=e}var a=n(8),i=n(143),o=n(35),s=n(76),l=n(150),u=(n(21),n(78)),c=n(111),p={initialize:l.getSelectionInformation,close:l.restoreSelection},d={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},f={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h=[p,d,f],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};a(r.prototype,u,m),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):i.addComponentAsRefTo(t,e,n)}function a(e,t,n){"function"==typeof e?e(null):i.removeComponentAsRefFrom(t,e,n)}var i=n(276),o={};o.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&r(n,e,t._owner)}},o.shouldUpdateRefs=function(e,t){var n=null,r=null;null!==e&&"object"==typeof e&&(n=e.ref,r=e._owner);var a=null,i=null;return null!==t&&"object"==typeof t&&(a=t.ref,i=t._owner),n!==a||"string"==typeof a&&i!==r},o.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&a(n,e,t._owner)}},e.exports=o},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var a=n(8),i=n(35),o=n(78),s=(n(21),n(281)),l=[],u={enqueue:function(){}},c={getTransactionWrappers:function(){return l},getReactMountReady:function(){return u},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};a(r.prototype,o,c),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(111),i=(n(6),function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&a.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()&&a.enqueueForceUpdate(e)},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()&&a.enqueueReplaceState(e,t)},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()&&a.enqueueSetState(e,t)},e}());e.exports=i},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";var r={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},a={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:r.xlink,xlinkArcrole:r.xlink,xlinkHref:r.xlink,xlinkRole:r.xlink,xlinkShow:r.xlink,xlinkTitle:r.xlink,xlinkType:r.xlink,xmlBase:r.xml,xmlLang:r.xml,xmlSpace:r.xml},DOMAttributeNames:{}};Object.keys(a).forEach(function(e){i.Properties[e]=0,a[e]&&(i.DOMAttributeNames[e]=a[e])}),e.exports=i},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&l.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function a(e,t){if(y||null==m||m!==c())return null;var n=r(m);if(!v||!d(v,n)){v=n;var a=u.getPooled(h.select,g,e,t);return a.type="select",a.target=m,i.accumulateTwoPhaseDispatches(a),a}return null}var i=n(61),o=n(17),s=n(9),l=n(150),u=n(29),c=n(139),p=n(160),d=n(102),f=o.canUseDOM&&"documentMode"in document&&document.documentMode<=11,h={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,g=null,v=null,y=!1,b=!1,w={eventTypes:h,extractEvents:function(e,t,n,r){if(!b)return null;var i=t?s.getNodeFromInstance(t):window;switch(e){case"topFocus":(p(i)||"true"===i.contentEditable)&&(m=i,g=t,v=null);break;case"topBlur":m=null,g=null,v=null;break;case"topMouseDown":y=!0;break;case"topContextMenu":case"topMouseUp":return y=!1,a(n,r);case"topSelectionChange":if(f)break;case"topKeyDown":case"topKeyUp":return a(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(b=!0)}};e.exports=w},function(e,t,n){"use strict";function r(e){return"."+e._rootNodeID}function a(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var i=n(7),o=n(137),s=n(61),l=n(9),u=n(286),c=n(287),p=n(29),d=n(290),f=n(292),h=n(77),m=n(289),g=n(293),v=n(294),y=n(63),b=n(295),w=n(18),E=n(113),_=(n(5),{}),C={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,a={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};_[e]=a,C[r]=a});var k={},S={eventTypes:_,extractEvents:function(e,t,n,r){var a=C[e];if(!a)return null;var o;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":o=p;break;case"topKeyPress":if(0===E(n))return null;case"topKeyDown":case"topKeyUp":o=f;break;case"topBlur":case"topFocus":o=d;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":o=h;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":o=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":o=g;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":o=u;break;case"topTransitionEnd":o=v;break;case"topScroll":o=y;break;case"topWheel":o=b;break;case"topCopy":case"topCut":case"topPaste":o=c}o||i("86",e);var l=o.getPooled(a,t,n,r);return s.accumulateTwoPhaseDispatches(l),l},didPutListener:function(e,t,n){if("onClick"===t&&!a(e._tag)){var i=r(e),s=l.getNodeFromInstance(e);k[i]||(k[i]=o.listen(s,"click",w))}},willDeleteListener:function(e,t){if("onClick"===t&&!a(e._tag)){var n=r(e);k[n].remove(),delete k[n]}}};e.exports=S},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(29),i={animationName:null,elapsedTime:null,pseudoElement:null};a.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(29),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};a.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(29),i={data:null};a.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(77),i={dataTransfer:null};a.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(63),i={relatedTarget:null};a.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(29),i={data:null};a.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(63),i=n(113),o=n(300),s=n(114),l={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?i(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?i(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};a.augmentClass(r,l),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(63),i=n(114),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};a.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(29),i={propertyName:null,elapsedTime:null,pseudoElement:null};a.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return a.call(this,e,t,n,r)}var a=n(77),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};a.augmentClass(r,i),e.exports=r},function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0,i=e.length,o=-4&i;r<o;){for(var s=Math.min(r+4096,o);r<s;r+=4)n+=(t+=e.charCodeAt(r))+(t+=e.charCodeAt(r+1))+(t+=e.charCodeAt(r+2))+(t+=e.charCodeAt(r+3));t%=a,n%=a}for(;r<i;r++)n+=t+=e.charCodeAt(r);return t%=a,n%=a,t|n<<16}var a=65521;e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){if(null==t||"boolean"==typeof t||""===t)return"";var a=isNaN(t);if(r||a||0===t||i.hasOwnProperty(e)&&i[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var a=n(142),i=(n(6),a.isUnitlessNumber);e.exports=r},function(e,t,n){"use strict";function r(e){if(null==e)return null;if(1===e.nodeType)return e;var t=o.get(e);if(t)return t=s(t),t?i.getNodeFromInstance(t):null;"function"==typeof e.render?a("44"):a("45",Object.keys(e))}var a=n(7),i=(n(31),n(9)),o=n(62),s=n(156);n(5),n(6);e.exports=r},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){if(e&&"object"==typeof e){var a=e,i=void 0===a[n];i&&null!=t&&(a[n]=t)}}function a(e,t){if(null==e)return e;var n={};return i(e,r,n),n}var i=(n(107),n(162));n(6);void 0!==t&&t.env,e.exports=a}).call(t,n(59))},function(e,t,n){"use strict";function r(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=a(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var a=n(113),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},function(e,t,n){"use strict";function r(e){var t=e&&(a&&e[a]||e[i]);if("function"==typeof t)return t}var a="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";e.exports=r},function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function a(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var n=r(e),i=0,o=0;n;){if(3===n.nodeType){if(o=i+n.textContent.length,i<=t&&o>=t)return{node:n,offset:t-i};i=o}n=r(a(n))}}e.exports=i},function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function a(e){if(s[e])return s[e];if(!o[e])return e;var t=o[e];for(var n in t)if(t.hasOwnProperty(n)&&n in l)return s[e]=t[n];return""}var i=n(17),o={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},l={};i.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete o.animationend.animation,delete o.animationiteration.animation,delete o.animationstart.animation),"TransitionEvent"in window||delete o.transitionend.transition),e.exports=a},function(e,t,n){"use strict";function r(e){return'"'+a(e)+'"'}var a=n(79);e.exports=r},function(e,t,n){"use strict";var r=n(151);e.exports=r.renderSubtreeIntoContainer},function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.a=r},function(e,t,n){"use strict";function r(e,t,n){function r(){if(o=!0,s)return void(u=[].concat(Array.prototype.slice.call(arguments)));n.apply(this,arguments)}function a(){if(!o&&(l=!0,!s)){for(s=!0;!o&&i<e&&l;)l=!1,t.call(this,i++,a,r);if(s=!1,o)return void n.apply(this,u);i>=e&&l&&(o=!0,n())}}var i=0,o=!1,s=!1,l=!1,u=void 0;a()}function a(e,t,n){function r(e,t,r){o||(t?(o=!0,n(t)):(i[e]=r,(o=++s===a)&&n(null,i)))}var a=e.length,i=[];if(0===a)return n(null,i);var o=!1,s=0;e.forEach(function(e,n){t(e,n,function(e,t){r(n,e,t)})})}t.b=r,t.a=a},function(e,t,n){"use strict";function r(e){return"@@contextSubscriber/"+e}function a(e){var t,n,a=r(e),i=a+"/listeners",o=a+"/eventIndex",s=a+"/subscribe";return n={childContextTypes:(t={},t[a]=l.isRequired,t),getChildContext:function(){var e;return e={},e[a]={eventIndex:this[o],subscribe:this[s]},e},componentWillMount:function(){this[i]=[],this[o]=0},componentWillReceiveProps:function(){this[o]++},componentDidUpdate:function(){var e=this;this[i].forEach(function(t){return t(e[o])})}},n[s]=function(e){var t=this;return this[i].push(e),function(){t[i]=t[i].filter(function(t){return t!==e})}},n}function i(e){var t,n,a=r(e),i=a+"/lastRenderedEventIndex",o=a+"/handleContextUpdate",s=a+"/unsubscribe";return n={contextTypes:(t={},t[a]=l,t),getInitialState:function(){var e;return this.context[a]?(e={},e[i]=this.context[a].eventIndex,e):{}},componentDidMount:function(){this.context[a]&&(this[s]=this.context[a].subscribe(this[o]))},componentWillReceiveProps:function(){var e;this.context[a]&&this.setState((e={},e[i]=this.context[a].eventIndex,e))},componentWillUnmount:function(){this[s]&&(this[s](),this[s]=null)}},n[o]=function(e){if(e!==this.state[i]){var t;this.setState((t={},t[i]=e,t))}},n}t.a=a,t.b=i;var o=n(3),s=n.n(o),l=s.a.shape({subscribe:s.a.func.isRequired,eventIndex:s.a.number.isRequired})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),a=(n.n(r),n.i(r.shape)({push:r.func.isRequired,replace:r.func.isRequired,go:r.func.isRequired,goBack:r.func.isRequired,goForward:r.func.isRequired,setRouteLeaveHook:r.func.isRequired,isActive:r.func.isRequired}));n.i(r.shape)({pathname:r.string.isRequired,search:r.string.isRequired,state:r.object,action:r.string.isRequired,key:r.string})},function(e,t,n){"use strict";var r=n(33),a=n.n(r),i=n(4),o=n.n(i),s=n(75),l=n.n(s),u=n(3),c=(n.n(u),n(1121)),p=n(308),d=n(87),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=l()({displayName:"RouterContext",mixins:[n.i(p.a)("router")],propTypes:{router:u.object.isRequired,location:u.object.isRequired,routes:u.array.isRequired,params:u.object.isRequired,components:u.array.isRequired,createElement:u.func.isRequired},getDefaultProps:function(){return{createElement:o.a.createElement}},childContextTypes:{router:u.object.isRequired},getChildContext:function(){return{router:this.props.router}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var e=this,t=this.props,r=t.location,i=t.routes,s=t.params,l=t.components,u=t.router,p=null;return l&&(p=l.reduceRight(function(t,a,o){if(null==a)return t;var l=i[o],p=n.i(c.a)(l,s),m={location:r,params:s,route:l,router:u,routeParams:p,routes:i};if(n.i(d.a)(t))m.children=t;else if(t)for(var g in t)Object.prototype.hasOwnProperty.call(t,g)&&(m[g]=t[g]);if("object"===(void 0===a?"undefined":h(a))){var v={};for(var y in a)Object.prototype.hasOwnProperty.call(a,y)&&(v[y]=e.createElement(a[y],f({key:y},m)));return v}return e.createElement(a,m)},p)),null===p||!1===p||o.a.isValidElement(p)||a()(!1),p}});t.a=m},function(e,t,n){"use strict";function r(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function a(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var i={escape:r,unescape:a};e.exports=i},function(e,t,n){"use strict";var r=n(64),a=(n(5),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var a=r.instancePool.pop();return r.call(a,e,t,n),a}return new r(e,t,n)},s=function(e,t,n,r){var a=this;if(a.instancePool.length){var i=a.instancePool.pop();return a.call(i,e,t,n,r),i}return new a(e,t,n,r)},l=function(e){var t=this;e instanceof t||r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},u=a,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||u,n.poolSize||(n.poolSize=10),n.release=l,n},p={addPoolingTo:c,oneArgumentPooler:a,twoArgumentPooler:i,threeArgumentPooler:o,fourArgumentPooler:s};e.exports=p},function(e,t,n){"use strict";function r(e){return(""+e).replace(w,"$&/")}function a(e,t){this.func=e,this.context=t,this.count=0}function i(e,t,n){var r=e.func,a=e.context;r.call(a,t,e.count++)}function o(e,t,n){if(null==e)return e;var r=a.getPooled(t,n);v(e,i,r),a.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function l(e,t,n){var a=e.result,i=e.keyPrefix,o=e.func,s=e.context,l=o.call(s,t,e.count++);Array.isArray(l)?u(l,a,n,g.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,i+(!l.key||t&&t.key===l.key?"":r(l.key)+"/")+n)),a.push(l))}function u(e,t,n,a,i){var o="";null!=n&&(o=r(n)+"/");var u=s.getPooled(t,o,a,i);v(e,l,u),s.release(u)}function c(e,t,n){if(null==e)return e;var r=[];return u(e,r,null,t,n),r}function p(e,t,n){return null}function d(e,t){return v(e,p,null)}function f(e){var t=[];return u(e,t,null,g.thatReturnsArgument),t}var h=n(312),m=n(47),g=n(18),v=n(322),y=h.twoArgumentPooler,b=h.fourArgumentPooler,w=/\/+/g;a.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(a,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,b);var E={forEach:o,map:c,mapIntoWithKeyPrefixInternal:u,count:d,toArray:f};e.exports=E},function(e,t,n){"use strict";var r=n(47),a=r.createFactory,i={a:a("a"),abbr:a("abbr"),address:a("address"),area:a("area"),article:a("article"),aside:a("aside"),audio:a("audio"),b:a("b"),base:a("base"),bdi:a("bdi"),bdo:a("bdo"),big:a("big"),blockquote:a("blockquote"),body:a("body"),br:a("br"),button:a("button"),canvas:a("canvas"),caption:a("caption"),cite:a("cite"),code:a("code"),col:a("col"),colgroup:a("colgroup"),data:a("data"),datalist:a("datalist"),dd:a("dd"),del:a("del"),details:a("details"),dfn:a("dfn"),dialog:a("dialog"),div:a("div"),dl:a("dl"),dt:a("dt"),em:a("em"),embed:a("embed"),fieldset:a("fieldset"),figcaption:a("figcaption"),figure:a("figure"),footer:a("footer"),form:a("form"),h1:a("h1"),h2:a("h2"),h3:a("h3"),h4:a("h4"),h5:a("h5"),h6:a("h6"),head:a("head"),header:a("header"),hgroup:a("hgroup"),hr:a("hr"),html:a("html"),i:a("i"),iframe:a("iframe"),img:a("img"),input:a("input"),ins:a("ins"),kbd:a("kbd"),keygen:a("keygen"),label:a("label"),legend:a("legend"),li:a("li"),link:a("link"),main:a("main"),map:a("map"),mark:a("mark"),menu:a("menu"),menuitem:a("menuitem"),meta:a("meta"),meter:a("meter"),nav:a("nav"),noscript:a("noscript"),object:a("object"),ol:a("ol"),optgroup:a("optgroup"),option:a("option"),output:a("output"),p:a("p"),param:a("param"),picture:a("picture"),pre:a("pre"),progress:a("progress"),q:a("q"),rp:a("rp"),rt:a("rt"),ruby:a("ruby"),s:a("s"),samp:a("samp"),script:a("script"),section:a("section"),select:a("select"),small:a("small"),source:a("source"),span:a("span"),strong:a("strong"),style:a("style"),sub:a("sub"),summary:a("summary"),sup:a("sup"),table:a("table"),tbody:a("tbody"),td:a("td"),textarea:a("textarea"),tfoot:a("tfoot"),th:a("th"),thead:a("thead"),time:a("time"),title:a("title"),tr:a("tr"),track:a("track"),u:a("u"),ul:a("ul"),var:a("var"),video:a("video"),wbr:a("wbr"),circle:a("circle"),clipPath:a("clipPath"),defs:a("defs"),ellipse:a("ellipse"),g:a("g"),image:a("image"),line:a("line"),linearGradient:a("linearGradient"),mask:a("mask"),path:a("path"),pattern:a("pattern"),polygon:a("polygon"),polyline:a("polyline"),radialGradient:a("radialGradient"),rect:a("rect"),stop:a("stop"),svg:a("svg"),text:a("text"),tspan:a("tspan")};e.exports=i},function(e,t,n){"use strict";var r=n(47),a=r.isValidElement,i=n(140);e.exports=i(a)},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";var r=n(164),a=r.Component,i=n(47),o=i.isValidElement,s=n(167),l=n(186);e.exports=l(a,o,s)},function(e,t,n){"use strict";function r(e){var t=e&&(a&&e[a]||e[i]);if("function"==typeof t)return t}var a="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";e.exports=r},function(e,t,n){"use strict";function r(){return a++}var a=1;e.exports=r},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e){return i.isValidElement(e)||a("143"),e}var a=n(64),i=n(47);n(5);e.exports=r},function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?u.escape(e.key):t.toString(36)}function a(e,t,n,i){var d=typeof e;if("undefined"!==d&&"boolean"!==d||(e=null),null===e||"string"===d||"number"===d||"object"===d&&e.$$typeof===s)return n(i,e,""===t?c+r(e,0):t),1;var f,h,m=0,g=""===t?c:t+p;if(Array.isArray(e))for(var v=0;v<e.length;v++)f=e[v],h=g+r(f,v),m+=a(f,h,n,i);else{var y=l(e);if(y){var b,w=y.call(e);if(y!==e.entries)for(var E=0;!(b=w.next()).done;)f=b.value,h=g+r(f,E++),m+=a(f,h,n,i);else for(;!(b=w.next()).done;){var _=b.value;_&&(f=_[1],h=g+u.escape(_[0])+p+r(f,0),m+=a(f,h,n,i))}}else if("object"===d){var C="",k=String(e);o("31","[object Object]"===k?"object with keys {"+Object.keys(e).join(", ")+"}":k,C)}}return m}function i(e,t,n){return null==e?0:a(e,"",t,n)}var o=n(64),s=(n(31),n(166)),l=n(318),u=(n(5),n(311)),c=(n(6),"."),p=":";e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(634),a=n(1142),i=n(1141),o=n(1140),s=n(633);n(635);n.d(t,"createStore",function(){return r.b}),n.d(t,"combineReducers",function(){return a.a}),n.d(t,"bindActionCreators",function(){return i.a}),n.d(t,"applyMiddleware",function(){return o.a}),n.d(t,"compose",function(){return s.a})},function(e,t){(function(t){e.exports=t}).call(t,{})},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(641),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={contents:u.a.arrayOf(u.a.shape({title:u.a.string,id:u.a.string})),type:u.a.string.isRequired,onEdit:u.a.func.isRequired,onDelete:u.a.func.isRequired,disabled:u.a.bool},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("ul",{className:"list--neutral margin-bottom--0"},this.props.contents.map(function(t){return s.a.createElement(c.a,{title:t.title,key:t.id,id:t.id,type:e.props.type,onEdit:e.props.onEdit,onDelete:e.props.onDelete,disabled:e.props.disabled})})))}}]),t}(o.Component);f.propTypes=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={id:u.a.string,label:u.a.string,onChange:u.a.func,error:u.a.string,isChecked:u.a.bool,disabled:u.a.bool},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFocused:!1,value:!1},n.handleFocus=n.handleFocus.bind(n),n.handleChange=n.handleChange.bind(n),n}return i(t,e),c(t,[{key:"componentWillMount",value:function(){this.props.isChecked&&this.setState({value:this.props.isChecked})}},{key:"handleChange",value:function(e){var t=e.target.checked;this.setState({value:t}),this.props.onChange(t)}},{key:"handleFocus",value:function(){this.state.isFocused?this.setState({isFocused:!1}):this.setState({isFocused:!0})}},{key:"render",value:function(){return s.a.createElement("div",{className:"form__input"+(this.props.error?" form__input--error":"")},this.props.error&&s.a.createElement("div",{className:"error-msg"},this.props.error),s.a.createElement("div",{className:"checkbox"},s.a.createElement("input",{className:"checkbox__input",type:"checkbox",checked:this.state.value,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleFocus,disabled:this.props.disabled,id:this.props.id}),s.a.createElement("label",{htmlFor:this.props.id,className:"checkbox__label"},this.props.label)))}}]),t}(o.Component);d.propTypes=p,t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(28),u=n(3),c=n.n(u),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={formData:c.a.shape({inputs:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,value:c.a.string,label:c.a.string.isRequired,type:c.a.string,onChange:c.a.func,error:c.a.string})),onSubmit:c.a.func.isRequired,onCancel:c.a.func.isRequired,isSubmitting:c.a.bool}).isRequired},h=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),d(t,[{key:"render",value:function(){var e=this.props.formData.inputs||[],t=this.props.formData.isSubmitting||!1;return s.a.createElement("div",null,s.a.createElement("div",{className:"modal__header"},s.a.createElement("h2",null,"Change password")),s.a.createElement("form",{onSubmit:this.props.formData.onSubmit},s.a.createElement("div",{className:"modal__body"},e.map(function(e,n){return s.a.createElement(l.a,p({key:n},e,{disabled:t}))})),s.a.createElement("div",{className:"modal__footer"},s.a.createElement("button",{className:"btn btn--positive",type:"submit",onClick:this.props.formData.onSubmit,disabled:t},"Update password"),s.a.createElement("button",{className:"btn margin-left--1",type:"button",onClick:this.props.formData.onCancel,disabled:t},"Cancel"),t?s.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):"")))}}]),t}(o.Component);t.a=h,h.propTypes=f},function(e,t,n){"use strict";function r(e){return e?e.match(/.+\s.+\s.+\s.+/)?e.length<=15?{isValid:!1,error:"Passwords must contain at least 15 characters"}:{isValid:!0,error:""}:{isValid:!1,error:"Passwords must contain four words, separated by spaces"}:{isValid:!1,error:"Passwords must contain four words and be at least 15 characters"}}t.a=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={path:u.a.string,onChange:u.a.func},d={path:"/"},f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindWindowOnMessage(),n}return i(t,e),c(t,[{key:"shouldComponentUpdate",value:function(e){return e.path!==this.props.path}},{key:"bindWindowOnMessage",value:function(){window.addEventListener("message",this.handleIframeMessage,!1)}},{key:"handleIframeMessage",value:function(e){"load"===e.message&&this.props.onChange(document.getElementById("iframe").contentWindow.document.location.pathname)}},{key:"render",value:function(){return s.a.createElement("iframe",{id:"iframe",className:"preview__iframe",src:this.props.path})}}]),t}(o.Component);t.a=f,f.propTypes=p,f.defaultProps=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(654),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={items:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,name:u.a.string.isRequired})).isRequired,onRemoveItem:u.a.func.isRequired},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"selected-item-list"},this.props.items.map(function(t,n){return s.a.createElement(c.a,{key:n,item:t,onRemoveItem:e.props.onRemoveItem})}))}}]),t}(o.Component);t.a=f,f.propTypes=d},function(e,t,n){"use strict";function r(){var e={credentials:"include",method:"POST",body:JSON.stringify({})};return fetch("/zebedee/ping",e).then(function(e){if(!e.ok)throw e;return e.json()}).then(function(e){return e}).catch(function(e){return console.error(e),Promise.reject(e)})}t.a=r;var a=n(81);n.n(a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={FETCH_ERR:"Florence is unavailable",RESPONSE_ERR:"Florence is experiencing difficulties",UNEXPECTED_ERR:"Something has gone seriously wrong. Please restart Florence"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(81),i=n.n(a),o=n(1023),s=n.n(o),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e),this.database=null,this.DbIsInitialised=!1,this.buffer=[],this.initialise()}return l(e,[{key:"initialise",value:function(){var e=this,t=s.a.IndexedDb;this.database=new t({namespace:"florence"},function(){e.database.addCollection("logs",function(){e.getLatest().then(function(t){if(new Date(t.timestamp).toDateString()!==(new Date).toDateString())return void e.removeAll().then(function(){e.DbIsInitialised=!0});e.DbIsInitialised=!0}),e.buffer.length&&e.buffer.forEach(function(t){e.database.logs.upsert(t)})})},function(){console.log("Error creating indexedDB")})}},{key:"storageUsed",value:function(){return navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,t){return{used:e,available:t}})}},{key:"add",value:function(e){return e.storageID=i()(),this.DbIsInitialised?(this.database.logs.upsert(e),e.storageID):(this.buffer.push(e),e.storageID)}},{key:"get",value:function(e){var t=this;return e?new Promise(function(n,r){t.database.logs.findOne({storageID:e},{},function(e){n(e)},function(e){r(e)})}):(console.warn("A key must be given when trying to access stored data"),Promise.reject())}},{key:"getAll",value:function(e,t,n){var r=this;return new Promise(function(a,i){var o={};n&&(o.timestamp={$lte:n}),r.database.logs.find(o,{sort:[["timestamp","desc"]],skip:e,limit:t}).fetch(function(e){a(e)},function(e){i(),console.error("Error fetching all logs from local DB",e)})})}},{key:"getLatest",value:function(){var e=this;return new Promise(function(t,n){e.database.logs.find({},{sort:["timestamp"],limit:1}).fetch(function(e){t(e[0])},function(e){n(),console.error("Error fetching all logs from local DB",e)})})}},{key:"remove",value:function(e){var t=this;return new Promise(function(n,r){t.database.logs.remove(e,function(){n()},function(){r()})})}},{key:"length",value:function(){return new Promise(function(e,t){var n=window.indexedDB.open("IDBWrapper-minimongo_florence",1);n.onsuccess=function(){var r=n.result.transaction(["minimongo_florence"],"readonly"),a=r.objectStore("minimongo_florence"),i=a.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){t()}}})}},{key:"removeAll",value:function(){var e=this;return new Promise(function(t,n){e.getAll().then(function(n){var r=0;n.forEach(function(a){e.database.logs.remove(a._id,function(){e.database.logs.resolveRemove(a._id,function(){++r===n.length&&t()})})})},function(){n()})})}}]),e}(),c=new u;t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(23),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this.socket=null,this.openDelay=1,this.buffer=new Map,this.messageCounter=0,this.open()}return o(e,[{key:"open",value:function(){var e=this,t=location.protocol.replace(/^http/,"ws");this.socket=new WebSocket(""+t+location.host+"/florence/websocket"),console.info("Trying to open websocket..."),this.socket.onopen=function(){console.info("Websocket has been opened"),e.openDelay=1,e.buffer.forEach(function(t){e.socket.send(t)}),a.a.event("Websocket opened")},this.socket.onerror=function(e){a.a.event("Websocket error",a.a.error(),a.a.data(i({},e)))},this.socket.onclose=function(){console.info("Websocket has been closed"),e.openDelay*=2,e.openDelay>=1e4&&(e.openDelay=1e4),setTimeout(function(){e.open()},e.openDelay)},this.socket.onmessage=function(t){t=JSON.parse(t.data),"ack"===t.type&&e.buffer.delete(parseInt(t.payload))}}},{key:"send",value:function(e){if(this.messageCounter++,e=this.messageCounter+":"+e,this.buffer.size>=50)return void console.warn("Websocket buffer has reached it's limit, so message will not be sent to server. Message: \n",e);this.buffer.set(this.messageCounter,e),1===this.socket.readyState&&this.socket.send(e)}}]),e}(),l=new s;t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return b}),n.d(t,"b",function(){return w});var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(30),p=n(16),d=n(14),f=(n.n(d),n(20)),h=n(23),m=n(646),g=n(36),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b={lastEdit:u.a.shape({email:u.a.string,date:u.a.string}),uri:u.a.string.isRequired,title:u.a.string.isRequired,edition:u.a.string,version:u.a.string,type:u.a.string},w=u.a.shape({uri:u.a.string.isRequired,type:u.a.string.isRequired,description:u.a.shape({title:u.a.string.isRequired,edition:u.a.string,language:u.a.string}),children:u.a.arrayOf(u.a.object),deleteMarker:u.a.bool.isRequired,contentPath:u.a.string.isRequired}),E={id:u.a.string.isRequired,activePageURI:u.a.string,name:u.a.string,enableDatasetImport:u.a.bool,onClose:u.a.func.isRequired,onPageClick:u.a.func.isRequired,onEditPageClick:u.a.func.isRequired,onDeletePageClick:u.a.func.isRequired,onCancelPageDeleteClick:u.a.func.isRequired,onDeleteCollectionClick:u.a.func.isRequired,onApproveCollectionClick:u.a.func.isRequired,isLoadingNameAndDate:u.a.bool,isLoadingDetails:u.a.bool,isCancellingDelete:u.a.shape({value:u.a.bool.isRequired,uri:u.a.string.isRequired}),isApprovingCollection:u.a.bool,canBeDeleted:u.a.bool,canBeApproved:u.a.bool,inProgress:u.a.arrayOf(u.a.shape(b)),complete:u.a.arrayOf(u.a.shape(b)),reviewed:u.a.arrayOf(u.a.shape(b)),deletes:u.a.arrayOf(u.a.shape({user:u.a.string.isRequired,root:w,totalDeletes:u.a.number.isRequired})),status:u.a.shape({neutral:u.a.bool,warning:u.a.bool}),type:u.a.string,publishDate:u.a.string,dispatch:u.a.func.isRequired},_=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRestoreContentClick=n.handleRestoreContentClick.bind(n),n.handleCollectionDeleteClick=n.handleCollectionDeleteClick.bind(n),n.handleCollectionApproveClick=n.handleCollectionApproveClick.bind(n),n}return i(t,e),y(t,[{key:"handleCollectionDeleteClick",value:function(){this.props.onDeleteCollectionClick(this.props.id)}},{key:"handleCollectionApproveClick",value:function(){this.props.onApproveCollectionClick(this.props.id)}},{key:"renderLastEditText",value:function(e){try{if(!e||!e.date&&!e.email)return"Last edit: information not available";if(!e.date||"string"!=typeof e.date)return"Last edit: "+e.email+" (date not available)";var t=g.a.format(new Date(e.date),"ddd d mmm yyyy - HH:MM:ss");return e.email&&"string"==typeof e.email?"Last edit: "+e.email+" ("+t+")":"Last edit: email not available ("+t+")"}catch(t){return h.a.event("Error parsing date for collection details 'page last edit' function",h.a.error(t),h.a.data(v({},e))),console.error("Error parsing date for collection details 'page last edit' function. Last edit data: ",e),e.email?"Last edit: "+e.email+" (date not available)":"Error showing 'last edit' details"}}},{key:"renderPageItem",value:function(e,t){var n=this,r=e.uri,a=r&&this.props.activePageURI===r,i=function(){n.props.onPageClick(r)},o=function(){n.props.onEditPageClick(e,t)},l=function(){n.props.onDeletePageClick(e,t)};return s.a.createElement("li",{key:r,onClick:i,"data-page-state":t,className:"list__item list__item--expandable"+(a?" active":"")},s.a.createElement("div",{className:"expandable-item__header"},s.a.createElement(m.a,{type:e.type,title:e.title+(e.edition?": "+e.edition:"")+(e.version?" (version "+e.version+")":""),isActive:a})),s.a.createElement("div",{className:"expandable-item__contents"},s.a.createElement("div",{className:"margin-bottom--1 margin-left--2"},s.a.createElement("p",null,this.renderLastEditText(e.lastEdit))),s.a.createElement("button",{className:"btn btn--primary",onClick:o,type:"button"},"complete"===t?"Review":"Edit"),s.a.createElement("button",{className:"btn btn--warning btn--margin-left",onClick:l,type:"button",disabled:"dataset_details"===e.type||"dataset_version"===e.type},"Delete")))}},{key:"renderPagesList",value:function(e){return s.a.createElement("ul",{className:"list list--neutral margin-bottom--1"},e)}},{key:"renderInProgress",value:function(){var e=this;if(!this.props.inProgress)return s.a.createElement("p",{className:"margin-bottom--2"},"Error rendering in progress pages");if(0===this.props.inProgress.length)return s.a.createElement("p",{className:"margin-bottom--2"},"No pages in progress");var t=this.props.inProgress.map(function(t){return e.renderPageItem(t,"inProgress")});return this.renderPagesList(t)}},{key:"renderWaitingReview",value:function(){var e=this;if(!this.props.complete)return s.a.createElement("p",{className:"margin-bottom--2"},"Error rendering pages awaiting review");if(0===this.props.complete.length)return s.a.createElement("p",{className:"margin-bottom--2"},"No pages awaiting review");var t=this.props.complete.map(function(t){return e.renderPageItem(t,"complete")});return this.renderPagesList(t)}},{key:"renderReviewed",value:function(){var e=this;if(!this.props.reviewed)return s.a.createElement("p",{className:"margin-bottom--2"},"Error rendering reviewed pages");if(0===this.props.reviewed.length)return s.a.createElement("p",{className:"margin-bottom--2"},"No reviewed pages");var t=this.props.reviewed.map(function(t){return e.renderPageItem(t,"reviewed")});return this.renderPagesList(t)}},{key:"renderDeletetedPageChildItem",value:function(e){var t=e.description.title+(e.description.edition?": "+e.description.edition:"");return s.a.createElement("li",{key:e.uri,className:"margin-bottom--1"},s.a.createElement(m.a,{type:e.type,title:s.a.createElement("p",null,t,s.a.createElement("br",null),s.a.createElement("a",{href:e.uri,target:"_blank"},e.uri))}))}},{key:"renderDeletetedPageItem",value:function(e){var t=this,n=function(){t.props.onPageClick(e.root.uri)},r=!!this.props.isCancellingDelete&&(this.props.isCancellingDelete.value&&this.props.isCancellingDelete.uri===e.root.uri);return s.a.createElement("li",{key:e.root.uri,"data-page-state":"deletes",onClick:n,className:"list__item list__item--expandable"+(this.props.activePageURI===e.root.uri?" active":"")},s.a.createElement("div",{className:"expandable-item__header"},s.a.createElement(m.a,{type:e.root.type,title:e.root.description.title+(e.root.description.edition?": "+e.root.description.edition:""),isActive:this.props.activePageURI===e.root.uri})),s.a.createElement("div",{className:"expandable-item__contents"},s.a.createElement("div",{className:"margin-left--2 margin-bottom--1"},r&&s.a.createElement("p",{className:"font-weight--600"},"Cancelling delete in progress"),s.a.createElement("p",null,"Deleted by: ",e.user),s.a.createElement("p",null,"Path: ",s.a.createElement("a",{href:e.root.uri,target:"_blank"},e.root.uri)),s.a.createElement("p",{className:"margin-bottom--1"},"Total deletes: ",e.totalDeletes),s.a.createElement("button",{disabled:r,type:"button",className:"btn btn--warning",onClick:function(){t.props.onCancelPageDeleteClick(e.root.uri)}},"Cancel delete"),e.root.children&&e.root.children.length>0&&s.a.createElement("div",null,s.a.createElement("h4",{className:"margin-top--1 margin-bottom--1"},"Sub-pages included in this delete:"),s.a.createElement("ul",{className:"list--neutral"},e.root.children.map(function(e){return t.renderDeletetedPageChildItem(e)}))))))}},{key:"renderDeleted",value:function(){var e=this;return this.props.deletes.map(function(t){return e.renderDeletetedPageItem(t)})}},{key:"statePageCount",value:function(e){return this.props[e]&&0!==this.props[e].length?this.props[e].length.toString():"0"}},{key:"renderPluralisedPageText",value:function(e){return this.props[e]&&1===this.props[e].length?"page":"pages"}},{key:"renderPageStateHeading",value:function(e){switch(e){case"inProgress":return this.statePageCount(e)+" "+this.renderPluralisedPageText(e)+" in progress";case"complete":return this.statePageCount(e)+" "+this.renderPluralisedPageText(e)+" awaiting review";case"reviewed":return this.statePageCount(e)+" reviewed "+this.renderPluralisedPageText(e);case"deletes":if(!this.props.deletes||0===this.props.deletes.length)return;return this.statePageCount(e)+" "+(this.props.deletes.length>1?"deletes":"delete")}}},{key:"renderCollectionState",value:function(){if(this.props.status)return this.props.status.neutral?s.a.createElement("div",{className:"drawer__banner drawer__banner--dark drawer__banner--large"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8"},"Preparing collection for the publishing queue"))):this.props.status.warning?s.a.createElement("div",{className:"drawer__banner drawer__banner--dark drawer__banner--large"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8"},"Error whilst preparing this collection for the publishing queue"))):void 0}},{key:"renderCollectionPageActions",value:function(){if(!this.props.status||!this.props.status.neutral&&!this.props.status.warning)return s.a.createElement("div",{className:"drawer__banner"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 grid--align-start margin-top--1 margin-bottom--1"},s.a.createElement("div",null,s.a.createElement("a",{href:f.a.resolve("/workspace")+"?collection="+this.props.id,className:"btn btn--primary"+(this.props.isLoadingNameAndDate?" btn--disabled":"")},"Create/edit page"),this.props.enableDatasetImport&&s.a.createElement(c.g,{id:"import-dataset-link",to:location.pathname+"/datasets",className:"btn btn--primary btn--margin-left"},"Create/edit CMD dataset page"),s.a.createElement("button",{disabled:this.props.isLoadingNameAndDate,className:"btn btn--margin-left",onClick:this.handleRestoreContentClick},"Restore page")))))}},{key:"handleRestoreContentClick",value:function(){this.props.dispatch(n.i(d.push)(location.pathname+"/restore-content"))}},{key:"renderCollectionActions",value:function(){if(!(this.props.isLoadingNameAndDate||this.props.status&&(this.props.status.neutral||this.props.status.warning)))return this.props.canBeDeleted?s.a.createElement("button",{className:"btn btn--warning btn--margin-right",disabled:this.props.isLoadingDetails,onClick:this.handleCollectionDeleteClick,type:"button",id:"delete-collection"},"Delete"):this.props.canBeApproved?s.a.createElement("button",{className:"btn btn--positive btn--margin-right",disabled:this.props.isLoadingDetails||this.props.isApprovingCollection,onClick:this.handleCollectionApproveClick,type:"button",id:"approve-collection"},"Approve"):void 0}},{key:"renderPublishDate",value:function(){if(this.props.type)return"manual"===this.props.type?s.a.createElement("p",null,"Manual publish"):"scheduled"===this.props.type&&this.props.publishDate?s.a.createElement("p",null,"Publish date: ",g.a.format(this.props.publishDate,"dddd, d mmmm yyyy h:MMTT")):"scheduled"!==this.props.type||this.props.publishDate?void 0:s.a.createElement("p",null,"Publish date: no publish date available")}},{key:"render",value:function(){return s.a.createElement("div",{className:"drawer__container"},s.a.createElement("div",{className:"drawer__heading"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8"},s.a.createElement("div",{className:"grid grid--justify-space-between grid--align-end margin-top--3 margin-bottom--2"},s.a.createElement("div",null,s.a.createElement("h2",null,this.props.isLoadingNameAndDate?"Loading...":this.props.name),this.props.isLoadingNameAndDate?s.a.createElement("p",null,"Loading..."):this.renderPublishDate()),!this.props.isLoadingNameAndDate&&s.a.createElement(c.g,{to:location.pathname+"/edit",className:"colour--cadet-blue font-size--16"},"Edit"))))),this.renderCollectionState(),this.renderCollectionPageActions(),s.a.createElement("div",{className:"drawer__body"},s.a.createElement("div",{className:"grid grid--justify-space-around"},this.props.isLoadingDetails?s.a.createElement("div",{className:"grid grid--align-center margin-top--4"},s.a.createElement("div",{className:"loader loader--large loader--dark"})):s.a.createElement("div",{className:"grid__col-8 margin-top--2"},s.a.createElement("h3",{className:"margin-bottom--1"},this.renderPageStateHeading("inProgress")),this.renderInProgress(),s.a.createElement("h3",{className:"margin-bottom--1"},this.renderPageStateHeading("complete")),this.renderWaitingReview(),s.a.createElement("h3",{className:"margin-bottom--1"},this.renderPageStateHeading("reviewed")),this.renderReviewed(),this.props.deletes&&this.props.deletes.length>0&&s.a.createElement("div",null,s.a.createElement("h3",{className:"margin-bottom--1"},this.renderPageStateHeading("deletes")),this.renderDeleted())))),s.a.createElement("div",{className:"drawer__footer"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},s.a.createElement("div",null,this.renderCollectionActions(),s.a.createElement("button",{className:"btn",onClick:this.props.onClose,type:"button"},"Close"),this.props.isApprovingCollection&&s.a.createElement("div",{className:"inline-block margin-left--1"},s.a.createElement("div",{className:"loader loader--inline"})))))))}}]),t}(o.Component);_.propTypes=E,t.c=n.i(p.connect)()(_)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return a(e,null,[{key:"name",value:function(e){return!e||e.match(/^\s*$/)?{isValid:!1,errorMsg:"Collections must be given a name"}:{isValid:!0,errorMsg:""}}},{key:"date",value:function(e){return e?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Scheduled collections must be given a publish date"}}},{key:"time",value:function(e){return e?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Scheduled collections must be given a publish time"}}},{key:"release",value:function(e){return e.uri?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Must select a release"}}},{key:"type",value:function(e){return e?"manual"!==e&&"scheduled"!==e?{isValid:!1,errorMsg:"Collections must have a publish type"}:{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Collections must have a publish type"}}}]),e}();t.a=i},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=arguments[3],a=arguments[4];if(401===t.status||401===e.status)return!0;if(t.status&&e.status&&t.status!==e.status){var s={type:"warning",message:i(e,{},n,r,a),isDismissable:!0,autoDismiss:8e3},l={type:"warning",message:i({},t,n,r,a),isDismissable:!0,autoDismiss:8e3};return o.a.add(s),void o.a.add(l)}if(e.status||t.status){var u={type:"warning",message:i(e,t,n,r,a),isDismissable:!0,autoDismiss:8e3};return o.a.add(u),!0}return!1}function a(e,t,n,r){var a=e.status,i=t.status,o="the next state";return i&&n&&(o="review"),i&&r&&(o="approval"),i&&a?"submit for "+o+" and save your metadata updates":i&&!a?"submit for "+o:!i&&a?"save your metadata updates":void 0}function i(e,t,n,r,i){var o=a(e,t,n,r);switch(t.status||e.status){case 400:return"Unable to "+o+" due to invalid values being submitted. Please check your updates for any issues and try again";case 403:return"Unable to "+o+" because you do not have the correct permissions";case 404:return"Unable to "+o+" because this "+(t.status?"collection ("+i+")":"")+(t.status&&e.status?" and ":"")+(e.status?"dataset":"")+" couldn't be found";case"FETCH_ERR":return"Unable to "+o+" due to a network issue. Please check your internet connection and try again";default:return"Unable to "+o+" due to an unexpected error"}}t.a=r;var o=n(10)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(28),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={formTitle:u.a.string,titleLabel:u.a.string,titleInput:u.a.string,urlLabel:u.a.string,urlInput:u.a.string,descLabel:u.a.string,descInput:u.a.string,name:u.a.string.isRequired,isPosting:u.a.bool,onCancel:u.a.func.isRequired,onFormSubmit:u.a.func.isRequired,onFormInput:u.a.func.isRequired,titleError:u.a.string,urlError:u.a.string,descError:u.a.string,requiresDescription:u.a.bool,requiresURL:u.a.bool},f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={formTitle:"",titleLabel:"",titleInput:"",urlLabel:"",urlInput:"",descLabel:"",descInput:""},n}return i(t,e),p(t,[{key:"componentWillMount",value:function(){(this.props.urlInput||this.props.titleInput||this.props.descInput)&&this.setState({titleInput:this.props.titleInput,urlInput:this.props.urlInput,descInput:this.props.descInput,titleLabel:this.props.titleLabel,urlLabel:this.props.urlLabel,descLabel:this.props.descLabel,formTitle:this.props.formTitle})}},{key:"render",value:function(){return s.a.createElement("form",{className:"form",onSubmit:this.props.onFormSubmit},s.a.createElement("div",{className:"modal__header"},s.a.createElement("h2",null,this.props.formTitle,":")),s.a.createElement("div",{className:"modal__body"},s.a.createElement(c.a,{type:"text",label:this.props.titleLabel,id:"add-related-content-title",name:"add-related-content-title",error:this.props.titleError,onChange:this.props.onFormInput,onCancel:this.props.onCancel,isFocused:!0,value:this.props.titleInput}),this.props.requiresURL&&s.a.createElement(c.a,{type:"text",label:this.props.urlLabel,error:this.props.urlError,id:"add-related-content-url",name:"add-related-content-url",value:this.props.urlInput,onChange:this.props.onFormInput,onCancel:this.props.onCancel}),this.props.requiresDescription&&s.a.createElement(c.a,{type:"textarea",label:this.props.descLabel,error:this.props.descError,id:"add-related-content-desc",name:"add-related-content-desc",value:this.props.descInput,onChange:this.props.onFormInput,onCancel:this.props.onCancel})),s.a.createElement("div",{className:"modal__footer"},s.a.createElement("button",{disabled:this.props.isPosting,className:"btn btn--primary btn--margin-right"},"Add"),s.a.createElement("button",{type:"button",disabled:this.props.isPosting,className:"btn",onClick:this.props.onCancel},"Cancel"),this.props.isPosting&&s.a.createElement("div",{className:"loader"})))}}]),t}(o.Component);f.propTypes=d,t.a=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.readState=t.saveState=void 0;var r=n(88),a=(function(e){e&&e.__esModule}(r),{QuotaExceededError:!0,QUOTA_EXCEEDED_ERR:!0}),i={SecurityError:!0},o=function(e){return"@@History/"+e};t.saveState=function(e,t){if(window.sessionStorage)try{null==t?window.sessionStorage.removeItem(o(e)):window.sessionStorage.setItem(o(e),JSON.stringify(t))}catch(e){if(i[e.name])return;if(a[e.name]&&0===window.sessionStorage.length)return;throw e}},t.readState=function(e){var t=void 0;try{t=window.sessionStorage.getItem(o(e))}catch(e){if(i[e.name])return}if(t)try{return JSON.parse(t)}catch(e){}}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(237),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(85),s=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e(t),a=t.basename,s=function(e){return e?(a&&null==e.basename&&(0===e.pathname.toLowerCase().indexOf(a.toLowerCase())?(e.pathname=e.pathname.substring(a.length),e.basename=a,""===e.pathname&&(e.pathname="/")):e.basename=""),e):e},l=function(e){if(!a)return e;var t="string"==typeof e?(0,o.parsePath)(e):e,n=t.pathname,i="/"===a.slice(-1)?a:a+"/",s="/"===n.charAt(0)?n.slice(1):n;return r({},t,{pathname:i+s})};return r({},n,{getCurrentLocation:function(){return s(n.getCurrentLocation())},listenBefore:function(e){return n.listenBefore(function(t,n){return(0,i.default)(e,s(t),n)})},listen:function(e){return n.listen(function(t){return e(s(t))})},push:function(e){return n.push(l(e))},replace:function(e){return n.replace(l(e))},createPath:function(e){return n.createPath(l(e))},createHref:function(e){return n.createHref(l(e))},createLocation:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return s(n.createLocation.apply(n,[l(e)].concat(r)))}})}};t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1029),i=n(237),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(126),l=n(85),u=function(e){return(0,a.stringify)(e).replace(/%20/g,"+")},c=a.parse,p=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e(t),a=t.stringifyQuery,i=t.parseQueryString;"function"!=typeof a&&(a=u),"function"!=typeof i&&(i=c);var p=function(e){return e?(null==e.query&&(e.query=i(e.search.substring(1))),e):e},d=function(e,t){if(null==t)return e;var n="string"==typeof e?(0,l.parsePath)(e):e,i=a(t);return r({},n,{search:i?"?"+i:""})};return r({},n,{getCurrentLocation:function(){return p(n.getCurrentLocation())},listenBefore:function(e){return n.listenBefore(function(t,n){return(0,o.default)(e,p(t),n)})},listen:function(e){return n.listen(function(t){return e(p(t))})},push:function(e){return n.push(d(e,e.query))},replace:function(e){return n.replace(d(e,e.query))},createPath:function(e){return n.createPath(d(e,e.query))},createHref:function(e){return n.createHref(d(e,e.query))},createLocation:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=n.createLocation.apply(n,[d(e,e.query)].concat(r));return e.query&&(i.query=(0,s.createQuery)(e.query)),p(i)}})}};t.default=p},function(e,t,n){"use strict";var r=n(1021),a=r.a.Symbol;t.a=a},function(e,t,n){var r,a,i;i=n(58),a=n(42).processFind,n(42),e.exports=function(){function e(e,t){this.localDb=e,this.remoteDb=t,this.collections={}}return e.prototype.addCollection=function(e,t,n,a){var o,s;if(i.isFunction(t)&&(s=[{},t,n],t=s[0],n=s[1],s[2]),o=new r(e,this.localDb[e],this.remoteDb[e],t),this[e]=o,this.collections[e]=o,null!=n)return n()},e.prototype.removeCollection=function(e,t,n){if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.upload=function(e,t){var n,r;return n=i.values(this.collections),(r=function(e,t,n){var a;return a=i.first(e),a?a.upload(function(){return r(i.rest(e),t,n)},function(e){return n(e)}):t()})(n,e,t)},e.prototype.getCollectionNames=function(){return i.keys(this.collections)},e}(),r=function(){function e(e,t,n,r){this.name=e,this.localCol=t,this.remoteCol=n,this.options=r||{},i.defaults(this.options,{cacheFind:!0,cacheFindOne:!0,interim:!0,useLocalOnRemoteError:!0,shortcut:!1,timeout:0,sortUpserts:null})}return e.prototype.find=function(e,t){return null==t&&(t={}),{fetch:function(n){return function(r,a){return n._findFetch(e,t,r,a)}}(this)}},e.prototype.findOne=function(e,t,n,r){var a,o;return null==t&&(t={}),i.isFunction(t)&&(o=[{},t,n],t=o[0],n=o[1],r=o[2]),i.defaults(t,this.options),a=function(a){return function(o){var s;return s=i.cloneDeep(t),s.interim=!1,s.cacheFind=t.cacheFindOne,e._id?s.limit=1:delete s.limit,a.find(e,s).fetch(function(e){return e.length>0?i.isEqual(o,e[0])?void 0:n(e[0]):n(null)},r)}}(this),t.interim||t.shortcut?this.localCol.findOne(e,t,function(e){if(!e||(n(i.cloneDeep(e)),!t.shortcut))return a(e)},r):a()},e.prototype._findFetch=function(e,t,n,r){var o,s;return i.defaults(t,this.options),s=function(o){return function(s){var l,u,c,p,d;return u=i.cloneDeep(t),t.cacheFind&&delete u.fields,u.localData=s,d=null,p=!1,c=function(l){var u,c;return d&&clearTimeout(d),p?void(t.cacheFind&&o.localCol.cache(l,e,t,function(){},r)):t.cacheFind?(u=function(){var a;return a=function(e){if(!t.interim||!i.isEqual(s,e))return n(e)},o.localCol.find(e,t).fetch(a,r)},o.localCol.cache(l,e,t,u,r)):(c=l,o.localCol.pendingRemoves(function(u){var p;return u.length>0&&(p=i.object(i.map(u,function(e){return[e,e]})),c=i.filter(l,function(e){return!i.has(p,e._id)})),o.localCol.pendingUpserts(function(r){var o;if(r.length>0&&(o=i.object(i.map(r,function(e){return e.doc._id}),i.map(r,function(e){return e.doc._id})),c=i.filter(c,function(e){return!i.has(o,e._id)}),c=c.concat(i.pluck(r,"doc")),c=a(c,e,t)),!t.interim||!i.isEqual(s,c))return n(c)},r)},r))},l=function(e){if(d&&clearTimeout(d),!p&&!t.interim){if(t.useLocalOnRemoteError)return n(s);if(r)return r(e)}},t.timeout&&(d=setTimeout(function(){if(d=null,p=!0,!t.interim){if(t.useLocalOnRemoteError)return o.localCol.find(e,t).fetch(n,r);if(r)return r(new Error("Remote timed out"))}},t.timeout)),o.remoteCol.find(e,u).fetch(c,l)}}(this),o=function(e){return t.interim&&n(e),s(e)},this.localCol.find(e,t).fetch(o,r)},e.prototype.upsert=function(e,t,n,r){return this.localCol.upsert(e,t,function(r){return i.isFunction(t)&&(n=t),"function"==typeof n?n(e):void 0},r)},e.prototype.remove=function(e,t,n){return this.localCol.remove(e,function(){if(null!=t)return t()},n)},e.prototype.upload=function(e,t){var n,r;return r=function(e){return function(t,n,a){var o;return o=i.first(t),o?e.remoteCol.upsert(o.doc,o.base,function(s){return e.localCol.resolveUpserts([o],function(){return s?e.localCol.cacheOne(s,function(){return r(i.rest(t),n,a)},a):e.localCol.remove(o.doc._id,function(){return e.localCol.resolveRemove(o.doc._id,function(){return r(i.rest(t),n,a)},a)},a)},a)},function(s){return 410===s.status||403===s.status?e.localCol.remove(o.doc._id,function(){return e.localCol.resolveRemove(o.doc._id,function(){return 410===s.status?r(i.rest(t),n,a):a(s)},a)},a):a(s)}):n()}}(this),n=function(e){return function(t,r,a){var o;return o=i.first(t),o?e.remoteCol.remove(o,function(){return e.localCol.resolveRemove(o,function(){return n(i.rest(t),r,a)},a)},function(s){return 410===s.status||403===s.status?e.localCol.resolveRemove(o,function(){return 410===s.status?n(i.rest(t),r,a):a(s)},a):a(s)},a):r()}}(this),this.localCol.pendingUpserts(function(a){return function(i){return a.options.sortUpserts&&i.sort(a.options.sortUpserts),r(i,function(){return a.localCol.pendingRemoves(function(r){return n(r,e,t)},t)},t)}}(this),t)},e}()},function(e,t,n){var r,a,i,o,s,l,u;u=n(58),i=n(127),a=n(1012),l=n(42),s=n(42).processFind,o=n(86).compileSort,e.exports=function(){function e(e,t,n){var r;this.collections={};try{this.store=new a({dbVersion:1,storeName:"minimongo_"+e.namespace,keyPath:["col","doc._id"],autoIncrement:!1,onStoreReady:function(e){return function(){if(t)return t(e)}}(this),onError:n,indexes:[{name:"col",keyPath:"col",unique:!1,multiEntry:!1},{name:"col-state",keyPath:["col","state"],unique:!1,multiEntry:!1}]})}catch(e){return r=e,void(n&&n(r))}}return e.prototype.addCollection=function(e,t,n){var a;if(a=new r(e,this.store),this[e]=a,this.collections[e]=a,t)return t()},e.prototype.removeCollection=function(e,t,n){return delete this[e],delete this.collections[e],this.store.query(function(e){return function(r){var a;return a=u.map(r,function(e){return[e.col,e.doc._id]}),a.length>0?e.store.removeBatch(a,function(){if(null!=t)return t()},n):null!=t?t():void 0}}(this),{index:"col",keyRange:this.store.makeKeyRange({only:e}),onError:n})},e.prototype.getCollectionNames=function(){return u.keys(this.collections)},e}(),r=function(){function e(e,t){this.name=e,this.store=t}return e.prototype.find=function(e,t){return{fetch:function(n){return function(r,a){return n._findFetch(e,t,r,a)}}(this)}},e.prototype.findOne=function(e,t,n,r){var a;return u.isFunction(t)&&(a=[{},t,n],t=a[0],n=a[1],r=a[2]),this.find(e,t).fetch(function(e){if(null!=n)return n(e.length>0?e[0]:null)},r)},e.prototype._findFetch=function(e,t,n,r){return this.store.query(function(r){if(r=u.filter(r,function(e){return"removed"!==e.state}),null!=n)return n(s(u.pluck(r,"doc"),e,t))},{index:"col",keyRange:this.store.makeKeyRange({only:this.name}),onError:r})},e.prototype.upsert=function(e,t,n,r){var a,i,o;return o=l.regularizeUpsert(e,t,n,r),a=o[0],n=o[1],r=o[2],i=u.map(a,function(e){return function(t){return[e.name,t.doc._id]}}(this)),this.store.getBatch(i,function(t){return function(i){var o;return o=u.map(a,function(e,n){var r;return r=void 0!==e.base?e.base:i[n]&&i[n].doc&&"cached"===i[n].state?i[n].doc:i[n]&&i[n].doc&&"upserted"===i[n].state?i[n].base:null,{col:t.name,state:"upserted",doc:e.doc,base:r}}),t.store.putBatch(o,function(){if(n)return n(e)},r)}}(this),r)},e.prototype.remove=function(e,t,n){return u.isObject(e)?void this.find(e).fetch(function(e){return function(n){return i.each(n,function(t,n){return e.remove(t._id,function(){return n()},n)},function(){return t()})}}(this),n):this.store.get([this.name,e],function(r){return function(a){return null==a&&(a={col:r.name,doc:{_id:e}}),a.state="removed",r.store.put(a,function(){if(t)return t(e)},n)}}(this))},e.prototype.cache=function(e,t,n,r,a){var i,s,l;return l=function(i){return function(){var s,l;return s=u.object(u.pluck(e,"_id"),e),n.sort&&(l=o(n.sort)),i.find(t,n).fetch(function(t){var o,c;return c=[],o=u.map(t,function(e){return[i.name,e._id]}),0===o.length?void(null!=r&&r()):i.store.getBatch(o,function(o){var p,d,f,h,m;for(p=h=0,m=o.length;0<=m?h<m:h>m;p=0<=m?++h:--h)if(d=o[p],f=t[p],!s[f._id]&&d&&"cached"===d.state){if(n.limit&&e.length===n.limit){if(n.sort&&l(f,u.last(e))>=0)continue;if(!n.sort)continue}c.push([i.name,f._id])}return c.length>0?i.store.removeBatch(c,function(){if(null!=r)return r()},a):null!=r?r():void 0},a)},a)}}(this),0===e.length?l():(i=u.map(e,function(e){return function(t){return[e.name,t._id]}}(this)),s=[],this.store.getBatch(i,function(t){return function(n){var r,i,o,u,c;for(i=u=0,c=n.length;0<=c?u<c:u>c;i=0<=c?++u:--u)o=n[i],r=e[i],null!=o&&"cached"!==o.state||o&&r._rev&&o.doc._rev&&!(r._rev>o.doc._rev)||s.push({col:t.name,state:"cached",doc:r});return s.length>0?t.store.putBatch(s,l,a):l()}}(this),a))},e.prototype.pendingUpserts=function(e,t){return this.store.query(function(t){var n;if(n=u.map(t,function(e){return{doc:e.doc,base:e.base||null}}),null!=e)return e(n)},{index:"col-state",keyRange:this.store.makeKeyRange({only:[this.name,"upserted"]}),onError:t})},e.prototype.pendingRemoves=function(e,t){return this.store.query(function(t){if(null!=e)return e(u.pluck(u.pluck(t,"doc"),"_id"))},{index:"col-state",keyRange:this.store.makeKeyRange({only:[this.name,"removed"]}),onError:t})},e.prototype.resolveUpserts=function(e,t,n){var r;return r=u.map(e,function(e){return function(t){return[e.name,t.doc._id]}}(this)),this.store.getBatch(r,function(r){return function(a){var i,o,s,l,c;for(o=[],i=l=0,c=e.length;0<=c?l<c:l>c;i=0<=c?++l:--l)(s=a[i])&&"upserted"===s.state&&(u.isEqual(s.doc,e[i].doc)?(s.state="cached",o.push(s)):(s.base=e[i].doc,o.push(s)));return o.length>0?r.store.putBatch(o,function(){if(t)return t()},n):t?t():void 0}}(this),n)},e.prototype.resolveRemove=function(e,t,n){return this.store.get([this.name,e],function(r){return function(a){return a?"removed"===a.state?r.store.remove([r.name,e],function(){if(null!=t)return t()},n):void 0:void(null!=t&&t())}}(this))},e.prototype.seed=function(e,t,n){var r,a;return u.isArray(e)||(e=[e]),r=u.map(e,function(e){return function(t){return[e.name,t._id]}}(this)),a=[],this.store.getBatch(r,function(r){return function(i){var o,s,l,u,c;for(s=u=0,c=i.length;0<=c?u<c:u>c;s=0<=c?++u:--u)l=i[s],o=e[s],null==l&&a.push({col:r.name,state:"cached",doc:o});return a.length>0?r.store.putBatch(a,function(){if(null!=t)return t()},n):null!=t?t():void 0}}(this),n)},e.prototype.cacheOne=function(e,t,n){return this.cacheList([e],t,n)},e.prototype.cacheList=function(e,t,n){var r,a;return r=u.map(e,function(e){return function(t){return[e.name,t._id]}}(this)),a=[],this.store.getBatch(r,function(r){return function(i){var o,s,l,u,c;for(s=u=0,c=i.length;0<=c?u<c:u>c;s=0<=c?++u:--u)l=i[s],o=e[s],l&&o._rev&&l.doc._rev&&o._rev<=l.doc._rev||(null==l&&(l={col:r.name,state:"cached",doc:o}),"cached"===l.state&&(l.doc=o,a.push(l)));return a.length>0?r.store.putBatch(a,function(){if(null!=t)return t()},n):null!=t?t():void 0}}(this),n)},e.prototype.uncache=function(e,t,n){var r;return r=l.compileDocumentSelector(e),this.store.query(function(e){return function(a){var i;return a=u.filter(a,function(e){return"cached"===e.state&&r(e.doc)}),i=u.map(a,function(t){return[e.name,t.doc._id]}),i.length>0?e.store.removeBatch(i,function(){if(null!=t)return t()},n):null!=t?t():void 0}}(this),{index:"col",keyRange:this.store.makeKeyRange({only:this.name}),onError:n})},e.prototype.uncacheList=function(e,t,n){var r;return r=u.indexBy(e),n=n||function(){},this.store.query(function(e){return function(a){var i;return a=u.filter(a,function(e){return"cached"===e.state&&r[e.doc._id]}),i=u.map(a,function(t){return[e.name,t.doc._id]}),i.length>0?e.store.removeBatch(i,function(){if(null!=t)return t()},n):null!=t?t():void 0}}(this),{index:"col",keyRange:this.store.makeKeyRange({only:this.name}),onError:n})},e}()},function(e,t,n){var r,a,i,o,s,l;l=n(58),a=n(127),s=n(42),o=n(42).processFind,i=n(86).compileSort,e.exports=function(){function e(e,t){this.collections={},e&&e.namespace&&window.localStorage&&(this.namespace=e.namespace),t&&t(this)}return e.prototype.addCollection=function(e,t,n){var a,i;if(this.namespace&&(i=this.namespace+"."+e),a=new r(e,i),this[e]=a,this.collections[e]=a,null!=t)return t()},e.prototype.removeCollection=function(e,t,n){var r,a,i,o,s,l,u,c;if(this.namespace&&window.localStorage){for(o=[],r=s=0,c=window.localStorage.length;0<=c?s<c:s>c;r=0<=c?++s:--s)o.push(window.localStorage.key(r));for(l=0,u=o.length;l<u;l++)a=o[l],i=this.namespace+"."+e,a.substring(0,i.length)===i&&window.localStorage.removeItem(a)}if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.getCollectionNames=function(){return l.keys(this.collections)},e}(),r=function(){function e(e,t){this.name=e,this.namespace=t,this.items={},this.upserts={},this.removes={},window.localStorage&&null!=t&&this.loadStorage()}return e.prototype.loadStorage=function(){var e,t,n,r,a,i,o,s,u,c;for(this.itemNamespace=this.namespace+"_",t=o=0,c=window.localStorage.length;0<=c?o<c:o>c;t=0<=c?++o:--o)r=window.localStorage.key(t),r.substring(0,this.itemNamespace.length)===this.itemNamespace&&(n=JSON.parse(window.localStorage[r]),this.items[n._id]=n);for(i=window.localStorage[this.namespace+"upserts"]?JSON.parse(window.localStorage[this.namespace+"upserts"]):[],s=0,u=i.length;s<u;s++)r=i[s],this.upserts[r]={doc:this.items[r]},e=window.localStorage[this.namespace+"upsertbase_"+r]?JSON.parse(window.localStorage[this.namespace+"upsertbase_"+r]):null,this.upserts[r].base=e;return a=window.localStorage[this.namespace+"removes"]?JSON.parse(window.localStorage[this.namespace+"removes"]):[],this.removes=l.object(l.pluck(a,"_id"),a)},e.prototype.find=function(e,t){return{fetch:function(n){return function(r,a){return n._findFetch(e,t,r,a)}}(this)}},e.prototype.findOne=function(e,t,n,r){var a;return l.isFunction(t)&&(a=[{},t,n],t=a[0],n=a[1],r=a[2]),this.find(e,t).fetch(function(e){if(null!=n)return n(e.length>0?e[0]:null)},r)},e.prototype._findFetch=function(e,t,n,r){if(null!=n)return n(o(l.cloneDeep(l.values(this.items)),e,t))},e.prototype.upsert=function(e,t,n,r){var a,i,o,u,c;for(c=s.regularizeUpsert(e,t,n,r),i=c[0],n=c[1],r=c[2],i=JSON.parse(JSON.stringify(i)),o=0,u=i.length;o<u;o++)a=i[o],void 0===a.base&&(this.upserts[a.doc._id]?a.base=this.upserts[a.doc._id].base:a.base=this.items[a.doc._id]||null),a=l.cloneDeep(a),this._putItem(a.doc),this._putUpsert(a);if(n)return n(e)},e.prototype.remove=function(e,t,n){return l.isObject(e)?void this.find(e).fetch(function(e){return function(n){return a.each(n,function(t,n){return e.remove(t._id,function(){return n()},n)},function(){return t()})}}(this),n):(l.has(this.items,e)?(this._putRemove(this.items[e]),this._deleteItem(e),this._deleteUpsert(e)):this._putRemove({_id:e}),null!=t?t():void 0)},e.prototype._putItem=function(e){if(this.items[e._id]=e,this.namespace)return window.localStorage[this.itemNamespace+e._id]=JSON.stringify(e)},e.prototype._deleteItem=function(e){if(delete this.items[e],this.namespace)return window.localStorage.removeItem(this.itemNamespace+e)},e.prototype._putUpsert=function(e){if(this.upserts[e.doc._id]=e,this.namespace)return window.localStorage[this.namespace+"upserts"]=JSON.stringify(l.keys(this.upserts)),window.localStorage[this.namespace+"upsertbase_"+e.doc._id]=JSON.stringify(e.base)},e.prototype._deleteUpsert=function(e){if(delete this.upserts[e],this.namespace)return window.localStorage[this.namespace+"upserts"]=JSON.stringify(l.keys(this.upserts))},e.prototype._putRemove=function(e){if(this.removes[e._id]=e,this.namespace)return window.localStorage[this.namespace+"removes"]=JSON.stringify(l.values(this.removes))},e.prototype._deleteRemove=function(e){if(delete this.removes[e],this.namespace)return window.localStorage[this.namespace+"removes"]=JSON.stringify(l.values(this.removes))},e.prototype.cache=function(e,t,n,r,a){var o,s,u,c,p;for(c=0,p=e.length;c<p;c++)o=e[c],this.cacheOne(o);return s=l.object(l.pluck(e,"_id"),e),n.sort&&(u=i(n.sort)),this.find(t,n).fetch(function(t){return function(a){var i,o,c;for(o=0,c=a.length;o<c;o++)if(i=a[o],!s[i._id]&&!l.has(t.upserts,i._id)){if(n.limit&&e.length===n.limit){if(n.sort&&u(i,l.last(e))>=0)continue;if(!n.sort)continue}t._deleteItem(i._id)}if(null!=r)return r()}}(this),a)},e.prototype.pendingUpserts=function(e){return e(l.values(this.upserts))},e.prototype.pendingRemoves=function(e){return e(l.pluck(this.removes,"_id"))},e.prototype.resolveUpserts=function(e,t){var n,r,a;for(r=0,a=e.length;r<a;r++)n=e[r],this.upserts[n.doc._id]&&(l.isEqual(n.doc,this.upserts[n.doc._id].doc)?this._deleteUpsert(n.doc._id):(this.upserts[n.doc._id].base=n.doc,this._putUpsert(this.upserts[n.doc._id])));if(null!=t)return t()},e.prototype.resolveRemove=function(e,t){if(this._deleteRemove(e),null!=t)return t()},e.prototype.seed=function(e,t){var n,r,a;for(l.isArray(e)||(e=[e]),r=0,a=e.length;r<a;r++)n=e[r],l.has(this.items,n._id)||l.has(this.removes,n._id)||this._putItem(n);if(null!=t)return t()},e.prototype.cacheOne=function(e,t,n){return this.cacheList([e],t,n)},e.prototype.cacheList=function(e,t){var n,r,a,i;for(a=0,i=e.length;a<i;a++)n=e[a],l.has(this.upserts,n._id)||l.has(this.removes,n._id)||(r=this.items[n._id])&&n._rev&&r._rev&&!(n._rev>r._rev)||this._putItem(n);if(null!=t)return t()},e.prototype.uncache=function(e,t,n){var r,a,i,o,u;for(r=s.compileDocumentSelector(e),u=l.values(this.items),i=0,o=u.length;i<o;i++)a=u[i],null==this.upserts[a._id]&&r(a)&&this._deleteItem(a._id);if(null!=t)return t()},e.prototype.uncacheList=function(e,t,n){var r,a,i;for(a=0,i=e.length;a<i;a++)r=e[a],null==this.upserts[r]&&this._deleteItem(r);if(null!=t)return t()},e}()},function(e,t,n){var r,a,i,o,s,l,u=function(e,t){return function(){return e.apply(t,arguments)}};l=n(58),a=n(127),s=n(42),o=n(42).processFind,i=n(86).compileSort,e.exports=function(){function e(e,t){this.collections={},this.options=l.defaults(e,{safety:"clone"}),t&&t(this)}return e.prototype.addCollection=function(e,t,n){var a;if(a=new r(e,this.options),this[e]=a,this.collections[e]=a,null!=t)return t()},e.prototype.removeCollection=function(e,t,n){if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.getCollectionNames=function(){return l.keys(this.collections)},e}(),r=function(){function e(e,t){this._applySafety=u(this._applySafety,this),this.name=e,this.items={},this.upserts={},this.removes={},this.options=t||{}}return e.prototype.find=function(e,t){return{fetch:function(n){return function(r,a){return n._findFetch(e,t,r,a)}}(this)}},e.prototype.findOne=function(e,t,n,r){var a;return l.isFunction(t)&&(a=[{},t,n],t=a[0],n=a[1],r=a[2]),this.find(e,t).fetch(function(e){return function(t){if(null!=n)return n(e._applySafety(t.length>0?t[0]:null))}}(this),r)},e.prototype._findFetch=function(e,t,n,r){return setTimeout(function(r){return function(){var a;if(a=o(l.values(r.items),e,t),null!=n)return n(r._applySafety(a))}}(this),0)},e.prototype._applySafety=function(e){if(!e)return e;if(l.isArray(e))return l.map(e,this._applySafety);if("clone"===this.options.safety||!this.options.safety)return JSON.parse(JSON.stringify(e));if("freeze"===this.options.safety)return Object.freeze(e),e;throw new Error("Unsupported safety "+this.options.safety)},e.prototype.upsert=function(e,t,n,r){var a,i,o,u,c;for(c=s.regularizeUpsert(e,t,n,r),i=c[0],n=c[1],r=c[2],i=JSON.parse(JSON.stringify(i)),o=0,u=i.length;o<u;o++)a=i[o],void 0===a.base&&(this.upserts[a.doc._id]?a.base=this.upserts[a.doc._id].base:a.base=this.items[a.doc._id]||null),this.items[a.doc._id]=a.doc,this.upserts[a.doc._id]=a;if(l.isArray(e)){if(n)return n(this._applySafety(l.pluck(i,"doc")))}else if(n)return n(this._applySafety(l.pluck(i,"doc")[0]))},e.prototype.remove=function(e,t,n){return l.isObject(e)?void this.find(e).fetch(function(e){return function(n){return a.each(n,function(t,n){return e.remove(t._id,function(){return n()},n)},function(){return t()})}}(this),n):(l.has(this.items,e)?(this.removes[e]=this.items[e],delete this.items[e],delete this.upserts[e]):this.removes[e]={_id:e},null!=t?t():void 0)},e.prototype.cache=function(e,t,n,r,a){var o,s,u,c,p;for(c=0,p=e.length;c<p;c++)o=e[c],this.cacheOne(o);return s=l.object(l.pluck(e,"_id"),e),n.sort&&(u=i(n.sort)),this.find(t,n).fetch(function(t){return function(a){var i,o,c;for(o=0,c=a.length;o<c;o++)if(i=a[o],!s[i._id]&&!l.has(t.upserts,i._id)){if(n.limit&&e.length===n.limit){if(n.sort&&u(i,l.last(e))>=0)continue;if(!n.sort)continue}delete t.items[i._id]}if(null!=r)return r()}}(this),a)},e.prototype.pendingUpserts=function(e){return e(l.values(this.upserts))},e.prototype.pendingRemoves=function(e){return e(l.pluck(this.removes,"_id"))},e.prototype.resolveUpserts=function(e,t){var n,r,a,i;for(a=0,i=e.length;a<i;a++)r=e[a],n=r.doc._id,this.upserts[n]&&(l.isEqual(r.doc,this.upserts[n].doc)?delete this.upserts[n]:this.upserts[n].base=r.doc);if(null!=t)return t()},e.prototype.resolveRemove=function(e,t){if(delete this.removes[e],null!=t)return t()},e.prototype.seed=function(e,t){var n,r,a;for(l.isArray(e)||(e=[e]),r=0,a=e.length;r<a;r++)n=e[r],l.has(this.items,n._id)||l.has(this.removes,n._id)||(this.items[n._id]=n);if(null!=t)return t()},e.prototype.cacheOne=function(e,t,n){return this.cacheList([e],t,n)},e.prototype.cacheList=function(e,t){var n,r,a,i;for(a=0,i=e.length;a<i;a++)n=e[a],l.has(this.upserts,n._id)||l.has(this.removes,n._id)||(r=this.items[n._id])&&n._rev&&r._rev&&!(n._rev>r._rev)||(this.items[n._id]=n);if(null!=t)return t()},e.prototype.uncache=function(e,t,n){var r,a;if(r=s.compileDocumentSelector(e),a=l.filter(l.values(this.items),function(e){return function(t){return null!=e.upserts[t._id]||!r(t)}}(this)),this.items=l.object(l.pluck(a,"_id"),a),null!=t)return t()},e.prototype.uncacheList=function(e,t,n){var r,a;if(r=l.indexBy(e),a=l.filter(l.values(this.items),function(e){return function(t){return null!=e.upserts[t._id]||!r[t._id]}}(this)),this.items=l.object(l.pluck(a,"_id"),a),null!=t)return t()},e}()},function(e,t,n){var r,a,i,o,s,l,u;u=n(58),a=n(127),l=n(42),s=n(42).processFind,i=n(86).compileSort,o=function(){},e.exports=function(){function e(e,t,n){var r,a,i,s;this.collections={};try{if(this.db=window.openDatabase("minimongo_"+e.namespace,"","Minimongo:"+e.namespace,5242880),!this.db)return n(new Error("Failed to create database"))}catch(e){return a=e,void(n&&n(a))}return i=function(e){return e.executeSql("CREATE TABLE docs (\n  col TEXT NOT NULL,\n  id TEXT NOT NULL,\n  state TEXT NOT NULL,\n  doc TEXT,\n  PRIMARY KEY (col, id));",[],o,function(e,t){return n(t)})},s=function(e){return e.executeSql("ALTER TABLE docs ADD COLUMN base TEXT;",[],o,function(e,t){return n(t)})},r=function(e){return function(){return"1.0"===e.db.version?e.db.changeVersion("1.0","2.0",s,n,function(){if(t)return t(e)}):"2.0"!==e.db.version?n("Unknown db version "+e.db.version):t?t(e):void 0}}(this),this.db.version?r():this.db.changeVersion("","1.0",i,n,r),this.db}return e.prototype.addCollection=function(e,t,n){var a;if(a=new r(e,this.db),this[e]=a,this.collections[e]=a,t)return t()},e.prototype.removeCollection=function(e,t,n){return delete this[e],delete this.collections[e],this.db.transaction(function(r){return r.executeSql("DELETE FROM docs WHERE col = ?",[e],t,function(e,t){return n(t)})},n)},e.prototype.getCollectionNames=function(){return u.keys(this.collections)},e}(),r=function(){function e(e,t){this.name=e,this.db=t}return e.prototype.find=function(e,t){return{fetch:function(n){return function(r,a){return n._findFetch(e,t,r,a)}}(this)}},e.prototype.findOne=function(e,t,n,r){var a;return u.isFunction(t)&&(a=[{},t,n],t=a[0],n=a[1],r=a[2]),this.find(e,t).fetch(function(e){if(null!=n)return n(e.length>0?e[0]:null)},r)},e.prototype._findFetch=function(e,t,n,r){return r=r||function(){},this.db.readTransaction(function(a){return function(i){return i.executeSql("SELECT * FROM docs WHERE col = ?",[a.name],function(r,a){var i,o,l,u,c;for(i=[],o=u=0,c=a.rows.length;0<=c?u<c:u>c;o=0<=c?++u:--u)l=a.rows.item(o),"removed"!==l.state&&i.push(JSON.parse(l.doc));if(null!=n)return n(s(i,e,t))},function(e,t){return r(t)})}}(this),r)},e.prototype.upsert=function(e,t,n,r){var i,s;return s=l.regularizeUpsert(e,t,n,r),i=s[0],n=s[1],r=s[2],r=r||function(){},this.db.transaction(function(e){return function(n){var s;return s=u.map(i,function(e){return e.doc._id}),t={},a.eachSeries(s,function(a,i){return n.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[e.name,a],function(e,r){var a;return n=e,r.rows.length>0&&(a=r.rows.item(0),"upserted"===a.state?t[a.id]=a.base?JSON.parse(a.base):null:"cached"===a.state&&(t[a.id]=JSON.parse(a.doc))),i()},function(e,t){return r(t)})},function(){var a,s,l,u,c,p;for(p=[],u=0,c=i.length;u<c;u++)l=i[u],s=l.doc._id,a=void 0!==l.base?l.base:t[s]?t[s]:null,p.push(n.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc, base) VALUES (?, ?, ?, ?, ?)",[e.name,l.doc._id,"upserted",JSON.stringify(l.doc),JSON.stringify(a)],o,function(e,t){return r(t)}));return p})}}(this),r,function(){if(n)return n(e)})},e.prototype.remove=function(e,t,n){return u.isObject(e)?void this.find(e).fetch(function(e){return function(n){return a.each(n,function(t,n){return e.remove(t._id,function(){return n()},n)},function(){return t()})}}(this),n):(n=n||function(){},this.db.transaction(function(r){return function(a){return a.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,e],function(a,i){return i.rows.length>0?a.executeSql('UPDATE docs SET state="removed" WHERE col = ? AND id = ?',[r.name,e],function(){if(t)return t(e)},function(e,t){return n(t)}):a.executeSql("INSERT INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,e,"removed",JSON.stringify({_id:e})],function(){if(t)return t(e)},function(e,t){return n(t)})},function(e,t){return n(t)})}}(this),n))},e.prototype.cache=function(e,t,n,r,o){return o=o||function(){},this.db.transaction(function(s){return function(l){return a.eachSeries(e,function(e,t){return l.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[s.name,e._id],function(n,r){var a;return 0===r.rows.length||"cached"===r.rows.item(0).state?(a=r.rows.length>0?JSON.parse(r.rows.item(0).doc):null,!a||!e._rev||!a._rev||e._rev>a._rev?n.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[s.name,e._id,"cached",JSON.stringify(e)],function(){return t()},function(e,t){return o(t)}):t()):t()},function(e,t){return o(t)})},function(l){var c,p;return l?void(o&&o(l)):(c=u.object(u.pluck(e,"_id"),e),n.sort&&(p=i(n.sort)),s.find(t,n).fetch(function(t){return s.db.transaction(function(i){return a.eachSeries(t,function(t,r){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[s.name,t._id],function(a,i){if(!c[t._id]&&i.rows.length>0&&"cached"===i.rows.item(0).state){if(n.limit&&e.length===n.limit){if(n.sort&&p(t,u.last(e))>=0)return r();if(!n.sort)return r()}return a.executeSql("DELETE FROM docs WHERE col = ? AND id = ?",[s.name,t._id],function(){return r()},function(e,t){return o(t)})}return r()},function(e,t){return o(t)})},function(e){return null!=e?void(null!=o&&o(e)):null!=r?r():void 0})},o)},o))})}}(this),o)},e.prototype.pendingUpserts=function(e,t){return t=t||function(){},this.db.readTransaction(function(n){return function(r){return r.executeSql("SELECT * FROM docs WHERE col = ? AND state = ?",[n.name,"upserted"],function(t,n){var r,a,i,o,s;for(r=[],a=o=0,s=n.rows.length;0<=s?o<s:o>s;a=0<=s?++o:--o)i=n.rows.item(a),r.push({doc:JSON.parse(i.doc),base:i.base?JSON.parse(i.base):null});if(null!=e)return e(r)},function(e,n){return t(n)})}}(this),t)},e.prototype.pendingRemoves=function(e,t){return t=t||function(){},this.db.readTransaction(function(n){return function(r){return r.executeSql("SELECT * FROM docs WHERE col = ? AND state = ?",[n.name,"removed"],function(t,n){var r,a,i,o,s;for(r=[],a=o=0,s=n.rows.length;0<=s?o<s:o>s;a=0<=s?++o:--o)i=n.rows.item(a),r.push(JSON.parse(i.doc)._id);if(null!=e)return e(r)},function(e,n){return t(n)})}}(this),t)},e.prototype.resolveUpserts=function(e,t,n){return n=n||function(){},this.db.transaction(function(r){return function(i){return a.eachSeries(e,function(e,t){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,e.doc._id],function(a,i){return i.rows.length>0&&"upserted"===i.rows.item(0).state?u.isEqual(JSON.parse(i.rows.item(0).doc),e.doc)?(a.executeSql('UPDATE docs SET state="cached" WHERE col = ? AND id = ?',[r.name,e.doc._id],o,function(e,t){return n(t)}),t()):(a.executeSql("UPDATE docs SET base=? WHERE col = ? AND id = ?",[JSON.stringify(e.doc),r.name,e.doc._id],o,function(e,t){return n(t)}),t()):t()},function(e,t){return n(t)})},function(e){return e?n(e):t?t():void 0})}}(this),n)},e.prototype.resolveRemove=function(e,t,n){return n=n||function(){},this.db.transaction(function(r){return function(a){return a.executeSql('DELETE FROM docs WHERE state="removed" AND col = ? AND id = ?',[r.name,e],function(){if(t)return t(e)},function(e,t){return n(t)})}}(this),n)},e.prototype.seed=function(e,t,n){return u.isArray(e)||(e=[e]),n=n||function(){},this.db.transaction(function(r){return function(i){return a.eachSeries(e,function(e,t){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,e._id],function(a,i){return 0===i.rows.length?a.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,e._id,"cached",JSON.stringify(e)],function(){return t()},function(e,t){return n(t)}):t()},function(e,t){return n(t)})},function(e){if(e){if(n)return n(e)}else if(t)return t()})}}(this),n)},e.prototype.cacheOne=function(e,t,n){return this.cacheList([e],t,n)},e.prototype.cacheList=function(e,t,n){return n=n||function(){},this.db.transaction(function(r){return function(i){return a.eachSeries(e,function(e,t){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,e._id],function(n,a){var i;return 0===a.rows.length||"cached"===a.rows.item(0).state?(i=a.rows.length>0?JSON.parse(a.rows.item(0).doc):null,!i||!e._rev||!i._rev||e._rev>i._rev?n.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,e._id,"cached",JSON.stringify(e)],function(){return t()},function(e,n){return t(n)}):t()):t()},function(e,n){return t(n)})},function(r){if(r){if(n)return n(r)}else if(t)return t(e)})}}(this),n)},e.prototype.uncache=function(e,t,n){var r;return r=l.compileDocumentSelector(e),n=n||function(){},this.db.transaction(function(e){return function(i){return i.executeSql("SELECT * FROM docs WHERE col = ? AND state = ?",[e.name,"cached"],function(i,o){var s,l,u,c,p,d;for(c=[],l=p=0,d=o.rows.length;0<=d?p<d:p>d;l=0<=d?++p:--p)u=o.rows.item(l),s=JSON.parse(u.doc),r(s)&&c.push(s._id);return a.eachSeries(c,function(t,r){return i.executeSql('DELETE FROM docs WHERE state="cached" AND col = ? AND id = ?',[e.name,t],function(){return r()},function(e,t){return n(t)})},function(e){if(e){if(n)return n(e)}else if(t)return t()})},function(e,t){return n(t)})}}(this),n)},e.prototype.uncacheList=function(e,t,n){return n=n||function(){},this.db.transaction(function(r){return function(i){return a.eachSeries(e,function(e,t){return i.executeSql('DELETE FROM docs WHERE state="cached" AND col = ? AND id = ?',[r.name,e],function(){return t()},function(e,t){return n(t)})},function(e){if(e){if(n)return n(e)}else if(t)return t()})}}(this),n)},e}()},function(e,t,n){var r,a,i,o,s;s=n(58),i=n(1014),r=n(86).compileSort,o=2,t.encodeRequest=function(e){return e=s.groupBy(e,function(e){return e._id.substr(0,o)}),s.mapValues(e,function(e){return a(e)})},t.encodeResponse=function(e,t){var n;e=s.groupBy(e,function(e){return e._id.substr(0,o)});for(n in t)t[n],e[n]||(e[n]=[]);return s.pick(e,function(e,n){return a(e)!==t[n]})},t.decodeResponse=function(e,t,n){var a;return t=s.groupBy(t,function(e){return e._id.substr(0,o)}),a=s.extend(t,e),a=s.flatten(s.values(a)),n?a.sort(r(n)):a=s.sortBy(a,"_id"),a},a=function(e){var t,n,r,a,o;for(t=i.create(),o=s.sortBy(e,"_id"),r=0,a=o.length;r<a;r++)n=o[r],t.update(n._id+":"+(n._rev||"")+"|");return t.hex().substr(0,20)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(){}function l(e,t){var n={run:function(r){try{var a=e(t.getState(),r);(a!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=a,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}function u(e){var t,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.getDisplayName,w=void 0===d?function(e){return"ConnectAdvanced("+e+")"}:d,E=c.methodName,_=void 0===E?"connectAdvanced":E,C=c.renderCountProp,k=void 0===C?void 0:C,S=c.shouldHandleStateChanges,D=void 0===S||S,O=c.storeKey,T=void 0===O?"store":O,R=c.withRef,P=void 0!==R&&R,x=o(c,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),N=T+"Subscription",I=y++,A=(t={},t[T]=g.a,t[N]=g.b,t),j=(u={},u[N]=g.b,u);return function(t){f()("function"==typeof t,"You must pass a component to the function returned by connect. Instead received "+JSON.stringify(t));var o=t.displayName||t.name||"Component",u=w(o),c=v({},x,{getDisplayName:w,methodName:_,renderCountProp:k,shouldHandleStateChanges:D,storeKey:T,withRef:P,displayName:u,wrappedComponentName:o,WrappedComponent:t}),d=function(o){function p(e,t){r(this,p);var n=a(this,o.call(this,e,t));return n.version=I,n.state={},n.renderCount=0,n.store=e[T]||t[T],n.propsMode=Boolean(e[T]),n.setWrappedInstance=n.setWrappedInstance.bind(n),f()(n.store,'Could not find "'+T+'" in either the context or props of "'+u+'". Either wrap the root component in a <Provider>, or explicitly pass "'+T+'" as a prop to "'+u+'".'),n.initSelector(),n.initSubscription(),n}return i(p,o),p.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return e={},e[N]=t||this.context[N],e},p.prototype.componentDidMount=function(){D&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},p.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},p.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},p.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=s,this.store=null,this.selector.run=s,this.selector.shouldComponentUpdate=!1},p.prototype.getWrappedInstance=function(){return f()(P,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+_+"() call."),this.wrappedInstance},p.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},p.prototype.initSelector=function(){var t=e(this.store.dispatch,c);this.selector=l(t,this.store),this.selector.run(this.props)},p.prototype.initSubscription=function(){if(D){var e=(this.propsMode?this.props:this.context)[N];this.subscription=new m.a(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},p.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(b)):this.notifyNestedSubs()},p.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},p.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},p.prototype.addExtraProps=function(e){if(!(P||k||this.propsMode&&this.subscription))return e;var t=v({},e);return P&&(t.ref=this.setWrappedInstance),k&&(t[k]=this.renderCount++),this.propsMode&&this.subscription&&(t[N]=this.subscription),t},p.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return n.i(h.createElement)(t,this.addExtraProps(e.props))},p}(h.Component);return d.WrappedComponent=t,d.displayName=u,d.childContextTypes=j,d.contextTypes=A,d.propTypes=A,p()(d,t)}}t.a=u;var c=n(1011),p=n.n(c),d=n(33),f=n.n(d),h=n(4),m=(n.n(h),n(1107)),g=n(620),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=0,b={}},function(e,t,n){"use strict";function r(e){return function(t,n){function r(){return a}var a=e(t,n);return r.dependsOnOwnProps=!1,r}}function a(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function i(e,t){return function(t,n){var r=(n.displayName,function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)});return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=a(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=a(i),i=r(t,n)),i},r}}t.b=r,t.a=i;n(621)},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r=n(3),a=n.n(r),i=a.a.shape({trySubscribe:a.a.func.isRequired,tryUnsubscribe:a.a.func.isRequired,notifyNestedSubs:a.a.func.isRequired,isSubscribed:a.a.func.isRequired}),o=a.a.shape({subscribe:a.a.func.isRequired,dispatch:a.a.func.isRequired,getState:a.a.func.isRequired})},function(e,t,n){"use strict";n(239),n(306)},function(e,t,n){"use strict";function r(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return{type:a,payload:{method:e,args:n}}}}Object.defineProperty(t,"__esModule",{value:!0});var a=t.CALL_HISTORY_METHOD="@@router/CALL_HISTORY_METHOD",i=t.push=r("push"),o=t.replace=r("replace"),s=t.go=r("go"),l=t.goBack=r("goBack"),u=t.goForward=r("goForward");t.routerActions={push:i,replace:o,go:s,goBack:l,goForward:u}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;return n===i?a({},e,{locationBeforeTransitions:r}):e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.routerReducer=r;var i=t.LOCATION_CHANGE="@@router/LOCATION_CHANGE",o={locationBeforeTransitions:null}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){return 0===e.button}function i(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function o(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function s(e,t){return"function"==typeof e?e(t.location):e}var l=n(4),u=n.n(l),c=n(75),p=n.n(c),d=n(3),f=(n.n(d),n(33)),h=n.n(f),m=n(309),g=n(308),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=p()({displayName:"Link",mixins:[n.i(g.b)("router")],contextTypes:{router:m.a},propTypes:{to:n.i(d.oneOfType)([d.string,d.object,d.func]),activeStyle:d.object,activeClassName:d.string,onlyActiveOnIndex:d.bool.isRequired,onClick:d.func,target:d.string},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(e){if(this.props.onClick&&this.props.onClick(e),!e.defaultPrevented){var t=this.context.router;t||h()(!1),!i(e)&&a(e)&&(this.props.target||(e.preventDefault(),t.push(s(this.props.to,t))))}},render:function(){var e=this.props,t=e.to,n=e.activeClassName,a=e.activeStyle,i=e.onlyActiveOnIndex,l=r(e,["to","activeClassName","activeStyle","onlyActiveOnIndex"]),c=this.context.router;if(c){if(!t)return u.a.createElement("a",l);var p=s(t,c);l.href=c.createHref(p),(n||null!=a&&!o(a))&&c.isActive(p,i)&&(n&&(l.className?l.className+=" "+n:l.className=n),a&&(l.style=v({},l.style,a)))}return u.a.createElement("a",v({},l,{onClick:this.handleClick}))}});t.a=y},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.then}t.a=r},function(e,t,n){"use strict";var r=n(75),a=n.n(r),i=n(3),o=(n.n(i),n(33)),s=n.n(o),l=n(87),u=n(128),c=n(163),p=a()({displayName:"Redirect",statics:{createRouteFromReactElement:function(e){var t=n.i(l.c)(e);return t.from&&(t.path=t.from),t.onEnter=function(e,r){var a=e.location,i=e.params,o=void 0;if("/"===t.to.charAt(0))o=n.i(u.c)(t.to,i);else if(t.to){var s=e.routes.indexOf(t),l=p.getRoutePattern(e.routes,s-1),c=l.replace(/\/*$/,"/")+t.to;o=n.i(u.c)(c,i)}else o=a.pathname;r({pathname:o,query:t.query||a.query,state:t.state||a.state})},t},getRoutePattern:function(e,t){for(var n="",r=t;r>=0;r--){var a=e[r],i=a.path||"";if(n=i.replace(/\/*$/,"/")+n,0===i.indexOf("/"))break}return"/"+n}},propTypes:{path:i.string,from:i.string,to:i.string.isRequired,query:i.object,state:i.object,onEnter:c.c,children:c.c},render:function(){s()(!1)}});t.a=p},function(e,t,n){"use strict";function r(e,t,n){return a(i({},e,{setRouteLeaveHook:t.listenBeforeLeavingRoute,isActive:t.isActive}),n)}function a(e,t){var n=t.location,r=t.params,a=t.routes;return e.location=n,e.params=r,e.routes=a,e}t.a=r,t.b=a;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e){var t=u()(e),n=function(){return t};return i()(s()(n))(e)}t.a=r;var a=n(495),i=n.n(a),o=n(494),s=n.n(o),l=n(1010),u=n.n(l)},function(e,t,n){"use strict";function r(e){var t=void 0;return i&&(t=n.i(a.a)(e)()),t}t.a=r;var a=n(631),i=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";function r(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function a(e,t){function a(t,r){return t=e.createLocation(t),n.i(s.a)(t,r,w.location,w.routes,w.params)}function p(e,r){S&&S.location===e?d(S,r):n.i(u.a)(t,e,function(t,n){t?r(t):n?d(c({},n,{location:e}),r):r()})}function d(e,t){function r(r,i){if(r||i)return a(r,i);n.i(l.a)(e,function(n,r){n?t(n):t(null,null,w=c({},e,{components:r}))})}function a(e,n){e?t(e):t(null,n)}var o=n.i(i.a)(w,e),s=o.leaveRoutes,u=o.changeRoutes,p=o.enterRoutes;k(s,w),s.filter(function(e){return-1===p.indexOf(e)}).forEach(v),C(u,w,e,function(t,n){if(t||n)return a(t,n);_(p,e,r)})}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.__id__||t&&(e.__id__=D++)}function h(e){return e.map(function(e){return O[f(e)]}).filter(function(e){return e})}function m(e,r){n.i(u.a)(t,e,function(t,a){if(null==a)return void r();S=c({},a,{location:e});for(var o=h(n.i(i.a)(w,S).leaveRoutes),s=void 0,l=0,u=o.length;null==s&&l<u;++l)s=o[l](e);r(s)})}function g(){if(w.routes){for(var e=h(w.routes),t=void 0,n=0,r=e.length;"string"!=typeof t&&n<r;++n)t=e[n]();return t}}function v(e){var t=f(e);t&&(delete O[t],r(O)||(T&&(T(),T=null),R&&(R(),R=null)))}function y(t,n){var a=!r(O),i=f(t,!0);return O[i]=n,a&&(T=e.listenBefore(m),e.listenBeforeUnload&&(R=e.listenBeforeUnload(g))),function(){v(t)}}function b(t){function n(n){w.location===n?t(null,w):p(n,function(n,r,a){n?t(n):r?e.replace(r):a&&t(null,a)})}var r=e.listen(n);return w.location?t(null,w):n(e.getCurrentLocation()),r}var w={},E=n.i(o.a)(),_=E.runEnterHooks,C=E.runChangeHooks,k=E.runLeaveHooks,S=void 0,D=1,O=Object.create(null),T=void 0,R=void 0;return{isActive:a,match:p,listenBeforeLeavingRoute:y,listen:b}}t.a=a;var i=(n(129),n(1119)),o=n(1116),s=n(1123),l=n(1120),u=n(1125),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e){return function(t){return i()(s()(e))(t)}}t.a=r;var a=n(495),i=n.n(a),o=n(494),s=n.n(o)},function(e,t,n){e.exports=n(1129)()},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.a=r},function(e,t,n){"use strict";function r(e,t,i){function l(){y===v&&(y=v.slice())}function u(){return g}function c(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return l(),y.push(e),function(){if(t){t=!1,l();var n=y.indexOf(e);y.splice(n,1)}}}function p(e){if(!n.i(a.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,g=m(g,e)}finally{b=!1}for(var t=v=y,r=0;r<t.length;r++){(0,t[r])()}return e}function d(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");m=e,p({type:s.INIT})}function f(){var e,t=c;return e={subscribe:function(e){function n(){e.next&&e.next(u())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[o.a]=function(){return this},e}var h;if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var m=e,g=t,v=[],y=v,b=!1;return p({type:s.INIT}),h={dispatch:p,subscribe:c,getState:u,replaceReducer:d},h[o.a]=f,h}n.d(t,"a",function(){return s}),t.b=r;var a=n(239),i=n(1146),o=n.n(i),s={INIT:"@@redux/INIT"}},function(e,t,n){"use strict"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),s=n.n(o),l=n(169),u=n.n(l),c=n(16),p=n(30),d=n(14),f=(n.n(d),n(1135)),h=(n.n(f),n(22)),m=n(640),g=n(661),v=n(700),y=n(672),b=n(708),w=n(681),E=n(688),_=n(690),C=n(685),k=n(683),S=n(682),D=n(721),O=n(726),T=n(691),R=n(716),P=n(717),x=n(718),N=n(692),I=n(693),A=n(702),j=n(132),M=n(938),L=(n.n(M),n(171)),U=n(639),F=n(698),q=n(707),B=n(689),H=n(687),V=n(722),W=n(723),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Y=window.getEnv();L.a.dispatch(n.i(h.a)(Y));var J=L.a.getState().state.rootPath,$=n.i(f.connectedReduxRedirect)({authenticatedSelector:function(e){return j.a.isAuthenticated(e.state.user)},redirectAction:d.routerActions.replace,wrapperDisplayName:"UserIsAuthenticated",redirectPath:J+"/login"}),X=n.i(f.connectedReduxRedirect)({authenticatedSelector:function(e){return j.a.isAdminOrEditor(e.state.user)},redirectAction:d.routerActions.replace,wrapperDisplayName:"userisAdminOrEditor",redirectPath:J+"/collections",allowRedirectBack:!1}),K=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),z(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"grid grid--justify-center"},s.a.createElement("h1",null,"Sorry, this page couldnt be found"))}}]),t}(o.Component),G=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),z(t,[{key:"render",value:function(){return s.a.createElement(c.Provider,{store:L.a},s.a.createElement(p.a,{history:L.b},s.a.createElement(p.b,{component:m.a},s.a.createElement(p.b,{component:g.a},s.a.createElement(p.c,{from:""+J,to:J+"/collections"}),s.a.createElement(p.b,{path:J+"/collections",component:$(y.a)},s.a.createElement(p.b,{path:":collectionID",component:$(y.a)},s.a.createElement(p.b,{path:"edit",component:$(y.a)}),s.a.createElement(p.b,{path:"restore-content",component:$(y.a)}))),s.a.createElement(p.b,{path:J+"/collections/:collectionID/preview",component:$(q.a)}),!0===Y.enableDatasetImport&&s.a.createElement(p.b,{path:J+"/collections/:collectionID/datasets"},s.a.createElement(p.d,{component:$(w.a)}),s.a.createElement(p.b,{path:":datasetID"},s.a.createElement(p.d,{component:$(E.a)}),s.a.createElement(p.b,{path:"editions",component:$(S.a)}),s.a.createElement(p.b,{path:"editions/:editionID"},s.a.createElement(p.b,{path:"instances",component:$(k.a)}),s.a.createElement(p.d,{component:$(_.a)}),s.a.createElement(p.b,{path:"versions/:versionID",component:$(C.a)},s.a.createElement(p.b,{path:"edit/:metadataField/:metadataItemID",component:$(H.a)})),s.a.createElement(p.b,{path:"versions/:versionID/preview",component:$(B.a)})))),s.a.createElement(p.b,{path:J+"/teams",component:$(X(b.a))},s.a.createElement(p.b,{path:":team",component:$(b.a)},s.a.createElement(p.b,{path:"edit",component:$(b.a)}),s.a.createElement(p.b,{path:"delete",component:$(b.a)}))),s.a.createElement(p.b,{path:J+"/users",component:$(X(D.a))},s.a.createElement(p.b,{path:":userID",component:$(X(O.a))},s.a.createElement(p.b,{path:"change-password",component:$(X(V.a))}),s.a.createElement(p.b,{path:"confirm-delete",component:$(X(W.a))}))),!0===Y.enableDatasetImport&&s.a.createElement(p.b,null,s.a.createElement(p.b,{path:J+"/uploads"},s.a.createElement(p.e,{to:"data"}),s.a.createElement(p.b,{path:"data"},s.a.createElement(p.d,{component:$(X(R.a))}),s.a.createElement(p.b,{path:":jobID"},s.a.createElement(p.d,{component:$(X(P.a))}),s.a.createElement(p.b,{path:"metadata",component:$(X(x.a))})))),s.a.createElement(p.b,{path:J+"/datasets"},s.a.createElement(p.d,{component:$(X(T.a))}),s.a.createElement(p.b,{path:":datasetID"},s.a.createElement(p.e,{to:J+"/datasets"}),s.a.createElement(p.b,{path:"preview",component:$(X(B.a))}),s.a.createElement(p.b,{path:"metadata",component:$(X(N.a))}),s.a.createElement(p.b,{path:"editions/:edition/versions/:version"},s.a.createElement(p.e,{to:"metadata"}),s.a.createElement(p.b,{path:"metadata",component:$(X(I.a))}),s.a.createElement(p.b,{path:"preview",component:$(X(F.a))})),s.a.createElement(p.b,{path:"instances"},s.a.createElement(p.e,{to:J+"/datasets"}),s.a.createElement(p.b,{path:":instanceID/metadata",component:$(X(I.a))}))))),s.a.createElement(p.b,{path:J+"/selectable-list",component:U.a}),s.a.createElement(p.b,{path:J+"/logs",component:A.a}),s.a.createElement(p.b,{path:J+"/login",component:v.a}),s.a.createElement(p.b,{path:"*",component:K})))))}}]),t}(o.Component);u.a.render(s.a.createElement(G,null),document.getElementById("app"))},function(e,t,n){(function(t,n){!function(t){"use strict";function r(e,t,n,r){var a=Object.create((t||i).prototype),o=new h(r||[]);return a._invoke=p(e,n,o),a}function a(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function s(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){this.arg=e}function c(e){function t(t,n){var r=e[t](n),a=r.value;return a instanceof u?Promise.resolve(a.arg).then(i,o):Promise.resolve(a).then(function(e){return r.value=e,r})}function r(e,n){function r(){return t(e,n)}return a=a?a.then(r,r):new Promise(function(e){e(r())})}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var a,i=t.bind(e,"next"),o=t.bind(e,"throw");t.bind(e,"return");this._invoke=r}function p(e,t,n){var r=_;return function(i,o){if(r===k)throw new Error("Generator is already running");if(r===S){if("throw"===i)throw o;return g()}for(;;){var s=n.delegate;if(s){if("return"===i||"throw"===i&&s.iterator[i]===v){n.delegate=null;var l=s.iterator.return;if(l){var u=a(l,s.iterator,o);if("throw"===u.type){i="throw",o=u.arg;continue}}if("return"===i)continue}var u=a(s.iterator[i],s.iterator,o);if("throw"===u.type){n.delegate=null,i="throw",o=u.arg;continue}i="next",o=v;var c=u.arg;if(!c.done)return r=C,c;n[s.resultName]=c.value,n.next=s.nextLoc,n.delegate=null}if("next"===i)n._sent=o,n.sent=r===C?o:v;else if("throw"===i){if(r===_)throw r=S,o;n.dispatchException(o)&&(i="next",o=v)}else"return"===i&&n.abrupt("return",o);r=k;var u=a(e,t,n);if("normal"===u.type){r=n.done?S:C;var c={value:u.arg,done:n.done};if(u.arg!==D)return c;n.delegate&&"next"===i&&(o=v)}else"throw"===u.type&&(r=S,i="throw",o=u.arg)}}}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function m(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:v,done:!0}}var v,y=Object.prototype.hasOwnProperty,b="function"==typeof Symbol&&Symbol.iterator||"@@iterator",w="object"==typeof e,E=t.regeneratorRuntime;if(E)return void(w&&(e.exports=E));E=t.regeneratorRuntime=w?e.exports:{},E.wrap=r;var _="suspendedStart",C="suspendedYield",k="executing",S="completed",D={},O=s.prototype=i.prototype;o.prototype=O.constructor=s,s.constructor=o,o.displayName="GeneratorFunction",E.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},E.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s,e.prototype=Object.create(O),e},E.awrap=function(e){return new u(e)},l(c.prototype),E.async=function(e,t,n,a){var i=new c(r(e,t,n,a));return E.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},l(O),O[b]=function(){return this},O.toString=function(){return"[object Generator]"},E.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=m,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=y.call(a,"catchLoc"),s=y.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?this.next=a.finallyLoc:this.complete(i),D},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;f(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},D}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,n(65),n(59))},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(170),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"handleClick",value:function(e){console.log(e)}},{key:"render",value:function(){var e={columns:[{heading:"Heading 1",width:"12"}],activeRowID:"002",handleItemClick:this.handleClick,isUpdating:!0,rows:[{id:"001",columnValues:["Item 1"],returnValue:{id:"001"},status:{neutral:!1,warning:!1,success:!1,message:""}},{id:"002",columnValues:["Item 2"],returnValue:{id:"002"},status:{neutral:!1,warning:!1,success:!1,message:""}}]},t={numberOfColumns:2,columns:[{heading:"Heading 1",width:"6"},{heading:"Heading 2",width:"6"}],activeRowID:"",handleItemClick:this.handleClick,isUpdating:!0,rows:[{id:"001",columnValues:["Item 1","Item 1 date"],returnValue:{id:"001"},status:{neutral:!1,warning:!1,success:!1,message:""}},{id:"002",columnValues:["Item 2","Item 2 date"],returnValue:{id:"002"},status:{neutral:!1,warning:!1,success:!1,message:""}}]},n={columns:[{heading:"Heading 1",width:"6"},{heading:"Heading 2",width:"3"},{heading:"Heading 3",width:"3"}],activeRowID:"",handleItemClick:this.handleClick,isUpdating:!0,rows:[{id:"001",columnValues:["Item 1","Item 1 date","Item 1 other"],returnValue:{id:"001"},status:{neutral:!1,warning:!0,success:!1,message:"YAY!"}},{id:"002",columnValues:["Item 2","Item 2 date","Item 2 other"],returnValue:{id:"002"},status:{neutral:!1,warning:!1,success:!1,message:""}},{id:"003",columnValues:["Item 3","Item 3 date","Item 3 other"],returnValue:{id:"003"},status:{neutral:!1,warning:!1,success:!1,message:""}}]};return s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-10 margin-top--2"},s.a.createElement(l.a,e)),s.a.createElement("div",{className:"grid__col-10 margin-top--2"},s.a.createElement(l.a,t)),s.a.createElement("div",{className:"grid__col-10 margin-top--2 margin-bottom--2"},s.a.createElement(l.a,n)))}}]),t}(o.Component);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{notifications:e.state.notifications}}var s=n(4),l=n.n(s),u=n(16),c=n(3),p=n.n(c),d=n(668),f=n(53),h=n(23),m=n(332),g=n(665),v=n(10),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b={children:p.a.node,dispatch:p.a.func.isRequired,notifications:p.a.arrayOf(p.a.object)},w=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isCheckingAuthentication:!1},n}return i(t,e),y(t,[{key:"componentWillMount",value:function(){var e=this;h.a.initialise(),window.setInterval(function(){n.i(m.a)()},1e4),this.setState({isCheckingAuthentication:!0}),n.i(d.a)().then(function(t){if(t){var n=localStorage.getItem("loggedInAs");return n?void f.a.getPermissions(n).then(function(t){f.a.setUserState(t),e.setState({isCheckingAuthentication:!1})}).catch(function(t){e.setState({isCheckingAuthentication:!1}),v.a.add({type:"warning",message:"Unable to start Florence due to an error getting your account's permissions. Please try refreshing Florence.",autoDismiss:8e3,isDismissable:!0}),h.a.event("Error getting a user's permissions on startup",h.a.error(t)),console.error("Error getting a user's permissions on startup",t)}):void console.warn("Unable to find item 'loggedInAs' from local storage")}e.setState({isCheckingAuthentication:!1})})}},{key:"render",value:function(){return l.a.createElement("div",null,this.state.isCheckingAuthentication?l.a.createElement("div",{className:"grid grid--align-center grid--align-self-center grid--full-height"},l.a.createElement("div",{className:"loader loader--large loader--dark"})):this.props.children,l.a.createElement(g.a,{notifications:this.props.notifications}))}}]),t}(s.Component);w.propTypes=b,t.a=n.i(u.connect)(o)(w)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={title:u.a.string,type:u.a.string,id:u.a.string,onEdit:u.a.func.isRequired,onDelete:u.a.func.isRequired,disabled:u.a.bool},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleEditClick=n.handleEditClick.bind(n),n.handleDeleteClick=n.handleDeleteClick.bind(n),n}return i(t,e),c(t,[{key:"handleEditClick",value:function(){this.props.onEdit(this.props.type,this.props.id)}},{key:"handleDeleteClick",value:function(){this.props.onDelete(this.props.type,this.props.id)}},{key:"render",value:function(){return s.a.createElement("li",{className:"card margin-bottom--1",key:this.props.id},s.a.createElement("div",{className:"card__body"},s.a.createElement("div",{className:"card__title"},this.props.title)),s.a.createElement("div",{className:"card__actions"},s.a.createElement("button",{disabled:this.props.disabled,type:"button",className:"btn btn--link",onClick:this.handleEditClick},"Edit"),s.a.createElement("button",{disabled:this.props.disabled,type:"button",className:"margin-left--1 btn btn--link",onClick:this.handleDeleteClick},"Delete")))}}]),t}(o.Component);d.propTypes=p,t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={marginBottom:"margin-bottom--1"},d={title:u.a.string.isRequired,content:u.a.string.isRequired,marginBottom:u.a.string},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("details",{className:this.props.marginBottom},s.a.createElement("summary",null,s.a.createElement("span",{className:"summary"},this.props.title)),s.a.createElement("div",{className:"panel"},s.a.createElement("p",null,this.props.content)))}}]),t}(o.Component);f.propTypes=d,f.defaultProps=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(328),p=n(90),d=n(10),f=n(333),h=n(53),m=n(329),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y={email:u.a.string.isRequired,currentPassword:u.a.string.isRequired,handleSuccess:u.a.func.isRequired,handleCancel:u.a.func.isRequired},b=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isSubmitting:!1,newPassword:{value:"",errorMsg:""}},n.handleInputChange=n.handleInputChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return i(t,e),v(t,[{key:"handleInputChange",value:function(e){var t=e.target.id,n=e.target.value;switch(t){case"new-password":this.setState({newPassword:{value:n,errorMsg:""}})}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var r=this.state.newPassword.value,a=n.i(m.a)(r);if(!a.isValid)return void this.setState(function(e){return{newPassword:g({},e.newPassword,{errorMsg:a.error})}});var i={password:this.state.newPassword.value,email:this.props.email,oldPassword:this.props.currentPassword};this.setState({isSubmitting:!0}),h.a.updatePassword(i).then(function(){t.props.handleSuccess(t.state.newPassword.value);var e={email:t.props.email};p.a.add(p.b.passwordChangeSuccess,e);var n={type:"positive",isDismissable:!0,autoDismiss:15e3,message:"Password successfully changed"};d.a.add(n)}).catch(function(e){var n={type:"warning",isDismissable:!0,autoDismiss:15e3};switch(e.status){case 404:n.message="The user you are changing the password for was not recognised",d.a.add(n),t.setState({isSubmitting:!1});break;case 401:n.message="You are not authorised to update this password",d.a.add(n),t.setState({isSubmitting:!1});break;case"UNEXPECTED_ERR":console.error(f.a.UNEXPECTED_ERR),n.message=f.a.UNEXPECTED_ERR,d.a.add(n),t.setState({isSubmitting:!1});break;case"RESPONSE_ERR":console.error(f.a.RESPONSE_ERR),n.message=f.a.RESPONSE_ERR,d.a.add(n),t.setState({isSubmitting:!1});break;case"FETCH_ERR":console.error(f.a.FETCH_ERR),n.message=f.a.FETCH_ERR,d.a.add(n),t.setState({isSubmitting:!1})}})}},{key:"render",value:function(){var e={inputs:[{id:"new-password",label:"New password",type:"password",onChange:this.handleInputChange,error:this.state.newPassword.errorMsg}],onSubmit:this.handleSubmit,onCancel:this.props.handleCancel,isSubmitting:this.state.isSubmitting};return s.a.createElement(c.a,{formData:e})}}]),t}(o.Component);t.a=b,b.propTypes=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(28),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={label:u.a.string,id:u.a.string.isRequired,url:u.a.string,error:u.a.string,extension:u.a.string,accept:u.a.string,progress:u.a.number,onRetry:u.a.func},f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleOnRetry=n.handleOnRetry.bind(n),n}return i(t,e),p(t,[{key:"handleOnRetry",value:function(e){e.preventDefault(),this.props.onRetry(this.props.label)}},{key:"renderInput",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,this.props.label),"number"==typeof this.props.progress?s.a.createElement("div",{className:"margin-bottom--1"},s.a.createElement("p",null,this.props.label),s.a.createElement("p",null,"Progress: ",(this.props.progress>0?this.props.progress:1)+"%"),s.a.createElement("div",{className:"progress"},s.a.createElement("div",{className:"progress__bar"+(this.props.error?" progress__bar--error":""),style:{width:(this.props.progress>0?this.props.progress:1)+"%"}})),this.props.error&&s.a.createElement("div",null,s.a.createElement("div",{className:"progress__error"},this.props.error),s.a.createElement("a",{onClick:this.handleOnRetry,href:""},"Retry"))):s.a.createElement(c.a,{id:this.props.id,name:this.props.label,type:"file",accept:this.props.accept,error:this.props.error}))}},{key:"renderLink",value:function(){return s.a.createElement("div",{className:"margin-bottom--2"},s.a.createElement("h2",{className:"margin-bottom--1"},this.props.label),s.a.createElement("a",{href:this.props.url,target:"_blank",rel:"noopener noreferrer"},this.props.url))}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid"},this.props.url&&!this.props.error?this.renderLink():"",!this.props.url&&s.a.createElement("div",{className:"grid__col-6 margin-bottom--1"},this.renderInput()))}}]),t}(o.Component);f.propTypes=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={errors:u.a.arrayOf(u.a.string)},d=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"render",value:function(){return this.props.errors.length?s.a.createElement("div",{className:"error-summary",role:"alert","aria-labelledby":"error-summary-heading"},s.a.createElement("h2",{id:"error-summary-heading"},"Errors"),s.a.createElement("p",null,"Before saving please correct the following"),s.a.createElement("ul",{className:"error-summary__list"},this.props.errors.map(function(e,t){return s.a.createElement("li",{key:t,className:"error-summary__list-item"},e)}))):null}}]),t}(o.Component);d.propTypes=p,t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={type:u.a.string,title:u.a.oneOfType([u.a.string,u.a.element]).isRequired,isActive:u.a.bool},d=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"page page--"+this.props.type+(this.props.isActive?" active":"")},this.props.title)}}]),t}(o.Component);d.propTypes=p,t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={path:u.a.string,onChange:u.a.func,onLoad:u.a.func,hidden:u.a.bool},d={path:"/"},f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindWindowOnMessage(),n}return i(t,e),c(t,[{key:"shouldComponentUpdate",value:function(e){return e.path!==this.props.path}},{key:"bindWindowOnMessage",value:function(){window.addEventListener("message",this.handleIframeMessage,!1)}},{key:"handleIframeMessage",value:function(e){"load"===e.message&&this.props.onChange(document.getElementById("iframe").contentWindow.document.location.pathname)}},{key:"returnHiddenValue",value:function(){return this.props.hidden?"none":"block"}},{key:"render",value:function(){return s.a.createElement("iframe",{style:{display:this.returnHiddenValue()},id:"iframe",className:"preview__iframe",src:this.props.path,onLoad:this.props.onLoad})}}]),t}(o.Component);t.a=f,f.propTypes=p,f.defaultProps=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={id:u.a.string.isRequired,value:u.a.string.isRequired,label:u.a.string.isRequired,group:u.a.string.isRequired,onChange:u.a.func,checked:u.a.bool,inline:u.a.bool,disabled:u.a.bool,subLabel:u.a.string},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={focused:!1,checked:e.checked},n.handleFocus=n.handleFocus.bind(n),n.handleBlur=n.handleBlur.bind(n),n.handleChange=n.handleChange.bind(n),n}return i(t,e),c(t,[{key:"handleChange",value:function(e){var t=e.target.checked,n=this.props.id,r=this.props.value,a=this.props.onChange;a&&a({id:n,checked:t,value:r})}},{key:"handleFocus",value:function(){this.setState({focused:!0})}},{key:"handleBlur",value:function(){this.setState({focused:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"radio"+(this.props.inline?" radio--inline":"")},s.a.createElement("input",{className:"radio__input"+(this.props.checked?" selected":"")+(this.state.focused?" focused":""),type:"radio",name:this.props.group,checked:this.props.checked,value:this.props.value,id:this.props.id,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,disabled:this.props.disabled}),s.a.createElement("label",{className:"radio__label"+(this.props.checked?" radio__label--selected":"")+(this.state.focused?" radio__label--focused":"")+(this.props.disabled?" radio__label--disabled":""),htmlFor:this.props.id},this.props.label," ",this.props.subLabel?s.a.createElement("br",null):null," ",this.props.subLabel?this.props.subLabel:null))}}]),t}(o.Component);t.a=d,d.propTypes=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={id:u.a.any.isRequired,columns:u.a.arrayOf(u.a.shape({heading:u.a.string.isRequired,width:u.a.string.isRequired})).isRequired,columnValues:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.element])),handleClick:u.a.func.isRequired,isSelected:u.a.bool,returnValue:u.a.object.isRequired,status:u.a.shape({neutral:u.a.bool,warning:u.a.bool,success:u.a.bool,message:u.a.string})},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindClick=n.bindClick.bind(n),n}return i(t,e),c(t,[{key:"bindClick",value:function(){this.props.handleClick(this.props.returnValue)}},{key:"renderColumns",value:function(){for(var e=this.props.status||{},t=[],n=0;n<this.props.columns.length;n++){var r=0===n;t.push(s.a.createElement("div",{key:this.props.id+"-col-"+n,className:"grid__col-"+this.props.columns[n].width},this.props.columnValues[n],e.message&&r?s.a.createElement("strong",null,e.message):""))}return t}},{key:"render",value:function(){var e=this.props.status||{};return s.a.createElement("li",{id:this.props.id,className:"selectable-box__item "+(this.props.isSelected?" selected":"")+" "+(e.neutral?" neutral":"")+" "+(e.warning?" warning":""),onClick:this.bindClick},s.a.createElement("div",{className:"grid"},this.renderColumns()))}}]),t}(o.Component);t.a=d,d.propTypes=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(651),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={heading:u.a.string.isRequired,items:u.a.arrayOf(u.a.object),activeItem:u.a.object,handleItemClick:u.a.func.isRequired,isUpdating:u.a.bool},h=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindItemClick=n.bindItemClick.bind(n),n}return i(t,e),d(t,[{key:"bindItemClick",value:function(e){this.props.handleItemClick(e)}},{key:"renderList",value:function(){var e=this;return s.a.createElement("ul",{className:"selectable-box__list"},this.props.items.map(function(t,n){return s.a.createElement(c.a,p({key:n},t,{isSelected:e.props.activeItem&&t.id===e.props.activeItem.id,handleClick:e.bindItemClick}))}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"selectable-box"},s.a.createElement("h2",{className:"selectable-box__heading"},this.props.heading,this.props.isUpdating&&s.a.createElement("span",{className:"selectable-box__status loader"})),this.props.items.length>0?this.renderList():s.a.createElement("p",{className:"margin-top--1 margin-right--1 margin-bottom--1 margin-left--1"},"No items to display"))}}]),t}(o.Component);t.a=h,h.propTypes=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={name:u.a.string.isRequired,id:u.a.any.isRequired,handleClick:u.a.func.isRequired,isSelected:u.a.bool},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindClick=n.bindClick.bind(n),n}return i(t,e),c(t,[{key:"bindClick",value:function(){this.props.handleClick(this.props)}},{key:"render",value:function(){return s.a.createElement("li",{id:this.props.id,className:"selectable-box__item "+(this.props.isSelected?"selected":""),onClick:this.bindClick},this.props.name)}}]),t}(o.Component);t.a=d,d.propTypes=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(653),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={headings:u.a.array.isRequired,items:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,selectableBox:u.a.shape({firstColumn:u.a.string.isRequired,secondColumn:u.a.string.isRequired})})).isRequired,activeItemID:u.a.string,handleItemClick:u.a.func.isRequired,isUpdating:u.a.bool},h=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindItemClick=n.bindItemClick.bind(n),n}return i(t,e),d(t,[{key:"bindItemClick",value:function(e){this.props.handleItemClick(e)}},{key:"renderList",value:function(){var e=this;return s.a.createElement("ul",{id:"selectable-box",className:"selectable-box__list"},this.props.items.map(function(t,n){return s.a.createElement(c.a,p({key:n},t,{isSelected:e.props.activeItemID&&t.id===e.props.activeItemID,handleClick:e.bindItemClick}))}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"selectable-box"},s.a.createElement("div",{className:"grid"},s.a.createElement("h2",{className:"selectable-box__heading grid__col-6"},this.props.headings[0]),s.a.createElement("h2",{className:"selectable-box__heading grid__col-6 grid__cell"},this.props.headings[1],this.props.isUpdating&&s.a.createElement("span",{className:"selectable-box__status pull-right loader"}))),this.renderList())}}]),t}(o.Component);t.a=h,h.propTypes=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={id:u.a.any.isRequired,selectableBox:u.a.shape({firstColumn:u.a.string.isRequired,secondColumn:u.a.string.isRequired}),status:u.a.shape({neutral:u.a.bool.isRequired,warning:u.a.bool.isRequired,message:u.a.string.isRequired}),handleClick:u.a.func.isRequired,isSelected:u.a.bool},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindClick=n.bindClick.bind(n),n}return i(t,e),c(t,[{key:"bindClick",value:function(){this.props.handleClick(this.props)}},{key:"render",value:function(){return s.a.createElement("li",{id:this.props.id,className:"selectable-box__item "+(this.props.isSelected?" selected":"")+" "+(this.props.status.neutral?" neutral":"")+" "+(this.props.status.warning?" warning":""),onClick:this.bindClick},s.a.createElement("div",{className:"grid"},s.a.createElement("div",{className:"grid__col-6"},this.props.selectableBox.firstColumn,this.props.status.message?" ["+this.props.status.message+"]":""),s.a.createElement("div",{className:"grid__col-6"},this.props.selectableBox.secondColumn)))}}]),t}(o.Component);t.a=d,d.propTypes=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={item:u.a.shape({id:u.a.string.isRequired,name:u.a.string.isRequired}).isRequired,onRemoveItem:u.a.func.isRequired},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRemoveClick=n.handleRemoveClick.bind(n),n}return i(t,e),c(t,[{key:"handleRemoveClick",value:function(){this.props.onRemoveItem(this.props.item)}},{key:"render",value:function(){return s.a.createElement("span",{className:"selected-item-list__item"},this.props.item.name,s.a.createElement("button",{className:"selected-item-list__remove",type:"button",onClick:this.handleRemoveClick},"×"))}}]),t}(o.Component);t.a=d,d.propTypes=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(656),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={fields:u.a.arrayOf(u.a.shape({simpleListHeading:u.a.string.isRequired,simpleListDescription:u.a.string})).isRequired,editingStateFieldName:u.a.string.isRequired,addText:u.a.string,showLoadingState:u.a.bool,handleAddClick:u.a.func.isRequired,handleEditClick:u.a.func.isRequired,handleDeleteClick:u.a.func.isRequired,disableActions:u.a.bool},f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAddClick=function(){n.props.handleAddClick(n.props.editingStateFieldName)},n.handleEditClick=function(e){n.props.handleEditClick(e,n.props.editingStateFieldName)},n.handleDeleteClick=function(e){n.props.handleDeleteClick(e,n.props.editingStateFieldName)},n}return i(t,e),p(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.props.fields.length?s.a.createElement("ul",{className:"list list--neutral simple-select-list"},this.props.fields.map(function(t,n){return s.a.createElement(c.a,{key:e.editingStateFieldName+"-"+n,field:t,handleEditClick:e.handleEditClick,handleDeleteClick:e.handleDeleteClick,disabled:e.props.disableActions})})):null,s.a.createElement("button",{type:"button",className:"btn btn--link "+(this.props.fields.length?"margin-top--1":""),onClick:this.handleAddClick,disabled:this.props.disableActions},this.props.addText?this.props.addText:"Add a new item"))}}]),t}(o.Component);t.a=f,f.propTypes=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={field:u.a.shape({simpleListHeading:u.a.string.isRequired,simpleListDescription:u.a.string}),handleEditClick:u.a.func.isRequired,handleDeleteClick:u.a.func.isRequired,disabled:u.a.bool.isRequired},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleEditClick=function(){n.props.handleEditClick(n.props.field)},n.handleDeleteClick=function(){n.props.handleDeleteClick(n.props.field)},n}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("li",{className:"simple-select-list__item grid"},s.a.createElement("div",{className:"grid__col-lg-10"},s.a.createElement("p",{className:"font-weight--600"},this.props.field.simpleListHeading),s.a.createElement("p",null,this.props.field.simpleListDescription)),s.a.createElement("div",{className:"grid__col-lg-2"},s.a.createElement("p",{className:"text-right"},s.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleEditClick,disabled:this.props.disabled},"Edit")," |",s.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleDeleteClick,disabled:this.props.disabled},"Delete"))))}}]),t}(o.Component);t.a=d,d.propTypes=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(30),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={title:u.a.string.isRequired,id:u.a.string.isRequired,url:u.a.string.isRequired,details:u.a.arrayOf(u.a.string)},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){var e=this.props.details||[];return s.a.createElement("li",{className:"simple-select-list__item"},s.a.createElement(c.g,{to:this.props.url},s.a.createElement("h2",null,this.props.title)),e.map(function(e,t){return s.a.createElement("p",{key:"detail-"+t},e)}))}}]),t}(o.Component);t.a=f,f.propTypes=d},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={config:{enableDatasetImport:!1},user:{isAuthenticated:!1,email:"",userType:"",isAdmin:!1},global:{workingOn:null},rootPath:"/florence",teams:{active:{},all:[],allIDsAndNames:[],users:[]},users:{active:{},all:[]},datasets:{all:[],jobs:[],activeInstance:{},recipes:[],activeJob:{}},collections:{all:[],active:null,toDelete:{}},notifications:[],preview:{selectedPage:null}}},function(e,t,n){"use strict";var r=n(14),a=(n.n(r),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),i="";t.a=function(){return function(e){return function(t){if(t.type===r.LOCATION_CHANGE){var n=a({},t,{payload:a({},t.payload,{previousPathname:i})});return i=t.payload.pathname,e(n)}return e(t)}}}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.a,t=arguments[1];switch(t.type){case o.P:return s({},e,{config:{enableDatasetImport:t.config.enableDatasetImport}});case"USER_LOGGED_IN":return Object.assign({},e,{user:Object.assign({},e.user,{isAuthenticated:!0,email:t.email,userType:t.userType,isAdmin:t.isAdmin})});case"USER_LOGGED_OUT":return Object.assign({},e,{user:Object.assign({},e.user,{isAuthenticated:!1})});case o.Q:return s({},e,{collections:s({},e.collections,{all:t.collections})});case o.R:var n=s({},e.collections.toDelete);return n[t.collectionID]=null,s({},e,{collections:s({},e.collections,{toDelete:n})});case o.S:var a=s({},e.collections.toDelete);delete a[t.collectionID];var l=e.collections.all.filter(function(e){return e.id!==t.collectionID});return s({},e,{collections:s({},e.collections,{all:l,toDelete:a})});case o.T:return s({},e,{collections:s({},e.collections,{active:{id:t.collection.id,name:t.collection.name,publishDate:t.collection.publishDate,status:s({},t.collection.status),type:t.collection.type,isForcedManualType:t.collection.isForcedManualType,canBeApproved:t.collection.canBeApproved,canBeDeleted:t.collection.canBeDeleted}})});case o.U:return s({},e,{collections:s({},e.collections,{active:s({},e.collections.active,{inProgress:t.collection.inProgress,complete:t.collection.complete,reviewed:t.collection.reviewed,deletes:t.collection.deletes,canBeApproved:t.collection.canBeApproved,canBeDeleted:t.collection.canBeDeleted})})});case o.V:return s({},e,{collections:s({},e.collections,{active:s({},e.collections.active,{teams:t.teams})})});case o.W:return s({},e,{collections:s({},e.collections,{active:null})});case o.X:return s({},e,{global:s({},e.global,{workingOn:s({},t.workingOn)})});case o.Y:return s({},e,{global:s({},e.global,{workingOn:null})});case o.Z:return s({},e,{users:s({},e.users,{active:{email:t.user.email,hasTemporaryPassword:t.user.hasTemporaryPassword,name:t.user.name,role:t.user.role}})});case o._0:return s({},e,{users:s({},e.users,{all:[].concat(r(t.users))})});case o._1:return s({},e,{users:s({},e.users,{all:e.users.all.filter(function(e){return e.email!==t.userID})})});case"UPDATE_ALL_TEAMS":return Object.assign({},e,{teams:Object.assign({},e.teams,{all:t.allTeams})});case o._2:return s({},e,{teams:s({},e.teams,{allIDsAndNames:t.allTeamIDsAndNames})});case"UPDATE_ACTIVE_TEAM":return Object.assign({},e,{teams:Object.assign({},e.teams,{active:t.activeTeam})});case"UPDATE_ACTIVE_TEAM_MEMBERS":return Object.assign({},e,{teams:Object.assign({},e.teams,{active:Object.assign({},e.teams.active,{members:t.members})})});case o._3:return Object.assign({},e,{datasets:s({},e.datasets,{activeInstance:t.instance})});case o._4:return Object.assign({},e,{datasets:s({},e.datasets,{activeInstance:null})});case o._5:return Object.assign({},e,{datasets:s({},e.datasets,{activeVersion:s({},e.datasets.activeVersion,t.version)})});case o._6:return Object.assign({},e,{datasets:s({},e.datasets,{activeVersion:s({},e.datasets.activeVersion,{lastEditedBy:t.lastEditedBy,reviewState:t.reviewState})})});case o._7:return Object.assign({},e,{datasets:s({},e.datasets,{activeVersion:null})});case o._8:return Object.assign({},e,{datasets:s({},e.datasets,{activeJob:t.job})});case o._9:return Object.assign({},e,{datasets:s({},e.datasets,{activeDataset:null})});case o._10:return Object.assign({},e,{datasets:s({},e.datasets,{activeDataset:s({},e.datasets.activeDataset,t.dataset)})});case o._11:return Object.assign({},e,{datasets:s({},e.datasets,{activeDataset:s({},e.datasets.activeDataset,{lastEditedBy:t.lastEditedBy,reviewState:t.reviewState})})});case o._12:return Object.assign({},e,{datasets:s({},e.datasets,{activeDataset:s({},e.datasets.activeDataset,{collection_id:t.collectionID})})});case"UPDATE_ALL_DATASETS":return Object.assign({},e,{datasets:Object.assign({},e.datasets,{all:t.allDatasets})});case"UPDATE_ALL_RECIPES":return Object.assign({},e,{datasets:s({},e.datasets,{recipes:t.allRecipes})});case"UPDATE_ALL_JOBS":return Object.assign({},e,{datasets:Object.assign({},e.datasets,{jobs:t.allJobs})});case"ADD_NEW_JOB":return Object.assign({},e,{datasets:Object.assign({},e.datasets,{jobs:[].concat(r(e.datasets.jobs),[t.job])})});case"ADD_NOTIFICATION":return Object.assign({},e,{notifications:[].concat(r(e.notifications),[t.notification])});case"REMOVE_NOTIFICATION":return Object.assign({},e,{notifications:e.notifications.filter(function(e){return e.id!==t.notificationID})});case"TOGGLE_NOTIFICATION_VISIBILITY":return Object.assign({},e,{notifications:e.notifications.map(function(e){return e.id!==t.notificationID?e:(e.isVisible=!e.isVisible,e)})});case o._13:return s({},e,{preview:s({},e.preview,t.preview)});case o._14:return s({},e,{preview:{selectedPage:null}});case o._15:return s({},e,{preview:s({},e.preview,{selectedPage:t.selectedPage})});case o._16:return s({},e,{preview:s({},e.preview,{selectedPage:null})})}return e}t.a=a;var i=n(658),o=n(22),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(662),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={children:u.a.node.isRequired,params:u.a.object.isRequired,location:u.a.object.isRequired},f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),p(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(c.a,{location:this.props.location}),this.props.children)}}]),t}(o.Component);t.a=f,f.propTypes=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{user:e.state.user,rootPath:e.state.rootPath,workingOn:e.state.global?e.state.global.workingOn:null,config:e.state.config}}var s=n(4),l=n.n(s),u=n(30),c=n(16),p=n(3),d=n.n(p),f=n(20),h=(n(89),n(132)),m=n(663),g=n(53),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y={config:d.a.shape({enableDatasetImport:d.a.bool}),user:d.a.object.isRequired,workingOn:d.a.shape({id:d.a.string.isRequired,name:d.a.string}),rootPath:d.a.string.isRequired,location:d.a.object.isRequired,dispatch:d.a.func.isRequired},b=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLogoutClick=n.handleLogoutClick.bind(n),n}return i(t,e),v(t,[{key:"handleLogoutClick",value:function(){g.a.logOut()}},{key:"renderWorkingOnItem",value:function(){if((this.props.workingOn||{}).id){var e=this.props.location.pathname;return e.indexOf("/datasets")>=0||e.indexOf("/preview")>=0?l.a.createElement("li",{className:"global-nav__item global-nav__item--working-on"},l.a.createElement(u.g,{to:f.a.resolve("/collections/"+this.props.workingOn.id),className:"global-nav__link selected"},"Working on: ",this.props.workingOn.name||l.a.createElement("div",{className:"margin-left--1 inline-block"},l.a.createElement("div",{className:"loader loader--inline loader--small"})))):void 0}}},{key:"renderNavItems",value:function(){if(!h.a.isAuthenticated(this.props.user))return l.a.createElement("li",{className:"global-nav__item"},l.a.createElement(u.g,{to:this.props.rootPath+"/login",activeClassName:"selected",className:"global-nav__link"},"Login"));var e=this.props.rootPath;return l.a.createElement("span",null,this.renderWorkingOnItem(),l.a.createElement("li",{className:"global-nav__item"},l.a.createElement(u.g,{to:e+"/collections",activeClassName:"selected",className:"global-nav__link"},"Collections")),h.a.isAdminOrEditor(this.props.user)?l.a.createElement("span",null,this.props.config.enableDatasetImport&&l.a.createElement("li",{className:"global-nav__item"},l.a.createElement(u.g,{to:f.a.resolve("/uploads/data"),activeClassName:"selected",className:"global-nav__link"},"Datasets")),l.a.createElement("li",{className:"global-nav__item"},l.a.createElement("a",{className:"global-nav__link",href:"/florence/publishing-queue"},"Publishing queue")),l.a.createElement("li",{className:"global-nav__item"},l.a.createElement("a",{className:"global-nav__link",href:"/florence/reports"},"Reports")),l.a.createElement("li",{className:"global-nav__item"},l.a.createElement(u.g,{to:e+"/users",activeClassName:"selected",className:"global-nav__link"},"Users and access")),l.a.createElement("li",{className:"global-nav__item"},l.a.createElement(u.g,{to:e+"/teams",activeClassName:"selected",className:"global-nav__link"},"Teams"))):"",l.a.createElement("li",{className:"global-nav__item"},l.a.createElement(u.g,{to:f.a.resolve("/login"),onClick:this.handleLogoutClick,className:"global-nav__link"},"Logout")))}},{key:"render",value:function(){var e=new RegExp(this.props.rootPath+"/collections/[\\w|-]*/preview","g"),t=e.test(this.props.location.pathname);return l.a.createElement("ul",{className:"global-nav__list"},t&&l.a.createElement(m.a,null),this.renderNavItems())}}]),t}(s.Component);b.propTypes=y,t.a=n.i(c.connect)(o)(b)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{preview:e.state.preview,rootPath:e.state.rootPath,workingOn:e.state.global.workingOn||{}}}var s=n(4),l=n.n(s),u=n(16),c=n(14),p=(n.n(c),n(3)),d=n.n(p),f=n(22),h=n(82),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g={dispatch:d.a.func.isRequired,preview:d.a.object.isRequired,rootPath:d.a.string.isRequired,workingOn:d.a.object.isRequired},v=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectChange=n.handleSelectChange.bind(n),n}return i(t,e),m(t,[{key:"mapPagesToSelect",value:function(e){var t=this;if(e)try{return e.map(function(e){return{id:e.uri,name:t.createPageTitle(e)}})}catch(e){console.error("Error mapping pages to select",e)}}},{key:"createPageTitle",value:function(e){return e.description.title&&e.description.edition?e.description.title+": "+e.description.edition:!e.description.title&&e.description.edition?"[no title available]: "+e.description.edition:e.description.title&&!e.description.edition?e.description.title:""}},{key:"handleSelectChange",value:function(e){var t=e.target.value;if("default-option"!==t){var r=t;this.props.dispatch(n.i(f.D)(r)),this.props.dispatch(n.i(c.push)(this.props.rootPath+"/collections/"+this.props.workingOn.id+"/preview?url="+r))}}},{key:"render",value:function(){return l.a.createElement("div",{className:"global-nav__preview-select"},l.a.createElement(h.a,{id:"preview-select",contents:this.mapPagesToSelect(this.props.preview.pages)||[],onChange:this.handleSelectChange,defaultOption:this.props.preview.pages?"Select an option":"Loading pages...",selectedOption:this.props.preview.selectedPage||""}))}}]),t}(s.Component);v.propTypes=g,t.a=n.i(u.connect)(o)(v)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={type:u.a.oneOf(["neutral","warning","positive"]).isRequired,message:u.a.oneOfType([u.a.string,u.a.element]).isRequired,id:u.a.string.isRequired,buttons:u.a.arrayOf(u.a.shape({onClick:u.a.func.isRequired,text:u.a.string.isRequired})),isVisible:u.a.bool},d={isVisible:!1,buttons:[]},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("li",{className:"notifications__item "+(this.props.isVisible?"visible":"")+" "+("warning"===this.props.type?"notifications__item--warning":"")+" "+("positive"===this.props.type?"notifications__item--positive":"")},this.props.message,this.props.buttons.map(function(e,t){return s.a.createElement("button",{key:t,className:"notifications__button",onClick:e.onClick},e.text)}))}}]),t}(o.Component);f.propTypes=p,f.defaultProps=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(664),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={notifications:u.a.arrayOf(u.a.object)},h=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),d(t,[{key:"render",value:function(){return s.a.createElement("ul",{className:"notifications"},this.props.notifications.map(function(e){return s.a.createElement(c.a,p({},e,{key:e.id}))}))}}]),t}(o.Component);h.propTypes=f,t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(54),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"getAllDeleted",value:function(){return a.a.get("/zebedee/deletedContent")}},{key:"restoreDeleted",value:function(e,t){return a.a.post("/zebedee/deletedcontent/"+e+"?collectionid="+t)}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(54),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"getUpcoming",value:function(e,t,n){var r=[];e&&r.push("page="+e),t&&r.push("query="+t),n&&r.push("size="+n);var i="/releasecalendar/data?view=upcoming&"+r.join("&");return a.a.get(i)}}]),e}();t.a=o},function(e,t,n){"use strict";function r(){return new Promise(function(e,t){if(!i.a.get("access_token"))return void e(!1);n.i(a.a)().then(function(t){if(!t.hasSession)return void e(!1);e(!0)}).catch(function(e){t(e)})})}t.a=r;var a=n(332),i=n(89)},function(e,t,n){"use strict";function r(e){this.name="HTTP_ERR",this.message=e?e.message:"",this.response=e||{},this.stack=(new Error).stack}n.d(t,"a",function(){return r}),r.prototype=Object.create(Error.prototype),r.prototype.constructor=r},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t){function n(t,s,p,f,b){var w=this,E=l()(),_=window.location.origin+p,C={method:e,credentials:"include",headers:{"Content-Type":"application/json","Request-ID":E,"internal-token":"FD0108EA-825D-411C-9B1D-41EF7727F465"}};"POST"!==e&&"PUT"!==e||(C.body=JSON.stringify(b||{}));var k=new Date(Date.now()).toISOString();o.a.event("Request sent",o.a.http(E,e,_,k)),fetch(p,C).then(function(n){var l=new Date(Date.now()).toISOString();if(o.a.event("Response received",o.a.http(E,e,_,k,n.status,l)),n.status>=500)throw new i.a(n);if(401===n.status){if(h)return void s({status:n.status,message:n.statusText});var p={type:"neutral",message:"Your session has expired so you've been redirected to the login screen",isDismissable:!0,autoDismiss:2e4};return u.a.logOut(),c.a.add(p),void s({status:n.status,message:n.statusText})}if(!n.ok)return void n.text().then(function(e){s({status:n.status,message:n.statusText,body:a(e)})});if(204===n.status)return void t({status:n.status,message:n.statusText});var d=!1,f=!1;try{d=n.headers.get("content-type").match(/application\/json/),f=n.headers.get("content-type").match(/text\/plain/)}catch(e){return console.error("Error trying to parse content-type header",e),(o.a.event("Error trying to parse content-type header",o.a.error(e),o.a.data({header_content_type:n.headers.get("content-type")})),n.status>=200)?void t():void s({status:"RUNTIME_ERROR",message:"Error trying to parse response's content-type header"})}if(d||"POST"===e||"PUT"===e||o.a.event("Received request response for method that didn't have the 'application/json' header",o.a.warn(),o.a.data({method:e})),f)return void r(regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.text();case 3:a=r.sent,t(a),r.next=15;break;case 7:if(r.prev=7,r.t0=r.catch(0),console.error("Error trying to parse request body as text: ",r.t0),o.a.event("Error trying to parse request body as text",o.a.error(r.t0)),"POST"!==e&&"PUT"!==e){r.next=14;break}return t(),r.abrupt("return");case 14:s({status:n.status,message:"Text response body couldn't be parsed"});case 15:case"end":return r.stop()}},r,w,[[0,7]])}))();r(regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.json();case 3:a=r.sent,t(a),r.next=15;break;case 7:if(r.prev=7,r.t0=r.catch(0),"POST"!==e&&"PUT"!==e){r.next=12;break}return t(),r.abrupt("return");case 12:console.error("Error trying to parse request body as JSON: ",r.t0),o.a.event("Error trying to parse request body as JSON",o.a.error(r.t0)),s({status:n.status,message:"JSON response body couldn't be parsed"});case 15:case"end":return r.stop()}},r,w,[[0,7]])}))()}).catch(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"No error message given"},a=new Date(Date.now()).toISOString();if(o.a.event("Request failed",o.a.http(E,e,_,k,void 0,a),o.a.error(r)),f)return void(y<v?(setTimeout(function(){n(t,s,p,f,b)},g),y++,g*=2,d(y)):(s(r instanceof TypeError?{status:"FETCH_ERR",error:r}:r instanceof i.a?{status:"RESPONSE_ERR",error:r}:{status:"UNEXPECTED_ERR",error:r}),y=0,g=m));s(r instanceof TypeError?{status:"FETCH_ERR",error:r}:r instanceof i.a?{status:"RESPONSE_ERR",error:r}:{status:"UNEXPECTED_ERR",error:r})})}function a(e){if(!e)return null;try{return JSON.parse(e)}catch(t){return console.warn("Error parsing request body as JSON, returned body as "+(void 0===e?"undefined":p(e))),e}}var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},f=arguments[4],h=arguments[5],m=50,g=m,v=5,y=0;return new Promise(function(e,r){n(e,r,t,s,f)})}t.a=a;var i=n(669),o=n(23),s=n(81),l=n.n(s),u=n(53),c=n(10),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}},function(e,t,n){"use strict";function r(e){var t=i.a.getState().state.rootPath;return e?e.startsWith(t+"/teams")||e.startsWith(t+"/datasets")||e.startsWith(t+"/collections")||e.startsWith(t+"/users")?void a.f.push(e):e===t+"/publishing-queue"||e===t+"/reports"||e===t+"/workspace"?void(window.location.href=e):void a.f.push(t+"/collections"):void a.f.push(t+"/collections")}t.a=r;var a=n(30),i=n(171)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{user:e.state.user,collections:e.state.collections.all,activeCollection:e.state.collections.active,collectionsToDelete:e.state.collections.toDelete,rootPath:e.state.rootPath}}var l=n(4),u=n.n(l),c=n(16),p=n(3),d=n.n(p),f=n(14),h=(n.n(f),n(238)),m=n.n(h),g=n(674),v=n(336),y=n(52),b=n(652),w=n(22),E=n(10),_=n(675),C=n(193),k=n(89),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),D={dispatch:d.a.func.isRequired,rootPath:d.a.string.isRequired,params:d.a.shape({collectionID:d.a.string}).isRequired,user:d.a.shape({userType:d.a.string.isRequired}).isRequired,collections:d.a.array,activeCollection:d.a.shape({inProgress:d.a.arrayOf(d.a.shape(v.a)),id:d.a.string.isRequired}),collectionsToDelete:d.a.object.isRequired,routes:d.a.arrayOf(d.a.object).isRequired},O=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingCollections:!1},n.handleCollectionSelection=n.handleCollectionSelection.bind(n),n.handleCollectionCreateSuccess=n.handleCollectionCreateSuccess.bind(n),n.isViewer="VIEWER"===n.props.user.userType,n}return o(t,e),S(t,[{key:"componentWillMount",value:function(){return this.fetchCollections()}},{key:"componentWillReceiveProps",value:function(e){m()(e.collectionsToDelete)||this.state.isFetchingCollections||this.removeCollectionFromState(e.collectionsToDelete)}},{key:"componentWillUnmount",value:function(){this.props.activeCollection&&this.props.dispatch(n.i(w.H)())}},{key:"fetchCollections",value:function(){var e=this;return this.setState({isFetchingCollections:!0}),y.a.getAll().then(function(t){var r=t.filter(function(e){return"COMPLETE"!==e.approvalStatus}).map(function(e){return C.a.collectionResponseToState(e)});e.props.dispatch(n.i(w.I)(r)),e.setState({isFetchingCollections:!1})}).catch(function(t){switch(e.setState({isFetchingCollections:!1}),t.status){case 401:break;case 404:var r={type:"warning",message:"No API route available to get collections.",autoDismiss:5e3};E.a.add(r),e.props.dispatch(n.i(f.push)(e.props.rootPath+"/collections"));break;case 403:var a={type:"warning",message:"You don't have permissions to view collections",autoDismiss:5e3};E.a.add(a),e.props.dispatch(n.i(f.push)(e.props.rootPath+"/collections"));break;case"RESPONSE_ERR":var i={type:"warning",message:"An error's occurred whilst trying to get collections. You may only be able to see previously loaded information and won't be able to edit any team members",isDismissable:!0};E.a.add(i);break;case"UNEXPECTED_ERR":var o={type:"warning",message:"An unexpected error's occurred whilst trying to get collections. You may only be able to see previously loaded information and won't be able to edit any team members",isDismissable:!0};E.a.add(o);break;case"FETCH_ERR":var s={type:"warning",message:"There's been a network error whilst trying to get collections. You may only be able to see previously loaded information and not be able to edit any team members",isDismissable:!0};E.a.add(s);break;default:var l={type:"warning",message:"An unexpected error's occurred whilst trying to get collections. You may only be able to see previously loaded information and won't be able to edit any team members",isDismissable:!0};E.a.add(l)}console.error("Error fetching all collections:\n",t)})}},{key:"removeCollectionFromState",value:function(e){for(var t in e){if(!e.hasOwnProperty(t))return;this.props.dispatch(n.i(w.J)(t))}}},{key:"handleCollectionCreateSuccess",value:function(e){var t=C.a.collectionResponseToState(e),a=[].concat(r(this.props.collections),[t]);a.sort(function(e,t){var n=e.id.toLowerCase(),r=t.id.toLowerCase();return n<r?-1:n>r?1:0}),this.props.dispatch(n.i(w.I)(a)),this.props.dispatch(n.i(f.push)(this.props.rootPath+"/collections/"+t.id)),this.fetchCollections(),document.getElementById(t.id).scrollIntoView()}},{key:"handleCollectionSelection",value:function(e){if(this.isViewer)return k.a.add("collection",e.id,null),this.props.dispatch(n.i(w.C)(e.id,e.name)),void this.props.dispatch(n.i(f.push)(this.props.rootPath+"/collections/"+e.id+"/preview"));this.props.dispatch(n.i(f.push)(this.props.rootPath+"/collections/"+e.id))}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"grid grid--justify-space-around"},u.a.createElement("div",{className:this.isViewer?"grid__col-8":"grid__col-4"},u.a.createElement("h1",{className:"text-center"},"Select a collection"),u.a.createElement(b.a,{items:this.props.collections,activeItemID:this.props.params.collectionID,isUpdating:this.state.isFetchingCollections,headings:["Name","Publish date"],handleItemClick:this.handleCollectionSelection})),!this.isViewer&&u.a.createElement("div",{className:"grid__col-4"},u.a.createElement("h1",{className:"text-center"},"Create a collection"),u.a.createElement(g.a,{user:this.props.user,onSuccess:this.handleCollectionCreateSuccess}))),u.a.createElement(_.a,{collectionID:this.props.params.collectionID,routes:this.props.routes}))}}]),t}(l.Component);O.propTypes=D,t.a=n.i(c.connect)(s)(O)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(28),p=n(82),d=n(331),f=n(131),h=n(51),m=n(680),g=n(36),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y={newCollectionDetails:u.a.shape({name:u.a.object.isRequired,type:u.a.string.isRequired,publishDate:u.a.object.isRequired,publishTime:u.a.object.isRequired,pendingDeletes:u.a.array.isRequired,teams:u.a.array.isRequired,release:u.a.object.isRequired,scheduleType:u.a.string.isRequired}).isRequired,handleCollectionNameChange:u.a.func.isRequired,handleTeamSelection:u.a.func.isRequired,handleRemoveTeam:u.a.func.isRequired,handleCollectionTypeChange:u.a.func.isRequired,showScheduleOptions:u.a.bool.isRequired,showCustomScheduleOptions:u.a.bool.isRequired,handleSelectRelease:u.a.func.isRequired,handleCloseRelease:u.a.func.isRequired,hasTeams:u.a.bool.isRequired,allTeams:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,name:u.a.string.isRequired})),handleScheduleTypeChange:u.a.func.isRequired,handlePublishTimeChange:u.a.func.isRequired,handlePublishDateChange:u.a.func.isRequired,handleAddRelease:u.a.func.isRequired,showScheduleByRelease:u.a.bool.isRequired,onSubmit:u.a.func.isRequired,isSubmitting:u.a.bool.isRequired},b=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),v(t,[{key:"renderScheduleOptions",value:function(){var e=[{id:"custom-radio",value:"custom-schedule",label:"Custom schedule"},{id:"calendar-radio",value:"calender-entry-schedule",label:"Calendar entry schedule"}];return s.a.createElement("div",null,s.a.createElement(f.a,{groupName:"schedule-type",radioData:e,selectedValue:this.props.newCollectionDetails.scheduleType,onChange:this.props.handleScheduleTypeChange,legend:"Schedule type",inline:!0}),this.props.showCustomScheduleOptions?s.a.createElement("div",null,s.a.createElement(c.a,{id:"publish-date",label:"Publish date",type:"date",onChange:this.props.handlePublishDateChange,error:this.props.newCollectionDetails.publishDate.errorMsg,value:this.props.newCollectionDetails.publishDate.value,min:g.a.format(g.a.getNow(),"yyyy-mm-dd"),max:g.a.format(g.a.addYear(10),"yyyy-mm-dd")}),s.a.createElement(c.a,{id:"publish-time",label:"Publish time",type:"time",value:this.props.newCollectionDetails.publishTime.value,onChange:this.props.handlePublishTimeChange,error:this.props.newCollectionDetails.publishTime.errorMsg})):s.a.createElement("div",null,s.a.createElement("div",{className:"margin-bottom--1"},this.props.newCollectionDetails.release?s.a.createElement("div",null,s.a.createElement("p",null,"Selected release: "),s.a.createElement("p",{className:"font-weight--600 colour--night-shadz"},this.props.newCollectionDetails.release.errorMsg),s.a.createElement("p",{className:"font-weight--600"},this.props.newCollectionDetails.release.isProvisional&&"[Not finalised] ",this.props.newCollectionDetails.release.title)):s.a.createElement("p",null,"No release selected")),s.a.createElement("button",{type:"button",onClick:this.props.handleAddRelease,className:"btn btn--primary margin-bottom--2 "},"Select ",this.props.newCollectionDetails.release.uri&&"different ","a calendar entry")))}},{key:"render",value:function(){var e=[{id:"scheduled-radio",value:"scheduled",label:"Scheduled publish"},{id:"manual-radio",value:"manual",label:"Manual publish"}];return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.props.onSubmit},s.a.createElement(c.a,{id:"collection-name",label:"Collection name",type:"text",error:this.props.newCollectionDetails.name.errorMsg,value:this.props.newCollectionDetails.name.value,onChange:this.props.handleCollectionNameChange}),s.a.createElement(p.a,{id:"collection-teams",label:"Select a team(s) that can view this collection",contents:this.props.hasTeams?this.props.allTeams:[],defaultOption:this.props.hasTeams?"Select an option":"Loading teams...",selectedOption:"default-option",onChange:this.props.handleTeamSelection}),this.props.newCollectionDetails.teams?s.a.createElement(d.a,{items:this.props.newCollectionDetails.teams,onRemoveItem:this.props.handleRemoveTeam}):"",s.a.createElement(f.a,{groupName:"release-type",radioData:e,selectedValue:this.props.newCollectionDetails.type,onChange:this.props.handleCollectionTypeChange,legend:"Publish type",inline:!0}),this.props.showScheduleOptions?this.renderScheduleOptions():"",s.a.createElement("button",{type:"submit",className:"btn btn--positive margin-top--1",disabled:this.props.isSubmitting},"Create collection"),this.props.isSubmitting?s.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):""),this.props.showScheduleByRelease&&s.a.createElement(h.a,{sizeClass:"grid__col-8"},s.a.createElement(m.a,{onClose:this.props.handleCloseRelease,onSubmit:this.props.handleSelectRelease})))}}]),t}(o.Component);b.propTypes=y,t.a=b},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{allTeams:e.state.teams.allIDsAndNames}}var l=n(4),u=n.n(l),c=n(16),p=n(3),d=n.n(p),f=n(52),h=n(120),m=n(10),g=n(23),v=n(673),y=n(22),b=n(337),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_={user:d.a.shape({userType:d.a.string.isRequired}).isRequired,onSuccess:d.a.func.isRequired,allTeams:d.a.arrayOf(d.a.shape({id:d.a.string.isRequired,name:d.a.string.isRequired})),dispatch:d.a.func.isRequired},C=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={newCollectionDetails:{name:{value:"",errorMsg:""},type:"scheduled",publishDate:{value:"",errorMsg:""},publishTime:{value:"09:30",errorMsg:""},pendingDeletes:[],teams:[],release:{date:"",title:"",uri:"",isProvisional:null,errorMsg:""},scheduleType:"custom-schedule"},isGettingTeams:!0,isSubmitting:!1,showScheduleByRelease:!1,updatedAllTeams:null},n.blankNewCollectionDetails=n.state.newCollectionDetails,n.handleCollectionNameChange=n.handleCollectionNameChange.bind(n),n.handleTeamSelection=n.handleTeamSelection.bind(n),n.handleRemoveTeam=n.handleRemoveTeam.bind(n),n.handleCollectionTypeChange=n.handleCollectionTypeChange.bind(n),n.handleScheduleTypeChange=n.handleScheduleTypeChange.bind(n),n.handlePublishDateChange=n.handlePublishDateChange.bind(n),n.handlePublishTimeChange=n.handlePublishTimeChange.bind(n),n.handleAddRelease=n.handleAddRelease.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleCloseRelease=n.handleCloseRelease.bind(n),n.handleSelectRelease=n.handleSelectRelease.bind(n),n}return o(t,e),E(t,[{key:"componentWillMount",value:function(){this.getAllTeams()}},{key:"getAllTeams",value:function(){var e=this;h.a.getAll().then(function(t){if(0===t.length){var r={type:"warning",message:"Failed to get teams. You should be able to add teams after creating the collection or you can try refreshing",isDismissable:!0};return m.a.add(r),void e.setState({isGettingTeams:!1})}var a=t.map(function(e){return{id:e.id.toString(),name:e.name}});e.setState({isGettingTeams:!1}),e.props.dispatch(n.i(y.O)(a)),e.props.dispatch(n.i(y.A)(t))}).catch(function(e){switch(e.status){case 401:break;case"RESPONSE_ERR":var t={type:"warning",message:"An error's occurred whilst trying to get teams. You can still create the collection without teams, or refresh",isDismissable:!0};m.a.add(t);break;case"UNEXPECTED_ERR":var n={type:"warning",message:"An unexpected error's occurred whilst trying to get teams. You can still create the collection without teams, or refresh",isDismissable:!0};m.a.add(n);break;case"FETCH_ERR":var r={type:"warning",message:"There's been a network error whilst trying to get teams. Try refresh the page",isDismissable:!0};m.a.add(r)}console.error("Error fetching all teams:\n",e)})}},{key:"handleCollectionNameChange",value:function(e){var t={value:e.target.value,errorMsg:""},n=w({},this.state.newCollectionDetails,{name:t});this.setState({newCollectionDetails:n})}},{key:"handleTeamSelection",value:function(e){if(e.target.value){for(var t=e.target.value,n=0;n<this.state.newCollectionDetails.teams.length;n++)if(this.state.newCollectionDetails.teams[n].id===t)return;var a=this.props.allTeams.find(function(e){return e.id===t}),i=this.state.updatedAllTeams||this.props.allTeams||[],o=i.map(function(e){return e.id==t?w({},e,{disabled:!0}):e}),s=[].concat(r(this.state.newCollectionDetails.teams),[a]),l=w({},this.state.newCollectionDetails,{teams:s});this.setState({newCollectionDetails:l,updatedAllTeams:o})}}},{key:"handleRemoveTeam",value:function(e){var t=this.state.newCollectionDetails.teams.filter(function(t){return t.id!==e.id}),n=this.state.updatedAllTeams.map(function(t){return t.id===e.id?w({},t,{disabled:!1}):t}),r=w({},this.state.newCollectionDetails,{teams:t});this.setState({newCollectionDetails:r,updatedAllTeams:n})}},{key:"handleCollectionTypeChange",value:function(e){var t=w({},this.state.newCollectionDetails,{type:e.value,release:{uri:"",date:"",title:"",errorMsg:""}});this.setState({newCollectionDetails:t})}},{key:"handleScheduleTypeChange",value:function(e){var t=w({},this.state.newCollectionDetails,{scheduleType:e.value});this.setState({newCollectionDetails:t})}},{key:"handlePublishDateChange",value:function(e){var t={value:e.target.value,errorMsg:""},n=w({},this.state.newCollectionDetails,{publishDate:t});this.setState({newCollectionDetails:n})}},{key:"handlePublishTimeChange",value:function(e){var t={value:e.target.value,errorMsg:""},n=w({},this.state.newCollectionDetails,{publishTime:t});this.setState({newCollectionDetails:n})}},{key:"handleAddRelease",value:function(e){e.preventDefault(),this.setState({showScheduleByRelease:!0})}},{key:"handleSelectRelease",value:function(e){this.setState(function(t){return{newCollectionDetails:w({},t.newCollectionDetails,{release:{uri:e.uri,title:e.title,date:e.releaseDate,isProvisional:e.isProvisional,errorMsg:""}}),showScheduleByRelease:!1}})}},{key:"handleCloseRelease",value:function(){this.setState({showScheduleByRelease:!1})}},{key:"makePublishDate",value:function(){if("scheduled"!==this.state.newCollectionDetails.type)return null;if("calender-entry-schedule"===this.state.newCollectionDetails.scheduleType)return this.state.releaseDateISO;var e=this.state.newCollectionDetails.publishDate.value,t=this.state.newCollectionDetails.publishTime.value;return new Date(e+" "+t).toISOString()}},{key:"mapStateToPostBody",value:function(){try{return{name:this.state.newCollectionDetails.name.value,type:this.state.newCollectionDetails.type,publishDate:this.makePublishDate(),teams:this.state.newCollectionDetails.teams.map(function(e){return e.name}),collectionOwner:this.props.user.userType,releaseUri:"calender-entry-schedule"===this.state.newCollectionDetails.scheduleType?this.state.newCollectionDetails.release.uri:null}}catch(e){g.a.event("Error mapping new collection state to POST body",g.a.error(e)),console.error("Error mapping new collection state to POST body"+e)}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isSubmitting:!0});var n=!1,r=this.state.newCollectionDetails,a=b.a.name(this.state.newCollectionDetails.name.value);if(!a.isValid){var i={value:this.state.newCollectionDetails.name.value,errorMsg:a.errorMsg};r=w({},r,{name:i}),n=!0}if("scheduled"===this.state.newCollectionDetails.type&&"custom-schedule"===this.state.newCollectionDetails.scheduleType){var o=b.a.date(this.state.newCollectionDetails.publishDate.value);if(!o.isValid){var s={value:this.state.newCollectionDetails.publishDate.value,errorMsg:o.errorMsg};r=w({},r,{publishDate:s}),n=!0}}if("scheduled"===this.state.newCollectionDetails.type&&"custom-schedule"===this.state.newCollectionDetails.scheduleType){var l=b.a.time(this.state.newCollectionDetails.publishTime.value);if(!l.isValid){var u={value:this.state.newCollectionDetails.publishTime.value,errorMsg:l.errorMsg};r=w({},r,{publishTime:u}),this.setState({newCollectionDetails:r,isSubmitting:!1}),n=!0}}if("scheduled"===this.state.newCollectionDetails.type&&"calender-entry-schedule"===this.state.newCollectionDetails.scheduleType){var c=this.state.newCollectionDetails.release,p=b.a.release(c);if(!p.isValid){var d=w({},c,{errorMsg:p.errorMsg});r=w({},r,{release:d}),this.setState({newCollectionDetails:r,isSubmitting:!1}),n=!0}}if(n)return void this.setState({newCollectionDetails:r,isSubmitting:!1});f.a.create(this.mapStateToPostBody()).then(function(e){t.setState({newCollectionDetails:t.blankNewCollectionDetails,isSubmitting:!1,updatedAllTeams:null}),t.props.onSuccess(e)}).catch(function(e){switch(t.setState({isSubmitting:!1}),e.status){case 401:break;case 400:var n={type:"warning",message:"There was an error creating the collection. Please check inputs and try again.",isDismissable:!0};m.a.add(n);break;case 409:t.handle409SubmitStatus(e);break;default:var r={type:"warning",message:"An unexpected error has occured whilst creating collection",isDismissable:!0};m.a.add(r)}console.error(e)})}},{key:"handle409SubmitStatus",value:function(e){if(e.body.message.includes("A collection with this name already exists")){g.a.event("error creating collection: collection name already exists",g.a.error(e),g.a.data({collection_name:this.state.newCollectionDetails.name.value}));var t={value:this.state.newCollectionDetails.name.value,errorMsg:"A collection with this name already exists"},n=w({},this.state.newCollectionDetails,{name:t});return void this.setState({newCollectionDetails:n,isSubmitting:!1})}if(e.body.message.includes("Cannot use this release")){g.a.event("error creating collection: release is in another collection",g.a.error(e),g.a.data({collection_name:this.state.newCollectionDetails.name.value,release_name:this.state.newCollectionDetails.release.name,release_url:this.state.newCollectionDetails.release.uri}));var r=w({},this.state.newCollectionDetails.release,{errorMsg:"Release is already in use in another collection"}),a=w({},this.state.newCollectionDetails,{release:r});return void this.setState({newCollectionDetails:a,isSubmitting:!1})}}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(v.a,{newCollectionDetails:this.state.newCollectionDetails,handleCollectionNameChange:this.handleCollectionNameChange,handleTeamSelection:this.handleTeamSelection,handleRemoveTeam:this.handleRemoveTeam,handleCollectionTypeChange:this.handleCollectionTypeChange,showScheduleOptions:"scheduled"===this.state.newCollectionDetails.type,showCustomScheduleOptions:"custom-schedule"===this.state.newCollectionDetails.scheduleType,handleSelectRelease:this.handleSelectRelease,handleCloseRelease:this.handleCloseRelease,hasTeams:!this.state.isGettingTeams,allTeams:this.state.updatedAllTeams||this.props.allTeams||[],handleScheduleTypeChange:this.handleScheduleTypeChange,handlePublishTimeChange:this.handlePublishTimeChange,handlePublishDateChange:this.handlePublishDateChange,handleAddRelease:this.handleAddRelease,showScheduleByRelease:this.state.showScheduleByRelease,onSubmit:this.handleSubmit,isSubmitting:this.state.isSubmitting}))}}]),t}(l.Component);C.propTypes=_,t.a=n.i(c.connect)(s)(C)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{user:e.state.user,collections:e.state.collections.all,activeCollection:e.state.collections.active,rootPath:e.state.rootPath,activePageURI:e.routing.locationBeforeTransitions.hash.replace("#",""),enableDatasetImport:e.state.config.enableDatasetImport}}var c=n(4),p=n.n(c),d=n(16),f=n(14),h=(n.n(f),n(3)),m=n.n(h),g=n(238),v=n.n(g),y=n(190),b=n(336),w=n(678),E=n(52),_=n(37),C=n(10),k=n(22),S=n(89),D=n(676),O=n(193),T=n(51),R=n(679),P=n(20),x=n(132),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A={dispatch:m.a.func.isRequired,rootPath:m.a.string.isRequired,enableDatasetImport:m.a.bool,user:m.a.object.isRequired,collectionID:m.a.string,collections:m.a.array,activeCollection:m.a.shape({approvalStatus:m.a.string,collectionOwner:m.a.string,isEncrypted:m.a.bool,timeseriesImportFiles:m.a.array,inProgress:m.a.arrayOf(m.a.shape(b.a)),complete:m.a.arrayOf(m.a.shape(b.a)),reviewed:m.a.arrayOf(m.a.shape(b.a)),deletes:m.a.arrayOf(m.a.shape({user:m.a.string.isRequired,root:b.b,totalDeletes:m.a.number.isRequired})),id:m.a.string.isRequired,name:m.a.string.isRequired,type:m.a.string.isRequired,teams:m.a.array}),activePageURI:m.a.string,routes:m.a.arrayOf(m.a.object).isRequired},j=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingCollectionDetails:!1,isEditingCollection:!1,isRestoringContent:!1,isApprovingCollection:!1,isCancellingDelete:{value:!1,uri:""},pendingDeletedPages:[],drawerIsAnimatable:!1,drawerIsVisible:!1},n.handleDrawerTransitionEnd=n.handleDrawerTransitionEnd.bind(n),n.handleDrawerCloseClick=n.handleDrawerCloseClick.bind(n),n.handleCollectionDeleteClick=n.handleCollectionDeleteClick.bind(n),n.handleCollectionApproveClick=n.handleCollectionApproveClick.bind(n),n.handleCollectionPageClick=n.handleCollectionPageClick.bind(n),n.handleCollectionPageEditClick=n.handleCollectionPageEditClick.bind(n),n.handleCollectionPageDeleteClick=n.handleCollectionPageDeleteClick.bind(n),n.handleCancelPageDeleteClick=n.handleCancelPageDeleteClick.bind(n),n.handleRestoreDeletedContentClose=n.handleRestoreDeletedContentClose.bind(n),n.handleRestoreMultiDeletedContentSuccess=n.handleRestoreMultiDeletedContentSuccess.bind(n),n.handleRestoreSingleDeletedContentSuccess=n.handleRestoreSingleDeletedContentSuccess.bind(n),n}return l(t,e),I(t,[{key:"componentWillMount",value:function(){if(!x.a.canViewCollectionsDetails(this.props.user))return void this.props.dispatch(n.i(f.push)(this.props.rootPath+"/collections"));this.props.collectionID&&(this.fetchActiveCollection(this.props.collectionID),this.setState({drawerIsVisible:!0}))}},{key:"componentWillReceiveProps",value:function(e){if("edit"===e.routes[e.routes.length-1].path&&this.setState({isEditingCollection:!0}),"edit"===this.props.routes[this.props.routes.length-1].path&&"edit"!==e.routes[e.routes.length-1].path&&this.setState({isEditingCollection:!1}),"restore-content"===e.routes[e.routes.length-1].path&&this.setState({isRestoringContent:!0}),"restore-content"===this.props.routes[this.props.routes.length-1].path&&"restore-content"!==e.routes[e.routes.length-1].path&&this.setState({isRestoringContent:!1}),!this.props.collectionID&&e.collectionID){var t=this.props.collections.find(function(t){return t.id===e.collectionID});this.updateActiveCollectionGlobally(t),this.setState({drawerIsAnimatable:!0,drawerIsVisible:!0}),this.fetchActiveCollection(e.collectionID)}if(this.props.collectionID&&!e.collectionID&&this.setState({drawerIsAnimatable:!0,drawerIsVisible:!1}),this.props.collectionID&&e.collectionID&&this.props.collectionID!==e.collectionID){var n=this.props.collections.find(function(t){return t.id===e.collectionID});this.updateActiveCollectionGlobally(n),this.fetchActiveCollection(e.collectionID)}}},{key:"shouldComponentUpdate",value:function(){return!!this.props.collectionID}},{key:"fetchActiveCollection",value:function(e){var t=this;this.setState({isFetchingCollectionDetails:!0}),E.a.get(e).then(function(e){if("COMPLETE"===e.approvalStatus)return void(location.pathname=t.props.rootPath+"/publishing-queue");if(t.props.collectionID&&t.props.collectionID===e.id){var r=O.a.collectionResponseToState(e),a=O.a.pagesToCollectionState(r);t.props.activeCollection&&!v()(t.props.activeCollection)||t.props.dispatch(n.i(k.K)(r)),t.props.dispatch(n.i(k.L)(a)),t.props.dispatch(n.i(k.M)(r.teams)),t.setState({isFetchingCollectionDetails:!1})}}).catch(function(r){if(console.error("Fetching collection "+e+": ",r),D.a.getActiveCollection(r),404===r.status||403===r.status)return void t.props.dispatch(n.i(f.push)(t.props.rootPath+"/collections"));t.setState({isFetchingCollectionDetails:!1})})}},{key:"updateActiveCollectionGlobally",value:function(e){this.props.dispatch(n.i(k.K)(e)),this.props.dispatch(n.i(k.C)(e.id,e.name)),S.a.add("collection",e.id,null)}},{key:"handleCollectionDeleteClick",value:function(e){var t=this;this.props.dispatch(n.i(f.push)(this.props.rootPath+"/collections")),E.a.delete(e).then(i(regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t.props.dispatch(n.i(k.N)(e)),a={type:"positive",message:"Collection deleted",autoDismiss:4e3,isDismissable:!0},C.a.add(a);case 3:case"end":return r.stop()}},r,t)}))).catch(function(t){console.error("Error deleting collection '"+e+"'",t),D.a.deleteCollection(t)})}},{key:"handleCollectionApproveClick",value:function(){var e=this,t=this.props.activeCollection,r=this.props.collectionID;if(!O.a.collectionCanBeApproved(t)){var a={type:"neutral",message:"Unable to approve collection '"+t.name+"', please check that there are no pages in progress or awaiting review",isDismissable:!0,autoDismiss:4e3};return C.a.add(a),!1}var i=this.props.collections.map(function(e){return e.id!==r?e:N({},e,{status:N({},e.status,{neutral:!0})})});this.props.dispatch(n.i(k.I)(i)),this.setState({isApprovingCollection:!0}),E.a.approve(r).then(function(){e.setState({isApprovingCollection:!1}),e.props.dispatch(n.i(f.push)(e.props.rootPath+"/collections"))}).catch(function(t){e.setState({isApprovingCollection:!1}),console.error("Error approving collection",t),D.a.approveCollection(t)})}},{key:"handleCancelPageDeleteClick",value:function(e){var t=this;if(!e)return void C.a.add({type:"warning",message:"Couldn't delete because of an unexpected error: unable to get URI of delete to cancel",autoDismiss:5e3,isDismissable:!0});this.setState({isCancellingDelete:{value:!0,uri:e}});var r=this.props.activeCollection.id;E.a.cancelDelete(this.props.collectionID,e).then(function(){if(t.props.collectionID===r){t.setState({isCancellingDelete:{value:!1,uri:""}});var a=N({},t.props.activeCollection,{deletes:t.props.activeCollection.deletes.filter(function(t){return t.root.uri!==e})});a.canBeApproved=O.a.collectionCanBeApproved(a),a.canBeDeleted=O.a.collectionCanBeDeleted(a),t.props.dispatch(n.i(k.L)(a))}}).catch(function(n){t.setState({isCancellingDelete:{value:!1,uri:""}}),D.a.cancelPageDelete(n,e,t.props.collectionID),console.error("Error removing pending delete of page '"+e+"' from collection '"+t.props.collectionID+"'",n)})}},{key:"handleDrawerTransitionEnd",value:function(){this.setState({drawerIsAnimatable:!1}),this.state.drawerIsVisible||(this.props.dispatch(n.i(k.H)()),this.props.dispatch(n.i(f.push)(this.props.rootPath+"/collections")))}},{key:"handleCollectionPageClick",value:function(e){if(e!==this.props.activePageURI){var t=location.pathname+"#"+e;return this.props.activePageURI&&(t=this.props.rootPath+"/collections/"+this.props.collectionID+"#"+e),this.props.dispatch(n.i(f.push)(t)),t}}},{key:"handleCollectionPageEditClick",value:function(){function e(e,n){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var a,i,o,s,l,u,c,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("dataset_details"!==t.type){e.next=10;break}return e.next=3,_.a.getLatestVersionURL(t.id);case 3:return a=e.sent,i=P.a.resolve("/collections/"+this.props.activeCollection.id+a),o=this.props.activeCollection[r].find(function(e){return"dataset_details"===e.type&&e.uri===t.uri}),s=o.lastEditedBy,this.props.dispatch(n.i(k.p)(s,r)),this.props.dispatch(n.i(f.push)(i)),e.abrupt("return",i);case 10:if("dataset_version"!==t.type){e.next=17;break}return l=P.a.resolve("/collections/"+this.props.activeCollection.id+"/datasets/"+t.datasetID+"/editions/"+t.edition+"/versions/"+t.version),u=this.props.activeCollection[r].find(function(e){return"dataset_version"===e.type&&e.uri===t.uri}),c=u.lastEditedBy,this.props.dispatch(n.i(k.j)(c,r)),this.props.dispatch(n.i(f.push)(l)),e.abrupt("return",l);case 17:return p=this.props.rootPath+"/workspace?collection="+this.props.collectionID+"&uri="+t.uri,window.location=p,e.abrupt("return",p);case 20:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCollectionPageDeleteUndo",value:function(e,t,r){this.setState(function(e){return{pendingDeletedPages:[].concat(a(e.pendingDeletedPages)).filter(function(e){return e!==t})}});var i=this.props.rootPath+"/collections/"+this.props.activeCollection.id+"#"+t;return this.props.dispatch(n.i(f.push)(i)),window.clearTimeout(e),C.a.remove(r),i}},{key:"handleCollectionPageDeleteClick",value:function(e,t){var i=this,o=this.props.collectionID;this.setState(function(t){return{pendingDeletedPages:[].concat(a(t.pendingDeletedPages),[e.uri])}});var s=location.pathname.replace("#"+e.uri,"");this.props.dispatch(n.i(f.push)(s));var l=function(){return"dataset_details"===e.type?E.a.removeDataset(o,e.uri):"dataset_version"===e.type?E.a.removeDatasetVersion(o,e.uri,e.edition,e.version):i.props.enableDatasetImport?E.a.deletePageIncludingDatasetImport(o,e.uri):E.a.deletePage(o,e.uri)},u=function(){l().then(function(){var a=i.props.activeCollection[t].filter(function(t){return t.uri!==e.uri}),o=N({},i.props.activeCollection,r({},t,a)),s=i.state.pendingDeletedPages.filter(function(t){return t!==e.uri});i.setState({pendingDeletedPages:s}),o.canBeApproved=O.a.collectionCanBeApproved(o),o.canBeDeleted=O.a.collectionCanBeDeleted(o),i.props.dispatch(n.i(k.L)(o)),window.clearTimeout(c)}).catch(function(t){var n=i.state.pendingDeletedPages.filter(function(t){return t!==e.uri});i.setState({pendingDeletedPages:n}),window.clearTimeout(c),D.a.deletePage(t,e.title,i.props.collectionID),console.error("Error deleting page from a collection: ",t)})},c=setTimeout(u,6e3),p=function(){i.handleCollectionPageDeleteUndo(c,e.uri,m)},d=function(){u(),C.a.remove(m)},h={buttons:[{text:"Undo",onClick:p},{text:"OK",onClick:d}],type:"neutral",isDismissable:!1,autoDismiss:6e3,message:"Deleted page '"+e.title+"' from collection '"+this.props.activeCollection.name+"'"},m=C.a.add(h);return s}},{key:"handleDrawerCloseClick",value:function(){this.setState({drawerIsAnimatable:!0,drawerIsVisible:!1})}},{key:"handleRestoreDeletedContentClose",value:function(){this.props.dispatch(n.i(f.push)(P.a.resolve("../")))}},{key:"handleRestoreMultiDeletedContentSuccess",value:function(e){var t=e.map(function(e){return{uri:e.uri,title:e.description.title,type:e.type}}),r=N({},this.props.activeCollection,{inProgress:[].concat(a(t))});this.props.dispatch(n.i(k.L)(r)),this.handleRestoreDeletedContentClose()}},{key:"handleRestoreSingleDeletedContentSuccess",value:function(e){var t={uri:e.uri,title:e.title,type:e.type},r=N({},this.props.activeCollection,{inProgress:[].concat(a(this.props.activeCollection.inProgress),[t])});this.props.dispatch(n.i(k.L)(r)),this.handleRestoreDeletedContentClose()}},{key:"renderLoadingCollectionDetails",value:function(){return p.a.createElement(b.c,{id:this.props.collectionID,isLoadingNameAndDate:!0,isLoadingDetails:!0,onClose:this.handleDrawerCloseClick,onPageClick:this.handleCollectionPageClick,onEditPageClick:this.handleCollectionPageEditClick,onDeletePageClick:this.handleCollectionPageDeleteClick,onDeleteCollectionClick:this.handleCollectionDeleteClick,onApproveCollectionClick:this.handleCollectionApproveClick,onCancelPageDeleteClick:this.handleCancelPageDeleteClick})}},{key:"renderCollectionDetails",value:function(){return p.a.createElement(b.c,N({},this.props.activeCollection,{enableDatasetImport:this.props.enableDatasetImport,activePageURI:this.props.activePageURI,inProgress:O.a.pagesExcludingPendingDeletedPages(this.props.activeCollection.inProgress,this.state.pendingDeletedPages),complete:O.a.pagesExcludingPendingDeletedPages(this.props.activeCollection.complete,this.state.pendingDeletedPages),reviewed:O.a.pagesExcludingPendingDeletedPages(this.props.activeCollection.reviewed,this.state.pendingDeletedPages),onClose:this.handleDrawerCloseClick,onPageClick:this.handleCollectionPageClick,onEditPageClick:this.handleCollectionPageEditClick,onDeletePageClick:this.handleCollectionPageDeleteClick,onDeleteCollectionClick:this.handleCollectionDeleteClick,onApproveCollectionClick:this.handleCollectionApproveClick,onCancelPageDeleteClick:this.handleCancelPageDeleteClick,isLoadingNameAndDate:!1,isLoadingDetails:this.state.isFetchingCollectionDetails,isCancellingDelete:this.state.isCancellingDelete,isApprovingCollection:this.state.isApprovingCollection}))}},{key:"renderEditCollection",value:function(){return p.a.createElement(w.a,{name:this.props.activeCollection.name,id:this.props.activeCollection.id})}},{key:"render",value:function(){return p.a.createElement("div",null,p.a.createElement(y.a,{isVisible:this.state.drawerIsVisible,isAnimatable:this.state.drawerIsAnimatable,handleTransitionEnd:this.handleDrawerTransitionEnd},this.props.collectionID&&!this.props.activeCollection&&this.renderLoadingCollectionDetails(),this.props.activeCollection&&!this.state.isEditingCollection&&this.renderCollectionDetails(),this.props.activeCollection&&this.state.isEditingCollection&&this.renderEditCollection()),this.state.isRestoringContent&&this.props.activeCollection&&p.a.createElement(T.a,{sizeClass:"grid__col-8"},p.a.createElement(R.a,{onClose:this.handleRestoreDeletedContentClose,onMultiFileSuccess:this.handleRestoreMultiDeletedContentSuccess,onSingleFileSuccess:this.handleRestoreSingleDeletedContentSuccess,activeCollectionId:this.props.activeCollection.id})))}}]),t}(c.Component);j.propTypes=A,t.a=n.i(d.connect)(u)(j)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(10),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"getActiveCollection",value:function(e){switch(e.status){case 401:break;case 404:var t={type:"neutral",message:"Collection couldn't be found so you've been redirected to the collections screen",autoDismiss:5e3};a.a.add(t);break;case 403:var n={type:"neutral",message:"You don't have permissions to access this collection so you've been redirect to the collections screen",autoDismiss:5e3};a.a.add(n);break;case"FETCH_ERR":var r={type:"warning",message:"There was a network error whilst getting this collection, please check your connection and refresh the page",autoDismiss:5e3};a.a.add(r);break;default:var i={type:"warning",message:"An unexpected error occurred",autoDismiss:5e3};a.a.add(i)}}},{key:"deleteCollection",value:function(e){switch(e.status){case 401:break;case 400:var t={type:"warning",message:"Couldn't delete collection. There may be a file left in progress or awaiting review.",isDismissable:!0};a.a.add(t);break;case 404:var n={type:"warning",message:"Couldn't delete collection. It may have already been deleted.",isDismissable:!0};a.a.add(n);break;case 403:var r={type:"neutral",message:"You don't have permission to delete collections",autoDismiss:5e3,isDismissable:!0};a.a.add(r);break;case"FETCH_ERR":var i={type:"warning",message:"Couldn't delete collection due to a network error, please check your connection and try again.",isDismissable:!0};a.a.add(i);break;default:var o={type:"warning",message:"Couldn't delete collection due to an unexpected error",isDismissable:!0};a.a.add(o)}}},{key:"approveCollection",value:function(e){switch(e.status){case 401:break;case 403:var t={type:"neutral",message:"You don't have permission to approve this collection",autoDismiss:5e3,isDismissable:!0};a.a.add(t);break;case 404:var n={type:"warning",message:"Couldn't approve this collection. It may have already been approved or have been deleted",isDismissable:!0};a.a.add(n);break;case"FETCH_ERR":var r={type:"warning",message:"Couldn't approve this collection due to a network error, please check your connection and try again",isDismissable:!0};a.a.add(r);break;default:var i={type:"warning",message:"Couldn't approve this collection due to an unexpected error",isDismissable:!0};a.a.add(i)}}},{key:"deletePage",value:function(e,t,n){switch(e.status){case 401:break;case 404:var r={type:"warning",message:"Couldn't delete the page '"+t+"' because it doesn't exist in the collection '"+n+"'",isDismissable:!0};a.a.add(r);break;case 403:var i={type:"neutral",message:"You don't have permission to delete the page '"+t+"' from this collection",autoDismiss:5e3,isDismissable:!0};a.a.add(i);break;case"FETCH_ERR":var o={type:"warning",message:"Couldn't delete the page '"+t+"' from this collection due to a network error, please check your connection and try again.",isDismissable:!0};a.a.add(o);break;default:var s={type:"warning",message:"Couldn't delete the page '"+t+"' from this collection due to an unexpected error",isDismissable:!0};a.a.add(s)}}},{key:"cancelPageDelete",value:function(e,t,n){switch(e.status){case 401:break;case 403:var r={type:"neutral",message:"You don't have permission to cancel the delete '"+t+"'",autoDismiss:5e3,isDismissable:!0};a.a.add(r);break;case 404:var i={type:"warning",message:"Couldn't cancel delete of page '"+t+"' because it doesn't exist in the collection '"+n+"'",isDismissable:!0};a.a.add(i);break;case"FETCH_ERR":var o={type:"warning",message:"Couldn't cancel delete of page '"+t+"' due to a network error, please check your connection and try again.",isDismissable:!0};a.a.add(o);break;default:var s={type:"warning",message:"Couldn't cancel delete of page '"+t+"' due to an unexpected error",isDismissable:!0};a.a.add(s)}}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(125),p=n.n(c),d=n(28),f=n(82),h=n(331),m=n(131),g=n(36),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y={originalName:u.a.string,name:u.a.string,nameErrorMsg:u.a.string,onCancel:u.a.func.isRequired,onNameChange:u.a.func.isRequired,onRemoveTeam:u.a.func.isRequired,onTeamSelect:u.a.func.isRequired,onPublishTypeChange:u.a.func.isRequired,onPublishDateChange:u.a.func.isRequired,onPublishTimeChange:u.a.func.isRequired,onSave:u.a.func.isRequired,publishDate:u.a.string,publishDateErrorMsg:u.a.string,publishTime:u.a.string,publishTimeErrorMsg:u.a.string,teams:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,name:u.a.string.isRequired})),allTeams:u.a.arrayOf(u.a.shape({id:u.a.string.isRequired,name:u.a.string.isRequired})),publishType:u.a.string.isRequired,originalPublishType:u.a.string.isRequired,originalPublishDate:u.a.string.isRequired,isFetchingAllTeams:u.a.bool,isSavingEdits:u.a.bool},b=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.publishTypeRadioButtons=[{id:"edit-type-schedule",value:"scheduled",label:"Scheduled"},{id:"edit-type-manual",value:"manual",label:"Manual"}],n.minimumPublishDate=p()(g.a.getNow(),"yyyy-mm-dd"),n.maximumPublishDate=p()(g.a.addYear(10),"yyyy-mm-dd"),n.handleTeamSelection=n.handleTeamSelection.bind(n),n.handleTeamRemove=n.handleTeamRemove.bind(n),n.handleNameChange=n.handleNameChange.bind(n),n.handlePublishTypeChange=n.handlePublishTypeChange.bind(n),n.handlePublishDateChange=n.handlePublishDateChange.bind(n),n.handlePublishTimeChange=n.handlePublishTimeChange.bind(n),n.handleSave=n.handleSave.bind(n),n}return i(t,e),v(t,[{key:"handleTeamSelection",value:function(e){this.props.onTeamSelect(e.target.value)}},{key:"handleTeamRemove",value:function(e){this.props.onRemoveTeam(e.id)}},{key:"handleNameChange",value:function(e){this.props.onNameChange(e.target.value)}},{key:"handlePublishTypeChange",value:function(e){this.props.onPublishTypeChange(e.value)}},{key:"handlePublishDateChange",value:function(e){this.props.onPublishDateChange(e.target.value)}},{key:"handlePublishTimeChange",value:function(e){this.props.onPublishTimeChange(e.target.value)}},{key:"handleSave",value:function(e){e.preventDefault(),this.props.onSave()}},{key:"renderPublishDate",value:function(){if(this.props.originalPublishType)return"manual"===this.props.originalPublishType?s.a.createElement("p",null,"Manual publish"):"scheduled"===this.props.originalPublishType&&this.props.originalPublishDate?s.a.createElement("p",null,"Publish date: ",this.props.originalPublishDate):"scheduled"!==this.props.originalPublishType||this.props.originalPublishDate?void 0:s.a.createElement("p",null,"Publish date: no publish date available")}},{key:"render",value:function(){return s.a.createElement("div",{className:"drawer__container"},s.a.createElement("div",{className:"drawer__heading"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8"},s.a.createElement("div",{className:"grid grid--justify-space-between grid--align-end margin-top--3 margin-bottom--2"},s.a.createElement("div",null,s.a.createElement("h2",null,this.props.originalName),this.renderPublishDate()),s.a.createElement("p",{id:"editing-text"},"Editing collection..."))))),s.a.createElement("div",{className:"drawer__body"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("form",{className:"form grid__col-8 margin-top--1",onSubmit:this.handleSave},s.a.createElement(d.a,{id:"collection-edit-name",label:"Name",value:this.props.name,error:this.props.nameErrorMsg,onChange:this.handleNameChange}),s.a.createElement(f.a,{id:"collection-edit-teams",label:"Select a team(s) that can view this collection",contents:this.props.allTeams,defaultOption:this.props.isFetchingAllTeams?"Loading teams...":"Select an option",selectedOption:"default-option",onChange:this.handleTeamSelection}),s.a.createElement(h.a,{disabled:this.props.isSavingEdits,items:this.props.teams,onRemoveItem:this.handleTeamRemove}),s.a.createElement(m.a,{groupName:"collection-edit-type",radioData:this.publishTypeRadioButtons,selectedValue:this.props.publishType,onChange:this.handlePublishTypeChange,legend:"Publish type",inline:!0}),"scheduled"===this.props.publishType&&s.a.createElement("span",null,s.a.createElement(d.a,{type:"date",id:"edit-publish-date",label:"Publish date",error:this.props.publishDateErrorMsg,value:this.props.publishDate,min:this.minimumPublishDate,max:this.maximumPublishDate,onChange:this.handlePublishDateChange}),s.a.createElement(d.a,{type:"time",id:"edit-publish-time",label:"Publish time",error:this.props.publishTimeErrorMsg,value:this.props.publishTime,onChange:this.handlePublishTimeChange})),s.a.createElement("input",{type:"submit",hidden:!0})))),s.a.createElement("div",{className:"drawer__footer"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},s.a.createElement("div",null,s.a.createElement("button",{disabled:this.props.isSavingEdits,className:"btn btn--positive",type:"button",onClick:this.handleSave},"Save and return"),s.a.createElement("button",{disabled:this.props.isSavingEdits,className:"btn btn--margin-left",type:"button",onClick:this.props.onCancel},"Cancel"),this.props.isSavingEdits&&s.a.createElement("div",{className:"inline-block"},s.a.createElement("div",{className:"form__loader loader"})))))))}}]),t}(o.Component);b.propTypes=y,t.a=b},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{teams:e.state.collections.active?e.state.collections.active.teams:void 0,publishType:e.state.collections.active?e.state.collections.active.type:void 0,publishDate:e.state.collections.active?e.state.collections.active.publishDate:void 0,activeCollection:e.state.collections.active,collections:e.state.collections.all}}var l=n(4),u=n.n(l),c=n(14),p=(n.n(c),n(16)),d=n(3),f=n.n(d),h=n(125),m=n.n(h),g=n(677),v=n(20),y=n(120),b=n(23),w=n(10),E=n(22),_=n(337),C=n(52),k=n(36),S=n(193),D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T={name:f.a.string.isRequired,id:f.a.string.isRequired,dispatch:f.a.func.isRequired,teams:f.a.arrayOf(f.a.shape({id:f.a.string.isRequired,name:f.a.string.isRequired})),publishType:f.a.string.isRequired,publishDate:f.a.string,activeCollection:f.a.object,collections:f.a.array},R=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isSavingEdits:!1,isFetchingAllTeams:!1,name:{value:e.name,errorMsg:""},allTeams:[],updatedTeamsList:null,addedTeams:new Map,removedTeams:new Map,publishType:e.publishType,publishDate:{value:"",errorMsg:""},publishTime:{value:"09:30",errorMsg:""}},n.handleCancel=n.handleCancel.bind(n),n.handleSave=n.handleSave.bind(n),n.handlePublishTypeChange=n.handlePublishTypeChange.bind(n),n.handlePublishDateChange=n.handlePublishDateChange.bind(n),n.handlePublishTimeChange=n.handlePublishTimeChange.bind(n),n.handleNameChange=n.handleNameChange.bind(n),n.handleAddTeam=n.handleAddTeam.bind(n),n.handleRemoveTeam=n.handleRemoveTeam.bind(n),n}return o(t,e),O(t,[{key:"componentWillMount",value:function(){var e=this;"scheduled"===this.props.publishType&&this.props.publishDate&&this.setState({publishDate:{value:k.a.format(this.props.publishDate,"yyyy-mm-dd"),errorMsg:""},publishTime:{value:k.a.format(this.props.publishDate,"hh:MM"),errorMsg:""}}),this.setState({isFetchingAllTeams:!0}),y.a.getAll().then(function(t){var r=t.map(function(t){var n=!1;return e.props.teams&&e.props.teams.length>0&&(n=e.props.teams.some(function(e){return t.id==e.id})),{id:t.id.toString(),name:t.name,disabled:n}});e.setState({isFetchingAllTeams:!1,allTeams:r}),e.props.dispatch(n.i(E.A)(t))}).catch(function(t){if(e.setState({isFetchingAllTeams:!1}),b.a.event("Error fetching or mapping all teams",b.a.error(t)),console.error("Error fetching or mapping all teams",t),"FETCH_ERR"===t.status){var n={type:"warning",message:"A network error occurred whilst getting the list of all teams, please check your connection and refresh Florence",autoDismiss:5e3,isDismissable:!0};return void w.a.add(n)}var r={type:"warning",message:"An unexpected error occured getting the list all teams, if you need to  edit the teams please try refreshing Florence",autoDismiss:5e3,isDismissable:!0};w.a.add(r)})}},{key:"handleNameChange",value:function(e){this.setState({name:{value:e,errorMsg:""}})}},{key:"handleAddTeam",value:function(e){var t=this.state.updatedTeamsList||this.props.teams||[];if(e){if(!t.some(function(t){return t.id===e})){var n=this.state.allTeams.find(function(t){return t.id===e});if(!n){var a={type:"warning",message:"Unable to add the team '"+e+"' to this collection because an unexpected error occured",autoDismiss:4e3,isDismissable:!0};return w.a.add(a),void console.error("Unable to find team ID '"+e+"' in teams array in Redux")}this.setState(function(a){var i=D({},a),o=[].concat(r(t),[n]),s=a.allTeams.map(function(e){return D({},e,{disabled:e.id==n.id||e.disabled})});return i.removedTeams.delete(e)?{updatedTeamsList:o,removedTeams:i.removedTeams,allTeams:s}:{updatedTeamsList:o,addedTeams:i.addedTeams.set(e),allTeams:s}})}}}},{key:"handleRemoveTeam",value:function(e){var t=this.state.updatedTeamsList||this.props.teams||[];this.setState(function(n){var r=D({},n),a=t.filter(function(t){return t.id!==e}),i=n.allTeams.map(function(t){return D({},t,{disabled:t.id!=e&&t.disabled})});return r.addedTeams.delete(e)?{updatedTeamsList:a,addedTeams:r.addedTeams,allTeams:i}:{updatedTeamsList:a,removedTeams:r.removedTeams.set(e),allTeams:i}})}},{key:"handlePublishTypeChange",value:function(e){if("manual"!==e&&"scheduled"!==e)return b.a.event("Attempt to select a publish type that isn't recognised",b.a.warn(),b.a.data({publish_type:e})),void console.warn("Attempt to select a publish type that isn't recognised: ",e);this.setState({publishType:e})}},{key:"handlePublishDateChange",value:function(e){this.setState({publishDate:{value:e,errorMsg:""}})}},{key:"handlePublishTimeChange",value:function(e){this.setState({publishTime:{value:e,errorMsg:""}})}},{key:"handleCancel",value:function(){this.props.dispatch(n.i(c.push)(v.a.resolve("../")))}},{key:"handleSave",value:function(){var e=this,t=!1,r=_.a.name(this.state.name.value);if(r.isValid||(this.setState(function(e){return{name:D({},e.name,{errorMsg:r.errorMsg})}}),t=!0),"scheduled"===this.state.publishType){var a=_.a.date(this.state.publishDate.value);a.isValid||(this.setState({publishDate:{value:"",errorMsg:a.errorMsg}}),t=!0)}if("scheduled"===this.state.publishType){var i=_.a.time(this.state.publishTime.value);i.isValid||(this.setState({publishTime:{value:"",errorMsg:i.errorMsg}}),t=!0)}t||(this.setState({isSavingEdits:!0}),C.a.update(this.props.id,this.mapEditsToAPIRequestBody(D({},this.state))).then(function(t){var r=D({},e.props.activeCollection,{name:t.name,publishDate:t.publishDate,type:t.type,teams:e.state.updatedTeamsList||e.props.teams}),a=e.props.collections.map(function(t){return t.id!==e.props.id?t:S.a.collectionResponseToState(r)});e.props.dispatch(n.i(E.K)(r)),e.props.dispatch(n.i(E.L)(r)),e.props.dispatch(n.i(E.M)(r.teams)),e.props.dispatch(n.i(E.I)(a)),e.props.dispatch(n.i(c.push)(v.a.resolve("../")))}).catch(function(t){switch(e.setState({isSavingEdits:!1}),t.status){case 400:var r={type:"warning",message:"The values you provided couldn't be saved. Please check for any possible errors and try again.",isDismissable:!0,autoDismiss:4e3};w.a.add(r);break;case 401:break;case 403:var a={type:"neutral",message:"You don't have permission to edit the collection '"+e.props.name+"'",isDismissable:!0,autoDismiss:4e3};w.a.add(a),e.props.dispatch(n.i(c.push)(v.a.resolve("/collections")));break;case 404:var i={type:"neutral",message:"Collection '"+e.props.name+"' no longer exists, so you've been redirected to the main collections screen",isDismissable:!0,autoDismiss:4e3};w.a.add(i),e.props.dispatch(n.i(c.push)(v.a.resolve("/collections")));break;case 409:b.a.event("Attempt to rename collection to existing collection name",b.a.error(t),b.a.data({current_name:e.props.name,new_name:e.state.name.value})),e.setState(function(e){return{name:{value:e.name.value,errorMsg:"A collection with this name already exists"}}});break;default:var o={type:"warning",message:"An unexpected error occured whilst saving the edits to collection '"+e.props.name+"'",isDismissable:!0,autoDismiss:4e3};w.a.add(o)}b.a.event("Error saving collection details",b.a.error(t),b.a.data({collection_id:e.props.id})),console.error("Error saving collection details update",t)}))}},{key:"teamsHaveChanged",value:function(e){return e.addedTeams.size>0||e.removedTeams.size>0}},{key:"publishDateHasChanged",value:function(e){if("manual"===e.publishType)return!1;try{if(new Date(e.publishDate.value+" "+e.publishTime.value).toISOString()!==this.props.publishDate)return!0}catch(e){return b.a.event("Error creating new publish date from string",b.a.error(e)),console.error("Error creating new publish date from string: "+e),!1}return!1}},{key:"mapEditsToAPIRequestBody",value:function(e){var t={};return e.name.value!==this.props.name&&(t.name=e.name.value),this.teamsHaveChanged(e)&&(t.teams=e.updatedTeamsList.map(function(e){return e.name})),e.publishType!==this.props.publishType&&(t.type=e.publishType),this.publishDateHasChanged(e)&&(t.publishDate="scheduled"===e.publishType?new Date(e.publishDate.value+" "+e.publishTime.value).toISOString():""),t}},{key:"render",value:function(){return u.a.createElement(g.a,D({},this.props,{onCancel:this.handleCancel,onSave:this.handleSave,onNameChange:this.handleNameChange,onTeamSelect:this.handleAddTeam,onRemoveTeam:this.handleRemoveTeam,onPublishTypeChange:this.handlePublishTypeChange,onPublishDateChange:this.handlePublishDateChange,onPublishTimeChange:this.handlePublishTimeChange,originalName:this.props.name,name:this.state.name.value,nameErrorMsg:this.state.name.errorMsg,originalPublishType:this.props.publishType,publishType:this.state.publishType,originalPublishDate:m()(this.props.publishDate,"dddd, d mmmm yyyy h:MMTT"),publishDate:this.state.publishDate.value,publishDateErrorMsg:this.state.publishDate.errorMsg,publishTime:this.state.publishTime.value,publishTimeErrorMsg:this.state.publishTime.errorMsg,teams:this.state.updatedTeamsList||this.props.teams||[],allTeams:this.state.isFetchingAllTeams?[]:this.state.allTeams,isFetchingAllTeams:this.state.isFetchingAllTeams,isSavingEdits:this.state.isSavingEdits}))}}]),t}(l.Component);R.propTypes=T,t.a=n.i(p.connect)(s)(R)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{activeCollection:e.state.collections.active}}var s=n(4),l=n.n(s),u=n(16),c=n(3),p=n.n(c),d=n(170),f=n(28),h=n(52),m=n(666),g=n(10),v=n(23),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b={activeCollection:p.a.object.isRequired,onClose:p.a.func.isRequired,onMultiFileSuccess:p.a.func.isRequired,onSingleFileSuccess:p.a.func.isRequired},w=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isGettingDeletedContent:!1,isRestoringDeletingContent:!1,allDeletedContent:[],filteredDeletedContent:[],activeItem:{}},n.handleItemClick=n.handleItemClick.bind(n),n.handleDoneClick=n.handleDoneClick.bind(n),n.handleSearch=n.handleSearch.bind(n),n.handleMultipleRestoredPages=n.handleMultipleRestoredPages.bind(n),n}return i(t,e),y(t,[{key:"componentWillMount",value:function(){this.getAllDeletedContent()}},{key:"mapDeletedContentToState",value:function(e){try{return{id:e.id.toString(),pageTitle:e.pageTitle,columnValues:[l.a.createElement("span",{key:e.id+"-col-val-1"},e.pageTitle,l.a.createElement("br",null),e.uri),e.deletedFiles.length.toString(),e.eventDate],returnValue:{id:e.id.toString(),uri:e.uri,title:e.pageTitle,type:e.type,isMultiDelete:e.deletedFiles.length>1}}}catch(t){v.a.event("Error mapping deleted content",v.a.error(t),v.a.data({deleted_content_id:e.id,deleted_content_page_title:e.pageTitle})),console.error("Error mapping deleted content (id: "+e.id+", title: "+e.pageTitle+")to state. "+t)}}},{key:"getAllDeletedContent",value:function(){var e=this;this.setState({isGettingDeletedContent:!0}),m.a.getAllDeleted().then(function(t){var n=t.map(function(t){return e.mapDeletedContentToState(t)});e.setState({isGettingDeletedContent:!1,allDeletedContent:n||[]})}).catch(function(t){switch(e.setState({isGettingDeletes:!1}),t.status){case 401:break;case 404:var n={type:"warning",message:"No API route available to get deleted content.",autoDismiss:5e3};g.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get deleted content.",isDismissable:!0};g.a.add(r);break;case"UNEXPECTED_ERR":var a={type:"warning",message:"An unexpected error's occurred whilst trying to get deleted content.",isDismissable:!0};g.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to get deleted content.",isDismissable:!0};g.a.add(i)}console.error("Error fetching all collections:\n",t)})}},{key:"handleItemClick",value:function(e){this.setState({activeItem:e})}},{key:"handleDoneClick",value:function(){var e=this;this.setState({isRestoringDeletingContent:!0}),m.a.restoreDeleted(this.state.activeItem.id,this.props.activeCollection.id).then(function(){if(e.state.activeItem.isMultiDelete)return void e.handleMultipleRestoredPages(e.props.activeCollection.id);e.props.onSingleFileSuccess(e.state.activeItem),e.setState({isRestoringDeletingContent:!1})}).catch(function(t){switch(t.status){case 401:break;case 400:var n={type:"warning",message:"Deleted content not found",autoDismiss:5e3};g.a.add(n);break;case 404:var r={type:"warning",message:'The collection "'+e.props.activeCollection.name+'" you are trying to restore deleted content into was not found. It may have been deleted',autoDismiss:5e3};g.a.add(r);break;case"RESPONSE_ERR":var a={type:"warning",message:"An error's occurred whilst trying to restore deleted content.",isDismissable:!0};g.a.add(a);break;case"UNEXPECTED_ERR":var i={type:"warning",message:"An unexpected error's occurred whilst trying to restore deleted content.",isDismissable:!0};g.a.add(i);break;case"FETCH_ERR":var o={type:"warning",message:"There's been a network error whilst trying to restore deleted content.",isDismissable:!0};g.a.add(o)}e.setState({isRestoringDeletingContent:!1}),console.error("Error restoring deleted content:\n",t)})}},{key:"handleMultipleRestoredPages",value:function(e){var t=this;h.a.getInProgressContent(e).then(function(e){t.props.onMultiFileSuccess(e),t.setState({isRestoringDeletingContent:!1})}).catch(function(e){t.props.onSingleFileSuccess(t.state.activeItem),console.error("Error fetching inProgress pages from collection details end point",e);var n={type:"warning",message:"We were unable to get all deletes, but they will have been restored. Refresh the page to see the full list of restored deletes",autoDismiss:5e3};g.a.add(n),t.setState({isRestoringDeletingContent:!1})})}},{key:"handleSearch",value:function(e){var t=e.target.value.toLowerCase(),n=this.state.allDeletedContent.filter(function(e){return-1!==e.pageTitle.toLowerCase().search(t)});this.setState({filteredDeletedContent:n,activeItem:{}})}},{key:"render",value:function(){return l.a.createElement("div",{className:"grid"},l.a.createElement("div",{className:"modal__header grid"},l.a.createElement("div",{className:"grid__col-8"},l.a.createElement("h1",{className:"modal__title margin-top--2"},"Select a deletion to restore")),l.a.createElement("div",{className:"grid__col-4"},l.a.createElement(f.a,{id:"search-deleted-content",onChange:this.handleSearch,label:"Search by page title"}))),l.a.createElement("div",{className:"modal__body grid__col-12"},l.a.createElement(d.a,{isUpdating:this.state.isGettingDeletedContent,rows:this.state.filteredDeletedContent.length?this.state.filteredDeletedContent:this.state.allDeletedContent,columns:[{heading:"Deleted page and URI",width:"6"},{heading:"No. of deleted pages",width:"3"},{heading:"Date of delete",width:"3"}],handleItemClick:this.handleItemClick,activeRowID:this.state.activeItem.id})),l.a.createElement("div",{className:"grid__col-12"},l.a.createElement("div",{className:"add-remove__footer"},l.a.createElement("button",{className:"btn margin-right--1",onClick:this.props.onClose},"Close"),l.a.createElement("button",{className:"btn btn--primary",onClick:this.handleDoneClick,disabled:!this.state.activeItem.id||this.state.isRestoringDeletingContent},"Done"),this.state.isRestoringDeletingContent?l.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):"")))}}]),t}(s.Component);w.propTypes=b,t.a=n.i(u.connect)(o)(w)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(4),u=n.n(l),c=n(3),p=n.n(c),d=n(170),f=n(52),h=n(667),m=n(23),g=n(28),v=n(36),y=n(10),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w={onClose:p.a.func.isRequired,onSubmit:p.a.func.isRequired},E=[{width:"9",heading:"Name"},{width:"3",heading:"Publish date"}],_=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingReleases:!1,isFetchingExtraReleases:!1,isFetchingSearchedReleases:!1,tableData:[],currentPage:0,numberOfPages:0,numberOfReleases:0,releasesPerPage:10,searchSubmitDelay:300,searchQuery:"",selectedRelease:""},n.searchTimeout=null,n.loadMoreReleases=n.loadMoreReleases.bind(n),n.handleSearch=n.handleSearch.bind(n),n.handleReleaseSelect=n.handleReleaseSelect.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.shouldSubmitBeDisabled=n.shouldSubmitBeDisabled.bind(n),n}return s(t,e),b(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({isFetchingReleases:!0}),h.a.getUpcoming(null,null,this.state.releasesPerPage).then(function(t){var n=e.mapReleasesToTableRows(t.result.results);e.setState({isFetchingReleases:!1,numberOfReleases:t.result.numberOfResults,numberOfPages:t.result.paginator?t.result.paginator.numberOfPages:1,currentPage:1,tableData:n})}).catch(function(t){if("FETCH_ERR"===t.status){var n={type:"warning",message:"There was a network error whilst getting upcoming releases, please check your connection and try again",isDismissable:!0};y.a.add(n)}else{var r={type:"warning",message:"An unexpected error occured whilst trying to get upcoming releases",isDismissable:!0};y.a.add(r)}e.setState({isFetchingReleases:!1}),m.a.event("Error fetching upcoming releases for 'scheduled by release' functionality",m.a.error(t)),console.error("Error fetching upcoming releases for 'scheduled by release' functionality",t)})}},{key:"mapReleasesToTableRows",value:function(e){return e.filter(function(e){return!e.description.published&&!e.description.cancelled}).map(function(e){var t=e.description.title.replace(/<\/?[^>]+(>|$)/g,"");return{id:e.uri,columnValues:[t,v.a.format(e.description.releaseDate,"dddd, dd/mm/yyyy h:MMTT")],returnValue:{uri:e.uri,releaseDate:e.description.releaseDate,title:t,isProvisional:!e.description.finalised}}})}},{key:"handleSearch",value:function(e){var t=this,n=e.target.value;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){t.searchReleases(n)},this.state.searchSubmitDelay)}},{key:"searchReleases",value:function(e){var t=this;this.setState({isFetchingSearchedReleases:!0,searchQuery:e}),h.a.getUpcoming(null,e,this.state.releasesPerPage).then(function(n){var r=t.mapReleasesToTableRows(n.result.results);t.setState({isFetchingSearchedReleases:!1,numberOfReleases:n.result.numberOfResults||0,numberOfPages:n.result.paginator?n.result.paginator.numberOfPages:1,currentPage:1,searchQuery:e,tableData:r})}).catch(function(e){if("FETCH_ERR"===e.status){var n={type:"warning",message:"There was a network error whilst getting upcoming releases, please check your connection and try again",isDismissable:!0};y.a.add(n)}else{var r={type:"warning",message:"An unexpected error occured whilst trying to get upcoming releases",isDismissable:!0};y.a.add(r)}t.setState({isFetchingSearchedReleases:!1}),m.a.event("Error fetching queried releases for 'schedule by release' functionality",m.a.error(e)),console.error("Error fetching queried releases for 'schedule by release' functionality",e)})}},{key:"loadMoreReleases",value:function(){var e=this;this.setState({isFetchingExtraReleases:!0}),h.a.getUpcoming(this.state.currentPage+1,this.state.searchQuery,this.state.releasesPerPage).then(function(t){e.setState(function(n){return{isFetchingExtraReleases:!1,currentPage:n.currentPage+1,tableData:[].concat(a(n.tableData),a(e.mapReleasesToTableRows(t.result.results)))}})}).catch(function(t){if("FETCH_ERR"===t.status){var n={type:"warning",message:"There was a network error whilst getting more upcoming releases, please check your connection and try again",isDismissable:!0};y.a.add(n)}else{var r={type:"warning",message:"An unexpected error occured whilst trying to get more upcoming releases",isDismissable:!0};y.a.add(r)}e.setState({isFetchingExtraReleases:!1}),m.a.event("Error fetching extra upcoming releases for 'scheduled by release' functionality",m.a.error(t)),console.error("Error fetching extra upcoming releases for 'scheduled by release' functionality",t)})}},{key:"renderQueryText",value:function(){return this.state.isFetchingSearchedReleases?u.a.createElement("p",{className:"margin-bottom--1"},"Getting releases matching the term '",u.a.createElement("span",{className:"font-weight--600"},this.state.searchQuery),"'"):0===this.state.numberOfReleases?u.a.createElement("p",{className:"margin-bottom--1"},"No releases matching the term '",u.a.createElement("span",{className:"font-weight--600"},this.state.searchQuery),"'"):u.a.createElement("p",{className:"margin-bottom--1"},"Showing ",u.a.createElement("span",{className:"font-weight--600"},this.state.numberOfReleases)," release",this.state.numberOfReleases>1&&"s"," matching the term '",u.a.createElement("span",{className:"font-weight--600"},this.state.searchQuery),"'")}},{key:"handleReleaseSelect",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({selectedRelease:t}),this.state.selectedRelease.uri!==t.uri){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.checkReleaseIsInCollection(t);case 5:n=e.sent,n&&(r=this.state.tableData.map(function(e){return e.id!==t.uri?e:(e.status={},e.status.neutral=!0,e.status.message='This release is already used in collection: "'+n+'"',e)}),this.setState({tableData:r}));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"checkReleaseIsInCollection",value:function(e){return f.a.checkContentIsInCollection(e.uri).then(function(e){return 204===e.status?null:"string"==typeof e?e:void 0})}},{key:"shouldSubmitBeDisabled",value:function(){var e=this;return!(!this.state.tableData.find(function(t){return e.state.selectedRelease.uri===t.id&&t.status})&&this.state.selectedRelease)}},{key:"handleSubmit",value:function(){this.props.onSubmit(this.state.selectedRelease)}},{key:"render",value:function(){return u.a.createElement("div",{className:"grid"},u.a.createElement("div",{className:"modal__header grid"},u.a.createElement("div",{className:"grid__col-8"},u.a.createElement("h1",{className:"modal__title margin-top--2"},"Select a calendar entry")),u.a.createElement("div",{className:"grid__col-4"},u.a.createElement(g.a,{id:"search-releases",disabled:this.state.isFetchingReleases,onChange:this.handleSearch,label:"Search by release name"}))),u.a.createElement("div",{className:"modal__body grid__col-12"},this.state.isFetchingSearchedReleases&&!this.state.searchQuery&&u.a.createElement("p",{className:"margin-bottom--1"},"Getting all releases..."),this.state.searchQuery&&this.renderQueryText(),u.a.createElement(d.a,{activeRowID:this.state.selectedRelease.uri,columns:E,isUpdating:this.state.isFetchingReleases||this.state.isFetchingSearchedReleases,handleItemClick:this.handleReleaseSelect,rows:this.state.tableData}),!this.state.isFetchingReleases&&u.a.createElement("div",{className:"grid grid--justify-space-between margin-top--1"},u.a.createElement("div",null,this.state.numberOfPages!==this.state.currentPage&&u.a.createElement("button",{className:"btn btn--primary",type:"button",onClick:this.loadMoreReleases,disabled:this.state.isFetchingExtraReleases},"Show more releases"),this.state.isFetchingExtraReleases&&u.a.createElement("div",{className:"margin-left--1 inline-block"},u.a.createElement("div",{className:"loader loader--dark"}))),u.a.createElement("div",null,this.state.tableData.length>0?u.a.createElement("p",null,"Showing releases 1 to ",this.state.tableData.length," of ",this.state.numberOfReleases):u.a.createElement("p",null,"No upcoming releases to show")))),u.a.createElement("div",{className:"modal__footer grid__col-12"},u.a.createElement("div",null,u.a.createElement("button",{className:"btn btn--positive margin-right--1",type:"button",disabled:this.shouldSubmitBeDisabled(),onClick:this.handleSubmit},"Submit"),u.a.createElement("button",{className:"btn",type:"button",onClick:this.props.onClose},"Close"))))}}]),t}(l.Component);_.propTypes=w,t.a=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(14),u=(n.n(l),n(3)),c=n.n(u),p=n(37),d=n(10),f=n(20),h=n(90),m=n(191),g=n(28),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y={dispatch:c.a.func.isRequired,location:c.a.shape({pathname:c.a.string.isRequired}).isRequired},b=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.handleBackButton=function(){var e=f.a.resolve("../");i.props.dispatch(n.i(l.push)(e))},i.handleSearchInput=function(e){var t=e.target.value.toLowerCase(),n=i.state.datasets.filter(function(e){return-1!==e.title.toLowerCase().search(t)});i.setState({filteredDatasets:n,searchTerm:t})},i.mapDatasetsToState=function(e){try{return e.map(function(e){return e=e.current||e.next||e,{title:e.title,id:e.id,url:i.props.location.pathname+"/"+e.id}})}catch(e){h.a.add(h.b.unexpectedRuntimeError,{message:"Error mapping datasets to to state. \n "+e});var t={type:"warning",message:"An unexpected error occurred when trying to get datasets, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};d.a.add(t),console.error("Error mapping datasets to state:\n",e)}},i.state={isFetchingDatasets:!1,datasets:[],filteredDatasets:[],searchTerm:""},i}return i(t,e),v(t,[{key:"componentWillMount",value:function(){return this.getAllDatasets()}},{key:"getAllDatasets",value:function(){var e=this;return this.setState({isFetchingDatasets:!0}),p.a.getAll().then(function(t){e.setState({isFetchingDatasets:!1,datasets:e.mapDatasetsToState(t.items)})}).catch(function(t){switch(t.status){case 403:var n={type:"neutral",message:"You do not permission to view submitted datasets.",isDismissable:!0};d.a.add(n);break;case 404:var r={type:"warning",message:"No API route available to get all submitted datasets",isDismissable:!0};d.a.add(r);break;case"RESPONSE_ERR":var a={type:"warning",message:"An error's occurred whilst trying to get the submitted datasets.",isDismissable:!0};d.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};d.a.add(i);break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to get the submitted datasets.",isDismissable:!0};d.a.add(o)}console.error("Error getting datasets:\n",t),e.setState({isFetchingDatasets:!1})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid grid--justify-center"},s.a.createElement("div",{className:"grid__col-9"},s.a.createElement("div",{className:"margin-top--2"},"◀ ",s.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),s.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Select a dataset"),s.a.createElement(g.a,{id:"search-datasets",placeholder:"Search by name or ID",onChange:this.handleSearchInput}),s.a.createElement(m.a,{rows:this.state.filteredDatasets.length?this.state.filteredDatasets:this.state.datasets,showLoadingState:this.state.isFetchingDatasets})))}}]),t}(o.Component);b.propTypes=y,t.a=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(14),u=(n.n(l),n(3)),c=n.n(u),p=n(37),d=n(119),f=n(10),h=n(20),m=n(82),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v={params:c.a.shape({datasetID:c.a.string.isRequired}),dispatch:c.a.func.isRequired,location:c.a.shape({pathname:c.a.string.isRequired})},y=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.componentWillMount=function(){var e=i.props.params.datasetID;i.getListOfEditions(),i.getDataset(e)},i.getDataset=function(e){return i.setState({isFetchingDataset:!0}),p.a.get(e).then(function(e){return i.setState({isFetchingDataset:!1,dataset:i.mapDatasetToState(e)}),i.mapDatasetToState(e)}).catch(function(t){switch(t.status){case 404:var n={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};f.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};f.a.add(r);break;case"FETCH_ERR":var a={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};f.a.add(a);break;case"UNEXPECTED_ERR":var o={type:"warning",message:"An unexpected error has occurred whilst trying to get a list of datasets.",isDismissable:!0};f.a.add(o);break;default:var s={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};f.a.add(s)}console.error("Error getting dataset ("+e+"):\n",t),i.setState({isFetchingDataset:!1})})},i.mapDatasetToState=function(e){try{return{title:(e.current||e.next||e).title}}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};f.a.add(t),console.error("Error mapping dataset details to state:\n",e)}},i.getListOfEditions=function(){return i.setState({isFetchingEditions:!0}),d.a.getAll().then(function(e){return i.setState({isFetchingEditions:!1,editions:i.mapEditionsToState(e.items)}),i.mapEditionsToState(e.items)}).catch(function(e){switch(e.status){case 404:var t={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};f.a.add(t);break;case"RESPONSE_ERR":var n={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};f.a.add(n);break;case"FETCH_ERR":var r={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};f.a.add(r);break;default:var a={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};f.a.add(a)}console.error("Error getting editions from recipe API:\n",e),i.setState({isFetchingEditions:!1})})},i.mapEditionsToState=function(e){try{var t=e.find(function(e){return e.output_instances[0].dataset_id===i.props.params.datasetID});return i.filterEditionsListFromRecipe(t)}catch(e){var n={type:"warning",message:"An unexpected error occurred when trying to get editions. Try refreshing the page",isDismissable:!0};f.a.add(n),console.error("Error getting dataset details to state:\n",e)}},i.filterEditionsListFromRecipe=function(e){try{return e.output_instances[0].editions.map(function(e){return{id:e,name:e}})}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get editions. Try refreshing the page",isDismissable:!0};f.a.add(t),console.error("Error getting dataset details to state:\n",e)}},i.handleEditionSelection=function(e){var t=e.target.value;i.setState({selectedEdition:t})},i.handleCreateClick=function(){i.props.dispatch(n.i(l.push)(i.props.location.pathname+"/"+i.state.selectedEdition+"/instances"))},i.handleBackButton=function(){var e=h.a.resolve("../");i.props.dispatch(n.i(l.push)(e))},i.state={isFetchingDataset:!1,dataset:{},isFetchingEditions:!1,editions:[],selectedEdition:null},i}return i(t,e),g(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"grid grid--justify-center"},s.a.createElement("div",{className:"grid__col-9"},s.a.createElement("div",{className:"margin-top--2"},"◀ ",s.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),s.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Create new edition"),s.a.createElement("p",{className:"margin-bottom--1 font-size--18"},s.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),s.a.createElement("div",{className:"grid__col-3"},s.a.createElement(m.a,{id:"editions",label:"Select an edition",contents:this.state.editions?this.state.editions:[],defaultOption:this.state.editions?"Select an option":"Loading editions...",selectedOption:this.state.selectedOption,onChange:this.handleEditionSelection}),s.a.createElement("button",{type:"button",className:"btn btn--positive",disabled:!this.state.selectedEdition,onClick:this.handleCreateClick},"Create edition"))))}}]),t}(o.Component);y.propTypes=v,t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(14),u=(n.n(l),n(3)),c=n.n(u),p=n(37),d=n(10),f=n(36),h=n(20),m=n(131),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v={params:c.a.shape({datasetID:c.a.string.isRequired,editionID:c.a.string.isRequired}),dispatch:c.a.func.isRequired},y=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.getDataset=function(e){return i.setState({isFetchingDataset:!0}),p.a.get(e).then(function(e){return i.setState({isFetchingDataset:!1,dataset:i.mapDatasetToState(e)}),i.mapDatasetToState(e)}).catch(function(t){switch(t.status){case 404:var n={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};d.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};d.a.add(r);break;case"FETCH_ERR":var a={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};d.a.add(a);break;case"UNEXPECTED_ERR":var o={type:"warning",message:"An unexpected error has occurred whilst trying to get a list of datasets.",isDismissable:!0};d.a.add(o);break;default:var s={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};d.a.add(s)}console.error("Error getting dataset ("+e+"):\n",t),i.setState({isFetchingDataset:!1})})},i.mapDatasetToState=function(e){try{return{title:(e.current||e.next||e).title}}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};d.a.add(t),console.error("Error getting dataset details to state:\n",e)}},i.getEdition=function(e,t){return i.setState({isFetchingEdition:!0}),p.a.getEdition(e,t).then(function(e){return i.setState({isFetchingEdition:!1,edition:i.mapDatasetEditionToState(e)}),i.mapDatasetEditionToState(e)}).catch(function(e){console.error(e),i.setState({isFetchingEdition:!1})})},i.mapDatasetEditionToState=function(e){try{return{title:(e.current||e.next||e).edition}}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get edition details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};d.a.add(t),console.error("Error getting mapping edition to state:\n",e)}},i.getInstances=function(e){return i.setState({isFetchingInstances:!0}),p.a.getCompletedInstancesForDataset(e).then(function(e){i.setState({isFetchingInstances:!1,instances:i.mapInstancesToState(e.items)})}).catch(function(e){console.error(e),i.setState({isFetchingEdition:!1})})},i.mapInstancesToState=function(e){try{return e.map(function(t,n){var r=n+1===e.length?"(latest)":null;return{id:t.id,value:t.id,label:"New data "+(r||""),subLabel:"Upload date: "+f.a.format(t.last_updated,"h:MMtt dd mmmm yyyy")}}).reverse()}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get instances. Try refreshing the page",isDismissable:!0};d.a.add(t),console.error("Error getting mapping instances to state:\n",e)}},i.handleSelectedInstanceChange=function(e){var t=e.value;i.setState({selectedInstance:t})},i.handleCreateClick=function(){i.setState({isSaving:!0}),p.a.confirmEditionAndCreateVersion(i.state.selectedInstance,i.props.params.editionID).then(function(e){i.setState({isSaving:!1});var t=e.version,r=h.a.resolve("../")+"/versions/"+t;i.props.dispatch(n.i(l.push)(r))}).catch(function(e){switch(console.error("Error create version:\n",e),i.setState({isSaving:!1}),e.status){case 401:break;case 400:var t={type:"warning",message:"Unable to create version due to invalid values being submitted. Please check your updates for any issues and try again",isDismissable:!0,autoDismiss:1e4};d.a.add(t);break;case 403:var n={type:"neutral",message:"Unable to create version because you do not have the correct permissions",isDismissable:!0,autoDismiss:1e4};d.a.add(n);break;case 404:var r={type:"warning",message:"Unable to create version because this version couldn't be found",isDismissable:!0,autoDismiss:1e4};d.a.add(r);break;case"FETCH_ERR":var a={type:"warning",message:"Unable to create version due to a network issue. Please check your internet connection and try again",isDismissable:!0,autoDismiss:1e4};d.a.add(a);break;default:var o={type:"warning",message:"Unable to create version due to an unexpected error",isDismissable:!0,autoDismiss:1e4};d.a.add(o)}})},i.handleBackButton=function(){i.props.dispatch(n.i(l.goBack)())},i.state={isFetchingDataset:!1,dataset:{},isFetchingEdition:!1,edition:{},isFetchingInstances:!1,instances:[],selectedInstance:null,isSaving:!1},i}return i(t,e),g(t,[{key:"componentWillMount",value:function(){var e=this.props.params.datasetID,t=this.props.params.editionID;this.getDataset(e),this.getEdition(e,t),this.getInstances(e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid grid--justify-center"},s.a.createElement("div",{className:"grid__col-9"},s.a.createElement("div",{className:"margin-top--2"},"◀ ",s.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),s.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Attach new data"),s.a.createElement("p",{className:"margin-bottom--1 font-size--18"},s.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),s.a.createElement("p",{className:"margin-bottom--1 font-size--18"},s.a.createElement("span",{className:"font-weight--600"},"Edition"),": ",this.state.edition.title?this.state.edition.title:"loading..."),this.state.instances.length?s.a.createElement(m.a,{groupName:"create-versions-instances",radioData:this.state.instances,selectedValue:this.state.selectedInstance,onChange:this.handleSelectedInstanceChange,legend:"New data",disabled:this.state.isSaving||this.state.isFetchingInstances}):s.a.createElement("p",{className:"margin-bottom--1"},"No instances avialable for this edition"),s.a.createElement("div",{className:"grid__col-2"},s.a.createElement("button",{type:"button",className:"btn btn--positive",disabled:!this.state.selectedInstance,onClick:this.handleCreateClick},"Create version"))))}}]),t}(o.Component);y.propTypes=v,t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{userEmail:e.state.user.email}}var s=n(4),l=n.n(s),u=n(3),c=n.n(u),p=n(30),d=n(16),f=n(36),h=n(28),m=n(131),g=n(655),v=n(686),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b={metadata:c.a.shape({title:c.a.string,summary:c.a.string,keywords:c.a.string,nationalStatistic:c.a.bool,licence:c.a.string,contactName:c.a.string,contactEmail:c.a.string,contactTelephone:c.a.string,relatedDatasets:c.a.array,relatedPublications:c.a.array,relatedMethodologies:c.a.array,releaseFrequency:c.a.string,edition:c.a.string,version:c.a.number,releaseDate:c.a.shape({value:c.a.string,error:c.a.string}),nextReleaseDate:c.a.string,unitOfMeasure:c.a.string,notices:c.a.array,dimensions:c.a.array,qmi:c.a.string,latestChanges:c.a.array,usageNotes:c.a.array}).isRequired,handleBackButton:c.a.func.isRequired,handleDateInputChange:c.a.func.isRequired,handleStringInputChange:c.a.func.isRequired,handleDimensionNameChange:c.a.func.isRequired,handleDimensionDescriptionChange:c.a.func.isRequired,handleNationalStaticticChange:c.a.func.isRequired,handleSimpleEditableListAdd:c.a.func.isRequired,handleSimpleEditableListDelete:c.a.func.isRequired,handleSimpleEditableListEdit:c.a.func.isRequired,handleSave:c.a.func.isRequired,versionIsPublished:c.a.bool.isRequired,datasetCollectionState:c.a.string,userEmail:c.a.string.isRequired,lastEditedBy:c.a.string.isRequired,handleSubmitForReviewClick:c.a.func.isRequired,handleMarkAsReviewedClick:c.a.func.isRequired,disableForm:c.a.bool.isRequired,isSaving:c.a.bool},w=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),y(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"grid__col-6 margin-bottom--4"},l.a.createElement("div",{className:"margin-top--2"},"◀ ",l.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.props.handleBackButton},"Back")),l.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Edit metadata"),l.a.createElement("p",{className:"margin-bottom--1 font-size--18"},l.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.props.metadata.title?this.props.metadata.title:"loading..."),l.a.createElement("p",{className:"margin-bottom--1 font-size--18"},l.a.createElement("span",{className:"font-weight--600"},"Edition"),": ",this.props.metadata.edition?this.props.metadata.edition:"loading..."),l.a.createElement("p",{className:"margin-bottom--1 font-size--18"},l.a.createElement("span",{className:"font-weight--600"},"Version"),": ",this.props.metadata.version?this.props.metadata.version:"loading..."),l.a.createElement("h2",null,"Title"),l.a.createElement(h.a,{id:"title",value:this.props.metadata.title,onChange:this.props.handleStringInputChange,disabled:this.props.disableForm}),l.a.createElement("h2",null,"Release dates"),l.a.createElement(h.a,{id:"release-date",name:"releaseDate",label:"Release date",type:"date",onChange:this.props.handleDateInputChange,value:this.props.metadata.releaseDate.value&&f.a.format(this.props.metadata.releaseDate.value,"yyyy-mm-dd"),disabled:this.props.disableForm||this.props.versionIsPublished,error:this.props.metadata.releaseDate.error}),l.a.createElement(h.a,{id:"next-release",name:"nextReleaseDate",label:"Next release date",onChange:this.props.handleStringInputChange,value:this.props.metadata.nextReleaseDate,disabled:this.props.disableForm}),l.a.createElement(h.a,{id:"release-frequency",name:"releaseFrequency",label:"Release frequency",onChange:this.props.handleStringInputChange,value:this.props.metadata.releaseFrequency,disabled:this.props.disableForm}),l.a.createElement("h2",null,"Notices"),l.a.createElement("p",{className:"margin-bottom--1"},"Add an alert, correction, change summary or usage note."),l.a.createElement(g.a,{addText:"Add a new notice",fields:this.props.metadata.notices,editingStateFieldName:"notices",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm}),l.a.createElement("h2",{className:"margin-top--1"},"About"),l.a.createElement(h.a,{id:"summary",label:"Summary",type:"textarea",value:this.props.metadata.summary,onChange:this.props.handleStringInputChange,disabled:this.props.disableForm}),l.a.createElement(h.a,{id:"unit-of-measure",name:"unitOfMeasure",label:"Unit of measure",type:"input",value:this.props.metadata.unitOfMeasure,onChange:this.props.handleStringInputChange,disabled:this.props.disableForm}),l.a.createElement("h2",null,"Dimensions"),this.props.metadata.dimensions.map(function(t){return l.a.createElement("div",{key:"dimension-"+t.id},l.a.createElement(h.a,{id:"dimension-title-"+t.id,label:"Title",value:t.label?t.label:t.name,onChange:e.props.handleDimensionNameChange,disabled:e.props.disableForm||e.props.versionIsPublished}),l.a.createElement(h.a,{id:"dimension-description-"+t.id,label:"Description",type:"textarea",value:t.description,onChange:e.props.handleDimensionDescriptionChange,disabled:e.props.disableForm||e.props.versionIsPublished}))}),l.a.createElement("h2",null,"Meta"),l.a.createElement(h.a,{id:"keywords",label:"Keywords",value:this.props.metadata.keywords,onChange:this.props.handleStringInputChange,disabled:this.props.disableForm}),l.a.createElement(h.a,{id:"licence",label:"Licence",onChange:this.props.handleStringInputChange,value:this.props.metadata.licence,disabled:this.props.disableForm}),l.a.createElement("h3",null,"Usage notes"),l.a.createElement("div",{className:"margin-bottom--1"},l.a.createElement(g.a,{addText:"Add a usage note",fields:this.props.metadata.usageNotes,editingStateFieldName:"usageNotes",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm})),l.a.createElement(m.a,{groupName:"national-statistic",radioData:[{id:"national-statistic-yes",value:"true",label:"Yes"},{id:"national-statistic-no",value:"false",label:"No"}],selectedValue:this.props.metadata.nationalStatistic?this.props.metadata.nationalStatistic.toString():"false",onChange:this.props.handleNationalStaticticChange,inline:!0,legend:"National Statistic",disabled:this.props.disableForm}),l.a.createElement("h2",null,"Contact details"),l.a.createElement(h.a,{id:"contact-name",name:"contactName",label:"Contact name",onChange:this.props.handleStringInputChange,value:this.props.metadata.contactName,disabled:this.props.disableForm}),l.a.createElement(h.a,{id:"contact-email",name:"contactEmail",label:"Contact email",onChange:this.props.handleStringInputChange,value:this.props.metadata.contactEmail,disabled:this.props.disableForm}),l.a.createElement(h.a,{id:"contact-telephone",name:"contactTelephone",label:"Contact telephone",onChange:this.props.handleStringInputChange,value:this.props.metadata.contactTelephone,disabled:this.props.disableForm}),l.a.createElement("h2",null,"Related links"),l.a.createElement("h3",null,"Datasts"),l.a.createElement(g.a,{addText:"Add a dataset",fields:this.props.metadata.relatedDatasets,editingStateFieldName:"relatedDatasets",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm}),l.a.createElement("h3",{className:"margin-top--1"},"Bulletins, articles and compendia"),l.a.createElement(g.a,{addText:"Add a publication",fields:this.props.metadata.relatedPublications,editingStateFieldName:"relatedPublications",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm}),l.a.createElement("h3",{className:"margin-top--1"},"Quality and methodology information"),l.a.createElement(h.a,{id:"qmi",label:"QMI URL",onChange:this.props.handleStringInputChange,value:this.props.metadata.qmi,disabled:this.props.disableForm}),l.a.createElement("h3",null,"Methodologies"),l.a.createElement(g.a,{addText:"Add a methodology",fields:this.props.metadata.relatedMethodologies,editingStateFieldName:"relatedMethodologies",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm}),l.a.createElement("h2",{className:"margin-top--1"},"What's changed"),l.a.createElement(g.a,{addText:"Add a change",fields:this.props.metadata.latestChanges,editingStateFieldName:"latestChanges",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm||this.props.versionIsPublished}),l.a.createElement("div",{className:"margin-top--2"},l.a.createElement("button",{type:"button",className:"btn btn--primary margin-right--1",onClick:this.props.handleSave,disabled:this.props.disableForm},"Save"),l.a.createElement(v.a,{disabled:this.props.disableForm,reviewState:this.props.datasetCollectionState,userEmail:this.props.userEmail,lastEditedBy:this.props.lastEditedBy,onSubmit:this.props.handleSubmitForReviewClick,onApprove:this.props.handleMarkAsReviewedClick}),l.a.createElement(p.g,{to:window.location.pathname+"/preview"},"Preview"),this.props.isSaving&&l.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"})))}}]),t}(s.Component);w.propTypes=b,t.a=n.i(d.connect)(o)(w)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(4),c=n.n(u),p=n(14),d=(n.n(p),n(3)),f=n.n(d),h=n(36),m=n(37),g=n(52),v=n(10),y=n(20),b=n(90),w=n(684),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C={location:f.a.shape({pathname:f.a.string.isRequired}),params:f.a.shape({collectionID:f.a.string.isRequired,datasetID:f.a.string.isRequired,editionID:f.a.string.isRequired,versionID:f.a.string.isRequired,metadataField:f.a.string,metadataItemID:f.a.string}),children:f.a.element,dispatch:f.a.func.isRequired},k=function(e){function t(e){var l=this;o(this,t);var u=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.getDataset=function(e){u.setState({isGettingDatasetMetadata:!0}),m.a.get(e).then(function(e){var t=u.mapDatasetToState(e);"associated"===t.state&&t.collection!==u.props.params.collectionID&&(u.setState({disableScreen:!0}),v.a.add({type:"neutral",message:"This dataset is in another collection.",isDismissable:!0})),t.collection&&u.getAndUpdateReviewStateData(),u.setState({metadata:t.metadata,isGettingDatasetMetadata:!1,datasetIsInCollection:t.collection,datasetState:t.state})})},u.mapDatasetToState=function(e){try{var t=e.next||e.current||e,n={title:t.title,summary:t.description,keywords:t.keywords?t.keywords.join().replace(",",", "):"",nationalStatistic:t.national_statistic,licence:t.license||"",relatedDatasets:t.related_datasets?u.mapRelatedContentToState(t.related_datasets):[],relatedPublications:t.publications?u.mapRelatedContentToState(t.publications):[],relatedMethodologies:t.methodologies?u.mapRelatedContentToState(t.methodologies):[],releaseFrequency:t.release_frequency||"",unitOfMeasure:t.unit_of_measure||"",nextReleaseDate:t.next_release,qmi:t.qmi?t.qmi.href:""};return t.contacts&&(n.contactName=t.contacts[0].name?t.contacts[0].name:"",n.contactEmail=t.contacts[0].email?t.contacts[0].email:"",n.contactTelephone=t.contacts[0].telephone?t.contacts[0].telephone:""),{metadata:E({},u.state.metadata,n),collection:t.collection_id||!1,state:t.state}}catch(t){b.a.add(b.b.unexpectedRuntimeError,{message:"Error mapping dataset '"+e.id+"' to to state. \n "+t}),v.a.add({type:"warning",message:"An unexpected error occurred when trying to get dataset '"+e.id+"'. Try refreshing the page",isDismissable:!0}),console.error("Error mapping dataset '"+e.id+"' to to state. \n "+t)}},u.mapRelatedContentToState=function(e){try{return e.map(function(e,t){return{id:t,description:e.description,href:e.href,title:e.title,simpleListHeading:e.title,simpleListDescription:e.description}})}catch(e){throw b.a.add(b.b.unexpectedRuntimeError,{message:"Error mapping related links to state \n "+e}),new Error("Error mapping related links to state \n "+e)}},u.getVersion=function(e,t,n){u.setState({isGettingVersionMetadata:!0}),m.a.getVersion(e,t,n).then(function(e){var t=u.mapVersionToState(e);u.setState({metadata:t.metadata,isGettingVersionMetadata:!1,versionIsInCollection:t.collection,instanceID:t.instanceID,versionIsPublished:t.versionIsPublished})})},u.mapVersionToState=function(e){try{var t={edition:e.edition,version:e.version,releaseDate:{value:e.release_date||"",error:""},notices:e.alerts?u.mapNoticesToState(e.alerts):[],dimensions:e.dimensions||[],usageNotes:e.usage_notes?u.mapUsageNotesToState(e.usage_notes):[],latestChanges:e.latest_changes?u.mapLatestChangesToState(e.latest_changes):[]};return{metadata:E({},u.state.metadata,t),collection:e.collection_id||!1,instanceID:e.id,versionIsPublished:"published"===e.state}}catch(t){b.a.add(b.b.unexpectedRuntimeError,{message:"Error mapping version '"+(e.version||e.id)+"' to to state. \n "+t}),v.a.add({type:"warning",message:"An unexpected error occurred when trying to get version '"+(e.version||e.id)+"'. Try refreshing the page",isDismissable:!0}),console.error("Error mapping dataset '"+(e.version||e.id)+"' to to state. \n "+t)}},u.mapNoticesToState=function(e){try{return e.map(function(e,t){return{id:t,type:e.type,date:e.date,description:e.description,simpleListHeading:e.type+" ("+h.a.format(e.date,"dd mmmm yyyy")+")",simpleListDescription:e.description}})}catch(e){throw b.a.add(b.b.unexpectedRuntimeError,{message:"Error mapping notices to state \n "+e}),new Error("Error mapping notices to state \n "+e)}},u.mapUsageNotesToState=function(e){try{return e.map(function(e,t){return{id:t,title:e.title,note:e.note,simpleListHeading:e.title,simpleListDescription:e.note}})}catch(e){throw b.a.add(b.b.unexpectedRuntimeError,{message:"Error mapping usage notes to state \n "+e}),new Error("Error mapping usage notes to state \n "+e)}},u.mapLatestChangesToState=function(e){try{return e.map(function(e,t){return{id:t,title:e.title,description:e.description,simpleListHeading:e.title,simpleListDescription:e.description}})}catch(e){throw b.a.add(b.b.unexpectedRuntimeError,{message:"Error mapping latest changes to state \n "+e}),new Error("Error mapping latest changes to state \n "+e)}},u.getAndUpdateReviewStateData=function(){u.setState({isGettingCollectionData:!0}),g.a.get(u.props.params.collectionID).then(function(e){if(e.datasets.length){var t=u.mapDatasetCollectionStateToState(e.datasets);u.setState({isGettingCollectionData:!1,lastEditedBy:t.lastEditedBy,datasetCollectionState:t.reviewState})}u.setState({isGettingCollectionData:!1})})},u.mapDatasetCollectionStateToState=function(e){try{var t=e.find(function(e){return e.id===u.props.params.datasetID});return{lastEditedBy:t.lastEditedBy,reviewState:t.state.charAt(0).toLowerCase()+t.state.slice(1)}}catch(e){b.a.add(b.b.unexpectedRuntimeError,{message:"Error mapping version collection state to to state. \n "+e}),v.a.add({type:"warning",message:"An unexpected error occurred when trying to get information about this versions collection state'. Try refreshing the page",isDismissable:!0}),console.error("Error mapping version collection state to to state. \n "+e)}},u.handleStringInputChange=function(e){var t=e.target.name,n=e.target.value,r=E({},u.state.metadata,i({},t,n));u.setState({metadata:r,datasetMetadataHasChanges:u.datasetMetadataHasChanges(t),versionMetadataHasChanges:u.versionMetadataHasChanges(t)})},u.handleDateInputChange=function(e){var t=e.target.name,n=e.target.value,r=new Date(n).toISOString(),a=E({},u.state.metadata,i({},t,{value:r,error:""}));u.setState({metadata:a,datasetMetadataHasChanges:u.datasetMetadataHasChanges(t),versionMetadataHasChanges:u.versionMetadataHasChanges(t)})},u.handleNationalStaticticChange=function(e){var t="true"===e.value,n=E({},u.state.metadata,{nationalStatistic:t});u.setState({metadata:n,datasetMetadataHasChanges:!0})},u.handleDimensionNameChange=function(e){var t=e.target.value,n=e.target.name.substring(16),r=u.state.metadata.dimensions.map(function(e){return e.id===n&&(e.label=t),e}),a=E({},u.state.metadata,{dimensions:r});u.setState({metadata:a,dimensionsUpdated:!0})},u.handleDimensionDescriptionChange=function(e){var t=e.target.value,n=e.target.name.substring(22),r=u.state.metadata.dimensions.map(function(e){return e.id===n&&(e.description=t),e}),a=E({},u.state.metadata,{dimensions:r});u.setState({metadata:a,dimensionsUpdated:!0})},u.handleSimpleEditableListAdd=function(e){u.props.dispatch(n.i(p.push)(u.props.location.pathname+"/edit/"+e+"/"+u.state.metadata[e].length))},u.handleSimpleEditableListEdit=function(e,t){u.props.dispatch(n.i(p.push)(u.props.location.pathname+"/edit/"+t+"/"+e.id))},u.handleSimpleEditableListDelete=function(e,t){var n=u.state.metadata[t].filter(function(t){return t.id!==e.id}),r=E({},u.state.metadata,i({},t,n));u.setState({metadata:r})},u.handleSimpleEditableListEditSuccess=function(e,t){var r=void 0;r=null===e.id?u.addMetadataField(e,t):u.updateMetadataField(e,t),u.setState({metadata:r,datasetMetadataHasChanges:u.datasetMetadataHasChanges(t),versionMetadataHasChanges:u.versionMetadataHasChanges(t)}),u.props.dispatch(n.i(p.push)(y.a.resolve("../../../")))},u.addMetadataField=function(e,t){var n=[].concat(a(u.state.metadata[t]));e.id=n.length,n.push(e);var r=u.mapMetadataFieldToState(n,t);return E({},u.state.metadata,i({},t,r))},u.updateMetadataField=function(e,t){var n=u.state.metadata[t].map(function(t){return t.id===e.id?e:t}),r=u.mapMetadataFieldToState(n,t);return E({},u.state.metadata,i({},t,r))},u.mapMetadataFieldToState=function(e,t){switch(t){case"notices":return u.mapNoticesToState(e);case"relatedDatasets":case"relatedPublications":case"relatedMethodologies":return u.mapRelatedContentToState(e);case"usageNotes":return u.mapUsageNotesToState(e);case"latestChanges":return u.mapLatestChangesToState(e);default:b.a.add(b.b.unexpectedRuntimeError,{message:"Error mapping metadata field to state. Unknown field name '"+t+"'"}),v.a.add({type:"warning",message:"An when adding metadata item, changes or additions won't be save. Refresh the page and try again",isDismissable:!0}),console.error("Error mapping metadata field to state. Unknown field name '"+t+"'")}},u.handleSimpleEditableListEditCancel=function(){u.props.dispatch(n.i(p.push)(y.a.resolve("../../../")))},u.datasetMetadataHasChanges=function(e){return"title"===e||"summary"===e||"keywords"===e||"nationalStatistic"===e||"licence"===e||"contactName"===e||"contactEmail"===e||"contactTelephone"===e||"relatedDatasets"===e||"relatedPublication"===e||"relatedMethodologies"===e||"releaseFrequency"===e||"unitOfMeasure"===e||"qmi"===e||"nextReleaseDate"===e},u.versionMetadataHasChanges=function(e){return"releaseDate"===e||"notices"===e||"usageNotes"===e||"latestChanges"===e},u.handleBackButton=function(){var e=y.a.resolve("../../");u.props.dispatch(n.i(p.push)(e))},u.handleSave=function(){var e=r(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,c,p,d,f,h,m,g,y,b,w,_,C,k,S,D,O,T,R,P,x,N,I;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.state.metadata.releaseDate.value){e.next=7;break}return r={value:"",error:"You must set a release date"},console.log(r),a=E({},u.state.metadata,{releaseDate:r}),u.setState({metadata:a}),window.scrollTo(0,0),e.abrupt("return");case 7:if(u.setState({isSaving:!0}),i=u.props.params.collectionID,o=u.props.params.datasetID,s=u.props.params.editionID,c=u.props.params.versionID,p=u.state.instanceID,d=u.state.datasetIsInCollection,f=u.state.versionIsInCollection,h=u.state.dimensionsUpdated,m=u.state.versionIsPublished,g=u.state.datasetState,y=!(t&&n||d&&"associated"===g||d===i),b=!(t&&n||f),w=u.state.datasetMetadataHasChanges,_=u.state.versionMetadataHasChanges,C=u.mapDatasetToPutBody(),k=u.mapVersionToPutBody(),S=!1,!w){e.next=29;break}return e.next=28,u.saveDatasetChanges(o,C);case 28:S=e.sent;case 29:if(!S){e.next=33;break}return u.setState({isSaving:!1}),u.handleOnSaveError("There was a problem saving your changes to this dataset"),e.abrupt("return");case 33:if(D=!1,!_){e.next=38;break}return e.next=37,u.saveVersionChanges(o,s,c,k);case 37:D=e.sent;case 38:if(!D){e.next=42;break}return u.setState({isSaving:!1}),u.handleOnSaveError("There was a problem saving your changes to this version"),e.abrupt("return");case 42:if(!h){e.next=50;break}return e.next=45,u.saveDimensionChanges(p,u.state.metadata.dimensions);case 45:if(!(O=e.sent)){e.next=50;break}return u.setState({isSaving:!1}),u.handleOnSaveError("There was a problem saving your changes to this dataset"),e.abrupt("return");case 50:if(T=!1,!y){e.next=56;break}return e.next=54,u.addDatasetToCollection(i,o);case 54:T=e.sent,u.setState({datasetIsInCollection:i,datasetCollectionState:"inProgress"});case 56:if(!T){e.next=60;break}return u.setState({isSaving:!1}),u.handleOnSaveError("There was a problem adding this dataset to your collection"),e.abrupt("return");case 60:if(R=!1,!b){e.next=66;break}return e.next=64,u.addVersionToCollection(i,o,s,c);case 64:R=e.sent,u.setState({versionIsInCollection:i});case 66:if(!R){e.next=70;break}return u.setState({isSaving:!1}),u.handleOnSaveError("There was a problem adding this version to your collection"),e.abrupt("return");case 70:if(!t){e.next=83;break}return e.next=73,u.submitDatasetForReview(i,o);case 73:if(P=e.sent,x=!1,m){e.next=79;break}return e.next=78,u.submitVersionForReview(i,o,s,c);case 78:x=e.sent;case 79:if(!P&&!x){e.next=83;break}return u.setState({isSaving:!1}),u.handleOnSaveError("There was a problem saving your changes to this dataset"),e.abrupt("return");case 83:if(!n){e.next=96;break}return e.next=86,u.markDatasetAsReviewed(i,o);case 86:if(N=e.sent,I=!1,m){e.next=92;break}return e.next=91,u.markVersionAsReviewed(i,o,s,c);case 91:I=e.sent;case 92:if(!N&&!I){e.next=96;break}return u.setState({isSaving:!1}),u.handleOnSaveError("There was a problem saving your changes to this dataset"),e.abrupt("return");case 96:u.setState({isSaving:!1}),v.a.add({type:"positive",message:u.state.metadata.title+" saved!",isDismissable:!0});case 98:case"end":return e.stop()}},e,l)}));return function(t,n){return e.apply(this,arguments)}}(),u.handleSaveClick=function(){u.handleSave(!1,!1)},u.handleSubmitForReviewClick=function(){u.handleSave(!0,!1)},u.handleMarkAsReviewedClick=function(){u.handleSave(!1,!0)},u.handleOnSaveError=function(e){v.a.add({type:"warning",message:e+". You can try again by pressing save.",isDismissable:!0})},u.mapDatasetToPutBody=function(){return{id:u.props.params.datasetID,title:u.state.metadata.title,description:u.state.metadata.summary,keywords:u.state.metadata.keywords?u.state.metadata.keywords.split(", "):[],national_statistic:u.state.metadata.nationalStatistic,license:u.state.metadata.licence,related_datasets:u.state.metadata.relatedDatasets,publications:u.state.metadata.relatedPublications,methodologies:u.state.metadata.relatedMethodologies,qmi:{href:u.state.metadata.qmi},release_frequency:u.state.metadata.releaseFrequency,contacts:[{name:u.state.metadata.contactName,email:u.state.metadata.contactEmail,telephone:u.state.metadata.contactTelephone}],next_release:u.state.metadata.nextReleaseDate,unit_of_measure:u.state.metadata.unitOfMeasure}},u.mapVersionToPutBody=function(){return{release_date:u.state.metadata.releaseDate.value,alerts:u.state.metadata.notices,usage_notes:u.state.metadata.usageNotes,lastest_changes:u.state.metadata.latestChanges}},u.addDatasetToCollection=function(e,t){return g.a.addDataset(e,t).catch(function(e){return b.a.add(b.b.requestFailed,{message:"Error adding dataset '"+t+"' to collection '"+u.props.params.collectionID+"'. Error: "+JSON.stringify(e)}),console.error("Error adding dataset '"+t+"' to collection '"+u.props.params.collectionID+"'",e),e})},u.addVersionToCollection=function(e,t,n,r){return g.a.addDatasetVersion(e,t,n,r).catch(function(e){return b.a.add(b.b.requestFailed,{message:"Error adding version '"+t+"/editions/"+n+"/versions/"+r+"' to collection '"+u.props.params.collectionID+"'. Error: "+JSON.stringify(e)}),console.error("Error adding version '"+t+"/editions/"+n+"/versions/"+r+"' to collection '"+u.props.params.collectionID+"'",e),e})},u.saveDatasetChanges=function(e,t){return m.a.updateDatasetMetadata(e,t).catch(function(t){return b.a.add(b.b.requestFailed,{message:"Error saving dataset '"+e+"' changes to dataset API. Error: "+JSON.stringify(t)}),console.error("Error saving dataset '"+e+"' changes to dataset API '"+u.props.params.collectionID+"'",t),t})},u.saveVersionChanges=function(e,t,n,r){return m.a.updateVersionMetadata(e,t,n,r).catch(function(r){return b.a.add(b.b.requestFailed,{message:"Error saving version '"+e+"/editions/"+t+"/versions/"+n+"' changes to dataset API. Error: "+JSON.stringify(r)}),console.error("Error saving version '"+e+"/editions/"+t+"/versions/"+n+"' changes to dataset API '"+u.props.params.collectionID+"'",r),r})},u.saveDimensionChanges=function(e,t){return m.a.updateInstanceDimensions(e,t).catch(function(t){return b.a.add(b.b.requestFailed,{message:"Error saving dimensions on instance '"+e+"' to dataset API. Error: "+JSON.stringify(t)}),console.error("Error saving dimensions on instance '"+e+"' to dataset API '"+u.props.params.collectionID+"'",t),t})},u.submitDatasetForReview=function(e,t){return g.a.setDatasetStatusToComplete(e,t).catch(function(e){return b.a.add(b.b.requestFailed,{message:"Error submitting dataset '"+t+"' for review. Error: "+JSON.stringify(e)}),console.error("Error submitting dataset '"+t+"' for review. Error:",e),e})},u.markDatasetAsReviewed=function(e,t){return g.a.setDatasetStatusToReviewed(e,t).catch(function(e){return b.a.add(b.b.requestFailed,{message:"Error marking dataset '"+t+"' as reviewed. Error: "+JSON.stringify(e)}),console.error("Error marking dataset '"+t+"' as reviewed. Error:",e),e})},u.submitVersionForReview=function(e,t,n,r){return g.a.setDatasetVersionStatusToComplete(e,t,n,r).catch(function(e){return b.a.add(b.b.requestFailed,{message:"Error marking dataset '"+t+"/editions/"+n+"/versions/"+r+"' as reviewed. Error: "+JSON.stringify(e)}),console.error("Error marking dataset '"+t+"/editions/"+n+"/versions/"+r+"' as reviewed. Error:",e),e})},u.markVersionAsReviewed=function(e,t,n,r){return g.a.setDatasetVersionStatusToReviewed(e,t,n,r).catch(function(e){return b.a.add(b.b.requestFailed,{message:"Error marking dataset '"+t+"/editions/"+n+"/versions/"+r+"' as reviewed. Error: "+JSON.stringify(e)}),console.error("Error marking dataset '"+t+"/editions/"+n+"/versions/"+r+"' as reviewed. Error:",e),e})},u.renderModal=function(){return c.a.Children.map(u.props.children,function(e){return c.a.cloneElement(e,{data:u.state.metadata[u.props.params.metadataField][u.props.params.metadataItemID],handleSuccessClick:u.handleSimpleEditableListEditSuccess,handleCancelClick:u.handleSimpleEditableListEditCancel})})},u.state={disableScreen:!1,isGettingDatasetMetadata:!1,isGettingVersionMetadata:!1,isGettingCollectionData:!1,isSaving:!1,datasetIsInCollection:!1,versionIsInCollection:!1,versionIsPublished:!1,datasetState:"",datasetCollectionState:"",lastEditedBy:"",instanceID:"",dimensionsUpdated:!1,datasetMetadataHasChanges:!1,versionMetadataHasChanges:!1,metadata:{title:"",summary:"",keywords:"",nationalStatistic:!1,licence:"",contactName:"",contactEmail:"",contactTelephone:"",relatedDatasets:[],relatedPublications:[],relatedMethodologies:[],releaseFrequency:"",edition:"",version:0,releaseDate:{value:"",error:""},nextReleaseDate:"",unitOfMeasure:"",notices:[],dimensions:[],usageNotes:[],latestChanges:[],qmi:""}},u}return l(t,e),_(t,[{key:"componentWillMount",value:function(){var e=this.props.params.datasetID,t=this.props.params.editionID,n=this.props.params.versionID;this.getDataset(e),this.getVersion(e,t,n)}},{key:"render",value:function(){return c.a.createElement("div",{className:"grid grid--justify-center"},c.a.createElement(w.a,{metadata:this.state.metadata,handleBackButton:this.handleBackButton,handleDateInputChange:this.handleDateInputChange,handleStringInputChange:this.handleStringInputChange,handleDimensionNameChange:this.handleDimensionNameChange,handleDimensionDescriptionChange:this.handleDimensionDescriptionChange,handleNationalStaticticChange:this.handleNationalStaticticChange,handleSimpleEditableListAdd:this.handleSimpleEditableListAdd,handleSimpleEditableListDelete:this.handleSimpleEditableListDelete,handleSimpleEditableListEdit:this.handleSimpleEditableListEdit,handleSave:this.handleSaveClick,isSaving:this.state.isSaving,versionIsPublished:this.state.versionIsPublished,lastEditedBy:this.state.lastEditedBy,disableForm:this.state.disableScreen||this.state.isSaving||this.state.isGettingDatasetMetadata||this.state.isGettingVersionMetadata||this.state.isGettingCollectionData,datasetCollectionState:this.state.datasetCollectionState,handleSubmitForReviewClick:this.handleSubmitForReviewClick,handleMarkAsReviewedClick:this.handleMarkAsReviewedClick}),this.props.params.metadataField&&this.props.params.metadataItemID?this.renderModal():null)}}]),t}(u.Component);k.propTypes=C,t.a=k},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={disabled:u.a.bool,reviewState:u.a.string,userEmail:u.a.string.isRequired,lastEditedBy:u.a.string,onSubmit:u.a.func,onApprove:u.a.func,notInCollectionYet:u.a.bool},d=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"renderSubmit",value:function(){return s.a.createElement("button",{id:"submit-for-review",type:"button",onClick:this.props.onSubmit,disabled:this.props.disabled,className:"btn btn--positive margin-right--1"},"Save and submit for review")}},{key:"renderApprove",value:function(){return s.a.createElement("button",{id:"mark-as-reviewed",type:"button",onClick:this.props.onApprove,disabled:this.props.disabled,className:"btn btn--positive margin-right--1"},"Save and submit for approval")}},{key:"render",value:function(){return"reviewed"===this.props.reviewState?s.a.createElement("span",null):this.props.notInCollectionYet||"inProgress"===this.props.reviewState?this.renderSubmit():this.props.userEmail===this.props.lastEditedBy&&"complete"===this.props.reviewState?this.renderSubmit():this.props.userEmail!==this.props.lastEditedBy&&"complete"===this.props.reviewState?this.renderApprove():s.a.createElement("span",null)}}]),t}(o.Component);d.propTypes=p,t.a=d},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(4),l=n.n(s),u=n(3),c=n.n(u),p=n(36),d=n(51),f=n(28),h=n(82),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g={params:c.a.shape({metadataField:c.a.string.isRequired}),data:c.a.shape({id:c.a.string,type:c.a.string,description:c.a.string,href:c.a.string,date:c.a.string,title:c.a.string}),handleSuccessClick:c.a.func.isRequired,handleCancelClick:c.a.func.isRequired},v=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSuccessClick=function(){n.props.handleSuccessClick(n.state,n.props.params.metadataField)},n.handleInputChange=function(e){var t=e.target.value,a=e.target.name;n.setState(r({},a,t))},n.handleSelectChange=function(e){var t=e.target.value,a=e.target.name;n.setState(r({},a,t))},n.handleDateInputChange=function(e){var t=e.target.name,a=e.target.value,i=new Date(a).toISOString();n.setState(r({},t,i))},n.renderModalBody=function(){switch(n.props.params.metadataField){case"notices":return l.a.createElement("div",null,l.a.createElement(h.a,{id:"type",selectedOption:n.state.type,label:"Type",contents:[{id:"alert",name:"Alert"},{id:"correction",name:"Correction"}],onChange:n.handleSelectChange}),l.a.createElement(f.a,{id:"date",type:"date",label:"Date",value:n.state.date&&p.a.format(n.state.date,"yyyy-mm-dd"),onChange:n.handleDateInputChange}),l.a.createElement(f.a,{id:"description",type:"textarea",label:"Description",value:n.state.description,onChange:n.handleInputChange}));case"relatedDatasets":case"relatedPublications":case"relatedMethodologies":return l.a.createElement("div",null,l.a.createElement(f.a,{id:"title",type:"input",label:"Title",value:n.state.title,onChange:n.handleInputChange}),l.a.createElement(f.a,{id:"href",type:"input",label:"URL",value:n.state.href,onChange:n.handleInputChange}),l.a.createElement(f.a,{id:"description",type:"textarea",label:"Description",value:n.state.description,onChange:n.handleInputChange}));case"usageNotes":case"latestChanges":return l.a.createElement("div",null,l.a.createElement(f.a,{id:"title",type:"input",label:"Title",value:n.state.title,onChange:n.handleInputChange}),l.a.createElement(f.a,{id:"description",type:"textarea",label:"Description",value:n.state.description,onChange:n.handleInputChange}));default:return l.a.createElement("p",null,"Something went wrong: unsupported field type")}},n.state={id:n.props.data?n.props.data.id:null,type:n.props.data?n.props.data.type:"",description:n.props.data?n.props.data.description:"",href:n.props.data?n.props.data.href:"",date:n.props.data?n.props.data.date:"",title:n.props.data?n.props.data.title:""},n}return o(t,e),m(t,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement("div",{className:"modal__header"},l.a.createElement("h2",null,"Add an item")),l.a.createElement("div",{className:"modal__body"},this.renderModalBody()),l.a.createElement("div",{className:"modal__footer"},l.a.createElement("button",{type:"button",className:"btn btn--primary btn--margin-right",onClick:this.handleSuccessClick},"Continue"),l.a.createElement("button",{type:"button",className:"btn",onClick:this.props.handleCancelClick},"Cancel")))}}]),t}(s.Component);t.a=v,v.propTypes=g},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(4),u=n.n(l),c=n(14),p=(n.n(c),n(16)),d=n(3),f=n.n(d),h=n(37),m=n(10),g=n(20),v=n(36),y=n(191),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w={params:f.a.shape({datasetID:f.a.string.isRequired}).isRequired,location:f.a.shape({pathname:f.a.string.isRequired}).isRequired,dispatch:f.a.func.isRequired},E=function(e){function t(e){var s=this;i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.createListOfEditions=function(){var e=a(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getEditions(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,e.next=8,l.mapVersionReleaseDatesToEditions(t,n);case 8:a=e.sent,l.setState({editions:[].concat(r(l.state.editions),r(a)),isFetchingEditionsAndVersions:!1});case 10:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}(),l.getDataset=function(e){return l.setState({isFetchingDataset:!0}),h.a.get(e).then(function(e){return l.setState({isFetchingDataset:!1}),l.mapDatasetToState(e)}).catch(function(t){switch(t.status){case 404:var n={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};m.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};m.a.add(r);break;case"FETCH_ERR":var a={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};m.a.add(a);break;default:var i={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};m.a.add(i)}console.error("Error getting dataset ("+e+"):\n",t),l.setState({isFetchingDataset:!1})})},l.mapDatasetToState=function(e){try{return{title:(e.current||e.next||e).title}}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};m.a.add(t),console.error("Error getting dataset details to state:\n",e)}},l.getEditions=function(e){return l.setState({isFetchingEditions:!0}),h.a.getEditions(e).then(function(e){return l.setState({isFetchingEditions:!1}),l.mapDatasetEditionsToView(e.items)}).catch(function(t){switch(t.status){case 404:var n={type:"warning",message:"No API route available for a list of editions.",isDismissable:!0};m.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get a list of editions.",isDismissable:!0};m.a.add(r);break;case"FETCH_ERR":var a={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};m.a.add(a);break;case"UNEXPECTED_ERR":var i={type:"warning",message:"An unexpected error has occurred whilst trying to get a list of editions.",isDismissable:!0};m.a.add(i);break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of editions.",isDismissable:!0};m.a.add(o)}console.error("Error getting dataset ("+e+"):\n",t),l.setState({isFetchingEditions:!1})})},l.mapDatasetEditionsToView=function(e){try{return e.map(function(e){var t=e.current||e.next||e;return{title:l.state.dataset.title,id:t.edition,url:l.props.location.pathname+"/editions/"+t.edition,details:["Edition: "+t.edition,"Release date: loading..."],latestVersion:t.links.latest_version.id}})}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get edition details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};m.a.add(t),console.error("Error getting mapping editions to state:\n",e)}},l.mapVersionReleaseDatesToEditions=function(){var e=a(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getLatestVersionForAllEditions(t,n).then(function(e){return e});case 2:if(r=e.sent){e.next=6;break}return a=n.map(function(e){return e.details[1]="Release date: error retreiving release date",e}),e.abrupt("return",a);case 6:return i=n.map(function(e){return r.find(function(t){t.edition===e.id&&(e.details[1]="Release date: "+v.a.format(t.release_date,"dd mmmm yyyy"))}),e}),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,s)}));return function(t,n){return e.apply(this,arguments)}}(),l.getLatestVersionForAllEditions=function(e,t){return h.a.getLatestVersionForEditions(e,t).then(function(e){return e}).catch(function(e){console.error("Error getting latest versions",e)})},l.handleBackButton=function(){var e=g.a.resolve("../");l.props.dispatch(n.i(c.push)(e))},l.state={isFetchingDataset:!1,dataset:{},isFetchingEditions:!1,editions:[{title:"Create new edition",id:"create-new-edition",url:l.props.location.pathname+"/editions"}],isFetchingEditionsAndVersions:!1},l}return s(t,e),b(t,[{key:"componentWillMount",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isFetchingEditionsAndVersions:!0}),t=this.props.params.datasetID,e.next=4,this.getDataset(t);case 4:n=e.sent,this.setState({dataset:this.mapDatasetToState(n)}),this.createListOfEditions(t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){return u.a.createElement("div",{className:"grid grid--justify-center"},u.a.createElement("div",{className:"grid__col-9"},u.a.createElement("div",{className:"margin-top--2"},"◀ ",u.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),u.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Select an Edition"),u.a.createElement("p",{className:"margin-bottom--1 font-size--18"},u.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),u.a.createElement(y.a,{rows:this.state.editions,showLoadingState:this.state.isFetchingEditionsAndVersions})))}}]),t}(l.Component);E.propTypes=w,t.a=n.i(p.connect)()(E)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(14),u=(n.n(l),n(30)),c=n(3),p=n.n(c),d=n(20),f=n(10),h=n(37),m=n(330),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v={params:p.a.shape({collectionID:p.a.string.isRequired,datasetID:p.a.string.isRequired,editionID:p.a.string.isRequired,versionID:p.a.string.isRequired}),dispatch:p.a.func.isRequired},y=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.getDataset=function(e){return i.setState({isFetchingDataset:!0}),h.a.get(e).then(function(e){i.setState({isFetchingDataset:!1,dataset:i.mapDatasetToState(e)})}).catch(function(e){switch(e.status){case 403:var t={type:"neutral",message:"You do not have permission to view dataset '"+i.props.params.datasetID+"'",isDismissable:!0};f.a.add(t);break;case 404:var n={type:"warning",message:"Dataset ID '"+i.props.params.datasetID+"' can't be found",isDismissable:!0};f.a.add(n);break;case"FETCH_ERR":var r={type:"warning",message:"There was a network error whilst getting dataset '"+i.props.params.datasetID+"'. Please check your connection and try again",isDismissable:!0};f.a.add(r);break;default:var a={type:"warning",message:"An unexpected error occurred whilst getting dataset '"+i.props.params.datasetID+"'",isDismissable:!0};f.a.add(a)}i.setState({isFetchingDataset:!1}),console.error("Error fetching dataset ID '"+i.props.params.datasetID+"'",e)})},i.mapDatasetToState=function(e){try{return{title:(e.current||e.next||e).title}}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};f.a.add(t),console.error("Error getting dataset details to state:\n",e)}},i.handleBackButton=function(){var e=d.a.resolve("../");i.props.dispatch(n.i(l.push)(e))},i.state={isFetchingDataset:!1,dataset:{}},i}return i(t,e),g(t,[{key:"componentWillMount",value:function(){this.getDataset(this.props.params.datasetID)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"grid grid--justify-center"},s.a.createElement("div",{className:"grid__col-6 margin-bottom--1"},s.a.createElement("div",{className:"margin-top--2"},"◀ ",s.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),s.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Preview"),s.a.createElement("p",{className:"margin-bottom--1 font-size--18"},s.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),s.a.createElement("p",{className:"margin-bottom--1 font-size--18"},s.a.createElement("span",{className:"font-weight--600"},"Edition"),": ",this.props.params.editionID),s.a.createElement("p",{className:"margin-bottom--1 font-size--18"},s.a.createElement("span",{className:"font-weight--600"},"Version"),": ",this.props.params.versionID))),s.a.createElement("div",{className:"preview--half preview--borders"},s.a.createElement(m.a,{path:"/datasets/"+this.props.params.datasetID+"/editions/"+this.props.params.editionID+"/versions/"+this.props.params.versionID})),s.a.createElement("div",{className:"grid grid--justify-center"},s.a.createElement("div",{className:"grid__col-6"},s.a.createElement("div",{className:"margin-top--1 margin-bottom--1"},s.a.createElement(u.g,{className:"btn btn--positive margin-right--1",to:window.location.origin+"/florence/collections/"+this.props.params.collectionID},"Continue")))))}}]),t}(o.Component);y.propTypes=v,t.a=y},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(4),u=n.n(l),c=n(14),p=(n.n(c),n(3)),d=n.n(p),f=n(37),h=n(10),m=n(20),g=n(36),v=n(191),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b={params:d.a.shape({datasetID:d.a.string.isRequired,editionID:d.a.string.isRequired}).isRequired,location:d.a.shape({pathname:d.a.string.isRequired}).isRequired,dispatch:d.a.func.isRequired},w=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.getDataset=function(e){return r.setState({isFetchingDataset:!0}),f.a.get(e).then(function(e){return r.setState({isFetchingDataset:!1,dataset:r.mapDatasetToState(e)}),r.mapDatasetToState(e)}).catch(function(t){switch(t.status){case 404:var n={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};h.a.add(n);break;case"RESPONSE_ERR":var a={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};h.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};h.a.add(i);break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};h.a.add(o)}console.error("Error getting dataset ("+e+"):\n",t),r.setState({isFetchingDataset:!1})})},r.mapDatasetToState=function(e){try{return{title:(e.current||e.next||e).title}}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};h.a.add(t),console.error("Error getting dataset details to state:\n",e)}},r.getEdition=function(e,t){return r.setState({isFetchingEdition:!0}),f.a.getEdition(e,t).then(function(e){return r.setState({isFetchingEdition:!1,edition:r.mapDatasetEditionToState(e)}),r.mapDatasetEditionToState(e)}).catch(function(e){console.error(e),r.setState({isFetchingEdition:!1})})},r.mapDatasetEditionToState=function(e){try{return{title:(e.current||e.next||e).edition}}catch(e){var t={type:"warning",message:"An unexpected error occurred when trying to get edition details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};h.a.add(t),console.error("Error getting mapping edition to state:\n",e)}},r.getAllVersions=function(e,t){return r.setState({isFetchingVersions:!0}),f.a.getVersions(e,t).then(function(e){return r.setState({isFetchingVersions:!1,versions:[].concat(a(r.state.versions),a(r.mapDatasetVersionsToState(e.items)))}),r.mapDatasetVersionsToState(e.items)}).catch(function(e){console.error(e),r.setState({isFetchingVersions:!1})})},r.mapDatasetVersionsToState=function(e){try{var t=e.map(function(e){var t="published"===e.state?"(published)":null;return{id:e.id,title:"Version: "+e.version+" "+(t||""),url:r.props.location.pathname+"/versions/"+e.version,version:e.version,details:["Release date: "+(e.release_date?g.a.format(e.release_date,"dd mmmm yyyy"):"Not yet set")]}});return t.sort(r.sortByVersionNumber),t.reverse()}catch(e){var n={type:"warning",message:"An unexpected error occurred when trying to get versions, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};h.a.add(n),console.error("Error getting mapping versions to state:\n",e)}},r.sortByVersionNumber=function(e,t){return e.version-t.version},r.handleBackButton=function(){var e=m.a.resolve("../../");r.props.dispatch(n.i(c.push)(e))},r.state={isFetchingDataset:!1,dataset:{},isFetchingEdition:!1,edition:{},isFetchingVersions:!1,versions:[{title:"Create new version",id:"create-new-version",url:r.props.location.pathname+"/instances"}]},r}return s(t,e),y(t,[{key:"componentWillMount",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.params.datasetID,n=this.props.params.editionID,this.getAllVersions(t,n),this.getDataset(t),this.getEdition(t,n);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){return u.a.createElement("div",{className:"grid grid--justify-center"},u.a.createElement("div",{className:"grid__col-9"},u.a.createElement("div",{className:"margin-top--2"},"◀ ",u.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),u.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Select a version"),u.a.createElement("p",{className:"margin-bottom--1 font-size--18"},u.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),u.a.createElement("p",{className:"margin-bottom--1 font-size--18"},u.a.createElement("span",{className:"font-weight--600"},"Edition"),": ",this.state.edition.title?this.state.edition.title:"loading..."),u.a.createElement(v.a,{rows:this.state.versions,showLoadingState:this.state.isFetchingVersions})))}}]),t}(l.Component);w.propTypes=b,t.a=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{rootPath:e.state.rootPath,collectionID:e.routing.locationBeforeTransitions.query.collection}}var s=n(4),l=n.n(s),u=n(16),c=n(3),p=n.n(c),d=n(699),f=n(37),h=n(52),m=n(10),g=n(119),v=n(22),y=n(20),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w={dispatch:p.a.func.isRequired,rootPath:p.a.string.isRequired,collectionID:p.a.string.isRequired},E=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tableValues:[],collections:[],isFetchingDatasets:!1},n.mapResponseToTableData=n.mapResponseToTableData.bind(n),n.handleInstanceURL=n.handleInstanceURL.bind(n),n}return i(t,e),b(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({isFetchingDatasets:!0});var t=[f.a.getNewVersionsAndCompletedInstances(),f.a.getAll(),h.a.getAll()];Promise.all(t).then(function(t){e.setState({isFetchingDatasets:!1,collections:t[2],tableValues:e.mapResponseToTableData(t[1].items,t[0].items,t[2],e.props.collectionID)}),e.props.dispatch(n.i(v.r)(t[1].items))}).catch(function(t){switch(t.status){case 403:var n={type:"neutral",message:"You do not permission to view submitted datasets.",isDismissable:!0};m.a.add(n);break;case 404:var r={type:"warning",message:"No API route available to get all submitted datasets",isDismissable:!0};m.a.add(r);break;case"RESPONSE_ERR":var a={type:"warning",message:"An error's occurred whilst trying to get the submitted datasets.",isDismissable:!0};m.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};m.a.add(i);break;case"UNEXPECTED_ERR":var o={type:"warning",message:"An unexpected error has occurred whilst trying to get the submitted datasets.",isDismissable:!0};m.a.add(o);break;default:var s={type:"warning",message:"An unexpected error's occurred whilst trying to get the submitted datasets.",isDismissable:!0};m.a.add(s)}e.setState({isFetchingData:!1})}),g.a.getAll().then(function(t){e.props.dispatch(n.i(v.k)(t.items))}).catch(function(e){var t={type:"warning",message:"An unexpected error occurred when trying to get dataset recipes, so some functionality in Florence may not work as expected.",isDismissable:!0};m.a.add(t),console.error("Error getting dataset recipes:\n",e)})}},{key:"handleInstanceStatusMessage",value:function(e,t,n){if("completed"===e||"edition-confirmed"===e)return"New";if("associated"===e){var r=n.find(function(e){return e.id===t});return r?"In collection: "+r.name:"In an unrecognised collection"}}},{key:"mapResponseToTableData",value:function(e,t,n,r){var a=this;try{return e.map(function(e){e=e.current||e.next||e;var i=[];t.forEach(function(t){var o=t.links.dataset.id;o===e.id&&i.push({date:t.last_updated,isInstance:!(t.edition&&t.version),edition:t.edition||"-",version:t.version||"-",url:a.handleInstanceURL(t.state,r,o,t.id,t.edition,t.version),status:a.handleInstanceStatusMessage(t.state,t.collection_id,n)})});var o=r?"?collection="+r:"";return{title:e.title||e.id,id:e.id,instances:i,datasetURL:y.a.resolve("datasets/"+e.id+"/metadata")+o}})}catch(e){var i={type:"warning",message:"Error trying to map the datasets data to the table structure. Please refresh the page."};return m.a.add(i),console.error("Error mapping dataset API responses to view",e),[]}}},{key:"handleInstanceURL",value:function(e,t,n,r,a,i){var o="";return o="completed"===e?y.a.resolve("datasets/"+n+"/instances/"+r+"/metadata"):y.a.resolve("datasets/"+n+"/editions/"+a+"/versions/"+i+"/metadata"),t&&(o=o+"?collection="+t),o}},{key:"render",value:function(){return l.a.createElement("div",{className:"grid grid--justify-center"},l.a.createElement("div",{className:"grid__col-9"},l.a.createElement("ul",{className:"list list--neutral"},l.a.createElement("li",{className:"list__item grid grid--justify-space-between"},l.a.createElement("h1",null,"Select a dataset"))),l.a.createElement(d.a,{values:this.state.tableValues})))}}]),t}(s.Component);E.propTypes=w,t.a=n.i(u.connect)(o)(E)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{rootPath:e.state.rootPath,userEmail:e.state.user.email,collectionID:e.routing.locationBeforeTransitions.query.collection,datasets:e.state.datasets.all,dataset:e.state.datasets.activeDataset}}var c=n(4),p=n.n(c),d=n(16),f=n(30),h=n(14),m=(n.n(h),n(3)),g=n.n(m),v=n(81),y=n.n(v),b=n(37),w=n(52),E=n(10),_=n(51),C=n(82),k=n(327),S=n(28),D=n(326),O=n(339),T=n(22),R=n(20),P=n(90),x=n(338),N=n(194),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M={params:g.a.shape({datasetID:g.a.string.isRequired}).isRequired,dispatch:g.a.func.isRequired,rootPath:g.a.string.isRequired,userEmail:g.a.string.isRequired,collectionID:g.a.string,router:g.a.shape({listenBefore:g.a.func.isRequired}).isRequired,datasets:g.a.arrayOf(g.a.shape({next:g.a.shape({title:g.a.string}),current:g.a.shape({title:g.a.string})})),dataset:g.a.shape({title:g.a.string,id:g.a.string,description:g.a.string,keywords:g.a.array,license:g.a.string,national_statistic:g.a.bool,collection_id:g.a.string,contacts:g.a.arrayOf(g.a.shape({name:g.a.string,email:g.a.string,telephone:g.a.string})),qmi:g.a.shape({href:g.a.string}),related_datasets:g.a.arrayOf(g.a.shape({href:g.a.string,title:g.a.string})),publications:g.a.arrayOf(g.a.shape({href:g.a.string,title:g.a.string})),methodologies:g.a.arrayOf(g.a.shape({href:g.a.string,title:g.a.string,description:g.a.string})),release_frequency:g.a.string,state:g.a.string,links:g.a.shape({latest_version:g.a.shape({href:g.a.string})}),reviewState:g.a.string,lastEditedBy:g.a.string})},L=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingDataset:!1,isFetchingCollectionData:!1,isReadOnly:!1,isSavingData:!1,hasChanges:!1,error:null,showModal:!1,modalType:"",title:"",description:"",relatedBulletins:[],relatedQMI:"",relatedLinks:[],relatedMethodologies:[],keywords:"",titleInput:"",urlInput:"",descInput:"",editKey:"",contactName:"",contactEmail:"",contactPhone:"",releaseFrequency:"",isNationalStat:!1,titleError:"",urlError:"",descError:"",latestVersion:"",status:"",license:"",nextRelease:""},n.handleSelectChange=n.handleSelectChange.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handleToggleChange=n.handleToggleChange.bind(n),n.handleBackButton=n.handleBackButton.bind(n),n.handleModalSubmit=n.handleModalSubmit.bind(n),n.handleRelatedContentCancel=n.handleRelatedContentCancel.bind(n),n.handleRelatedContentSubmit=n.handleRelatedContentSubmit.bind(n),n.handleSave=n.handleSave.bind(n),n.handleSaveAndSubmitForReview=n.handleSaveAndSubmitForReview.bind(n),n.handleSaveAndMarkAsReviewed=n.handleSaveAndMarkAsReviewed.bind(n),n.handleAddRelatedClick=n.handleAddRelatedClick.bind(n),n.handleDeleteRelatedClick=n.handleDeleteRelatedClick.bind(n),n.handleEditRelatedClick=n.handleEditRelatedClick.bind(n),n.editRelatedLink=n.editRelatedLink.bind(n),n}return l(t,e),j(t,[{key:"componentWillMount",value:function(){var e=this;this.removeRouteListener=this.props.router.listenBefore(function(t,n){return e.handleRouteChange(t,n)}),this.setState({isFetchingDataset:!0}),b.a.get(this.props.params.datasetID).then(function(t){var r=t.next||t.current;if(e.props.dispatch(n.i(T.i)(r)),!e.props.collectionID){e.setState({isReadOnly:!0});var a={type:"neutral",message:"You are not in a collection, so cannot edit this dataset.",isDismissable:!0};E.a.add(a),P.a.add(P.b.runtimeWarning,{message:"Attempt to edit/view dataset ("+e.props.params.datasetID+") without being in collection."}),console.warn("Attempt to edit/view dataset ("+e.props.params.datasetID+") without being in collection.")}if(e.props.collectionID&&r.collection_id&&e.props.collectionID!==r.collection_id){e.setState({isReadOnly:!0});var i={type:"neutral",message:"This dataset is already in a different collection, so can't be edited.",isDismissable:!0};E.a.add(i),P.a.add(P.b.runtimeWarning,{message:"Attempt to edit/view dataset that is already in collection '"+r.collection_id+"' but current collection is '"+e.props.collectionID+"'"}),console.warn("Dataset is already in collection '"+r.collection_id+"'")}if(e.props.dataset.collection_id&&e.props.collectionID&&e.updateReviewStateData(),e.setState({latestVersion:r.links.latest_version?r.links.latest_version.href:"",status:r.state}),r&&r.title&&e.setState({title:r.title}),r&&r.next_release&&e.setState({nextRelease:r.next_release}),r&&r.description&&e.setState({description:r.description}),r&&r.license&&e.setState({license:r.license}),r&&r.release_frequency&&e.setState({releaseFrequency:r.release_frequency}),r&&r.national_statistic&&e.setState({isNationalStat:r.national_statistic}),r.keywords&&r.keywords.length>0&&e.setState({keywords:r.keywords.join(", ")}),r.contacts&&r.contacts.length>0){var o=r.contacts[0];e.setState({contactName:o.name,contactEmail:o.email,contactPhone:o.telephone})}if(r.qmi&&""!==r.qmi.href&&e.setState({relatedQMI:r.qmi.href}),r.publications&&r.publications.length>0){var s=r.publications.map(function(e){return{title:e.title,href:e.href,key:y()()}});e.setState({relatedBulletins:s})}if(r.related_datasets&&r.related_datasets.length>0){var l=r.related_datasets.map(function(e){return{title:e.title,href:e.href,key:y()()}});e.setState({relatedLinks:l})}if(r.methodologies&&r.methodologies.length>0){var u=r.methodologies.map(function(e){return{title:e.title,href:e.href,description:e.description,key:y()()}});e.setState({relatedMethodologies:u})}e.setState({isFetchingDataset:!1})}).catch(function(t){switch(e.setState({isFetchingDataset:!1,isReadOnly:!0}),t.status){case 403:var r={type:"info",message:"You do not permission to view this dataset",isDismissable:!0};E.a.add(r);break;case 404:var a={type:"info",message:"Dataset ID '"+e.props.params.datasetID+"' was not recognised. You've been redirected to the datasets home screen",isDismissable:!0};E.a.add(a);var i=R.a.resolve("/datasets"+(e.props.collectionID?"?collection="+e.props.collectionID:""));e.props.dispatch(n.i(h.push)(i));break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to get this dataset",isDismissable:!0};E.a.add(o)}P.a.add(P.b.unexpectedRuntimeError,{message:"Error getting dataset "+e.props.params.datasetID+". Error: "+JSON.stringify(t)}),console.error("Error has occurred:\n",t)})}},{key:"shouldComponentUpdate",value:function(e,t){return!t.isFetchingDataset&&(!this.props.dataset||null!==e.dataset)}},{key:"componentWillUnmount",value:function(){this.removeRouteListener()}},{key:"handleRouteChange",value:function(e,t){if(e.pathname===R.a.resolve("preview"))return void t();this.props.dispatch(n.i(T.o)()),t()}},{key:"getCollection",value:function(e){return w.a.get(e).then(function(e){return[null,e]}).catch(function(e){return[e,null]})}},{key:"updateReviewStateData",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t,r,a,i,o,s,l,u,c,p,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isFetchingCollectionData:!0}),t=this.props.collectionID,r=this.props.params.datasetID,e.prev=3,e.next=6,this.getCollection(t);case 6:if(a=e.sent,i=A(a,2),o=i[0],s=i[1],!o){e.next=12;break}throw o;case 12:if(l=s.datasets.find(function(e){return e.id===r})){e.next=16;break}return this.setState({isFetchingCollectionData:!1}),e.abrupt("return");case 16:u=l.lastEditedBy,c=l.state.charAt(0).toLowerCase()+l.state.slice(1),this.props.dispatch(n.i(T.p)(u,c)),this.setState({isFetchingCollectionData:!1}),e.next=40;break;case 22:e.prev=22,e.t0=e.catch(3),this.setState({isFetchingCollectionData:!1,isReadOnly:!0}),e.t1=e.t0.status,e.next=401===e.t1?28:403===e.t1?29:404===e.t1?32:35;break;case 28:return e.abrupt("break",38);case 29:return p={type:"neutral",message:"You do not permission to get details for collection '"+t+"'",isDismissable:!0},E.a.add(p),e.abrupt("break",38);case 32:return d={type:"warning",message:"Could not find collection '"+t+"'",isDismissable:!0},E.a.add(d),e.abrupt("break",38);case 35:return f={type:"warning",message:"An unexpected error's occurred whilst trying to get the collection '"+t+"'",isDismissable:!0},E.a.add(f),e.abrupt("break",38);case 38:P.a.add(P.b.unexpectedRuntimeError,{message:"Unable to update metadata screen with version's review/edit status in collection "+t+". Error: "+JSON.stringify(e.t0)}),console.error("Unable to update metadata screen with version's review/edit status in collection '"+t+"'",e.t0);case 40:case"end":return e.stop()}},e,this,[[3,22]])}));return e}()},{key:"mapStateToAPIRequest",value:function(){return{contacts:[{email:this.state.contactEmail,name:this.state.contactName,telephone:this.state.contactPhone}],description:this.state.description,next_release:this.state.nextRelease,release_frequency:this.state.releaseFrequency,title:this.state.title,license:this.state.license,national_statistic:this.state.isNationalStat,keywords:this.splitKeywordsString(this.state.keywords),qmi:{href:this.state.relatedQMI},publications:[].concat(a(this.state.relatedBulletins)),methodologies:[].concat(a(this.state.relatedMethodologies)),related_datasets:[].concat(a(this.state.relatedLinks))}}},{key:"mapReleaseFreqToSelectOptions",value:function(){return["Weekly","Monthly","Annually"].map(function(e){return{id:e.toLowerCase(),name:e}})}},{key:"handleSelectChange",value:function(e){this.setState({error:"",releaseFrequency:e.target.value,hasChanges:!0})}},{key:"handleModalSubmit",value:function(e){e.preventDefault(),this.setState({showModal:!1});var t=R.a.resolve("/datasets"+(this.props.collectionID?"?collection="+this.props.collectionID:""));this.props.dispatch(n.i(h.push)(t))}},{key:"handleToggleChange",value:function(e){this.setState({isNationalStat:e,hasChanges:!0})}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.state.hasChanges||this.setState({hasChanges:!0}),"add-related-content-title"===a?(this.setState({titleInput:n}),null!=this.state.titleError&&this.setState({titleError:null})):"add-related-content-url"===a?(this.setState({urlInput:n}),null!=this.state.urlError&&this.setState({urlError:null})):"add-related-content-desc"===a?(this.setState({descInput:n}),null!=this.state.descError&&this.setState({descError:null})):this.setState(r({},a,n))}},{key:"handleBackButton",value:function(){if(!this.state.isReadOnly&&this.state.hasChanges)return void this.setState({showModal:!0});var e=R.a.resolve("/datasets"+(this.props.collectionID?"?collection="+this.props.collectionID:""));this.props.dispatch(n.i(h.push)(e))}},{key:"handleRelatedContentCancel",value:function(){this.setState({showModal:!1,modalType:"",editKey:"",urlInput:"",descInput:"",titleInput:""})}},{key:"handleAddRelatedClick",value:function(e){this.setState({showModal:!0,modalType:e})}},{key:"handleEditRelatedClick",value:function(e,t){var n=void 0;"bulletin"===e&&(n=this.state.relatedBulletins.find(function(e){return e.key===t})),"link"===e&&(n=this.state.relatedLinks.find(function(e){return e.key===t})),"methodologies"===e&&(n=this.state.relatedMethodologies.find(function(e){return e.key===t})),this.setState({showModal:!0,modalType:e,editKey:t,urlInput:n.href||"",titleInput:n.title||"",descInput:n.description||""})}},{key:"handleDeleteRelatedClick",value:function(e,t){function n(e,t){return e.filter(function(e){return e.key!==t})}return"bulletin"===e?void this.setState({relatedBulletins:n(this.state.relatedBulletins,t)}):"link"===e?void this.setState({relatedLinks:n(this.state.relatedLinks,t)}):"methodologies"===e?void this.setState({relatedMethodologies:n(this.state.relatedMethodologies,t)}):(console.warn("Attempt to remove a related content type that is not recognised",e),void P.a.add(P.b.unexpectedRuntimeError,"Attempt to remove a related content type that is not recognised: '"+e+"'"))}},{key:"editRelatedLink",value:function(e,t){var n=this,r=function(e){return e.map(function(e){return e.key!==t?e:I({},e,{title:n.state.titleInput,href:n.state.urlInput,description:n.state.descInput})})};return"bulletin"===e?void this.setState({relatedBulletins:r(this.state.relatedBulletins)}):"link"===e?void this.setState({relatedLinks:r(this.state.relatedLinks)}):"methodologies"===e?void this.setState({relatedMethodologies:r(this.state.relatedMethodologies)}):(console.warn("Attempt to edit a related content type that is not recognised",e),void P.a.add(P.b.unexpectedRuntimeError,"Attempt to edit a related content type that is not recognised: '"+e+"'"))}},{key:"mapTypeContentsToCard",value:function(e){return e.map(function(e){return{title:e.title,id:e.key}})}},{key:"splitKeywordsString",value:function(e){return e.split(",").map(function(e){return e.trim()})}},{key:"addDatasetToCollection",value:function(e){var t=this;return w.a.addDataset(this.props.collectionID,e).catch(function(n){return P.a.add(P.b.unexpectedRuntimeError,{message:"Error adding dataset '"+e+"' to collection '"+t.props.collectionID+"'. Error: "+JSON.stringify(n)}),console.error("Error adding dataset '"+e+"' to collection '"+t.props.collectionID+"'",n),n})}},{key:"updateDatasetReviewState",value:function(e,t,n){var r=this,a=Promise.resolve;return this.setState({isSavingData:!0}),t&&(a=w.a.setDatasetStatusToComplete),n&&(a=w.a.setDatasetStatusToReviewed),a(this.props.collectionID,e).catch(function(a){return P.a.add(P.b.unexpectedRuntimeError,{message:"Error updating review state for dataset '"+e+"' to '"+(t?"Complete":"")+(n?"Reviewed":"")+"' in collection '"+r.props.collectionID+"'. Error: "+JSON.stringify(a)}),console.error("Error updating review state for dataset '"+e+"' to '"+(t?"Complete":"")+(n?"Reviewed":"")+"' in collection '"+r.props.collectionID+"'",a),a})}},{key:"updateDatasetMetadata",value:function(e){return b.a.updateDatasetMetadata(e,this.mapStateToAPIRequest()).catch(function(t){return P.a.add(P.b.unexpectedRuntimeError,{message:"Error updating metadata for dataset '"+e+"'. Error: "+JSON.stringify(t)}),console.error("Error updating metadata for dataset '"+e+"'",t),t})}},{key:"handleRelatedContentSubmit",value:function(e){if(e.preventDefault(),""==this.state.titleInput||""==this.state.urlInput)""==this.state.titleInput&&this.setState({titleError:"You must provide a title"}),""==this.state.urlInput&&this.setState({urlError:"You must provide a url"});else{if("bulletin"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("bulletin",this.state.editKey);else{var t=this.state.relatedBulletins.concat({title:this.state.titleInput,href:this.state.urlInput,key:y()()});this.setState({relatedBulletins:t})}else if("link"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("link",this.state.editKey);else{var n=this.state.relatedLinks.concat({title:this.state.titleInput,href:this.state.urlInput,key:y()()});this.setState({relatedLinks:n})}else if("methodologies"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("methodologies",this.state.editKey);else{var r=this.state.relatedMethodologies.concat({title:this.state.titleInput,href:this.state.urlInput,description:this.state.descInput,key:y()()});this.setState({relatedMethodologies:r})}this.setState({showModal:!1,modalType:"",editKey:"",titleInput:"",urlInput:"",descInput:""})}}},{key:"handleSave",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r,a){var i,o,s,l,u,c,p,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r||a,o=!this.props.dataset.collection_id&&!i,t.preventDefault(),this.setState({isSavingData:!0}),s=this.updateDatasetMetadata(this.props.params.datasetID),l=void 0,u=i?this.updateDatasetReviewState(this.props.params.datasetID,r,a):Promise.resolve(),c=void 0,p=o?this.addDatasetToCollection(this.props.params.datasetID):Promise.resolve(),d=void 0,e.next=12,s;case 12:return l=e.sent,e.next=15,u;case 15:return c=e.sent,e.next=18,p;case 18:if(d=e.sent,f={isSavingData:!1},l||(f.hasChanges=!1),this.setState(f),n.i(x.a)(l,c||d,r,a,this.props.collectionID),d||!o){e.next=27;break}return this.props.dispatch(n.i(T.q)(this.props.collectionID)),this.props.dispatch(n.i(T.p)(this.props.userEmail,"inProgress")),e.abrupt("return");case 27:if(c||!i){e.next=30;break}return this.props.dispatch(n.i(h.push)(R.a.resolve("/collections/"+this.props.collectionID))),e.abrupt("return");case 30:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSaveAndSubmitForReview",value:function(){this.handleSave(event,!0,!1)}},{key:"handleSaveAndMarkAsReviewed",value:function(){this.handleSave(event,!1,!0)}},{key:"renderReviewActions",value:function(){if(!this.state.isReadOnly&&!this.state.isFetchingCollectionData)return p.a.createElement(N.a,{areDisabled:this.state.isSavingData||this.state.isReadOnly,includeSaveLabels:!0,reviewState:this.props.dataset.reviewState,userEmail:this.props.userEmail,lastEditedBy:this.props.dataset.lastEditedBy,onSubmit:this.handleSaveAndSubmitForReview,onApprove:this.handleSaveAndMarkAsReviewed,notInCollectionYet:!this.props.dataset.collection_id})}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"grid grid--justify-center"},p.a.createElement("div",{className:"grid__col-4"},p.a.createElement("div",{className:"margin-top--2"},"◀ ",p.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),p.a.createElement("p",{className:"margin-top--1"},"Dataset: ",p.a.createElement("strong",null,this.state.title||this.props.params.datasetID+" (title not available)")),p.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Dataset details"),p.a.createElement("p",{className:"margin-bottom--1"},"This information is common across all editions of the dataset.",p.a.createElement("br",null),"Changing it will affect all previous editions."),this.state.isFetchingDataset?p.a.createElement("div",{className:"loader loader--dark"}):p.a.createElement("div",null,p.a.createElement("h2",{className:"margin-top--1 margin-bottom--1"},"Dataset"),p.a.createElement("div",{className:"margin-bottom--1"},p.a.createElement("strong",null,"ID"),p.a.createElement("span",{className:"inline-block margin-left--1"},this.props.params.datasetID||"Fetching dataset ID...")),p.a.createElement("form",{className:"margin-bottom--4",onSubmit:this.handleSave},p.a.createElement(S.a,{value:this.state.title,id:"title",label:"Title",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement(S.a,{value:this.state.description,type:"textarea",id:"description",label:"About this dataset",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement(S.a,{value:this.state.nextRelease,id:"nextRelease",label:"Next release date",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement(S.a,{value:this.state.keywords,id:"keywords",label:"Keywords",placeholder:"e.g. housing, inflation",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement("div",{className:"grid__col-6 margin-top--2"},p.a.createElement(k.a,{isChecked:this.state.isNationalStat,onChange:this.handleToggleChange,disabled:this.state.isReadOnly||this.state.isSavingData,label:"National statistic",id:"national-statistic"})),p.a.createElement("div",{className:"grid__col-6 margin-bottom--1"},p.a.createElement(C.a,{contents:this.mapReleaseFreqToSelectOptions(),selectedOption:this.state.releaseFrequency,onChange:this.handleSelectChange,error:this.state.error,label:"Release frequency",id:"release-frequency",disabled:this.state.isReadOnly||this.state.isSavingData})),p.a.createElement("h3",{className:"margin-bottom--1"},"Contact"),p.a.createElement(S.a,{value:this.state.contactName,id:"contactName",label:"Contact name",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement(S.a,{value:this.state.contactEmail,id:"contactEmail",label:"Contact email",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement(S.a,{value:this.state.contactPhone,id:"contactPhone",label:"Contact telephone",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement("h2",{className:"margin-top--2 margin-bottom--1"},"Related content"),p.a.createElement("div",{className:"margin-bottom--1"},p.a.createElement("p",null," These are common across all editions of the dataset. Changing them will affect all previous editions.")),p.a.createElement("div",{className:"margin-bottom--2 related-datasets"},p.a.createElement("h3",null," Related datasets "),p.a.createElement(D.a,{contents:this.mapTypeContentsToCard(this.state.relatedLinks),type:"link",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement("button",{disabled:this.state.isReadOnly||this.state.isSavingData,type:"button",className:"btn btn--link",onClick:function(){e.handleAddRelatedClick("link")}}," Add related link")),p.a.createElement("div",{className:"margin-bottom--2 related-documents"},p.a.createElement("h3",null," Bulletins, articles and compendia "),p.a.createElement(D.a,{contents:this.mapTypeContentsToCard(this.state.relatedBulletins),type:"bulletin",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement("button",{disabled:this.state.isReadOnly||this.state.isSavingData,type:"button",className:"btn btn--link",onClick:function(){e.handleAddRelatedClick("bulletin")}}," Add document")),p.a.createElement("div",{className:"margin-bottom--2"},p.a.createElement("h3",null," Quality and methodology information "),p.a.createElement("span",null,"Copy the QMI web address for the dataset and paste it here"),p.a.createElement(S.a,{value:this.state.relatedQMI,id:"relatedQMI",label:"",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData})),p.a.createElement("div",{className:"margin-bottom--2 related-methodologies"},p.a.createElement("h3",null," Methodologies "),p.a.createElement(D.a,{contents:this.mapTypeContentsToCard(this.state.relatedMethodologies),type:"methodologies",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement("button",{disabled:this.state.isReadOnly||this.state.isSavingData,type:"button",className:"btn btn--link",onClick:function(){e.handleAddRelatedClick("methodologies")}}," Add methodology")),p.a.createElement("div",{className:"margin-bottom--2"},p.a.createElement("h3",null," Usage information "),p.a.createElement("span",null,"State if the data is free for public use or if there are restrictions on usage.",p.a.createElement("br",null),"State what text the user should use to correctly cite the data."),p.a.createElement(S.a,{value:this.state.license,type:"textarea",id:"license",label:"",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData})),p.a.createElement("button",{id:"btn-save",type:"submit",className:"btn btn--primary margin-bottom--1",disabled:this.state.isReadOnly||this.state.isFetchingCollectionData||this.state.isSavingData},"Save"),p.a.createElement("span",{className:"margin-left--1"},this.renderReviewActions()),this.state.isSavingData&&p.a.createElement("div",{className:"loader loader--inline loader--dark margin-left--1"}),this.state.latestVersion&&p.a.createElement(f.g,{className:"margin-left--1",to:R.a.resolve("preview?collection="+this.props.collectionID,!this.props.collectionID)},"Preview")))),this.state.showModal&&p.a.createElement(_.a,{sizeClass:"grid__col-3"},this.state.modalType?p.a.createElement(O.a,{name:"related-content-modal",formTitle:"Add related content",titleLabel:"Page title",titleInput:this.state.titleInput,urlLabel:"Page URL",urlInput:this.state.urlInput,descLabel:"Description",descInput:this.state.descInput,onCancel:this.handleRelatedContentCancel,onFormInput:this.handleInputChange,onFormSubmit:this.handleRelatedContentSubmit,titleError:this.state.titleError,urlError:this.state.urlError,requiresDescription:"methodologies"===this.state.modalType,requiresURL:!0}):p.a.createElement("div",null,p.a.createElement("div",{className:"modal__header"},p.a.createElement("h2",null,"Warning!")),p.a.createElement("div",{className:"modal__body"},p.a.createElement("p",null,"You will lose any changes by going back without saving. "),p.a.createElement("br",null),p.a.createElement("p",null,'Click "Continue" to lose changes and go back to the previous page or click "Cancel" to stay on the current page.')),p.a.createElement("div",{className:"modal__footer"},p.a.createElement("button",{type:"button",className:"btn btn--primary btn--margin-right",onClick:this.handleModalSubmit},"Continue"),p.a.createElement("button",{type:"button",className:"btn",onClick:this.handleRelatedContentCancel},"Cancel")))))}}]),t}(c.Component);L.propTypes=M,t.a=n.i(d.connect)(u)(L)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{rootPath:e.state.rootPath,userEmail:e.state.user.email,collectionID:e.routing.locationBeforeTransitions.query.collection,instance:e.state.datasets.activeInstance,version:e.state.datasets.activeVersion,recipes:e.state.datasets.recipes,dataset:e.state.datasets.activeDataset}}var c=n(4),p=n.n(c),d=n(16),f=n(30),h=n(14),m=(n.n(h),n(3)),g=n.n(m),v=n(37),y=n(119),b=n(10),w=n(82),E=n(28),_=n(645),C=n(22),k=n(20),S=n(326),D=n(51),O=n(81),T=n.n(O),R=n(339),P=n(90),x=n(52),N=n(194),I=n(694),A=n(696),j=n(36),M=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),F={dispatch:g.a.func.isRequired,rootPath:g.a.string.isRequired,userEmail:g.a.string.isRequired,collectionID:g.a.string.isRequired,router:g.a.shape({listenBefore:g.a.func.isRequired}).isRequired,location:g.a.shape({query:g.a.shape({collection:g.a.string}).isRequired}).isRequired,params:g.a.shape({datasetID:g.a.string.isRequired,instanceID:g.a.string,edition:g.a.string,version:g.a.string}).isRequired,recipes:g.a.arrayOf(g.a.shape({output_instances:g.a.arrayOf(g.a.shape({editions:g.a.arrayOf(g.a.string).isRequired,id:g.a.string}))})),dataset:g.a.shape({title:g.a.string,collection_id:g.a.string}),instance:g.a.shape({edition:g.a.string,version:g.a.number,release_date:g.a.string,state:g.a.string,id:g.a.string,usage_notes:g.a.arrayOf(g.a.shape({note:g.a.string,title:g.a.string})),dimensions:g.a.arrayOf(g.a.object),alerts:g.a.arrayOf(g.a.object),latest_changes:g.a.arrayOf(g.a.object)}),version:g.a.shape({edition:g.a.string,state:g.a.string,version:g.a.number,dimensions:g.a.arrayOf(g.a.object),release_date:g.a.string,id:g.a.string,usage_notes:g.a.arrayOf(g.a.shape({note:g.a.string,title:g.a.string})),alerts:g.a.arrayOf(g.a.object),latest_changes:g.a.arrayOf(g.a.object),lastEditedBy:g.a.string,reviewState:g.a.string}),isInstance:g.a.string},q=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingData:!1,isSavingData:!1,isReadOnly:!1,isFetchingCollectionData:!1,isFetchingDimensionsData:!1,isInstance:null,hasChanges:!1,edition:null,title:null,releaseDate:"",releaseDateError:"",dimensions:[],versionID:"",showModal:!1,modalType:"",modalTitle:"",alerts:[],changes:[],editKey:"",titleInput:"",descInput:"",checkboxInput:!1,formErrors:[],usageNotes:[]},n.handleSelectChange=n.handleSelectChange.bind(n),n.handleRelatedContentSubmit=n.handleRelatedContentSubmit.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handleReleaseDateChange=n.handleReleaseDateChange.bind(n),n.handleAddRelatedClick=n.handleAddRelatedClick.bind(n),n.handleDeleteRelatedClick=n.handleDeleteRelatedClick.bind(n),n.handleEditRelatedClick=n.handleEditRelatedClick.bind(n),n.editRelatedLink=n.editRelatedLink.bind(n),n.handleSave=n.handleSave.bind(n),n.handleSaveAndSubmitForReview=n.handleSaveAndSubmitForReview.bind(n),n.handleSaveAndMarkAsReviewed=n.handleSaveAndMarkAsReviewed.bind(n),n.handleRelatedContentCancel=n.handleRelatedContentCancel.bind(n),n.handleAlertSave=n.handleAlertSave.bind(n),n.handleUsageNoteSave=n.handleUsageNoteSave.bind(n),n.handleBackButton=n.handleBackButton.bind(n),n.populateDimensionInputs=n.populateDimensionInputs.bind(n),n}return l(t,e),U(t,[{key:"componentWillMount",value:function(){var e=this;this.removeRouteListener=this.props.router.listenBefore(function(t,n){return e.handleRouteChange(t,n)}),this.setState({isFetchingData:!0,activeCollectionID:this.props.collectionID});var t=[Promise.resolve(),Promise.resolve(),Promise.resolve()];if(!this.props.collectionID){this.setState({isReadOnly:!0});var r={type:"neutral",message:"You are not in a collection, so cannot edit this version.",isDismissable:!0};b.a.add(r),P.a.add(P.b.runtimeWarning,{message:"Attempt to edit/view version ("+this.props.params.datasetID+") without being in collection."}),console.warn("Attempt to edit/view version ("+this.props.params.datasetID+") without being in collection.")}!this.props.params.instanceID&&this.props.collectionID&&this.updateReviewStateData(),this.props.params.instanceID?(t[1]=v.a.getInstance(this.props.params.instanceID),this.setState({isInstance:!0})):(t[1]=v.a.getVersion(this.props.params.datasetID,this.props.params.edition,this.props.params.version),this.setState({isInstance:!1})),t[0]=y.a.getAll(),t[2]=v.a.get(this.props.params.datasetID),Promise.all(t).then(function(t){var r=t[2].next||t[2].current,a=t[1];if(0===e.props.recipes.length&&e.props.dispatch(n.i(C.k)(t[0].items)),e.props.params.instanceID&&(e.props.dispatch(n.i(C.l)(t[1])),e.setState({dimensions:e.props.instance.dimensions,edition:e.props.instance.edition}),e.populateDimensionInputs()),e.props.params.version){e.props.dispatch(n.i(C.h)(t[1]));var i=[];e.props.version.alerts&&e.props.version.alerts.map(function(e){e.key=T()(),i.push(e)});var o=[];e.props.version.latest_changes&&e.props.version.latest_changes.map(function(e){e.key=T()(),o.push(e)});var s=[];e.props.version.usage_notes&&e.props.version.usage_notes.map(function(e){e.key=T()(),s.push(e)}),e.setState({dimensions:e.props.version.dimensions,edition:e.props.version.edition,state:e.props.version.state,versionID:e.props.version.id,alerts:i,changes:o,releaseDate:e.props.version.release_date?new Date(e.props.version.release_date):"",usageNotes:s})}if(e.props.collectionID&&a.collection_id&&e.props.collectionID!==a.collection_id){e.setState({isReadOnly:!0});var l={type:"neutral",message:"This dataset is already in a different collection, so can't be edited.",isDismissable:!0};b.a.add(l),P.a.add(P.b.runtimeWarning,{message:"Attempt to edit/view dataset version that is already in collection 'dataset.collection_id' but current collection is '"+e.props.collectionID+"'"}),console.warn("Dataset version is already in collection '"+r.collection_id+"' but current collection is '"+e.props.collectionID+"'")}e.setState({title:r.title,isFetchingData:!1})}).catch(function(t){switch(t.status){case 403:var r={type:"neutral",message:"You do not permission to access the metadata for this dataset",isDismissable:!0};b.a.add(r);break;case 404:var a={type:"neutral",message:"Dataset ID '"+e.props.params.datasetID+"' was not recognised. You've been redirected to the datasets home screen",isDismissable:!0};b.a.add(a),e.props.dispatch(n.i(h.push)(k.a.resolve("/datasets")));break;default:var i={type:"warning",message:"An unexpected error's occurred whilst trying to get this dataset",isDismissable:!0};b.a.add(i)}console.error("Error has occurred:\n",t)})}},{key:"shouldComponentUpdate",value:function(e,t){return!t.isFetchingData&&(!this.props.version||null!==e.version)}},{key:"componentWillUnmount",value:function(){this.removeRouteListener()}},{key:"handleRouteChange",value:function(e,t){if(e.pathname===k.a.resolve("preview"))return void t();this.state.isInstance?this.props.dispatch(n.i(C.m)()):this.props.dispatch(n.i(C.n)()),t()}},{key:"populateDimensionInputs",value:function(){var e=this;this.setState({isFetchingDimensionsData:!0}),v.a.getLatestVersion(this.props.params.datasetID).then(function(t){if(!t)return void e.setState({isFetchingDimensionsData:!1});e.setState({dimensions:t.dimensions.map(function(e){return L({},e,{hasChanged:!0})}),isFetchingDimensionsData:!1})}).catch(function(t){e.setState({isFetchingDimensionsData:!1}),e.handleRequestError("auto-populate the dimension metadata",t.status),console.error("Error getting latest published version to auto-populate dimensions inputs",t),P.a.add(P.b.unexpectedRuntimeError,{message:"Error getting latest published version to auto-populate dimensions inputs. Error: "+JSON.stringify(t)})})}},{key:"updateReviewStateData",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t,r,a,i,o,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isFetchingCollectionData:!0}),t=this.props.collectionID,r=this.props.params,e.prev=3,e.next=6,x.a.get(t);case 6:if(a=e.sent,i=a.datasetVersions.find(function(e){return e.id===r.datasetID&&e.edition===r.edition&&e.version===r.version})){e.next=11;break}return this.setState({isFetchingCollectionData:!1}),e.abrupt("return");case 11:o=i.lastEditedBy,s=i.state.charAt(0).toLowerCase()+i.state.slice(1),this.props.dispatch(n.i(C.j)(o,s)),this.setState({isFetchingCollectionData:!1}),e.next=35;break;case 17:e.prev=17,e.t0=e.catch(3),this.setState({isFetchingCollectionData:!1,isReadOnly:!0}),e.t1=e.t0.status,e.next=401===e.t1?23:403===e.t1?24:404===e.t1?27:30;break;case 23:return e.abrupt("break",33);case 24:return l={type:"neutral",message:"You do not permission to get details for collection '"+t+"'",isDismissable:!0},b.a.add(l),e.abrupt("break",33);case 27:return u={type:"warning",message:"Could not find collection '"+t+"'",isDismissable:!0},b.a.add(u),e.abrupt("break",33);case 30:return c={type:"warning",message:"An unexpected error's occurred whilst trying to get the collection '"+t+"'",isDismissable:!0},b.a.add(c),e.abrupt("break",33);case 33:P.a.add(P.b.unexpectedRuntimeError,{message:"Unable to update metadata screen with version's review/edit status in collection "+t+". Error: "+JSON.stringify(e.t0)}),console.error("Unable to update metadata screen with version's review/edit status in collection "+t,e.t0);case 35:case"end":return e.stop()}},e,this,[[3,17]])}));return e}()},{key:"handleRequestError",value:function(e,t){switch(t){case 401:break;case 400:var n={type:"warning",message:"Unable to "+e+" due to invalid values being submitted. Please check your updates for any issues and try again",isDismissable:!0,autoDismiss:1e4};b.a.add(n);break;case 403:var r={type:"neutral",message:"Unable to "+e+" because you do not have the correct permissions",isDismissable:!0,autoDismiss:1e4};b.a.add(r);break;case 404:var a={type:"warning",message:"Unable to "+e+" because this version couldn't be found",isDismissable:!0,autoDismiss:1e4};b.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"Unable to "+e+" due to a network issue. Please check your internet connection and try again",isDismissable:!0,autoDismiss:1e4};b.a.add(i);break;default:var o={type:"warning",message:"Unable to "+e+" due to an unexpected error",isDismissable:!0,autoDismiss:1e4};b.a.add(o)}}},{key:"updateVersionReviewState",value:function(e,t,n,r,a){var i=this,o=Promise.resolve();return this.setState({isSavingData:!0}),r&&(o=x.a.setDatasetVersionStatusToComplete),a&&(o=x.a.setDatasetVersionStatusToReviewed),o(this.props.collectionID,e,t,n).catch(function(o){return i.handleRequestError("submit version for "+(r?"review":"")+(a?"approval":""),o.status),P.a.add(P.b.unexpectedRuntimeError,{message:"Error updating review state for version "+e+"/editions/"+t+"/versions/"+n+" to '"+(r?"Complete":"")+(a?"Reviewed":"")+"' in collection '"+i.props.collectionID+"'. Error: "+JSON.stringify(o)}),console.error("Error updating review state for version "+e+"/editions/"+t+"/versions/"+n+" to '"+(r?"Complete":"")+(a?"Reviewed":"")+"' in collection '"+i.props.collectionID+"'",o),o})}},{key:"updateVersionMetadata",value:function(e,t,n,r){var a=this;return v.a.updateVersionMetadata(this.props.params.datasetID,this.props.params.edition,this.props.params.version,r).catch(function(e){return a.handleRequestError("save version metadata updates",e.status),console.error("Unable to save version metadata updates for '"+a.state.versionID+"'",e),P.a.add(P.b.unexpectedRuntimeError,{message:"Unable to save version metadata updates for '"+a.state.versionID+"'. Error: "+JSON.stringify(e)}),e})}},{key:"updateDimensions",value:function(e){var t=this;return this.state.dimensions.some(function(e){return e.hasChanged})?v.a.updateInstanceDimensions(e,this.state.dimensions).catch(function(n){return t.handleRequestError("save updates to dimensions",n.status),console.error("Unable to save version dimension updates for dimensions - '"+e+"'",n),P.a.add(P.b.unexpectedRuntimeError,{message:"Unable to save version dimension updates for dimensions - '"+e+"'. Error: "+JSON.stringify(n)}),n}):Promise.resolve()}},{key:"confirmEditionAndCreateVersion",value:function(e,t,n){var r=this;return v.a.confirmEditionAndCreateVersion(e,t,n).catch(function(t){return r.handleRequestError("save version metadata updates",t.status),console.error("Unable to confirm instance edition for '"+e+"'",t),P.a.add(P.b.unexpectedRuntimeError,{message:"Unable to confirm instance edition for '"+e+"'. Error: "+JSON.stringify(t)}),t})}},{key:"getNewVersion",value:function(e){var t=this;return v.a.getInstance(e).then(function(e){return[null,e]}).catch(function(e){t.handleRequestError("get details for this version",e.status),console.error("Unable to get version '"+t.state.versionID+"'",e),P.a.add(P.b.unexpectedRuntimeError,{message:"Unable to get version '"+t.state.versionID+"'. Error: "+JSON.stringify(e)})})}},{key:"addVersionToCollection",value:function(e,t,n){var r=this;return x.a.addDatasetVersion(this.props.collectionID,e,t,n).catch(function(a){return r.handleRequestError("add version to this collection",a.status),console.error("Unable to add version 'datasets/"+e+"/editions/"+t+"/versions/"+n+"' to the collection '"+r.props.collectionID+"'",a),P.a.add(P.b.unexpectedRuntimeError,{message:"Unable to add version 'datasets/"+e+"/editions/"+t+"/versions/"+n+"' to the collection '"+r.props.collectionID+"'. Error: "+JSON.stringify(a)}),a})}},{key:"updateInstanceVersion",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r,a){var i,o,s,l,u,c,p,d,f,m,g,v,y,b,w,E,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r||a,o=this.props.params.datasetID,this.setState({isSavingData:!0}),!this.state.isInstance){e.next=50;break}return e.next=6,this.confirmEditionAndCreateVersion(this.props.params.instanceID,this.state.selectedEdition,t);case 6:return s=e.sent,e.next=9,this.updateDimensions(this.props.params.instanceID);case 9:if(l=e.sent,i&&s&&this.handleRequestError("submit version for "+(r?"review":"")+(a?"approval":""),void 0),!l||!s){e.next=14;break}return this.setState({isSavingData:!1}),e.abrupt("return");case 14:if(!s){e.next=17;break}return this.setState({isSavingData:!1}),e.abrupt("return");case 17:return e.next=19,this.getNewVersion(this.props.params.instanceID);case 19:if(u=e.sent,c=M(u,2),p=c[0],d=c[1],!p){e.next=26;break}return this.setState({isSavingData:!1}),e.abrupt("return");case 26:if(f=d.edition,m=d.version,!this.state.isInstance||i){e.next=37;break}return e.next=31,this.addVersionToCollection(o,f,m);case 31:if(g=e.sent){e.next=35;break}return this.props.dispatch(n.i(h.push)(k.a.resolve("/datasets/"+o+"/editions/"+f+"/versions/"+m+"/metadata?collection="+this.props.collectionID))),e.abrupt("return");case 35:return this.setState({isSavingData:!1}),e.abrupt("return");case 37:if(i){e.next=40;break}return this.setState({isSavingData:!1}),e.abrupt("return");case 40:return e.next=42,this.updateVersionReviewState(o,f,m,r,a);case 42:if(!(v=e.sent)){e.next=47;break}return console.log("updateReviewStateErr: "+v),this.setState({isSavingData:!1}),e.abrupt("return");case 47:return this.setState({isSavingData:!1}),this.props.dispatch(n.i(h.push)(k.a.resolve("/collections/"+this.props.collectionID))),e.abrupt("return");case 50:return y=this.props.params.edition,b=this.props.params.version,e.next=54,this.updateVersionMetadata(o,y,b,t);case 54:if(e.t0=e.sent,!i){e.next=61;break}return e.next=58,this.updateVersionReviewState(o,y,b,r,a);case 58:e.t1=e.sent,e.next=64;break;case 61:return e.next=63,Promise.resolve();case 63:e.t1=e.sent;case 64:return e.t2=e.t1,e.next=67,this.updateDimensions(this.state.versionID);case 67:if(e.t3=e.sent,w=[e.t0,e.t2,e.t3],E=w[0],_=w[1],!E){e.next=74;break}return this.setState({isSavingData:!1}),e.abrupt("return");case 74:if(!_){e.next=77;break}return this.setState({isSavingData:!1}),e.abrupt("return");case 77:this.setState({isSavingData:!1}),i&&this.props.dispatch(n.i(h.push)(k.a.resolve("/collections/"+this.props.collectionID)));case 79:case"end":return e.stop()}},e,this)}));return e}()},{key:"mapTypeContentsToCard",value:function(e,t){return"usageNotes"===t?e.map(function(e){return{title:e.title,id:e.key}}):e.map(function(e){return{title:"alerts"===t?j.a.format(e.date,"dddd, dd/mm/yyyy h:MMTT"):e.name,id:e.key}})}},{key:"mapEditionsToSelectOptions",value:function(){var e=this;return this.props.recipes.find(function(t){return t.output_instances[0].dataset_id===e.props.params.datasetID}).output_instances[0].editions.map(function(e){return{id:e,name:e}})}},{key:"mapDimensionsToInputs",value:function(e){var t=this;return e.map(function(e){return p.a.createElement("div",{key:e.id},p.a.createElement(E.a,{value:e.label?e.label:e.name.charAt(0).toUpperCase()+e.name.slice(1),id:e.name,name:"dimension-name",label:"Dimension title",onChange:t.handleInputChange,disabled:t.state.isReadOnly||t.state.isSavingData||t.state.isFetchingDimensionsData}),p.a.createElement(E.a,{value:e.description,type:"textarea",id:e.name,name:"dimension-description",label:"Learn more (optional)",onChange:t.handleInputChange,disabled:t.state.isReadOnly||t.state.isSavingData||t.state.isFetchingDimensionsData}))})}},{key:"handleEditRelatedClick",value:function(e,t){var n={showModal:!0,modalType:e,editKey:t,hasChanges:!0},r=void 0;if("alerts"===e&&(r=this.state.alerts.find(function(e){return e.key===t}),n=L({},n,{titleInput:r.date,descInput:r.description,checkboxInput:!0})),"changes"===e&&(r=this.state.changes.find(function(e){return e.key===t}),n=L({},n,{titleInput:r.name,descInput:r.description})),"usageNotes"===e&&(r=this.state.usageNotes.find(function(e){return e.key===t}),n=L({},n,{titleInput:r.title,descInput:r.note})),!r)return console.error("Unable to find data for content item:",e,t),void P.a.add(P.b.runtimeWarning,{message:"Unable to find data for content item. Type: '"+e+"', key: '"+t+"'"});this.setState(n)}},{key:"handleDeleteRelatedClick",value:function(e,t){function n(e,t){return e.filter(function(e){return e.key!==t})}return"alerts"===e?void this.setState({alerts:n(this.state.alerts,t),hasChanges:!0}):"changes"===e?void this.setState({changes:n(this.state.changes,t),hasChanges:!0}):"usageNotes"===e?void this.setState({usageNotes:n(this.state.usageNotes,t),hasChanges:!0}):(console.warn("Attempt to remove a related content type that is not recognised",e),void P.a.add(P.b.unexpectedRuntimeError,"Attempt to remove a related content type that is not recognised: '"+e+"'"))}},{key:"editRelatedLink",value:function(e,t){var n=this,r=function(r){return r.map(function(r){return r.key!==t?r:"alerts"===e?L({},r,{date:n.state.titleInput,description:n.state.descInput,type:"alert",hasChanged:!0}):"changes"===e?L({},r,{name:n.state.titleInput,description:n.state.descInput,type:"summary of changes",hasChanged:!0}):void 0})};if("alerts"===e)return void this.setState({alerts:r(this.state.alerts),hasChanges:!0});"changes"===e&&this.setState({changes:r(this.state.changes),hasChanges:!0}),console.warn("Attempt to edit a related content type that is not recognised",e),P.a.add(P.b.unexpectedRuntimeError,"Attempt to edit a related content type that is not recognised: '"+e+"'")}},{key:"handleBackButton",value:function(){if(this.state.hasChanges)return void this.setState({showModal:!0});var e=k.a.resolve("/datasets"+(this.props.collectionID?"?collection="+this.props.collectionID:""));this.props.dispatch(n.i(h.push)(e))}},{key:"handleRelatedContentCancel",value:function(){this.setState({showModal:!1,modalType:"",editKey:"",descInput:"",titleInput:""})}},{key:"handleAddRelatedClick",value:function(e,t){this.setState({showModal:!0,modalType:e,modalTitle:t})}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,r=t.name,i=t.id;if("add-related-content-title"===r)this.setState({titleInput:n}),null!=this.state.titleError&&this.setState({titleError:null});else if("add-related-content-desc"===r)this.setState({descInput:n}),null!=this.state.descError&&this.setState({descError:null});else if("dimension-name"===r){var o=void 0;o=this.state.dimensions.map(function(e){return e.name===i?L({},e,{label:n,hasChanged:!0}):e}),this.setState({dimensions:o})}else if("dimension-description"===r){var s=void 0;s=this.state.dimensions.map(function(e){return e.name===i?L({},e,{description:n,hasChanged:!0}):e}),this.setState({dimensions:s})}else this.setState(a({},r,n));this.state.hasChanges||this.setState({hasChanges:!0})}},{key:"handleSelectChange",value:function(e){var t,n=e.target,r=n.id,i=n.value;"default-option"===i&&(i=""),this.setState((t={},a(t,r,i),a(t,"hasChanges",!0),t))}},{key:"handleReleaseDateChange",value:function(e){var t=e.target.value,n=t?new Date(t):"";this.setState({releaseDateError:"",releaseDate:n,hasChanges:!0})}},{key:"handleRelatedContentSubmit",value:function(e){if(e.preventDefault(),""==this.state.titleInput||""==this.state.descInput)""==this.state.titleInput&&this.setState({titleError:"You must provide a value"}),""==this.state.descInput&&this.setState({descError:"You must provide a description"});else{if("alerts"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("alerts",this.state.editKey);else{var t=this.state.alerts.concat({date:this.state.titleInput,description:this.state.descInput,key:T()(),hasChanged:!0,type:"alert"});this.setState({alerts:t})}else if("changes"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("changes",this.state.editKey);else{var n=this.state.changes.concat({name:this.state.titleInput,description:this.state.descInput,key:T()(),hasChanged:!0,type:"summary of changes"});this.setState({changes:n})}this.setState({showModal:!1,modalType:"",editKey:"",titleInput:"",descInput:"",hasChanges:!0})}}},{key:"handleUsageNoteSave",value:function(e){var t={showModal:!1,modalType:"",editKey:"",titleInput:"",descInput:"",checkboxInput:!1,hasChanges:!0};if(!this.state.usageNotes||0===this.state.usageNotes.length){var n=[{key:e.id,title:e.title,note:e.note,hasChanged:!0,type:"usageNotes"}];return void this.setState(L({},t,{usageNotes:n}))}if(this.state.usageNotes.some(function(t){return t.key===e.id})){var a=this.state.usageNotes.map(function(t){return t.key!==e.id?t:L({},t,{hasChanged:!0,title:e.title,note:e.note,type:"usageNotes"})});return void this.setState(L({},t,{usageNotes:a}))}var i=[].concat(r(this.state.usageNotes));i.push({key:e.id,title:e.title,note:e.note,hasChanged:!0,type:"usageNotes"}),this.setState(L({},t,{usageNotes:i}))}},{key:"handleAlertSave",value:function(e){var t={showModal:!1,modalType:"",editKey:"",titleInput:"",descInput:"",checkboxInput:!1,hasChanges:!0};if(!this.state.alerts||0===this.state.alerts.length){var n=[{key:e.id,date:e.date,description:e.description,hasChanged:!0,type:e.isCorrection?"correction":""}];return void this.setState(L({},t,{alerts:n}))}if(this.state.alerts.some(function(t){return t.key===e.id})){var a=this.state.alerts.map(function(t){return t.key!==e.id?t:L({},t,{hasChanged:!0,date:e.date,description:e.description,type:e.isCorrection?"correction":""})});return void this.setState(L({},t,{alerts:a}))}var i=[].concat(r(this.state.alerts));i.push({key:e.id,date:e.date,description:e.description,hasChanged:!0,type:e.isCorrection?"correction":""}),this.setState(L({},t,{alerts:i}))}},{key:"addErrorToSummary",value:function(e,t){return t.some(function(t){return t===e})?t:[].concat(r(t),[e])}},{key:"removeErrorFromSummary",value:function(e,t){if(t.some(function(t){return t===e}))return t.filter(function(t){return t!==e});return t}},{key:"handleSave",value:function(e,t,n){e.preventDefault();var r=!1,a=this.state.formErrors;this.state.edition?a=this.removeErrorFromSummary("You must select an edition",a):(this.setState({editionError:"You must select an edition"}),a=this.addErrorToSummary("You must select an edition",a),r=!0),this.state.releaseDate?a=this.removeErrorFromSummary("You must add a release date",a):(this.setState({releaseDateError:"You must add a release date"}),a=this.addErrorToSummary("You must add a release date",a),r=!0),this.setState({formErrors:a}),a.length&&window.scrollTo(0,0);var i=this.state.alerts.filter(function(e){return e.hasChanged}),o=this.state.changes.filter(function(e){return e.hasChanged});if(this.state.edition&&this.state.isInstance&&!r){var s={edition:this.state.edition,alerts:i,latest_changes:o,usage_notes:this.state.usageNotes};return this.state.releaseDate&&(s.release_date=this.state.releaseDate.toISOString()),void this.updateInstanceVersion(s,t,n)}this.state.isInstance||r||this.updateInstanceVersion({release_date:this.state.releaseDate.toISOString(),alerts:i,latest_changes:o,usage_notes:this.state.usageNotes},t,n)}},{key:"handleSaveAndSubmitForReview",value:function(e){this.handleSave(e,!0,!1)}},{key:"handleSaveAndMarkAsReviewed",value:function(e){this.handleSave(e,!1,!0)}},{key:"renderReviewActions",value:function(){if(this.props.instance||this.props.version){var e=this.state.isInstance?this.props.instance:this.props.version;if(!this.state.isReadOnly&&!this.state.isFetchingCollectionData)return p.a.createElement(N.a,{areDisabled:this.state.isSavingData||this.state.isReadOnly,includeSaveLabels:!0,reviewState:e.reviewState,userEmail:this.props.userEmail,lastEditedBy:e.lastEditedBy,onSubmit:this.handleSaveAndSubmitForReview,onApprove:this.handleSaveAndMarkAsReviewed,notInCollectionYet:!e.collection_id})}}},{key:"renderModal",value:function(){if(!0===this.state.showModal)return"alerts"===this.state.modalType?p.a.createElement(I.a,{date:this.state.titleInput,description:this.state.descInput,isCorrection:this.state.checkboxInput,onSave:this.handleAlertSave,onCancel:this.handleRelatedContentCancel,id:this.state.editKey}):"usageNotes"===this.state.modalType?p.a.createElement(A.a,{title:this.state.titleInput,note:this.state.descInput,onSave:this.handleUsageNoteSave,onCancel:this.handleRelatedContentCancel,id:this.state.editKey}):this.state.modalType?p.a.createElement(D.a,{sizeClass:"grid__col-lg-5 grid__col-md-8 grid__col-xs-10"},p.a.createElement(R.a,{name:"related-content-modal",formTitle:this.state.modalTitle,titleInput:this.state.titleInput,descInput:this.state.descInput,titleLabel:"Name",descLabel:"Description",onCancel:this.handleRelatedContentCancel,onFormInput:this.handleInputChange,onFormSubmit:this.handleRelatedContentSubmit,titleError:this.state.titleError,descError:this.state.descError,requiresDescription:!0,requiresURL:!1})):p.a.createElement(D.a,{sizeClass:"grid__col-lg-5 grid__col-md-8 grid__col-xs-10"},p.a.createElement("div",null,p.a.createElement("div",{className:"modal__header"},p.a.createElement("h2",null,"Warning!")),p.a.createElement("div",{className:"modal__body"},p.a.createElement("p",null,"You will lose any changes by going back without saving. "),p.a.createElement("br",null),p.a.createElement("p",null,'Click "Continue" to lose changes and go back to the previous page or click "Cancel" to stay on the current page.')),p.a.createElement("div",{className:"modal__footer"},p.a.createElement("button",{type:"button",className:"btn btn--primary btn--margin-right",onClick:this.handleModalSubmit},"Continue"),p.a.createElement("button",{type:"button",className:"btn",onClick:this.handleRelatedContentCancel},"Cancel"))))}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"grid grid--justify-center"},p.a.createElement("div",{className:"grid__col-xs-10 grid__col-md-6 grid__col-lg-4"},p.a.createElement("div",{className:"margin-top--2"},"◀ ",p.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),p.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Metadata"),p.a.createElement("p",null,"This information is specific to this new data and can be updated each time new data is added."),this.state.isFetchingData?p.a.createElement("div",{className:"margin-top--2"},p.a.createElement("div",{className:"loader loader--dark"})):p.a.createElement("div",{className:"padding-bottom--2"},p.a.createElement("h2",{className:"margin-top--1"},this.state.title||this.props.params.datasetID+" (title not available)"),p.a.createElement(_.a,{errors:this.state.formErrors}),p.a.createElement("form",{onSubmit:this.handleSave},p.a.createElement("div",{className:"margin-bottom--2"},p.a.createElement("div",{className:"grid__col-6"},p.a.createElement(w.a,{id:"edition",label:"Edition",contents:this.mapEditionsToSelectOptions(),onChange:this.handleSelectChange,error:this.state.editionError,selectedOption:this.state.edition,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement(E.a,{id:"release_date",label:"Release date",type:"date",value:this.state.releaseDate&&this.state.releaseDate.toISOString().substring(0,10),onChange:this.handleReleaseDateChange,error:this.state.releaseDateError,selectedOption:this.state.edition,disabled:this.state.isReadOnly||this.state.isSavingData})),p.a.createElement("div",{className:"grid grid--justify-space-between"},p.a.createElement("h2",{className:"inline-block"}," In this dataset "),p.a.createElement("div",null,p.a.createElement("button",{onClick:this.populateDimensionInputs,className:"btn btn--primary margin-left--1",type:"button"},"Fill from latest version"))),this.mapDimensionsToInputs(this.state.dimensions),p.a.createElement("div",{className:"margin-bottom--1"},p.a.createElement("h2",{className:"margin-top--2 margin-bottom--1"},"What's changed"),p.a.createElement("p",null,"The information below can change with each edition/version."),p.a.createElement("div",{className:"margin-bottom--1"},p.a.createElement("h3",{className:"margin-top--1 margin-bottom--1"},"Alerts and corrections"),p.a.createElement(S.a,{contents:this.mapTypeContentsToCard(this.state.alerts,"alerts"),type:"alerts",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick,disabled:this.state.isReadOnly||this.state.isSavingData}),p.a.createElement("button",{disabled:this.state.isReadOnly||this.state.isSavingData,type:"button",className:"btn btn--link",onClick:function(){e.handleAddRelatedClick("alerts")}},"Add an alert")),p.a.createElement("div",{className:"margin-bottom--1"},p.a.createElement("h3",{className:"margin-top--1 margin-bottom--1"},"Summary of changes"),p.a.createElement(S.a,{contents:this.mapTypeContentsToCard(this.state.changes,"changes"),type:"changes",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick}),p.a.createElement("button",{disabled:this.state.isSavingData||this.state.isReadOnly,type:"button",className:"btn btn--link",onClick:function(){e.handleAddRelatedClick("changes","Add a change")}},"Add change"))),p.a.createElement("div",{className:"margin-bottom--1"},p.a.createElement("h2",{className:"margin-top--2 margin-bottom--1"},"Usage notes"),p.a.createElement(S.a,{contents:this.mapTypeContentsToCard(this.state.usageNotes,"usageNotes"),type:"usageNotes",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick}),p.a.createElement("button",{disabled:this.state.isSavingData||this.state.isReadOnly,type:"button",className:"btn btn--link",onClick:function(){e.handleAddRelatedClick("usageNotes","Add a usage note")}},"Add usage note"))),p.a.createElement("button",{type:"submit",className:"btn btn--primary margin-bottom--1",disabled:this.state.isReadOnly||this.state.isFetchingCollectionData||this.state.isSavingData},"Save"),p.a.createElement("span",{className:"margin-left--1"},this.renderReviewActions()),this.state.isSavingData&&p.a.createElement("div",{className:"loader loader--dark loader--inline margin-left--1"}),!this.state.isInstance&&p.a.createElement(f.g,{className:"margin-left--1",to:k.a.resolve("preview?collection="+this.props.collectionID,!this.props.collectionID)},"Preview")))),!0===this.state.showModal&&this.renderModal())}}]),t}(c.Component);q.propTypes=F,t.a=n.i(d.connect)(u)(q)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(36),p=n(695),d=n(81),f=n.n(d),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g={date:u.a.string,description:u.a.string,isCorrection:u.a.bool,onCancel:u.a.func.isRequired,onSave:u.a.func.isRequired,id:u.a.string},v=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={currentDate:"",newDate:{value:"",errorMsg:""},newDescription:{value:"",errorMsg:""},newID:"",newIsCorrectionBoolean:null},n.maximumAlertDate=c.a.format(c.a.addYear(10),"yyyy-mm-dd"),n.handleDateChange=n.handleDateChange.bind(n),n.handleDescriptionChange=n.handleDescriptionChange.bind(n),n.handleIsCorrectionChange=n.handleIsCorrectionChange.bind(n),n.handleSave=n.handleSave.bind(n),n}return i(t,e),m(t,[{key:"componentWillMount",value:function(){if(this.props.id||this.setState({newID:f()()}),this.props.date)return void this.setState({currentDate:this.formatDateToInput(new Date(this.props.date))});this.setState({currentDate:this.formatDateToInput(new Date)})}},{key:"formatDateToInput",value:function(e){return c.a.format(e.toISOString(),"yyyy-mm-dd'T'HH:MM")}},{key:"handleDateChange",value:function(e){this.setState({newDate:{value:e.target.value||"",errorMsg:""},currentDate:""})}},{key:"handleDescriptionChange",value:function(e){this.setState({newDescription:{value:e.target.value||"",errorMsg:""}})}},{key:"handleIsCorrectionChange",value:function(e){this.setState({newIsCorrectionBoolean:e})}},{key:"handleSave",value:function(e){e.preventDefault();var t=!1,n={};if(this.state.newDate.value||this.state.currentDate||(n=h({},n,{newDate:h({},this.state.newDate,{errorMsg:"A date and time must be chosen"})}),t=!0),this.state.newDescription.value||this.props.description||(n=h({},n,{newDescription:h({},this.state.newDescription,{errorMsg:"An alert must have a description"})}),t=!0),t)return void this.setState(n);var r=this.props.isCorrection||!1;null!==this.state.newIsCorrectionBoolean&&(r=this.state.newIsCorrectionBoolean);var a={description:this.state.newDescription.value||this.props.description||"",date:new Date(this.state.newDate.value||this.state.currentDate).toISOString(),isCorrection:r,id:this.props.id||this.state.newID};this.props.onSave(a)}},{key:"render",value:function(){return s.a.createElement(p.a,{date:{value:this.state.newDate.value||this.state.currentDate,errorMsg:this.state.newDate.errorMsg,onChange:this.handleDateChange},description:{value:this.state.newDescription.value||this.props.description,errorMsg:this.state.newDescription.errorMsg,onChange:this.handleDescriptionChange},isCorrection:{value:this.state.newIsCorrectionBoolean||this.props.isCorrection,onChange:this.handleIsCorrectionChange},onSave:this.handleSave,onCancel:this.props.onCancel,isEditing:Boolean(this.props.date)||Boolean(this.props.description)})}}]),t}(o.Component);v.propTypes=g,t.a=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(51),p=n(28),d=n(327),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h={date:u.a.shape({onChange:u.a.func.isRequired,value:u.a.string,errorMsg:u.a.string}).isRequired,description:u.a.shape({onChange:u.a.func.isRequired,value:u.a.string,errorMsg:u.a.string}).isRequired,isCorrection:u.a.shape({onChange:u.a.func.isRequired,value:u.a.bool}).isRequired,onCancel:u.a.func.isRequired,onSave:u.a.func.isRequired,isEditing:u.a.bool},m=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),f(t,[{key:"render",value:function(){return s.a.createElement(c.a,{sizeClass:"grid__col-lg-5 grid__col-md-8 grid__col-xs-10"},s.a.createElement("form",{onSubmit:this.props.onSave},s.a.createElement("div",{className:"modal__header"},s.a.createElement("h2",null,this.props.isEditing?"Edit":"Add"," alert")),s.a.createElement("div",{className:"modal__body"},s.a.createElement("div",{className:"grid__col-md-5 grid__col-sm-6 grid__col-sm-8"},s.a.createElement(p.a,{id:"alert-date",type:"datetime-local",value:this.props.date.value,error:this.props.date.errorMsg,label:"Date",onChange:this.props.date.onChange})),s.a.createElement(p.a,{type:"textarea",id:"alert-description",value:this.props.description.value,error:this.props.description.errorMsg,label:"Description",onChange:this.props.description.onChange}),s.a.createElement(d.a,{id:"alert-is-correction",onChange:this.props.isCorrection.onChange,isChecked:this.props.isCorrection.value,label:"Correction"})),s.a.createElement("div",{className:"modal__footer"},s.a.createElement("button",{className:"btn btn--primary",type:"submit"},"Save"),s.a.createElement("button",{className:"btn margin-left--1",type:"button",onClick:this.props.onCancel},"Cancel"))))}}]),t}(o.Component);m.propTypes=h,t.a=m},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(4),l=n.n(s),u=n(3),c=n.n(u),p=n(81),d=n.n(p),f=n(51),h=n(28),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g={onCancel:c.a.func.isRequired,onSave:c.a.func.isRequired,title:c.a.string,note:c.a.string,id:c.a.string.isRequired},v=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={title:e.title,note:e.note,id:e.id||d()()},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return o(t,e),m(t,[{key:"handleChange",value:function(e,t){this.setState(r({},e,t.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSave({id:this.state.id,title:this.state.title,note:this.state.note})}},{key:"render",value:function(){var e=this;return l.a.createElement(f.a,{sizeClass:"grid__col-lg-5 grid__col-md-8 grid__col-xs-10"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"modal__header"},l.a.createElement("h2",null,"Usage note:")),l.a.createElement("div",{className:"modal__body"},l.a.createElement(h.a,{id:"usage-note-title",label:"Title",value:this.state.title,onChange:function(t){return e.handleChange("title",t)}}),l.a.createElement(h.a,{id:"usage-note-description",label:"Note",value:this.state.note,onChange:function(t){return e.handleChange("note",t)},type:"textarea"})),l.a.createElement("div",{className:"modal__footer"},l.a.createElement("button",{className:"btn btn--primary",type:"submit"},"Save"),l.a.createElement("button",{className:"btn margin-left--1",type:"button",onClick:this.props.onCancel},"Cancel"))))}}]),t}(s.Component);v.propTypes=g,t.a=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(30),u=n(3),c=n.n(u),p=n(647),d=n(194),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h={isReadOnly:c.a.bool,isFetchingCollectionData:c.a.bool,isSavingData:c.a.bool,isLoadingPreview:c.a.bool,collectionID:c.a.string,previewURL:c.a.string,userEmail:c.a.string.isRequired,dataset:c.a.shape({collection_id:c.a.string,lastEditedBy:c.a.string,reviewState:c.a.string}),title:c.a.string.isRequired,backLinkPath:c.a.string.isRequired,onSubmitForReview:c.a.func,onMarkAsReviewed:c.a.func},m=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),f(t,[{key:"renderReviewActions",value:function(){if(!this.props.isReadOnly&&!this.props.isFetchingCollectionData)return s.a.createElement(d.a,{areDisabled:this.props.isSavingData||this.props.isReadOnly,includeSaveLabels:!1,reviewState:this.props.dataset.reviewState,userEmail:this.props.userEmail,lastEditedBy:this.props.dataset.lastEditedBy,onSubmit:this.props.onSubmitForReview,onApprove:this.props.onMarkAsReviewed,notInCollectionYet:!this.props.dataset.collection_id})}},{key:"render",value:function(){return s.a.createElement("div",{className:"preview"},s.a.createElement("div",{className:"preview__header grid grid--justify-center"},s.a.createElement("div",{className:"grid__col-6 margin-top--1 margin-bottom--1"},s.a.createElement("form",null,"◀ ",s.a.createElement(l.g,{to:this.props.backLinkPath},"Back"),s.a.createElement("h2",{className:"inline-block margin-left--1"},this.props.title),s.a.createElement("div",null,this.renderReviewActions()),this.props.isSavingData&&s.a.createElement("div",{className:"loader loader--dark loader--centre margin-left--1"})))),this.props.isLoadingPreview&&s.a.createElement("div",{className:"grid grid--align-content-center grid--full-height grid--direction-column grid--justify-center grid--align-center"},s.a.createElement("p",{className:"font-size--16 font-weight--600 margin-bottom--1"},"Loading preview"),s.a.createElement("div",{className:"loader loader--dark loader--centre loader--large"})),this.props.previewURL&&s.a.createElement(p.a,{hidden:!1,path:this.props.previewURL}))}}]),t}(o.Component);m.propTypes=h,t.a=m},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){try{return"/datasets/"+e.links.dataset.id+"/editions/"+e.edition+"/versions/"+e.version}catch(t){return console.error("Error attempting to build path for a dataset version",t,e),w.a.add(w.b.unexpectedRuntimeError,{message:"Error attempting to build path for a dataset version. Error: "+JSON.stringify(t)+". Version data: "+JSON.stringify}),v.a.add({type:"warning",message:"Unable to build path for this version, so some functionality may not work as expected",autoDismiss:6e3,isDismissable:!0}),""}}function l(e){return{version:e.state.datasets.activeVersion||{},dataset:e.state.datasets.activeDataset,versionURL:e.state.datasets.activeVersion?s(e.state.datasets.activeVersion):null,collectionID:e.routing.locationBeforeTransitions.query.collection,userEmail:e.state.user.email}}var u=n(4),c=n.n(u),p=n(16),d=n(14),f=(n.n(d),n(3)),h=n.n(f),m=n(20),g=n(37),v=n(10),y=n(52),b=n(22),w=n(90),E=n(338),_=n(697),C=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S={dispatch:h.a.func.isRequired,userEmail:h.a.string.isRequired,params:h.a.shape({datasetID:h.a.string.isRequired,edition:h.a.string.isRequired,version:h.a.string.isRequired}).isRequired,versionURL:h.a.string,collectionID:h.a.string,version:h.a.shape({title:h.a.string,collection_id:h.a.string,links:h.a.shape({latest_version:h.a.shape({href:h.a.string})}),reviewState:h.a.string,lastEditedBy:h.a.string}),dataset:h.a.shape({id:h.a.string.isRequired,title:h.a.string.isRequired})},D=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isSavingData:!1,isReadOnly:!1,isLoadingPreview:!1,isFetchingCollectionData:!1,isFetchingDatasetData:!1,errorFetchingDataset:!1},n.handleSubmitForReview=n.handleSubmitForReview.bind(n),n.handleMarkAsReviewed=n.handleMarkAsReviewed.bind(n),n.handlePreviewLoad=n.handlePreviewLoad.bind(n),n.backLinkPath=m.a.resolve("metadata?collection="+n.props.collectionID,!n.props.collectionID),n}return o(t,e),k(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({isLoadingPreview:!0}),this.props.collectionID||this.setState({isReadOnly:!0}),this.props.version.reviewState||this.updateReviewStateData(),this.props.dataset&&this.props.dataset.id===this.props.params.datasetID||this.updateDatasetData(),g.a.getVersion(this.props.params.datasetID,this.props.params.edition,this.props.params.version).then(function(t){e.setState({isLoadingPreview:!1}),e.props.dispatch(n.i(b.h)(t))}).catch(function(t){var n="/datasets/"+e.props.params.datasetID+"/editions/"+e.props.params.edition+"/versions/"+e.props.params.version;switch(t.status){case 401:break;case 403:var r={type:"neutral",message:"You do not have permission to view dataset version '"+n+"'"};v.a.add(r);break;case 404:var a={type:"warning",message:"Dataset version '"+n+"' can't be found"};v.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There was a network error whilst getting dataset version '"+n+"'. Please check your connection and try again"};v.a.add(i);break;default:var o={type:"warning",message:"An unexpected error occurred whilst getting dataset version '"+n+"'"};v.a.add(o)}e.setState({isLoadingPreview:!1}),console.error("Error fetching dataset version '"+n+"'",t)})}},{key:"updateDatasetData",value:function(){var e=this;this.setState({isFetchingDatasetData:!0});var t=this.props.params.datasetID;g.a.get(t).then(function(t){var r=t.next||t.current;e.props.dispatch(n.i(b.i)(r)),e.setState({isFetchingDatasetData:!1})}).catch(function(t){console.error("Error fetching dataset on version preview screen",t),w.a.add(w.b.unexpectedRuntimeError,{message:"Error fetching dataset on version preview screen. Error:"+JSON.stringify(t)}),e.setState({isFetchingDatasetData:!1,errorFetchingDataset:!0})})}},{key:"getCollection",value:function(e){return y.a.get(e).then(function(e){return[null,e]}).catch(function(e){return[e,null]})}},{key:"updateReviewStateData",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,r,a,i,o,s,l,u,c,p,d,f,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isFetchingCollectionData:!0}),t=this.props.collectionID,r=this.props.params.datasetID,a=this.props.params.edition,i=this.props.params.version,e.prev=5,e.next=8,this.getCollection(t);case 8:if(o=e.sent,s=C(o,2),l=s[0],u=s[1],!l){e.next=14;break}throw l;case 14:if(c=u.datasetVersions.find(function(e){return e.id===r&&e.edition===a&&e.version===i})){e.next=18;break}return this.setState({isFetchingCollectionData:!1}),e.abrupt("return");case 18:p=c.lastEditedBy,d=c.state.charAt(0).toLowerCase()+c.state.slice(1),this.props.dispatch(n.i(b.j)(p,d)),this.setState({isFetchingCollectionData:!1}),e.next=42;break;case 24:e.prev=24,e.t0=e.catch(5),this.setState({isFetchingCollectionData:!1,isReadOnly:!0}),e.t1=e.t0.status,e.next=401===e.t1?30:403===e.t1?31:404===e.t1?34:37;break;case 30:return e.abrupt("break",40);case 31:return f={type:"neutral",message:"You do not permission to get details for collection '"+t+"'",isDismissable:!0},v.a.add(f),e.abrupt("break",40);case 34:return h={type:"warning",message:"Could not find collection '"+t+"'",isDismissable:!0},v.a.add(h),e.abrupt("break",40);case 37:return m={type:"warning",message:"An unexpected error's occurred whilst trying to get the collection '"+t+"'",isDismissable:!0},v.a.add(m),e.abrupt("break",40);case 40:w.a.add(w.b.unexpectedRuntimeError,{message:"Unable to update metadata screen with version's review/edit status in collection "+t+". Error: "+JSON.stringify(e.t0)}),console.error("Unable to update metadata screen with version's review/edit status in collection '"+t+"'",e.t0);case 42:case"end":return e.stop()}},e,this,[[5,24]])}));return e}()},{key:"updateDatasetReviewState",value:function(e,t){var n=this,r=Promise.resolve;return e&&(r=y.a.setDatasetVersionStatusToComplete),t&&(r=y.a.setDatasetVersionStatusToReviewed),r(this.props.collectionID,this.props.params.datasetID,this.props.params.edition,this.props.params.version).catch(function(r){return w.a.add(w.b.unexpectedRuntimeError,{message:"Error updating review state for dataset version '"+n.props.versionURL+"' to '"+(e?"Complete":"")+(t?"Reviewed":"")+"' in collection '"+n.props.collectionID+"'. Error: "+JSON.stringify(r)}),console.error("Error updating review state for dataset '"+n.props.versionURL+"' to '"+(e?"Complete":"")+(t?"Reviewed":"")+"' in collection '"+n.props.collectionID+"'",r),r})}},{key:"handleUpdateReviewState",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isSavingData:!0}),e.next=3,this.updateDatasetReviewState(t,r);case 3:if(!(a=e.sent)){e.next=8;break}return n.i(E.a)(void 0,a,t,r,this.props.collectionID),this.setState({isSavingData:!1}),e.abrupt("return");case 8:this.props.dispatch(n.i(d.push)(m.a.resolve("/collections/"+this.props.collectionID)));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSubmitForReview",value:function(){this.handleUpdateReviewState(!0,!1)}},{key:"handleMarkAsReviewed",value:function(){this.handleUpdateReviewState(!1,!0)}},{key:"handlePreviewLoad",value:function(){this.setState({isLoadingPreview:!1})}},{key:"renderDatasetTitle",value:function(){return this.state.isFetchingDatasetData?"Loading dataset title...":!this.state.errorFetchingDataset&&this.props.dataset&&this.props.dataset.title?this.props.dataset.title+": "+this.props.params.edition+" (version "+this.props.params.version+")":"[failed to get dataset title]: "+this.props.params.edition+" (version "+this.props.params.version+")"}},{key:"render",value:function(){return c.a.createElement(_.a,{onSubmitForReview:this.handleSubmitForReview,onMarkAsReviewed:this.handleMarkAsReviewed,isReadOnly:this.state.isReadOnly,isFetchingCollectionData:this.state.isFetchingCollectionData,isSavingData:this.state.isSavingData,isLoadingPreview:this.state.isLoadingPreview,collectionID:this.props.collectionID,previewURL:this.props.versionURL?"//"+location.host+this.props.versionURL:null,userEmail:this.props.userEmail,dataset:this.props.version,title:this.renderDatasetTitle(),backLinkPath:this.backLinkPath})}}]),t}(u.Component);D.propTypes=S,t.a=n.i(p.connect)(l)(D)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(30),p=n(125),d=n.n(p),f=(n(20),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),h={values:u.a.arrayOf(u.a.shape({title:u.a.string.isRequired,date:u.a.string,id:u.a.string.isRequired,instances:u.a.arrayOf(u.a.shape({date:u.a.string,edition:u.a.string.isRequired,version:u.a.oneOfType([u.a.string.isRequired,u.a.number.isRequired]),status:u.a.string}))}))},m=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),f(t,[{key:"renderDatasetInstances",value:function(e){return e.map(function(e,t){if(void 0!==e)return s.a.createElement("div",{key:t,className:"grid simple-table__row"},s.a.createElement("div",{className:"grid__col-2"},s.a.createElement("span",null,s.a.createElement(c.g,{to:e.url},"View"))),s.a.createElement("div",{className:"grid__col-3"},e.status),s.a.createElement("div",{className:"grid__col-3"},d()(e.date,"dd/mm/yy HH:MM")),s.a.createElement("div",{className:"grid__col-2"},e.edition),s.a.createElement("div",{className:"grid__col-1"},e.version))})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"selectable-table"},s.a.createElement("div",{className:"selectable-table__heading"},"Title"),this.props.values.map(function(t,n){return s.a.createElement("details",{key:n,className:"selectable-table__details"},s.a.createElement("summary",{className:"selectable-table__summary"},s.a.createElement("div",{className:"grid"},s.a.createElement("div",{className:"grid__col-10"},s.a.createElement("strong",null,t.title)))),s.a.createElement("div",null,s.a.createElement(c.g,{className:"inline-block margin-bottom--1",to:t.datasetURL}," Edit dataset details"),t.instances.length>0&&s.a.createElement("div",null,s.a.createElement("div",{className:"grid simple-table__heading"},s.a.createElement("div",{className:"grid__col-2"}),s.a.createElement("div",{className:"grid__col-3"},"Status"),s.a.createElement("div",{className:"grid__col-3"},"Date last modified"),s.a.createElement("div",{className:"grid__col-2"},"Edition"),s.a.createElement("div",{className:"grid__col-1"},"Version")),e.renderDatasetInstances(t.instances))))}))}}]),t}(o.Component);t.a=m,m.propTypes=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{isAuthenticated:e.state.user.isAuthenticated,rootPath:e.state.rootPath}}var s=n(4),l=n.n(s),u=n(16),c=n(14),p=(n.n(c),n(3)),d=n.n(p),f=n(701),h=n(51),m=n(643),g=n(10),v=n(54),y=n(333),b=n(53),w=n(89),E=n(671),_=n(23),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k={dispatch:d.a.func.isRequired,isAuthenticated:d.a.bool.isRequired,rootPath:d.a.string.isRequired,location:d.a.object},S=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:{value:"",errorMsg:""},password:{value:"",errorMsg:""},requestPasswordChange:!1,isSubmitting:!1},n.handleSubmit=n.handleSubmit.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handlePasswordChangeCancel=n.handlePasswordChangeCancel.bind(n),n.handlePasswordChangeSuccess=n.handlePasswordChangeSuccess.bind(n),n}return i(t,e),C(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.dispatch(n.i(c.push)(this.props.rootPath+"/collections"))}},{key:"postLoginCredentials",value:function(e){return v.a.post("/zebedee/login",e,!0,!0)}},{key:"handleLogin",value:function(e){var t=this;this.postLoginCredentials(e).then(function(e){w.a.add("access_token",e),b.a.getPermissions(t.state.email.value).then(function(e){b.a.setUserState(e),n.i(E.a)(t.props.location.query.redirect)}).catch(function(e){t.setState({isSubmitting:!1}),g.a.add({type:"warning",message:"Unable to login due to an error getting your account's permissions. Please refresh and try again.",autoDismiss:8e3,isDismissable:!0}),_.a.event("Error getting a user's permissions on login",_.a.error(e)),console.error("Error getting a user's permissions on login",e)})}).catch(function(e){if(e){var n={type:"warning",isDismissable:!0,autoDismiss:15e3};switch(e.status){case 404:var r=Object.assign({},t.state.email,{errorMsg:"Email address not recognised"});t.setState({email:r,isSubmitting:!1});break;case 401:var a=Object.assign({},t.state.email,{errorMsg:"Incorrect password"});t.setState({password:a,isSubmitting:!1});break;case 417:t.setState({requestPasswordChange:!0});break;case"UNEXPECTED_ERR":console.error(y.a.UNEXPECTED_ERR),n.message=y.a.UNEXPECTED_ERR,g.a.add(n);break;case"RESPONSE_ERR":console.error(y.a.RESPONSE_ERR),n.message=y.a.RESPONSE_ERR,g.a.add(n);break;case"FETCH_ERR":console.error(y.a.FETCH_ERR),n.message=y.a.FETCH_ERR,g.a.add(n)}}t.setState({isSubmitting:!1})})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email.value,password:this.state.password.value};this.setState({isSubmitting:!0}),this.handleLogin(t)}},{key:"handleInputChange",value:function(e){var t=e.target.id,n=e.target.value;switch(t){case"email":this.setState({email:{value:n,errorMsg:""}});break;case"password":this.setState({password:{value:n,errorMsg:""}})}}},{key:"handlePasswordChangeSuccess",value:function(e){var t={email:this.state.email.value,password:e};this.handleLogin(t)}},{key:"handlePasswordChangeCancel",value:function(e){e.preventDefault(),this.setState({requestPasswordChange:!1})}},{key:"render",value:function(){var e={inputs:[{id:"email",label:"Email",type:"email",onChange:this.handleInputChange,error:this.state.email.errorMsg},{id:"password",label:"Password",type:"password",onChange:this.handleInputChange,error:this.state.password.errorMsg}],onSubmit:this.handleSubmit,isSubmitting:this.state.isSubmitting};return l.a.createElement("div",null,l.a.createElement(f.a,{formData:e}),this.state.requestPasswordChange?l.a.createElement(h.a,{sizeClass:"grid__col-3"},l.a.createElement(m.a,{handleCancel:this.handlePasswordChangeCancel,handleSuccess:this.handlePasswordChangeSuccess,currentPassword:this.state.password.value,email:this.state.email.value})):"")}}]),t}(s.Component);S.propTypes=k,t.a=n.i(u.connect)(o)(S)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(28),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={formData:u.a.shape({inputs:u.a.arrayOf(u.a.shape({id:u.a.string,label:u.a.string,type:u.a.string,onChange:u.a.func,error:u.a.string})),onSubmit:u.a.func,isSubmitting:u.a.bool})},h=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),d(t,[{key:"render",value:function(){var e=this.props.formData.inputs,t=this.props.formData.isSubmitting;return s.a.createElement("div",{className:"grid grid--justify-center"},s.a.createElement("div",{className:"grid__col-3"},s.a.createElement("h1",{className:"text-center"},"Login"),s.a.createElement("form",{className:"form",onSubmit:this.props.formData.onSubmit},e.map(function(e,n){return s.a.createElement(c.a,p({key:n},e,{disabled:t,allowAutoComplete:!0}))}),s.a.createElement("button",{type:"submit",className:"btn btn--primary margin-top--1",disabled:t},"Log in"),t?s.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):"")))}}]),t}(o.Component);t.a=h,h.propTypes=f},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{page:e.routing.locationBeforeTransitions.query.page}}var l=n(4),u=n.n(l),c=n(16),p=n(14),d=(n.n(p),n(30)),f=n(3),h=n.n(f),m=n(133),g=n(705),v=n(704),y=n(703),b=n(706),w=n(90),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C={location:h.a.shape({pathname:h.a.string.isRequired,query:h.a.object.isRequired}).isRequired,page:h.a.string,dispatch:h.a.func.isRequired},k=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingLogs:!1,logs:null,logCount:null,pageSize:10,logsTimestamp:parseInt(n.props.location.query.timestamp)||(new Date).getTime()},n}return o(t,e),_(t,[{key:"componentWillMount",value:function(){var e=this;if(!this.props.location.query.timestamp){var t=E({},this.props.location,{query:E({},this.props.location.query,{timestamp:this.state.logsTimestamp})});this.props.dispatch(n.i(p.push)(t))}this.setState({isFetchingLogs:!0}),w.a.length().then(function(t){return e.setState({logCount:t}),e.props.page&&"1"!==e.props.page?void w.a.getAll(10*(e.props.page-1),e.state.pageSize,e.state.logsTimestamp).then(function(t){e.setState({isFetchingLogs:!1,logs:t})}):t>10?void w.a.getAll(0,10,e.state.logsTimestamp).then(function(t){e.setState({isFetchingLogs:!1,logs:t})}):void w.a.getAll(null,null,e.state.logsTimestamp).then(function(t){e.setState({isFetchingLogs:!1,logs:t})})})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.page!==e.page&&"1"===e.page)return this.setState({isFetchingLogs:!0}),void w.a.getAll(0,10,this.state.logsTimestamp).then(function(e){t.setState({isFetchingLogs:!1,logs:e})});this.props.page!==e.page&&(this.setState({isFetchingLogs:!0}),w.a.getAll(10*(e.page-1),this.state.pageSize,this.state.logsTimestamp).then(function(e){t.setState({isFetchingLogs:!1,logs:e})}))}},{key:"mapLogToComponent",value:function(e,t){var n=[w.b.pingFailed,w.b.requestFailed,w.b.socketError,w.b.passwordChangeError,w.b.unexpectedRuntimeError,w.b.socketBufferFull],r={};if(r[w.b.changedRoute]=g.a,r[w.b.shownNotification]=y.a,r[w.b.shownWarning]=y.a,r[w.b.pingFailed]=v.a,r[w.b.requestSent]=v.a,r[w.b.requestReceived]=v.a,r[w.b.requestFailed]=v.a,r[w.b.unexpectedRuntimeError]=b.a,r[e.type]){var a=r[e.type];return u.a.createElement(a,E({key:t},e,{isFailure:n.includes(e.type)}))}return u.a.createElement(m.a,E({key:t},e,{isFailure:n.includes(e.type)}))}},{key:"renderPagination",value:function(){var e=this,t=Math.ceil(this.state.logCount/10),n=[].concat(r(Array(t))),a=n.map(function(t,n){return u.a.createElement("li",{className:"pagination__item",key:n},e.renderPageLink(n+1))});return u.a.createElement("ul",{className:"pagination"},a)}},{key:"renderPageLink",value:function(e){return 1===e&&!this.props.page||e===parseInt(this.props.page)?u.a.createElement("span",{className:"pagination__link pagination__link--active"},e):u.a.createElement(d.g,{className:"pagination__link",to:this.props.location.pathname+"?page="+e+"&timestamp="+this.state.logsTimestamp},e)}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"grid grid--justify-center"},u.a.createElement("div",{className:"grid__col-4"},this.state.isFetchingLogs?u.a.createElement("div",{className:"margin-top--2"},u.a.createElement("div",{className:"loader loader--dark"})):u.a.createElement("div",{className:"logs"},this.state.logs.map(function(t,n){return e.mapLogToComponent(t,n)}),this.state.logCount>10&&this.renderPagination(),0===this.state.logCount&&u.a.createElement("p",null,"No logs to display"))))}}]),t}(l.Component);k.propTypes=C,t.a=n.i(c.connect)(s)(k)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(133),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={children:u.a.node,created:u.a.string.isRequired,type:u.a.string.isRequired,location:u.a.string.isRequired,instanceID:u.a.string.isRequired,payload:u.a.shape({type:u.a.string||u.a.number,message:u.a.string})},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){return s.a.createElement(c.a,this.props,s.a.createElement("div",null,"Type: ",this.props.payload.type),s.a.createElement("div",null,"Message: ",this.props.payload.message))}}]),t}(o.Component);f.propTypes=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(133),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={children:u.a.node,created:u.a.string.isRequired,type:u.a.string.isRequired,location:u.a.string.isRequired,instanceID:u.a.string.isRequired,payload:u.a.shape({status:u.a.number,message:u.a.string,URI:u.a.string,method:u.a.string,retryCount:u.a.number,willRetry:u.a.bool})},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){return s.a.createElement(c.a,this.props,this.props.payload.URI&&s.a.createElement("div",null,"URI: ",this.props.payload.URI),this.props.payload.method&&s.a.createElement("div",null,"Method: ",this.props.payload.method),this.props.payload.status&&s.a.createElement("div",null,"Status: ",this.props.payload.status),this.props.payload.message&&s.a.createElement("div",null,"Message: ",this.props.payload.message))}}]),t}(o.Component);f.propTypes=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(133),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={children:u.a.node,created:u.a.string.isRequired,type:u.a.string.isRequired,location:u.a.string.isRequired,instanceID:u.a.string.isRequired,payload:u.a.shape({pathname:u.a.string,search:u.a.string})},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){return s.a.createElement(c.a,this.props,s.a.createElement("div",null,"Routed to: ",this.props.payload.pathname,this.props.payload.search))}}]),t}(o.Component);f.propTypes=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(133),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={children:u.a.node,created:u.a.string.isRequired,type:u.a.string.isRequired,location:u.a.string.isRequired,instanceID:u.a.string.isRequired,payload:u.a.shape({message:u.a.string.isRequired}).isRequired},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){return s.a.createElement(c.a,this.props,s.a.createElement("div",null,"Error message: ",this.props.payload.message))}}]),t}(o.Component);f.propTypes=d,t.a=f},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{selectedPageUri:e.state.preview.selectedPage,workingOn:e.state.global.workingOn,rootPath:e.state.rootPath,enableDatasetImport:e.state.config.enableDatasetImport}}var l=n(4),u=n.n(l),c=n(3),p=n.n(c),d=n(16),f=n(14),h=(n.n(f),n(54)),m=n(10),g=n(22),v=n(89),y=n(330),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w={selectedPageUri:p.a.string,workingOn:p.a.shape({id:p.a.string.isRequired,name:p.a.string}),enableDatasetImport:p.a.bool.isRequired,rootPath:p.a.string.isRequired,routeParams:p.a.object.isRequired,dispatch:p.a.func.isRequired},E=function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),b(t,[{key:"componentWillMount",value:function(){var e=this.props.routeParams.collectionID;this.fetchCollectionAndPages(e),this.props.workingOn&&this.props.workingOn.id||this.props.dispatch(n.i(g.C)(e,""));var t=new URL(window.location.href).searchParams.get("url");t&&this.props.dispatch(n.i(g.D)(t)),v.a.get("collection")||v.a.add("collection",e,null)}},{key:"componentWillUnmount",value:function(){this.props.dispatch(n.i(g.E)()),this.props.dispatch(n.i(g.F)())}},{key:"fetchCollectionAndPages",value:function(e){var t=this;this.fetchCollection(e).then(function(a){var i=[].concat(r(a.inProgress),r(a.complete),r(a.reviewed));if(t.props.enableDatasetImport){var o=[].concat(r(a.datasetVersions),r(a.datasets)),s=i.concat(t.mapDatasetPages(o));t.props.dispatch(n.i(g.G)({collectionID:e,name:a.name,pages:s}))}else{var l=i;t.props.dispatch(n.i(g.G)({collectionID:e,name:a.name,pages:l}))}t.props.workingOn&&t.props.workingOn.name||t.props.dispatch(n.i(g.C)(e,a.name))}).catch(function(r){var a={type:"warning",message:"There was an error getting data for this collection. Please try refreshing the page",isDismissable:!0};switch(r.status){case 401:return a.message="You do not have permission to view this data, so you have been redirected to the collections screen",a.type="neutral",m.a.add(a),t.props.dispatch(n.i(f.replace)(t.props.rootPath+"/collections/")),void v.a.remove("collection");case 404:return a.message="That collection doesn't appear to exist, so you have been redirected to the collections screen",m.a.add(a),void t.props.dispatch(n.i(f.replace)(t.props.rootPath+"/collections/"))}m.a.add(a),console.error("Error fetching "+e+":\n",r)})}},{key:"mapDatasetPages",value:function(e){try{return e.map(function(e){return{uri:new URL(e.uri).pathname,description:{title:e.title||{},edition:e.version?"version "+e.version:null}}})}catch(e){console.error("Error maping dataset pages :\n",e)}}},{key:"fetchCollection",value:function(e){return h.a.get("/zebedee/collectionDetails/"+e,!0,!0)}},{key:"render",value:function(){return u.a.createElement("div",{className:"preview"},u.a.createElement(y.a,{path:this.props.selectedPageUri||"/"}))}}]),t}(l.Component);E.propTypes=w,t.a=n.i(d.connect)(s)(E)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{activeTeam:e.state.teams.active,allTeams:e.state.teams.all,userIsAdmin:e.state.user.isAdmin,rootPath:e.state.rootPath}}var s=n(4),l=n.n(s),u=n(16),c=n(14),p=(n.n(c),n(3)),d=n.n(p),f=n(22),h=n(120),m=n(20),g=n(10),v=n(23),y=n(650),b=n(190),w=n(709),E=n(712),_=n(714),C=n(710),k=n(51),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O={dispatch:d.a.func.isRequired,allTeams:d.a.arrayOf(d.a.object).isRequired,activeTeam:d.a.object,rootPath:d.a.string.isRequired,routes:d.a.arrayOf(d.a.object).isRequired,userIsAdmin:d.a.bool.isRequired,params:d.a.object.isRequired},T=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isUpdatingAllTeams:!1,isUpdatingTeamMembers:!1,drawerIsAnimatable:!1,clearActiveTeam:!1,isEditingTeam:!1,isDeletingTeam:!1},n.handleTeamClick=n.handleTeamClick.bind(n),n.handleMembersEditClick=n.handleMembersEditClick.bind(n),n.handleDrawerTransitionEnd=n.handleDrawerTransitionEnd.bind(n),n.handleDrawerCancelClick=n.handleDrawerCancelClick.bind(n),n.handleTeamDeleteClick=n.handleTeamDeleteClick.bind(n),n.handleTeamDeleteSuccess=n.handleTeamDeleteSuccess.bind(n),n.handleTeamCreateSuccess=n.handleTeamCreateSuccess.bind(n),n}return i(t,e),D(t,[{key:"componentWillMount",value:function(){this.fetchTeams()}},{key:"componentWillReceiveProps",value:function(e){var t=e.allTeams.find(function(t){return t.path===e.params.team});if(t&&e.activeTeam.id!==t.id)return this.fetchMembers(t.name),this.props.params.team||this.setState({drawerIsAnimatable:!0}),void this.props.dispatch(n.i(f.y)(t));!e.params.team&&e.activeTeam&&e.activeTeam.id&&this.setState({drawerIsAnimatable:!0,clearActiveTeam:!0}),"edit"===e.routes[e.routes.length-1].path&&this.setState({isEditingTeam:!0}),"delete"===e.routes[e.routes.length-1].path&&this.setState({isDeletingTeam:!0})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.drawerIsAnimatable!==t.drawerIsAnimatable||(!("edit"!==e.routes[e.routes.length-1].path||!t.isEditingTeam)||(!("delete"!==e.routes[e.routes.length-1].path||!t.isDeletingTeam)||!!e.allTeams&&(!t.isUpdatingAllTeams||0!==e.allTeams.length)))}},{key:"componentWillUnmount",value:function(){this.props.dispatch(n.i(f.z)())}},{key:"handleDrawerTransitionEnd",value:function(){this.setState({drawerIsAnimatable:!1}),this.state.clearActiveTeam&&(this.setState({clearActiveTeam:!1}),this.props.dispatch(n.i(f.z)()))}},{key:"handleMembersEditClick",value:function(){this.props.dispatch(n.i(c.push)(location.pathname+"/edit"))}},{key:"handleDrawerCancelClick",value:function(){this.props.dispatch(n.i(c.push)(m.a.resolve("../")))}},{key:"handleTeamDeleteClick",value:function(){this.props.dispatch(n.i(c.push)(location.pathname+"/delete"))}},{key:"handleTeamDeleteSuccess",value:function(){this.props.dispatch(n.i(c.push)(m.a.resolve("../../")));var e={type:"positive",message:"Team '"+this.props.activeTeam.name+"' successfully deleted",isDismissable:!0,autoDismiss:15e3};g.a.add(e),this.fetchTeams()}},{key:"handleTeamCreateSuccess",value:function(){this.fetchTeams()}},{key:"fetchTeams",value:function(){var e=this;this.setState({isUpdatingAllTeams:!0}),h.a.getAll().then(function(t){var r=t.map(function(e){var t=m.a.sanitise(e.name+"_"+e.id);return Object.assign({},e,{path:t})}),a=e.props.params.team;if(e.props.dispatch(n.i(f.A)(r)),e.setState({isUpdatingAllTeams:!1}),a){var i=r.find(function(e){return e.path===a});if(i&&i!==e.props.activeTeam)return void e.props.dispatch(n.i(f.y)(i));if(!i){var o={message:"Team '"+a+"' is not recognised so you've been redirected to the teams screen",type:"neutral",autoDismiss:15e3,isDismissable:!0};g.a.add(o),e.props.dispatch(n.i(c.push)(m.a.resolve("../")))}}}).catch(function(e){switch(v.a.event("Error fetching teams",v.a.data({status_code:e.status}),v.a.error(e)),e.status){case 401:break;case"RESPONSE_ERR":var t={type:"warning",message:"An error's occurred whilst trying to get teams. You may only be able to see previously loaded information but won't be able to edit any team members",isDismissable:!0};g.a.add(t);break;case"UNEXPECTED_ERR":var n={type:"warning",message:"An unexpected error's occurred whilst trying to get teams. You may only be able to see previously loaded information but won't be able to edit any team members",isDismissable:!0};g.a.add(n);break;case"FETCH_ERR":var r={type:"warning",message:"There's been a network error whilst trying to get teams. You may only be able to see previously loaded information and not be able to edit any team members",isDismissable:!0};g.a.add(r);break;default:v.a.event("Unhandled error fetching teams",v.a.data({status_code:e.status}),v.a.error(e));var a={type:"warning",message:"There's been an error fetching the teams. You may only be able to see previously loaded information.",isDismissable:!0};g.a.add(a)}})}},{key:"fetchMembers",value:function(e){var t=this;this.setState({isUpdatingTeamMembers:!0}),h.a.get(e).then(function(r){e===t.props.activeTeam.name&&(t.props.dispatch(n.i(f.B)(r.members)),t.setState({isUpdatingTeamMembers:!1}))}).catch(function(t){switch(v.a.event("Error fetching members of team",v.a.data({status_code:t.status,team:e}),v.a.error(t)),t.status){case 404:var n={type:"warning",message:"Couldn't find members for the team: '"+e+"'. This team may have been deleted.",isDismissable:!0};g.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get the members for the team '"+e+"'",isDismissable:!0};g.a.add(r);break;case"UNEXPECTED_ERR":var a={type:"warning",message:"An unexpected error's occurred whilst trying to get the members for the team '"+e+"'",isDismissable:!0};g.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to get the members for the team '"+e+"'",isDismissable:!0};g.a.add(i);break;default:v.a.event("Unhandled error fetching team",v.a.data({status_code:t.status,team:e}),v.a.error(t));var o={type:"warning",message:"There's been an error fetching the members of team '${teamName}'",isDismissable:!0};g.a.add(o)}})}},{key:"handleTeamClick",value:function(e){if(!e.isSelected){var t=m.a.sanitise(e.name+"_"+e.id);this.props.dispatch(n.i(c.push)(this.props.rootPath+"/teams/"+t))}}},{key:"renderDrawer",value:function(){return l.a.createElement(b.a,{isVisible:!(!this.props.activeTeam||!this.props.activeTeam.id||this.state.clearActiveTeam),isAnimatable:this.state.drawerIsAnimatable,handleTransitionEnd:this.handleDrawerTransitionEnd},this.props.activeTeam&&this.props.activeTeam.id?l.a.createElement(E.a,S({},this.props.activeTeam,{userIsAdmin:this.props.userIsAdmin,onCancel:this.handleDrawerCancelClick,onDelete:this.handleTeamDeleteClick,onEditMembers:this.handleMembersEditClick,isShowingLoader:this.state.isUpdatingTeamMembers,isReadOnly:this.state.isUpdatingAllTeams})):"")}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"grid grid--justify-space-around"},l.a.createElement("div",{className:"grid__col-4"},l.a.createElement("h1",{className:"text-center"},"Select a team"),l.a.createElement(y.a,{items:this.props.allTeams,activeItem:this.props.activeTeam,isUpdating:this.state.isUpdatingAllTeams,heading:"Name",handleItemClick:this.handleTeamClick})),l.a.createElement("div",{className:"grid__col-4"},l.a.createElement("h1",{className:"text-center"},"Create a team"),l.a.createElement(w.a,{onCreateSuccess:this.handleTeamCreateSuccess}))),this.renderDrawer(),"edit"===this.props.routes[this.props.routes.length-1].path&&this.props.activeTeam&&this.props.activeTeam.id?l.a.createElement(k.a,{sizeClass:"grid__col-8"},l.a.createElement(_.a,{isUpdatingMembers:this.state.isUpdatingTeamMembers})):"","delete"===this.props.routes[this.props.routes.length-1].path&&this.props.activeTeam&&this.props.activeTeam.id?l.a.createElement(k.a,{sizeClass:"grid__col-3"},l.a.createElement(C.a,{name:this.props.activeTeam.name,onDeleteSuccess:this.handleTeamDeleteSuccess})):"")}}]),t}(s.Component);T.propTypes=O,t.a=n.i(u.connect)(o)(T)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(120),p=n(10),d=n(23),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m={onCreateSuccess:u.a.func.isRequired},g=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={input:{value:"",error:""},isAwaitingResponse:!1},n.handleSubmit=n.handleSubmit.bind(n),n.handleFormBlur=n.handleFormBlur.bind(n),n.handleFormInput=n.handleFormInput.bind(n),n}return i(t,e),h(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.validateTeamName()){var n=this.state.input.value.trim();this.setState({isAwaitingResponse:!0,input:f({},this.state.input,{value:n})}),c.a.add(n).then(function(){var e=Object.assign({},t.state.input,{value:"",error:""});t.setState({input:e,isAwaitingResponse:!1}),t.props.onCreateSuccess(),d.a.event("successfully created team",d.a.data({team:n}))}).catch(function(e){switch(d.a.event("Error creating team",d.a.data({status_code:e.status,team:n}),d.a.error(e)),t.setState({isAwaitingResponse:!1}),e.status){case 401:break;case 403:var r=Object.assign({},t.state.input,{error:"You don't have permission to create a team"});t.setState({input:r});break;case 409:var a=Object.assign({},t.state.input,{error:"Team '"+n+"' already exists"});t.setState({input:a});break;default:d.a.event("Unhandled error creating team",d.a.data({status_code:e.status,team:n}),d.a.error(e));var i=Object.assign({},t.state.input,{error:"An unexpected error has occured"});t.setState({input:i});var o={type:"warning",message:"An unexpected error has occured whilst creating team '"+n+"'",isDismissable:!0};p.a.add(o)}})}}},{key:"handleFormBlur",value:function(e){var t=f({},this.state.input,{value:e.target.value.trim()});this.setState({input:t})}},{key:"handleFormInput",value:function(e){var t=Object.assign({},this.state.input,{value:e.target.value,error:""});this.setState({input:t})}},{key:"validateTeamName",value:function(){var e=this,t=this.state.input.value,n=function(t){var n=Object.assign({},e.state.input,{error:t});e.setState({input:n})};return t.length?/\S/.test(t)?!(t.length>=255)||(n("Team name must be less than 255 characters"),!1):(n("Team name must have a least 1 character that isn't whitespace"),!1):(n("Team name can't be left empty"),!1)}},{key:"render",value:function(){return s.a.createElement("form",{className:"form "+(this.state.input.error?" form__input--error":""),onSubmit:this.handleSubmit,name:"create-new-team"},s.a.createElement("div",{className:"form__input"},s.a.createElement("label",{className:"form__label",htmlFor:"team-name"},"Team name"),this.state.input.error&&s.a.createElement("div",{className:"error-msg"},this.state.input.error),s.a.createElement("input",{type:"text",id:"team-name",className:"input",disabled:this.state.isAwaitingResponse,value:this.state.input.value,onChange:this.handleFormInput,onBlur:this.handleFormBlur})),s.a.createElement("button",{className:"btn btn--positive",disabled:this.state.isAwaitingResponse},"Create"),this.state.isAwaitingResponse&&s.a.createElement("div",{className:"form__loader loader loader--dark"}))}}]),t}(o.Component);g.propTypes=m,t.a=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{name:e.state.teams.active.name,teams:e.state.teams.all,pathname:e.routing.locationBeforeTransitions.pathname}}var s=n(4),l=n.n(s),u=n(16),c=n(14),p=(n.n(c),n(3)),d=n.n(p),f=n(120),h=n(22),m=n(10),g=n(23),v=n(711),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b={name:d.a.string.isRequired,teams:d.a.arrayOf(d.a.shape({id:d.a.number,name:d.a.string.isRequired,members:d.a.arrayOf(d.a.string),path:d.a.string})),dispatch:d.a.func.isRequired,onDeleteSuccess:d.a.func.isRequired,pathname:d.a.string.isRequired},w=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={formIsPosting:!1,input:{value:"",error:""},parentPath:n.props.pathname.substr(0,n.props.pathname.lastIndexOf("/delete"))},n.handleCancel=n.handleCancel.bind(n),n.handleFormInput=n.handleFormInput.bind(n),n.handleFormSubmit=n.handleFormSubmit.bind(n),n}return i(t,e),y(t,[{key:"handleCancel",value:function(){this.props.dispatch(n.i(c.push)(this.state.parentPath))}},{key:"handleFormInput",value:function(e){var t=Object.assign({},this.state.input,{value:e.target.value,error:""});this.setState({input:t})}},{key:"handleFormSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.input.value!==this.props.name){g.a.event("error deleting team. The team name provided doesn't match the one user is trying to delete",g.a.data({"user-inputted-value":this.state.input.value,team:this.props.name}));var r=Object.assign({},this.state.input,{error:"The team name you've provided doesn't match the one you're trying to delete"});return void this.setState({input:r})}this.setState({formIsPosting:!0}),f.a.remove(this.props.name).then(function(){var e=t.props.teams.filter(function(e){return e.name!==t.props.name});t.props.dispatch(n.i(h.A)(e)),t.props.onDeleteSuccess(),g.a.event("successfully deleted team",g.a.data({team:t.props.name}))}).catch(function(e){switch(g.a.event("Error deleting team",g.a.data({status_code:e.status,team:t.props.name}),g.a.error(e)),t.setState({formIsPosting:!1}),e.status){case 401:break;case 404:var n={type:"warning",message:"The team '"+t.props.name+"' doesn't exist - another user may have deleted it",isDismissable:!0};m.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error occurred whilst trying to delete team '"+t.props.name+"'",isDismissable:!0};m.a.add(r);break;case"FETCH_ERR":var a={type:"warning",message:"A network error occurred whilst trying to delete team '"+t.props.name+"'",isDismissable:!0};m.a.add(a);break;case"UNEXPECTED_ERR":var i={type:"warning",message:"An unexpected error occurred whilst trying to delete team '"+t.props.name+"'",isDismissable:!0};m.a.add(i);break;default:var o={type:"warning",message:"An unexpected error occurred whilst trying to delete team '"+t.props.name+"'",isDismissable:!0};m.a.add(o)}})}},{key:"render",value:function(){return l.a.createElement(v.a,{name:this.props.name,onCancel:this.handleCancel,onFormInput:this.handleFormInput,onFormSubmit:this.handleFormSubmit,input:this.state.input,isDisabled:this.state.formIsPosting})}}]),t}(s.Component);w.propTypes=b,t.a=n.i(u.connect)(o)(w)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(28),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={input:u.a.shape({value:u.a.string,error:u.a.string}),name:u.a.string.isRequired,isPosting:u.a.bool,onCancel:u.a.func.isRequired,onFormSubmit:u.a.func.isRequired,onFormInput:u.a.func.isRequired},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"form",onSubmit:this.props.onFormSubmit},s.a.createElement("div",{className:"modal__header"},s.a.createElement("h2",null,"Delete team: ",this.props.name)),s.a.createElement("div",{className:"modal__body"},s.a.createElement("div",{className:"form__input"},s.a.createElement(c.a,{type:"text",label:"Confirm the name of the team you'd like to delete",id:"team-name",error:this.props.input.error,onChange:this.props.onFormInput,isFocused:!0}))),s.a.createElement("div",{className:"modal__footer"},s.a.createElement("button",{disabled:this.props.isPosting,className:"btn btn--warning btn--margin-right"},"Delete"),s.a.createElement("button",{type:"button",disabled:this.props.isPosting,className:"btn",onClick:this.props.onCancel},"Cancel"),this.props.isPosting&&s.a.createElement("div",{className:"loader"})))}}]),t}(o.Component);f.propTypes=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={id:u.a.number.isRequired,name:u.a.string.isRequired,members:u.a.arrayOf(u.a.string),userIsAdmin:u.a.bool.isRequired,onEditMembers:u.a.func.isRequired,onCancel:u.a.func.isRequired,onDelete:u.a.func.isRequired,isShowingLoader:u.a.bool,isReadOnly:u.a.bool},d=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"renderMembers",value:function(){var e=this.props.members,t=s.a.createElement("div",null,s.a.createElement("h3",{className:"margin-bottom--1"},"Members:"),s.a.createElement("ul",{className:"list list--neutral"},e.map(function(e,t){return s.a.createElement("li",{className:"list__item",key:t},e)})));return e.length>0?t:s.a.createElement("p",null,"This team has no members")}},{key:"render",value:function(){return s.a.createElement("div",{className:"drawer__container"},s.a.createElement("div",{className:"drawer__heading"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--3 margin-bottom--2"},s.a.createElement("h2",{id:"team-name"},this.props.name)))),this.props.isReadOnly&&s.a.createElement("div",{className:"drawer__banner drawer__banner--dark"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},s.a.createElement("div",null,s.a.createElement("h3",null,"Read only"),s.a.createElement("p",null,"The list of teams if still being fetched so you can't edit or delete a team"))))),this.props.userIsAdmin&&s.a.createElement("div",{className:"drawer__banner"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},s.a.createElement("div",null,s.a.createElement("button",{onClick:this.props.onEditMembers,disabled:this.props.isReadOnly,className:"btn btn--primary"},"Add / remove members"))))),s.a.createElement("div",{className:"drawer__body"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--1"},this.props.isShowingLoader&&s.a.createElement("div",{className:"grid grid--align-center margin-top--4"},s.a.createElement("div",{className:"loader loader--large loader--dark"})),this.props.members&&this.renderMembers()))),s.a.createElement("div",{className:"drawer__footer"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},s.a.createElement("div",null,this.props.userIsAdmin&&s.a.createElement("button",{className:"btn btn--warning btn--margin-right",disabled:this.props.isReadOnly,onClick:this.props.onDelete},"Delete team"),s.a.createElement("button",{className:"btn",onClick:this.props.onCancel},"Close"))))))}}]),t}(o.Component);d.propTypes=p,t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=n(715),p=n(28),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={name:u.a.string.isRequired,members:u.a.arrayOf(u.a.string),users:u.a.arrayOf(u.a.object),disabledUsers:u.a.array.isRequired,updatingAllUsers:u.a.bool.isRequired,updatingMembers:u.a.bool.isRequired,showingLoaders:u.a.bool,onUsersSearch:u.a.func,onMembersChange:u.a.func.isRequired,onDone:u.a.func.isRequired,searchTerm:u.a.string},h=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),d(t,[{key:"shouldComponentUpdate",value:function(e){return!this.props.updatingAllUsers||!e.updatingAllUsers}},{key:"renderUsers",value:function(){var e=this;return this.props.users.length>0?s.a.createElement("ul",{className:"list list--neutral"},this.props.users.map(function(t,n){return s.a.createElement(c.a,{key:n,action:"add",onClick:e.props.onMembersChange,email:t.email,isDisabled:-1!==e.props.disabledUsers.indexOf(t.email)})})):s.a.createElement("p",{className:"add-remove__text"},this.props.searchTerm.length>0?s.a.createElement("span",null,'No users match the term "',s.a.createElement("strong",null,this.props.searchTerm),'"'):"No users to display")}},{key:"renderMembers",value:function(){var e=this;return this.props.members.length>0?s.a.createElement("ul",{className:"list list--neutral"},this.props.members.map(function(t,n){return s.a.createElement(c.a,{key:n,action:"remove",onClick:e.props.onMembersChange,email:t,isDisabled:-1!==e.props.disabledUsers.indexOf(t)})})):s.a.createElement("p",{className:"add-remove__text"},"This team has no members")}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid add-remove"},s.a.createElement("div",{className:"grid__col-12"},s.a.createElement("h1",{className:"add-remove__heading"},"Edit team: ",this.props.name)),s.a.createElement("div",{className:"grid__col-6"},s.a.createElement("div",{className:"add-remove__col"},s.a.createElement("div",{className:"grid add-remove__col-heading"},s.a.createElement("h2",{className:"grid__col-6"},"All users"),s.a.createElement("div",{className:"grid__col-6 add-remove__search"},s.a.createElement(p.a,{id:"users-search",label:"Search for an email address",inline:!0,onChange:this.props.onUsersSearch}))),s.a.createElement("div",{className:"add-remove__body "},!this.props.updatingAllUsers&&this.renderUsers(),this.props.showingLoaders&&s.a.createElement("div",{className:"add-remove__loader loader loader--dark"})))),s.a.createElement("div",{className:"grid__col-6"},s.a.createElement("div",{className:"add-remove__col add-remove__col--border-left"},s.a.createElement("h2",{className:"add-remove__col-heading"},"Team members"),s.a.createElement("div",{className:"add-remove__body"},!this.props.updatingAllUsers&&this.renderMembers(),this.props.showingLoaders&&s.a.createElement("div",{className:"add-remove__loader loader loader--dark"})))),s.a.createElement("div",{className:"grid__col-12"},s.a.createElement("div",{className:"add-remove__footer"},s.a.createElement("button",{className:"btn btn--primary",onClick:this.props.onDone,disabled:this.props.disabledUsers.size>0},"Done"))))}}]),t}(o.Component);h.propTypes=f,t.a=h},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{name:e.state.teams.active.name,members:e.state.teams.active.members,rootPath:e.state.rootPath,users:e.state.users.all}}var l=n(4),u=n.n(l),c=n(16),p=n(14),d=(n.n(p),n(3)),f=n.n(d),h=n(22),m=n(53),g=n(120),v=n(10),y=n(23),b=n(713),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E={name:f.a.string.isRequired,users:f.a.arrayOf(f.a.object),members:f.a.arrayOf(f.a.string),isUpdatingMembers:f.a.bool.isRequired,dispatch:f.a.func.isRequired},_=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={editedUsers:null,updatingAllUsers:!1,parentPath:location.pathname.split("/edit")[0],disabledUsers:[],searchTerm:""},n.handleUsersSearch=n.handleUsersSearch.bind(n),n.handleMembersChange=n.handleMembersChange.bind(n),n.handleDone=n.handleDone.bind(n),n}return o(t,e),w(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({updatingAllUsers:!0}),m.a.getAll().then(function(t){var r=t.filter(function(t){return e.props.members.indexOf(t.email)<0});e.props.dispatch(n.i(h.x)(t)),e.setState({editedUsers:r,updatingAllUsers:!1})})}},{key:"componentWillReceiveProps",value:function(e){e.users!==this.props.users&&this.setState({editedUsers:e.users})}},{key:"handleUsersSearch",value:function(e){var t=this,n=e.target.value.toLowerCase(),r=this.props.users.filter(function(e){var r=t.props.members.some(function(t){return t===e.email});return-1!==e.email.toLowerCase().search(n)&&!r});this.setState({editedUsers:r,searchTerm:n})}},{key:"sortUsers",value:function(e){return e.sort(function(e,t){return e.email<t.email?-1:e.email>t.email?1:0})}},{key:"sortMembers",value:function(e){return e.sort(function(e,t){return e<t?-1:e>t?1:0})}},{key:"handleMembersChange",value:function(e){var t=this;y.a.event("Updateing user in team",y.a.data({action:e.action,team:this.props.name,user:e.email}));var a=[].concat(r(this.state.disabledUsers),[e.email]);switch(this.setState({disabledUsers:a}),e.action){case"remove":g.a.removeMember(this.props.name,e.email).then(function(){var a=t.props.members.filter(function(t){return t!==e.email}),i=[].concat(r(t.state.editedUsers),[{email:e.email}]),o=[].concat(r(t.state.disabledUsers));o.splice(o.indexOf(e.email),1),t.setState({editedUsers:t.sortUsers(i),disabledUsers:o}),y.a.event("successfully removed user from team",y.a.data({team:t.props.name,user:e.email})),t.props.dispatch(n.i(h.B)(t.sortMembers(a)))}).catch(function(n){y.a.event("Error removing user",y.a.data({status_code:n.status,team:t.props.name,user:e.email}),y.a.error(n));var a=[].concat(r(t.state.disabledUsers));switch(a.splice(a.indexOf(e.email),1),t.setState({disabledUsers:a}),n.status){case 401:break;case 404:var i={type:"warning",message:"The team '"+t.props.name+"' doesn't exist - another user may have deleted it",isDismissable:!0};v.a.add(i);break;case"RESPONSE_ERR":var o={type:"warning",message:"An error occurred whilst trying to remove '"+e.email+"' from team '"+t.props.name+"'",isDismissable:!0};v.a.add(o);break;case"FETCH_ERR":var s={type:"warning",message:"A network error occurred whilst trying to remove '"+e.email+"' from team '"+t.props.name+"'",isDismissable:!0};v.a.add(s);break;case"UNEXPECTED_ERR":var l={type:"warning",message:"An unexpected error occurred whilst trying to remove '"+e.email+"' from team '"+t.props.name+"'",isDismissable:!0};v.a.add(l);break;default:y.a.event("Unhandled error removing user",y.a.data({status_code:n.status,team:t.props.name,user:e.email}),y.a.error(n));var u={type:"warning",message:"An unexpected error occurred whilst trying to remove '"+e.email+"' from team '"+t.props.name+"'",isDismissable:!0};v.a.add(u)}});break;case"add":g.a.addMember(this.props.name,e.email).then(function(){var a=[].concat(r(t.props.members),[e.email]),i=t.state.editedUsers.filter(function(t){return t.email!==e.email}),o=[].concat(r(t.state.disabledUsers));o.splice(o.indexOf(e.email),1),t.setState({editedUsers:t.sortUsers(i),disabledUsers:o}),y.a.event("successfully added user to team",y.a.data({team:t.props.name,user:e.email})),t.props.dispatch(n.i(h.B)(t.sortMembers(a)))}).catch(function(n){y.a.event("Error adding user",y.a.data({status_code:n.status,team:t.props.name,user:e.email}),y.a.error(n));var a=[].concat(r(t.state.disabledUsers));switch(a.splice(a.indexOf(e.email),1),t.setState({disabledUsers:a}),n.status){case 401:break;case 404:var i={type:"warning",message:"The team '"+t.props.name+"' doesn't exist - another user may have deleted it",isDismissable:!0};v.a.add(i);break;case"RESPONSE_ERR":var o={type:"warning",message:"An error occurred whilst trying to add '"+e.email+"' to team '"+t.props.name+"'",isDismissable:!0};v.a.add(o);break;case"FETCH_ERR":var s={type:"warning",message:"A network error occurred whilst trying to add '"+e.email+"' to team '"+t.props.name+"'",isDismissable:!0};v.a.add(s);break;case"UNEXPECTED_ERR":var l={type:"warning",message:"An unexpected error occurred whilst trying to add '"+e.email+"' to team '"+t.props.name+"'",isDismissable:!0};v.a.add(l);break;default:y.a.event("Unhandled error creating user",y.a.data({status_code:n.status,team:t.props.name,user:e.email}),y.a.error(n));var u={type:"warning",message:"An unexpected error occurred whilst trying to add '"+e.email+"' to team '"+t.props.name+"'",isDismissable:!0};v.a.add(u)}})}}},{key:"handleDone",value:function(){this.props.dispatch(n.i(p.push)(this.state.parentPath))}},{key:"render",value:function(){return u.a.createElement(b.a,{name:this.props.name,users:this.state.editedUsers,members:this.props.members,onUsersSearch:this.handleUsersSearch,onMembersChange:this.handleMembersChange,onDone:this.handleDone,updatingAllUsers:this.state.updatingAllUsers,updatingMembers:this.props.isUpdatingMembers,showingLoaders:this.state.updatingAllUsers||this.props.isUpdatingMembers,disabledUsers:this.state.disabledUsers,searchTerm:this.state.searchTerm})}}]),t}(l.Component);_.propTypes=E,t.a=n.i(c.connect)(s)(_)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={email:u.a.string.isRequired,isDisabled:u.a.bool,onClick:u.a.func.isRequired,action:u.a.oneOf(["add","remove"]).isRequired},d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n}return i(t,e),c(t,[{key:"handleClick",value:function(){this.props.onClick({email:this.props.email,action:this.props.action})}},{key:"render",value:function(){return s.a.createElement("li",{className:"add-remove__item"},s.a.createElement("span",{className:"add-remove__item-title "+(this.props.isDisabled?"disabled":"")},this.props.email),s.a.createElement("button",{onClick:this.handleClick,className:"btn "+("add"===this.props.action?"btn--positive":""),disabled:this.props.isDisabled,"data-email":this.props.email,"data-action":this.props.action},"add"===this.props.action?"Add":"Remove"))}}]),t}(o.Component);d.propTypes=p,t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{recipes:e.state.datasets.recipes,jobs:e.state.datasets.jobs}}var s=n(4),l=n.n(s),u=n(16),c=n(14),p=(n.n(c),n(3)),d=n.n(p),f=n(22),h=n(119),m=n(192),g=n(10),v=(n(642),n(720)),y=n(719),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w={dispatch:d.a.func.isRequired,recipes:d.a.arrayOf(d.a.shape({id:d.a.string.isRequired,alias:d.a.string})),jobs:d.a.arrayOf(d.a.shape({id:d.a.string.isRequired,recipe:d.a.string.isRequired}))},E=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingData:!1,disabledDataset:""},n.handleNewVersionClick=n.handleNewVersionClick.bind(n),n}return i(t,e),b(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({isFetchingData:!0});var t=h.a.getAll(),r=m.a.getAll();Promise.all([t,r]).then(function(t){e.props.dispatch(n.i(f.k)(t[0].items)),e.props.dispatch(n.i(f.t)(t[1])),e.setState({isFetchingData:!1})}).catch(function(t){switch(t.status){case 403:var n={type:"warning",message:"You do not permission to view all datasets.",isDismissable:!0};g.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get all datasets.",isDismissable:!0};g.a.add(r);break;case"FETCH_ERR":var a={type:"warning",message:"There's been a network error whilst trying to get all datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};g.a.add(a);break;case"UNEXPECTED_ERR":var i={type:"warning",message:"An unexpected error has occurred whilst trying to get all datasets.",isDismissable:!0};g.a.add(i);break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to get all datasets.",isDismissable:!0};g.a.add(o)}e.setState({isFetchingData:!1})})}},{key:"shouldComponentUpdate",value:function(e,t){return!(e.recipes.length>0&&!e.jobs&&!t.isFetchingData)}},{key:"handleNewVersionClick",value:function(e){var t=this,r=e.target.getAttribute("data-recipe-id");this.setState({disabledDataset:r}),m.a.create(r).then(function(e){t.props.dispatch(n.i(f.u)(e)),t.props.dispatch(n.i(c.push)(location.pathname+"/"+e.id))}).catch(function(e){switch(t.setState({disabledDataset:""}),e.status){case 403:var n={type:"warning",message:"You do not have permission to upload a new version of this dataset.",isDismissable:!0};g.a.add(n);break;case 404:var r={type:"warning",message:"This dataset was not recognised.",isDismissable:!0};g.a.add(r);break;case"RESPONSE_ERR":var a={type:"warning",message:"An error's occurred whilst trying to create a new version of this dataset.",isDismissable:!0};g.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to create a new version of this dataset. Please check you internet connection and try again in a few moments.",isDismissable:!0};g.a.add(i);break;case"UNEXPECTED_ERR":var o={type:"warning",message:"An unexpected error has occurred whilst trying to create a new version of this dataset.",isDismissable:!0};g.a.add(o);break;default:var s={type:"warning",message:"An unexpected error's occurred whilst trying to create a new version of this dataset.",isDismissable:!0};g.a.add(s)}console.error("Error creating new import job: ",e)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"grid grid--justify-space-around"},l.a.createElement("div",{className:"grid__col-5"},l.a.createElement("h1",null,"Upload a dataset"),this.state.isFetchingData&&l.a.createElement("div",{className:"grid--align-self-start"},l.a.createElement("div",{className:"loader loader--dark"})),this.props.recipes.length>0&&l.a.createElement("ul",{className:"list list--neutral"},this.props.recipes.map(function(t){return l.a.createElement(v.a,{key:t.id,dataset:t,onNewVersionClick:e.handleNewVersionClick,isLoading:t.id===e.state.disabledDataset})}))),l.a.createElement("div",{className:"grid__col-5 margin-top--5"},l.a.createElement("h2",{className:"margin-bottom--1"},"In progress"),l.a.createElement("div",{className:"margin-bottom--2"},this.state.isFetchingData&&l.a.createElement("div",{className:"grid--align-self-start"},l.a.createElement("div",{className:"loader loader--dark"})),!this.state.isFetchingData&&l.a.createElement(y.a,{jobs:this.props.jobs,datasets:this.props.recipes}))))}}]),t}(s.Component);E.propTypes=w,t.a=n.i(u.connect)(o)(E)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{datasets:e.state.datasets.all,jobs:e.state.datasets.jobs}}var s=n(4),l=n.n(s),u=n(30),c=n(16),p=n(14),d=(n.n(p),n(3)),f=n.n(d),h=n(1155),m=n.n(h),g=n(119),v=n(192),y=n(10),b=n(54),w=n(644),E=n(20),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k={dispatch:f.a.func.isRequired,recipes:f.a.arrayOf(f.a.shape({id:f.a.string.isRequired,alias:f.a.string.isRequired})),jobs:f.a.arrayOf(f.a.shape({id:f.a.string.isRequired,recipe:f.a.string.isRequired})),params:f.a.shape({jobID:f.a.string}).isRequired},S=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingDataset:!1,activeDataset:null},n.handleFormSubmit=n.handleFormSubmit.bind(n),n.handleRetryClick=n.handleRetryClick.bind(n),n}return i(t,e),C(t,[{key:"componentWillMount",value:function(){var e=this;if(this.props.recipes&&0!==this.props.recipes.length){var t=this.props.jobs.find(function(t){return t.id===e.props.params.jobID}),r=this.props.recipes.find(function(e){return e.id===t.recipe}),a=this.mapAPIResponsesToState({recipe:r,job:t});if(!a){var i={type:"neutral",message:"This dataset was not recognised, so you've been redirected to the main screen",isDismissable:!0};return y.a.add(i),void this.props.dispatch(n.i(p.push)(E.a.resolve("../")))}this.setState({activeDataset:a})}else{this.setState({isFetchingDataset:!0});var o={};v.a.get(this.props.params.jobID).then(function(e){return o.job=e,g.a.get(e.recipe)}).then(function(t){o.recipe=t;var n=e.mapAPIResponsesToState({recipe:o.recipe,job:o.job});e.setState({activeDataset:n,isFetchingDataset:!1})}).catch(function(t){switch(e.setState({isFetchingDataset:!1}),t.status){case 404:var r={type:"neutral",message:"The job '"+e.props.params.jobID+"' was not recognised, so you've been redirected to the dataset upload screen.",isDismissable:!0};y.a.add(r),e.props.dispatch(n.i(p.push)(E.a.resolve("../")));break;case"RESPONSE_ERR":var a={type:"warning",message:"An error's occurred whilst trying to get this job.",isDismissable:!0};y.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to get this job. Please check you internet connection and try again in a few moments.",isDismissable:!0};y.a.add(i);break;case"UNEXPECTED_ERR":var o={type:"warning",message:"An unexpected error has occurred whilst trying to get this job.",isDismissable:!0};y.a.add(o);break;default:var s={type:"warning",message:"An unexpected error's occurred whilst trying to get this job.",isDismissable:!0};y.a.add(s)}console.error("Error getting job and recipe data: ",t)})}}},{key:"componentDidMount",value:function(){this.state.activeDataset&&this.bindInputs()}},{key:"componentDidUpdate",value:function(){var e=this;this.state.activeDataset&&("completed"!==this.state.activeDataset.status||this.state.activeDataset.dimensions||v.a.getDimensions(this.state.activeDataset.instanceID).then(function(t){var n=_({},e.state.activeDataset,{dimensions:[]});t.map(function(e){n.dimensions.push(e.name)}),e.setState({activeDataset:n})}),this.bindInputs())}},{key:"bindInputs",value:function(){var e=this;document.querySelectorAll('input[type="file"]').forEach(function(t){var n=new m.a({target:"/upload",chunkSize:5242880,query:{aliasName:""},forceChunkSize:!0,simultaneousUploads:1});n.assignBrowse(t),n.assignDrop(t),n.on("fileAdded",function(t){var r=t.container.name;n.opts.query.aliasName=r,n.upload();var a=e.state.activeDataset.files.map(function(e){return e.alias_name===r&&(e.progress=0,e.error=null),e}),i=_({},e.state.activeDataset,{files:a});e.setState({activeDataset:i})}),n.on("fileProgress",function(t){var n=Math.round(Number(100*t.progress())),r=e.state.activeDataset.files.map(function(e){return e.alias_name===t.resumableObj.opts.query.aliasName&&(e.progress=n),e}),a=_({},e.state.activeDataset,{files:r});e.setState({activeDataset:a})}),n.on("fileError",function(t){var n=e.state.activeDataset.files.map(function(e){return e.alias_name===t.resumableObj.opts.query.aliasName&&(e.error="An error occurred whilst uploading this file."),e}),r=_({},e.state.activeDataset,{files:n});console.error("Error uploading file to server"),e.setState({activeDataset:r})}),n.on("fileSuccess",function(t){var n=t.resumableObj.opts.query.aliasName;b.a.get("/upload/"+t.uniqueIdentifier).then(function(t){var r=e.state.activeDataset.files.map(function(e){return e.alias_name===n&&(e.progress=null,e.url=t.url),e}),a=_({},e.state.activeDataset,{files:r});e.setState({activeDataset:a}),e.addUploadedFileToJob(n,t.url)}).catch(function(t){var r=e.state.activeDataset.files.map(function(e){return e.alias_name===n&&(e.error="An error occurred whilst uploading this file"),e}),a=_({},e.state.activeDataset,{files:r});console.error("Error fetching uploaded file's URL: ",t),e.setState({activeDataset:a})})})})}},{key:"mapAPIResponsesToState",value:function(e){var t=e.recipe,n=e.job,r=new Map;n.files.forEach(function(e){e.url&&r.set(e.alias_name,e.url)});var a=t.files.map(function(e){return{alias_name:e.description,url:r.get(e.description)}}),i=t.output_instances.map(function(e,n){return t.output_instances[n].editions}),o=t.output_instances.editions_override;return{recipeID:t.id,jobID:n.id,alias:t.alias,format:t.format,status:n.state,instanceID:n.links.instances?n.links.instances[0].id:"",files:a,editionsList:i,editionOverride:o}}},{key:"addUploadedFileToJob",value:function(e,t){var n=this;v.a.addFile(this.state.activeDataset.jobID,e,t).then().catch(function(e){switch(e.status){case 400:var t={type:"warning",message:"There was an error when trying to add this file to your job. Please fix any errors and attempt to re-upload it.",isDismissable:!0};y.a.add(t);break;case 404:var r={type:"neutral",message:"This job was not recognised, another user may have deleted it.",isDismissable:!0};y.a.add(r);break;case 413:var a={type:"warning",message:"An error occurred because this file was too big.",isDismissable:!0};y.a.add(a);break;case 415:var i={type:"warning",message:"An error occurred because this file-type is not supported.",isDismissable:!0};y.a.add(i);break;case"RESPONSE_ERR":var o={type:"warning",message:"An error's occurred whilst trying to upload this file.",isDismissable:!0};y.a.add(o);break;case"FETCH_ERR":var s={type:"warning",message:"There's been a network error whilst trying to upload this file. Please check you internet connection and try again in a few moments.",isDismissable:!0};y.a.add(s);break;case"UNEXPECTED_ERR":var l={type:"warning",message:"An unexpected error has occurred whilst trying to upload this file.",isDismissable:!0};y.a.add(l);break;default:var u={type:"warning",message:"An unexpected error's occurred whilst trying to upload this file.",isDismissable:!0};y.a.add(u)}console.error('Error adding file to job "'+n.state.activeDataset.jobID+'": ',e)})}},{key:"handleFormSubmit",value:function(e){e.preventDefault();for(var t=[],r=0;r<this.state.activeDataset.files.length;r++){var a=this.state.activeDataset.files[r];a.url||t.push(a.alias_name)}if(t.length>0){var i=this.state.activeDataset.files.map(function(e){return t.indexOf(e.alias_name)>=0&&(e.error="You must upload this file before submitting to publishing"),e}),o=_({},this.state.activeDataset,{files:i});return void this.setState({activeDataset:o})}this.props.dispatch(n.i(p.push)(location.pathname+"/metadata"))}},{key:"handleRetryClick",value:function(e){var t=this.state.activeDataset.files.map(function(t){return t.alias_name===e&&(t.progress=null,t.error=""),t}),n=_({},this.state.activeDataset,{files:t});this.setState({activeDataset:n})}},{key:"renderFileInputs",value:function(){var e=this;if(this.state.activeDataset)return this.state.activeDataset.files.map(function(t,n){return l.a.createElement(w.a,{label:t.alias_name,type:"file",id:"dataset-upload-"+n.toString(),key:n,accept:".xls, .xlsx, .csv",url:t.url||null,extension:t.extension||null,error:t.error||null,progress:t.progress>=0?t.progress:null,onRetry:e.handleRetryClick})})}},{key:"renderSubmittedScreen",value:function(){return l.a.createElement("div",null,l.a.createElement("p",{className:"margin-bottom--2"},"Your files are being processed."),l.a.createElement("h2",{className:"margin-bottom--1"},"What happens now?"),l.a.createElement("ul",{className:"list margin-bottom--2"},l.a.createElement("li",{className:"list__item"},"Please ",l.a.createElement("a",{href:"mailto:publishing.support.team@ons.gov.uk"},"contact publishing")," to let them know your files have been submitted or if you have any questions."),l.a.createElement("li",{className:"list__item"},"The publishing team can prepare the dataset landing page which includes the files and associated metadata when the upload is complete.")))}},{key:"renderCompletedScreen",value:function(){return l.a.createElement("div",null,l.a.createElement("p",{className:"margin-bottom--2"},"Your files have been processed and are available to the publishing team."),l.a.createElement("h2",{className:"margin-bottom--1"},"What happens now?"),l.a.createElement("ul",{className:"list margin-bottom--2"},l.a.createElement("li",{className:"list__item"},"Please ",l.a.createElement("a",{href:"mailto:publishing.support.team@ons.gov.uk"},"contact publishing")," to let them know your files have been submitted or if you have any questions."),l.a.createElement("li",{className:"list__item"},"The publishing team can prepare the dataset landing page which includes the files and associated metadata.")),l.a.createElement("h2",{className:"margin-bottom--1"},"Dimensions",this.state.activeDataset.dimensions&&this.state.activeDataset.dimensions.length>0&&l.a.createElement("span",null," (",this.state.activeDataset.dimensions.length,")")),l.a.createElement("div",{className:"margin-bottom--2"},this.state.activeDataset.dimensions?l.a.createElement("ul",{className:"list"},this.state.activeDataset.dimensions.map(function(e,t){return l.a.createElement("li",{key:t,className:"list__item"},e)})):l.a.createElement("p",null,"Dimensions are currently being processed. This could take some time.")))}},{key:"renderDatasetState",value:function(){switch(this.state.activeDataset.status){case"created":return l.a.createElement("div",null,l.a.createElement("div",{className:"margin-top--2"},"◀ ",l.a.createElement(u.g,{to:E.a.resolve("../")},"Back")),l.a.createElement("h1",{className:"margin-top--1"},"Upload new file(s)"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},this.renderFileInputs(),l.a.createElement("button",{className:"btn btn--positive",type:"submit"},"Save and continue")));case"submitted":return l.a.createElement("div",null,l.a.createElement("div",{className:"margin-top--2"},"◀ ",l.a.createElement(u.g,{to:E.a.resolve("../")},"Return")),l.a.createElement("h1",{className:"margin-top--1"},"Your dataset has been submitted"),this.renderSubmittedScreen());case"completed":return l.a.createElement("div",null,l.a.createElement("div",{className:"margin-top--2"},"◀ ",l.a.createElement(u.g,{to:E.a.resolve("../")},"Return")),l.a.createElement("h1",{className:"margin-top--1"},"Your dataset upload is complete"),this.renderCompletedScreen());case"error":return l.a.createElement("div",null,l.a.createElement("div",{className:"margin-top--2"},"◀ ",l.a.createElement(u.g,{to:E.a.resolve("../")},"Return")),l.a.createElement("h1",{className:"margin-top--1"},"An error has occurred"),l.a.createElement("p",{className:"margin-bottom--1"},"It appears as though as an error has occurred whilst submitting your dataset to publishing"),l.a.createElement("p",null,"Please ",l.a.createElement("a",{href:"mailto:publishing.support.team@ons.gov.uk"},"contact publishing support")," and inform them of this error"))}}},{key:"render",value:function(){return l.a.createElement("div",{className:"grid grid--justify-center"},l.a.createElement("div",{className:"grid__col-6"},this.state.activeDataset&&this.renderDatasetState(),this.state.isFetchingDataset&&l.a.createElement("div",{className:"grid--align-center grid--align-self-center"},l.a.createElement("div",{className:"loader loader--large loader--dark"}))))}}]),t}(s.Component);S.propTypes=k,t.a=n.i(c.connect)(o)(S)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{recipes:e.state.datasets.recipes,job:e.state.datasets.activeJob}}var s=n(4),l=n.n(s),u=n(30),c=n(16),p=n(14),d=(n.n(p),n(3)),f=n.n(d),h=n(238),m=n.n(h),g=n(125),v=n.n(g),y=n(20),b=n(82),w=n(119),E=n(10),_=n(22),C=n(192),k=n(37),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O={dispatch:f.a.func.isRequired,recipes:f.a.arrayOf(f.a.shape({})),job:f.a.object,params:f.a.shape({jobID:f.a.string.isRequired}).isRequired},T=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingData:!1,isSubmittingData:!1,selectedEdition:null,editionError:null},n.handleEditionChange=n.handleEditionChange.bind(n),n.handleFormSubmit=n.handleFormSubmit.bind(n),n}return i(t,e),D(t,[{key:"componentWillMount",value:function(){var e=this,t=[Promise.resolve(),Promise.resolve()];(0===this.props.recipes.length||m()(this.props.job))&&this.setState({isFetchingData:!0}),0===this.props.recipes.length&&(t[0]=w.a.getAll()),(m()(this.props.job)||this.props.job.id!==this.props.params.jobID)&&(t[1]=C.a.get(this.props.params.jobID)),Promise.all(t).then(function(t){0===e.props.recipes.length&&e.props.dispatch(n.i(_.k)(t[0].items)),(m()(e.props.job)||e.props.job.id!==e.props.params.jobID)&&e.props.dispatch(n.i(_.s)(t[1])),e.setState({isFetchingData:!1})}).catch(function(t){switch(t.status){case 403:var n={type:"warning",message:"You do not permission to view all datasets.",isDismissable:!0};E.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get all datasets.",isDismissable:!0};E.a.add(r);break;case"FETCH_ERR":var a={type:"warning",message:"There's been a network error whilst trying to get all datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};E.a.add(a);break;case"UNEXPECTED_ERR":var i={type:"warning",message:"An unexpected error has occurred whilst trying to get all datasets.",isDismissable:!0};E.a.add(i);break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to get all datasets.",isDismissable:!0};E.a.add(o)}e.setState({isFetchingData:!1}),console.error("Error fetching all recipes",t)})}},{key:"mapEditionsToSelect",value:function(){var e=this;return this.props.recipes.find(function(t){return t.id===e.props.job.recipe}).output_instances[0].editions.map(function(e){return{id:e,name:e}})}},{key:"handleEditionChange",value:function(e){e.preventDefault(),this.setState({selectedEdition:e.target.value,editionError:null})}},{key:"handleFormSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.selectedEdition)return void this.setState({editionError:"An edition must be selected"});this.setState({isSubmittingData:!0}),k.a.updateInstanceEdition(this.props.job.links.instances[0].id,this.state.selectedEdition).then(function(){return C.a.updateStatus(t.props.params.jobID,"submitted").then(function(){var e=S({},t.state.activeDataset,{status:"submitted"});t.setState({activeDataset:e})})}).then(function(){t.setState({isSubmittingData:!1}),t.props.dispatch(n.i(p.push)(y.a.resolve("../")))}).catch(function(e){switch(e.status){case 400:var n={type:"warning",message:"There was a problem with the data you tried to submit. Please check the information, fix any errors and try again.",isDismissable:!0};E.a.add(n);break;case 404:var r={type:"warning",message:"The job '"+t.props.params.jobID+"' was not recognised. Please check that it hasn't been submitted or deleted by someone else.",isDismissable:!0};E.a.add(r);break;case 403:var a={type:"warning",message:"You do not permission to submit this dataset to the publishing team.",isDismissable:!0};E.a.add(a);break;case"RESPONSE_ERR":var i={type:"warning",message:"An error's occurred whilst trying to submit to the publishing team.",isDismissable:!0};E.a.add(i);break;case"FETCH_ERR":var o={type:"warning",message:"There's been a network error whilst trying to submit to the publishing team. Please check you internet connection and try again.",isDismissable:!0};E.a.add(o);break;case"UNEXPECTED_ERR":var s={type:"warning",message:"An unexpected error has occurred whilst trying to submit to the publishing team.",isDismissable:!0};E.a.add(s);break;default:var l={type:"warning",message:"An unexpected error's occurred whilst trying to submit to the publishing team.",isDismissable:!0};E.a.add(l)}t.setState({isSubmittingData:!1}),console.error("Error trying to submit edition to publishing team",e)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"grid grid--justify-center"},l.a.createElement("div",{className:"grid__col-6"},l.a.createElement("div",{className:"margin-top--2"},"◀ ",l.a.createElement(u.g,{to:y.a.resolve("../")},"Return")),l.a.createElement("h1",{className:"margin-top--1"},"Dataset upload details"),this.state.isFetchingData?l.a.createElement("div",{className:"loader loader--dark"}):l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("p",{className:"margin-bottom--1"},"Last updated by ... on ",v()(this.props.job.last_updated,"HH:MM:ss dd/mm/yy")),l.a.createElement("div",{className:"grid__col-6"},l.a.createElement(b.a,{id:"editions",label:"Edition",contents:this.mapEditionsToSelect(),onChange:this.handleEditionChange,error:this.state.editionError})),l.a.createElement("button",{className:"btn btn--positive margin-top--2",disabled:this.state.isSubmittingData},"Submit to publishing"),this.state.isSubmittingData&&l.a.createElement("div",{className:"loader loader--centre loader--dark margin-left--1"}))))}}]),t}(s.Component);T.propTypes=O,t.a=n.i(c.connect)(o)(T)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(30),u=n(3),c=n.n(u),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={datasets:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,alias:c.a.string.isRequired})),jobs:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,recipe:c.a.string.isRequired}))},f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.props.jobs.length>0?s.a.createElement("div",null,s.a.createElement("h3",{className:"text-right"},"Status"),s.a.createElement("ul",{className:"list list--neutral"},this.props.jobs.map(function(t){var n=e.props.datasets.find(function(e){return e.id===t.recipe});return n?s.a.createElement("li",{className:"list__item list__item--separated grid grid--justify-space-between",key:t.id},s.a.createElement(l.g,{to:location.pathname+"/"+t.id},n.alias),s.a.createElement("span",null,t.state)):(console.warn('Attempt to render job for an unrecognised recipe ID: "'+t.recipe+'"'),"")}))):s.a.createElement("p",null,"No dataset uploads in progress"))}}]),t}(o.Component);f.propTypes=d,t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(3),u=n.n(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={dataset:u.a.shape({id:u.a.string.isRequired,alias:u.a.string.isRequired}),onNewVersionClick:u.a.func.isRequired,isLoading:u.a.bool},d=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"shouldComponentUpdate",value:function(e){return e.isLoading!==this.props.isLoading}},{key:"render",value:function(){return s.a.createElement("li",{className:"list__item list__item--separated grid grid--justify-space-between",key:this.props.dataset.id},this.props.dataset.alias,s.a.createElement("div",null,this.props.isLoading&&s.a.createElement("span",{className:"loader loader--dark"}),s.a.createElement("button",{className:"btn btn--primary","data-recipe-id":this.props.dataset.id,onClick:this.props.onNewVersionClick,disabled:this.props.isLoading},"Upload new version")))}}]),t}(o.Component);d.propTypes=p,t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{rootPath:e.state.rootPath,users:e.state.users.all,loggedInUser:e.state.user}}var s=n(4),l=n.n(s),u=n(16),c=n(14),p=(n.n(c),n(3)),d=n.n(p),f=n(53),h=n(10),m=n(23),g=n(132),v=n(170),y=n(724),b=n(22),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_={rootPath:d.a.string.isRequired,dispatch:d.a.func.isRequired,children:d.a.element,params:d.a.shape({userID:d.a.string}).isRequired,loggedInUser:d.a.object,users:d.a.arrayOf(d.a.shape({})).isRequired},C=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFetchingUsers:!1},n.handleUserSelection=n.handleUserSelection.bind(n),n.handleUserCreateSuccess=n.handleUserCreateSuccess.bind(n),n.isAdmin=g.a.isAdmin(n.props.loggedInUser),n}return i(t,e),E(t,[{key:"componentWillMount",value:function(){return this.isAdmin||this.props.params.userID||this.props.dispatch(n.i(c.replace)(this.props.rootPath+"/users/"+this.props.loggedInUser.email)),this.getAllUsers()}},{key:"getAllUsers",value:function(){var e=this;return this.setState({isFetchingUsers:!0}),f.a.getAll().then(function(t){var r=t.map(function(t){return e.mapUserToState(t)});e.props.dispatch(n.i(b.x)(r)),e.setState({isFetchingUsers:!1})}).catch(function(t){switch(e.setState({isFetchingUsers:!1}),t){case 404:var n={type:"warning",message:"No API route available to get users.",autoDismiss:5e3};h.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to get users. You may only be able to see previously loaded information.",isDismissable:!0};h.a.add(r);break;case"UNEXPECTED_ERR":var a={type:"warning",message:"An unexpected error's occurred whilst trying to get users. You may only be able to see previously loaded information.",isDismissable:!0};h.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to get users. You may only be able to see previously loaded information.",isDismissable:!0};h.a.add(i);break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to get users. You may only be able to see previously loaded information.",isDismissable:!0};h.a.add(o)}console.error("Error getting all users:\n",t)})}},{key:"mapUserToState",value:function(e){try{var t=e.email,n=[e.name,e.email],r={id:e.email};return w({},e,{id:t,columnValues:n,returnValue:r})}catch(e){var a={type:"warning",message:"Error mapping users to state",isDismissable:!0,autoDismiss:3e3};return h.a.add(a),console.error("Error mapping users to state: ",e),m.a.event("Error mapping users to state:\n"+JSON.stringify(e),m.a.error(e)),!1}}},{key:"handleUserSelection",value:function(e){this.props.dispatch(n.i(c.push)(this.props.rootPath+"/users/"+e.id))}},{key:"handleUserCreateSuccess",value:function(e){this.props.dispatch(n.i(c.push)(this.props.rootPath+"/users/"+e.email)),this.getAllUsers()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"grid grid--justify-space-around"},l.a.createElement("div",{className:"grid__col-4"},l.a.createElement("h1",null,"Select a user"),l.a.createElement(v.a,{columns:[{heading:"User",width:"6"},{heading:"Email",width:"6"}],rows:this.props.users,isUpdating:this.state.isFetchingUsers,handleItemClick:this.handleUserSelection,activeRowID:this.props.params.userID})),l.a.createElement("div",{className:"grid__col-4"},this.isAdmin&&l.a.createElement(y.a,{onCreateSuccess:this.handleUserCreateSuccess}))),this.props.children)}}]),t}(s.Component);C.propTypes=_,t.a=n.i(u.connect)(o)(C)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{rootPath:e.state.rootPath,loggedInUser:e.state.user}}var l=n(4),u=n.n(l),c=n(16),p=n(14),d=(n.n(p),n(3)),f=n.n(d),h=n(51),m=n(20),g=n(328),v=n(329),y=n(53),b=n(23),w=n(10),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C={dispatch:f.a.func.isRequired,params:f.a.shape({userID:f.a.string.isRequired}).isRequired,loggedInUser:f.a.shape({isAdmin:f.a.bool.isRequired,email:f.a.string.isRequired}).isRequired,rootPath:f.a.string.isRequired},k=function(e){function t(e){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.handleCancel=function(){o.props.dispatch(n.i(p.push)(m.a.resolve("../")))},o.handleInputChange=function(e,t){if(!t)return void console.warn("No input ID given to change handle function");o.setState(r({},t,{value:e,error:""}))},o.handleSubmit=function(e){e.preventDefault();var t=!1,r=E({},o.state);o.props.loggedInUser.isAdmin||o.state.currentPassword.value||(r=E({},r,{currentPassword:E({},r.currentPassword,{error:"You must enter your current password"})}),t=!0);var a=n.i(v.a)(o.state.newPassword.value);if(a.isValid||(r=E({},r,{newPassword:E({},r.newPassword,{error:a.error})}),t=!0),t)return void o.setState(r);var i={oldPassword:o.state.currentPassword.value,password:o.state.newPassword.value,email:o.props.params.userID};return o.setState({isSubmitting:!0}),y.a.updatePassword(i).then(function(){o.props.dispatch(n.i(p.push)(m.a.resolve("../"))),w.a.add({type:"positive",isDismissable:!0,autoDismiss:7e3,message:"Password successfully changed"})}).catch(function(e){if(o.setState({isSubmitting:!1}),401===e.status&&!o.props.loggedInUser.isAdmin)return void o.setState(function(e){return{currentPassword:E({},e.currentPassword,{error:"Incorrect password"})}});if(401===e.status&&o.props.loggedInUser.isAdmin)return void y.a.logOut();var t={type:"warning",isDismissable:!0,message:"Unable to change user's password due to an unexpected error"};switch(e.status){case 403:t.message="Unable to change user's password because you don't have permissions to do so";break;case 404:t.message="Unable to change user's password because this user doesn't exist";break;case"FETCH_ERR":t.message="Unable to changes user's password due to a network error. Please check your connection and try again."}console.error("Error changing a user's password",e),b.a.event("Error changing a user's password",b.a.error(e)),w.a.add(t)})},o.formInputs=function(){var e=[{id:"new-password",label:"New password",type:"password",onChange:function(e){return o.handleInputChange(e.target.value,"newPassword")},error:o.state.newPassword.error}];return o.props.loggedInUser.isAdmin||e.splice(0,0,{id:"current-password",label:"Current password",type:"password",onChange:function(e){return o.handleInputChange(e.target.value,"currentPassword")},error:o.state.currentPassword.error}),e},o.state={currentPassword:{value:"",error:""},newPassword:{value:"",error:""},isSubmitting:!1},o}return o(t,e),_(t,[{key:"componentWillMount",value:function(){this.props.loggedInUser.isAdmin||this.props.params.userID===this.props.loggedInUser.email||this.props.dispatch(n.i(p.replace)(this.props.rootPath+"/users/"+this.props.params.userID))}},{key:"render",value:function(){return u.a.createElement(h.a,{sizeClass:"grid__col-xs-10 grid__col-md-6 grid__col-lg-4"},u.a.createElement(g.a,{formData:{inputs:this.formInputs(),onSubmit:this.handleSubmit,onCancel:this.handleCancel,isSubmitting:this.state.isSubmitting}}))}}]),t}(l.Component);k.propTypes=C,t.a=n.i(c.connect)(s)(k)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{loggedInUser:e.state.user}}var l=n(4),u=n.n(l),c=n(16),p=n(14),d=(n.n(p),n(3)),f=n.n(d),h=n(51),m=n(28),g=n(20),v=n(22),y=n(53),b=n(23),w=n(10),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_={dispatch:f.a.func.isRequired,params:f.a.shape({userID:f.a.string.isRequired}).isRequired,loggedInUser:f.a.shape({isAdmin:f.a.bool.isRequired}).isRequired},C=function(e){function t(e){var o=this;a(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleClose=function(){s.props.dispatch(n.i(p.push)(g.a.resolve("../")))},s.handleChange=function(e){s.setState({email:e.target.value,error:""})},s.handleSubmit=function(){var e=r(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=s.props.params.userID,s.state.email){e.next=5;break}return s.setState({error:"You must enter the user's email address"}),e.abrupt("return");case 5:if(s.state.email===r){e.next=8;break}return s.setState({error:"Email address must match '"+r+"'"}),e.abrupt("return");case 8:return s.setState({isSavingDelete:!0}),e.next=11,s.deleteUser(r);case 11:if(a=e.sent,s.setState({isSavingDelete:!1}),!a.error){e.next=16;break}return s.handleDeleteUserError(a.error),e.abrupt("return");case 16:w.a.add({type:"positive",message:"User successfully deleted",autoDismiss:7e3,isDismissable:!0}),s.props.dispatch(n.i(v.v)(r)),s.props.dispatch(n.i(p.push)(g.a.resolve("../../")));case 19:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),s.state={email:"",error:"",isSavingDelete:!1},s}return o(t,e),E(t,[{key:"componentWillMount",value:function(){this.props.loggedInUser.isAdmin||this.props.dispatch(n.i(p.replace)(g.a.resolve("../")))}},{key:"deleteUser",value:function(e){var t=this;return new Promise(function(){var n=r(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:y.a.remove(e).then(function(e){r({response:e,error:null})}).catch(function(e){return a(e)});case 1:case"end":return t.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}()).catch(function(t){return console.error("Error deleting user '"+e+"'",t),b.a.event("Error deleting user '"+e+"'",b.a.error(t)),{response:null,error:t}})}},{key:"handleDeleteUserError",value:function(e){var t={type:"warning",isDismissable:!0,message:""};switch(e.status){case 401:break;case 403:t.message="Unable to delete user because you do not have permission to do so";break;case 404:t.message="Unable to delete user because it no longer exists";break;case"FETCH_ERR":t.message="Unable to delete user due to a network error. Check your connection and try again.";break;default:t.message="Unable to delete user due to an unexpected error"}w.a.add(t)}},{key:"render",value:function(){return u.a.createElement(h.a,{sizeClass:"grid__col-xs-10 grid__col-md-6 grid__col-lg-4"},u.a.createElement("div",{className:"modal__header"},u.a.createElement("h2",null,"Confirm delete")),u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("div",{className:"modal__body"},u.a.createElement(m.a,{id:"confirm-delete",label:"Enter the email address of the user you want to delete",onChange:this.handleChange,error:this.state.error,disabled:this.state.isSavingDelete,isFocused:!0})),u.a.createElement("div",{className:"modal__footer"},u.a.createElement("button",{disabled:this.state.isSavingDelete,className:"btn btn--warning",type:"submit"},"Delete"),u.a.createElement("button",{disabled:this.state.isSavingDelete,className:"btn margin-left--1",type:"button",onClick:this.handleClose},"Cancel"),this.state.isSavingDelete&&u.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}))))}}]),t}(l.Component);C.propTypes=_,t.a=n.i(c.connect)(s)(C)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(4),u=n.n(l),c=n(3),p=n.n(c),d=n(28),f=n(131),h=n(53),m=n(10),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v={onCreateSuccess:p.a.func.isRequired},y=function(e){function t(e){var n=this;i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleInputChange=function(e){var t=e.target.id,n=e.target.value,r={value:n,error:""},i=g({},s.state.newUser,a({},t,r));s.setState({newUser:i})},s.handleUserTypeChange=function(e){var t=e.value,n=g({},s.state.newUser,{type:t});s.setState({newUser:n})},s.handleSubmit=function(){var e=r(regeneratorRuntime.mark(function e(t){var r,a,i,o,l,u,c,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=s.state.newUser,r.username.value.length){e.next=7;break}return a=g({},r.username,{error:"You must enter a username"}),i=g({},r,{username:a}),s.setState({newUser:i}),e.abrupt("return");case 7:if(r.email.value.length){e.next=12;break}return o=g({},r.email,{error:"You must enter a email"}),l=g({},r,{email:o}),s.setState({newUser:l}),e.abrupt("return");case 12:if(r.password.value.length){e.next=17;break}return u=g({},r.password,{error:"You must enter a password"}),c=g({},r,{password:u}),s.setState({newUser:c}),e.abrupt("return");case 17:return s.setState({isSubmitting:!0}),e.next=20,s.createNewUser(s.state.newUser);case 20:if(!(p=e.sent)){e.next=25;break}return s.setState({newUser:s.blankNewUserDetails,isSubmitting:!1}),s.props.onCreateSuccess({name:r.username.value,email:r.email.value}),e.abrupt("return");case 25:s.setState({isSubmitting:!1});case 26:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),s.createNewUser=function(){var e=r(regeneratorRuntime.mark(function e(t){var r,a,i,o,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.mapUserDetailsPostBody(t),a=s.mapUserPasswordPostBody(t),i=s.mapUserPermissionPostBody(t),e.next=5,s.postNewUserDetails(r);case 5:if(o=e.sent,!o.error){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,s.postNewUserPassword(a);case 10:if(l=e.sent,!l.error){e.next=14;break}return s.deleteErroredNewUser(t.email.value),e.abrupt("return");case 14:return e.next=16,s.postNewUserPermissions(i);case 16:if(u=e.sent,!u.error){e.next=20;break}return s.deleteErroredNewUser(t.email.value),e.abrupt("return");case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),s.mapUserDetailsPostBody=function(e){return{name:e.username.value,email:e.email.value}},s.mapUserPasswordPostBody=function(e){return{email:e.email.value,password:e.password.value}},s.mapUserPermissionPostBody=function(e){return{email:e.email.value,admin:"admin"===e.type,editor:"publisher"===e.type}},s.postNewUserDetails=function(e){return h.a.create(e).then(function(e){return{response:e,error:null}}).catch(function(t){switch(t.status){case 403:var n={type:"warning",message:"You don't have permission to create users.",autoDismiss:5e3};m.a.add(n);break;case 404:var r={type:"warning",message:"No API route available to create users.",autoDismiss:5e3};m.a.add(r);break;case 409:var a={type:"warning",message:'User "'+e.name+'" already exists.',autoDismiss:5e3};m.a.add(a);break;case"RESPONSE_ERR":var i={type:"warning",message:"An error's occurred whilst trying to create a user.",isDismissable:!0};m.a.add(i);break;case"UNEXPECTED_ERR":var o={type:"warning",message:"An unexpected error's occurred whilst trying to create a user.",isDismissable:!0};m.a.add(o);break;case"FETCH_ERR":var s={type:"warning",message:"There's been a network error whilst trying to create a user.",isDismissable:!0};m.a.add(s);break;default:var l={type:"warning",message:"An unexpected error's occurred whilst trying to create a user.",isDismissable:!0};m.a.add(l)}return console.error("Error posting new user details:\n",t),{response:null,error:t}})},s.postNewUserPassword=function(e){return h.a.setPassword(e).then(function(e){return{response:e,error:null}}).catch(function(e){switch(e.status){case 403:var t={type:"warning",message:"You don't have permission to set users' password.",autoDismiss:5e3};m.a.add(t);break;case 404:var n={type:"warning",message:"No API route available to set users' password.",autoDismiss:5e3};m.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to set users' password.",isDismissable:!0};m.a.add(r);break;case"UNEXPECTED_ERR":var a={type:"warning",message:"An unexpected error's occurred whilst trying to set users' password.",isDismissable:!0};m.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to set users' password.",isDismissable:!0};m.a.add(i);break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to set users' password.",isDismissable:!0};m.a.add(o)}return console.error("Error posting new user password:\n",e),{response:null,error:e}})},s.postNewUserPermissions=function(e){return h.a.setPermissions(e).then(function(e){return{response:e,error:null}}).catch(function(e){switch(e.status){case 403:var t={type:"warning",message:"You don't have permission to set users' permission.",autoDismiss:5e3};m.a.add(t);break;case 404:var n={type:"warning",message:"No API route available to set users' permission.",autoDismiss:5e3};m.a.add(n);break;case"RESPONSE_ERR":var r={type:"warning",message:"An error's occurred whilst trying to set users' permission.",isDismissable:!0};m.a.add(r);break;case"UNEXPECTED_ERR":var a={type:"warning",message:"An unexpected error's occurred whilst trying to set users' permission.",isDismissable:!0};m.a.add(a);break;case"FETCH_ERR":var i={type:"warning",message:"There's been a network error whilst trying to set users' permission.",isDismissable:!0};m.a.add(i);break;default:var o={type:"warning",message:"An unexpected error's occurred whilst trying to set users' permission.",isDismissable:!0};m.a.add(o)}return console.error("Error posting new user permissions:\n",e),{response:null,error:e}})},s.deleteErroredNewUser=function(e){h.a.remove(e).then(function(e){return{response:e,error:null}}).catch(function(e){return m.a.add({type:"warning",message:"An error has occurred, the user has been created but will not work",isDismissable:!0}),console.error("Error deleting errored user:\n",e),{response:null,error:e}})},s.render=function(){return u.a.createElement("div",null,u.a.createElement("h1",null,"Create a user"),u.a.createElement("form",{name:"create-new-user",onSubmit:s.handleSubmit},u.a.createElement(d.a,{id:"username",label:"Username",type:"text",onChange:s.handleInputChange,value:s.state.newUser.username.value,error:s.state.newUser.username.error}),u.a.createElement(d.a,{id:"email",label:"Email",type:"email",onChange:s.handleInputChange,value:s.state.newUser.email.value,error:s.state.newUser.email.error}),u.a.createElement(d.a,{id:"password",label:"Password",type:"password",onChange:s.handleInputChange,value:s.state.newUser.password.value,error:s.state.newUser.password.error}),u.a.createElement(f.a,{radioData:[{id:"admin",value:"admin",label:"Admin"},{id:"publisher",value:"publisher",label:"Publisher"},{id:"viewer",value:"viewer",label:"Viewer"}],groupName:"user-type",legend:"User type",onChange:s.handleUserTypeChange,selectedValue:s.state.newUser.type,inline:!0}),u.a.createElement("button",{type:"submit",className:"btn btn--positive margin-top--1",disabled:s.state.isSubmitting},"Create user"),s.state.isSubmitting?u.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):""))},s.state={newUser:{username:{value:"",error:""},email:{value:"",error:""},password:{value:"",error:""},type:"viewer"},isSubmitting:!1},s.blankNewUserDetails=s.state.newUser,s}return s(t,e),t}(l.Component);y.propTypes=v,t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),s=n.n(o),l=n(30),u=n(3),c=n.n(u),p=n(23),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f={isVisible:c.a.bool,onClose:c.a.func.isRequired,onChangePassword:c.a.func,name:c.a.string,email:c.a.string,isLoading:c.a.bool,hasTemporaryPassword:c.a.bool,role:c.a.oneOf(["ADMIN","EDITOR","VIEWER"]),errorFetchingUserDetails:c.a.bool,errorFetchingUserPermissions:c.a.bool,showChangePassword:c.a.bool,showFooter:c.a.bool},h=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),d(t,[{key:"renderRole",value:function(){return"ADMIN"===this.props.role?s.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," is an ",s.a.createElement("strong",null,"admin")):"EDITOR"===this.props.role?s.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," is a ",s.a.createElement("strong",null,"publisher")):"VIEWER"===this.props.role?s.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," is a ",s.a.createElement("strong",null,"viewer")):this.props.role?(p.a.event("Attempt to render an unknown user role for '"+this.props.email+"': '"+this.props.role+"'",p.a.warn()),s.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," is a ",s.a.createElement("strong",null,this.props.role)," (unrecognised user type)")):(p.a.event("Attempt to render role for user '"+this.props.email+"' but none passed in as prop",p.a.warn()),s.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," has no permissions"))}},{key:"render",value:function(){return s.a.createElement("div",{className:"drawer__container"},s.a.createElement("div",{className:"drawer__heading"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--3 margin-bottom--2"},s.a.createElement("h2",{id:"user-name"},this.props.isLoading?"Loading user...":this.props.name||"[No name available]"),s.a.createElement("p",{id:"user-email"},this.props.email)))),this.props.showChangePassword&&s.a.createElement("div",{className:"drawer__banner"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 grid--align-start margin-top--1 margin-bottom--1"},s.a.createElement(l.g,{className:"btn btn--primary",to:location.pathname+"/change-password"},"Change password")))),s.a.createElement("div",{className:"drawer__body"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--1"},this.props.isLoading?s.a.createElement("div",{className:"grid grid--align-center margin-top--4"},s.a.createElement("div",{className:"loader loader--large loader--dark"})):s.a.createElement("div",null,this.props.errorFetchingUserDetails&&s.a.createElement("p",{className:"margin-bottom--1"},"Unable to show user's details"),this.props.errorFetchingUserPermissions&&s.a.createElement("p",{className:"margin-bottom--1"},"Unable to show user's permissions"),this.props.role&&this.renderRole(),this.props.hasTemporaryPassword&&s.a.createElement("p",{id:"user-temporary-password",className:"margin-bottom--1"},"Has a temporary password"))))),this.props.showFooter&&s.a.createElement("div",{className:"drawer__footer"},s.a.createElement("div",{className:"grid grid--justify-space-around"},s.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},s.a.createElement("div",null,s.a.createElement(l.g,{id:"user-delete",className:"btn btn--warning",to:location.pathname+"/confirm-delete"},"Delete"),s.a.createElement("button",{id:"user-close",className:"btn margin-left--1",onClick:this.props.onClose},"Close"))))))}}]),t}(o.Component);h.propTypes=f,t.a=h},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{activeUser:e.state.users.active,loggedInUser:e.state.user,arrivedByRedirect:"REPLACE"===e.routing.locationBeforeTransitions.action,previousPathname:e.routing.locationBeforeTransitions.previousPathname,rootPath:e.state.rootPath}}var l=n(4),u=n.n(l),c=n(16),p=n(14),d=(n.n(p),n(1128)),f=n.n(d),h=n(3),m=n.n(h),g=n(190),v=n(725),y=n(20),b=n(53),w=n(23),E=n(10),_=n(22),C=n(132),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S={dispatch:m.a.func.isRequired,params:m.a.shape({userID:m.a.string.isRequired}).isRequired,activeUser:m.a.shape({email:m.a.string,name:m.a.string,hasTemporaryPassword:m.a.bool,role:m.a.string}),loggedInUser:m.a.shape({email:m.a.string.isRequired,isAdmin:m.a.bool.isRequired}).isRequired,children:m.a.element,previousPathname:m.a.string,rootPath:m.a.string.isRequired,arrivedByRedirect:m.a.bool},D=function(e){function t(e){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleTransitionEntered=function(){r.setState({isVisible:!0})},r.handleTransitionExit=function(){r.setState({isVisible:!1,isAnimatable:!0})},r.handleTransitionExited=function(){r.props.dispatch(n.i(p.push)(y.a.resolve("../")))},r.handleClose=function(){r.setState({mountTransition:!1})},r.state={mountTransition:!0,isVisible:!1,isAnimatable:e.previousPathname===e.rootPath+"/users"&&!e.arrivedByRedirect,isFetchingUser:!1,isDeletingUser:!1,isChangingPassword:!1,errorFetchingUserDetails:!1,errorFetchingUserPermissions:!1},r}return o(t,e),k(t,[{key:"componentWillMount",value:function(){this.updateStateWithUser()}},{key:"componentDidUpdate",value:function(e){e.params.userID!==this.props.params.userID&&this.updateStateWithUser()}},{key:"updateStateWithUser",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isFetchingUser:!0}),t=this.props.params.userID,e.next=4,Promise.all([this.getUserDetails(t),this.getUserPermissions(t)]);case 4:if(r=e.sent,this.setState({isFetchingUser:!1}),!r[0].error&&!r[1].error&&r[0].response&&r[1].response||(this.setState({errorFetchingUserDetails:!(!r[0].error&&r[0].response),errorFetchingUserPermissions:!(!r[1].error&&r[1].response)}),this.handleGetUserError(r[0].error,r[1].error,t)),r[0].response||r[1].response){e.next=9;break}return e.abrupt("return");case 9:a=this.mapUserResponsesToState(r[0].response,r[1].response),this.props.dispatch(n.i(_.w)(a));case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"getUserDetails",value:function(e){var t=this;return new Promise(function(){var n=r(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:b.a.get(e).then(function(e){r({response:e,error:null})}).catch(function(e){return a(e)});case 1:case"end":return t.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}()).catch(function(t){return console.error("Error getting user '"+e+"'",t),w.a.event("Error getting user '"+e+"'",w.a.error(t)),{response:null,error:t}})}},{key:"getUserPermissions",value:function(e){var t=this;return new Promise(function(){var n=r(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:b.a.getPermissions(e).then(function(e){e.email||a({status:404}),r({response:e,error:null})}).catch(function(e){return a(e)});case 1:case"end":return t.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}()).catch(function(t){return console.error("Error getting permissions for '"+e+"'",t),w.a.event("Error getting permissions for '"+e+"'",w.a.error(t)),{response:null,error:t}})}},{key:"mapUserResponsesToState",value:function(e,t){return{name:e?e.name:"",email:e?e.email||t.email:"",role:t?b.a.getUserRole(t.admin,t.editor):"",hasTemporaryPassword:!!e&&e.temporaryPassword}}},{key:"handleGetUserError",value:function(e,t){var r=e&&t,a=!!r&&e.status===t.status,i={type:"warning",isDismissable:!0,message:""};if(r&&a){switch(e.status){case 401:break;case 403:i.message="Unable to get user's details because you don't have permission";break;case 404:i.message="Unable to get user's details because the user doesn't exist anymore, so you have been redirected to the users screen",this.props.dispatch(n.i(p.push)(y.a.resolve("../")));break;case"FETCH_ERR":i.message="Unable to get user's details due to a network error, please check your connection and try again";break;default:i.message="Unable to get user's details due to an unexpected error"}return void E.a.add(i)}if(r&&!a)return i.message="Unable to get user's details due to an unexpected error",void E.a.add(i);if(!r){switch(e?e.status:t.status){case 401:break;case 403:i.message="Unable to get all of the user's details because you don't have permission";break;case 404:i.message="Unable to get all of the user's details because the user doesn't exist anymore, so you have been redirected to the users screen",this.props.dispatch(n.i(p.push)(y.a.resolve("../")));break;case"FETCH_ERR":i.message="Unable to get all of the user's details due to a network error, please check your connection and try again";break;default:i.message="Unable to get all of the user's details due to an unexpected error"}return void E.a.add(i)}i.message="An error occured trying to get the user's details",E.a.add(i)}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(f.a,{in:this.state.mountTransition,appear:!0,timeout:{enter:0},onEntered:this.handleTransitionEntered,onExit:this.handleTransitionExit,onExited:this.handleTransitionExited,addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)}},u.a.createElement(g.a,{isVisible:this.state.isVisible,isAnimatable:this.state.isAnimatable},u.a.createElement(v.a,{key:this.props.params.userID,name:this.props.activeUser.name,email:this.props.params.userID,onClose:this.handleClose,isLoading:this.state.isFetchingUser,isDeleting:this.state.isDeletingUser,showChangePassword:this.props.loggedInUser.isAdmin||this.props.params.userID===this.props.loggedInUser.email,hasTemporaryPassword:this.props.activeUser.hasTemporaryPassword,role:this.props.activeUser.role,errorFetchingUserDetails:this.state.errorFetchingUserDetails,errorFetchingUserPermissions:this.state.errorFetchingUserPermissions,showFooter:C.a.isAdmin(this.props.loggedInUser)}))),this.props.children)}}]),t}(l.Component);D.propTypes=S,t.a=n.i(c.connect)(s)(D)},,,function(e,t,n){var r,a;/*!
  * Bowser - a browser detector
  * https://github.com/ded/bowser
  * MIT License | (c) Dustin Diaz 2014
  */
!function(i,o){void 0!==e&&e.exports?e.exports.browser=o():(r=o,void 0!==(a="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=a))}(0,function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var r,a=n(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),o=!i&&/android/i.test(e),s=n(/edge\/(\d+(\.\d+)?)/i),l=n(/version\/(\d+(\.\d+)?)/i),u=/tablet/i.test(e),c=!u&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?r={name:"Opera",opera:t,version:l||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(r={name:"Windows Phone",windowsphone:t},s?(r.msedge=t,r.version=s):(r.msie=t,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?r={name:"Microsoft Edge",msedge:t,version:s}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?(r={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},l&&(r.version=l)):/sailfish/i.test(e)?r={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(r={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=t)):/silk/i.test(e)?r={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:o?r={name:"Android",version:l}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",blackberry:t,version:l||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(r={name:"WebOS",webos:t,version:l||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=t)):r=/bada/i.test(e)?{name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||l}:/safari/i.test(e)?{name:"Safari",safari:t,version:l}:{name:n(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(r.name=r.name||"Webkit",r.webkit=t,!r.version&&l&&(r.version=l)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=t,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i)),r.msedge||!o&&!r.silk?a&&(r[a]=t,r.ios=t):r.android=t;var p="";r.windowsphone?p=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):a?(p=n(/os (\d+([_\s]\d+)*) like mac os x/i),p=p.replace(/[_\s]/g,".")):o?p=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?p=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?p=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?p=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(p=n(/tizen[\/\s](\d+(\.\d+)*)/i)),p&&(r.osversion=p);var d=p.split(".")[0];return u||"ipad"==a||o&&(3==d||4==d&&!c)||r.silk?r.tablet=t:(c||"iphone"==a||"ipod"==a||o||r.blackberry||r.webos||r.bada)&&(r.mobile=t),r.msedge||r.msie&&r.version>=10||r.chrome&&r.version>=20||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1?r.a=t:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6?r.c=t:r.x=t,r}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n._detect=e,n})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0;t.loopAsync=function(e,t,n){var r=0,a=!1,i=!1,o=!1,s=void 0,l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a=!0,i)return void(s=t);n.apply(void 0,t)};!function u(){if(!a&&(o=!0,!i)){for(i=!0;!a&&r<e&&o;)o=!1,t(r++,u,l);if(i=!1,a)return void n.apply(void 0,s);r>=e&&o&&(a=!0,n())}}()}},function(e,t,n){"use strict";t.__esModule=!0,t.replaceLocation=t.pushLocation=t.startListener=t.getCurrentLocation=t.go=t.getUserConfirmation=void 0;var r=n(234);Object.defineProperty(t,"getUserConfirmation",{enumerable:!0,get:function(){return r.getUserConfirmation}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return r.go}});var a=n(88),i=(function(e){e&&e.__esModule}(a),n(126)),o=n(189),s=n(493),l=n(85),u=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},c=function(e){return window.location.hash=e},p=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},d=t.getCurrentLocation=function(e,t){var n=e.decodePath(u()),r=(0,l.getQueryStringValueFromPath)(n,t),a=void 0;r&&(n=(0,l.stripQueryStringValueFromPath)(n,t),a=(0,s.readState)(r));var o=(0,l.parsePath)(n);return o.state=a,(0,i.createLocation)(o,void 0,r)},f=void 0,h=(t.startListener=function(e,t,n){var r=function(){var r=u(),a=t.encodePath(r);if(r!==a)p(a);else{var i=d(t,n);if(f&&i.key&&f.key===i.key)return;f=i,e(i)}},a=u(),i=t.encodePath(a);return a!==i&&p(i),(0,o.addEventListener)(window,"hashchange",r),function(){return(0,o.removeEventListener)(window,"hashchange",r)}},function(e,t,n,r){var a=e.state,i=e.key,o=t.encodePath((0,l.createPath)(e));void 0!==a&&(o=(0,l.addQueryStringValueToPath)(o,n,i),(0,s.saveState)(i,a)),f=e,r(o)});t.pushLocation=function(e,t,n){return h(e,t,n,function(e){u()!==e&&c(e)})},t.replaceLocation=function(e,t,n){return h(e,t,n,function(e){u()!==e&&p(e)})}},function(e,t,n){"use strict";t.__esModule=!0,t.replaceLocation=t.pushLocation=t.getCurrentLocation=t.go=t.getUserConfirmation=void 0;var r=n(234);Object.defineProperty(t,"getUserConfirmation",{enumerable:!0,get:function(){return r.getUserConfirmation}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return r.go}});var a=n(126),i=n(85);t.getCurrentLocation=function(){return(0,a.createLocation)(window.location)},t.pushLocation=function(e){return window.location.href=(0,i.createPath)(e),!1},t.replaceLocation=function(e){return window.location.replace((0,i.createPath)(e)),!1}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(33),s=a(o),l=n(235),u=n(234),c=r(u),p=n(1007),d=r(p),f=n(189),h=n(236),m=a(h),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.canUseDOM||(0,s.default)(!1);var t=e.forceRefresh||!(0,f.supportsHistory)(),n=t?d:c,r=n.getUserConfirmation,a=n.getCurrentLocation,o=n.pushLocation,u=n.replaceLocation,p=n.go,h=(0,m.default)(i({getUserConfirmation:r},e,{getCurrentLocation:a,pushLocation:o,replaceLocation:u,go:p})),g=0,v=void 0,y=function(e,t){1==++g&&(v=c.startListener(h.transitionTo));var n=t?h.listenBefore(e):h.listen(e);return function(){n(),0==--g&&v()}};return i({},h,{listenBefore:function(e){return y(e,!0)},listen:function(e){return y(e,!1)}})};t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(88),o=(r(i),n(33)),s=r(o),l=n(235),u=n(189),c=n(1006),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),d=n(236),f=r(d),h=function(e){return"/"===e.charAt(0)?e:"/"+e},m={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!"+e},decodePath:function(e){return"!"===e.charAt(0)?e.substring(1):e}},noslash:{encodePath:function(e){return"/"===e.charAt(0)?e.substring(1):e},decodePath:h},slash:{encodePath:h,decodePath:h}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.canUseDOM||(0,s.default)(!1);var t=e.queryKey,n=e.hashType;"string"!=typeof t&&(t="_k"),null==n&&(n="slash"),n in m||(n="slash");var r=m[n],i=p.getUserConfirmation,o=function(){return p.getCurrentLocation(r,t)},c=function(e){return p.pushLocation(e,r,t)},d=function(e){return p.replaceLocation(e,r,t)},h=(0,f.default)(a({getUserConfirmation:i},e,{getCurrentLocation:o,pushLocation:c,replaceLocation:d,go:p.go})),g=0,v=void 0,y=function(e,n){1==++g&&(v=p.startListener(h.transitionTo,r,t));var a=n?h.listenBefore(e):h.listen(e);return function(){a(),0==--g&&v()}},b=function(e){return y(e,!0)},w=function(e){return y(e,!1)};(0,u.supportsGoWithoutReloadUsingHash)();return a({},h,{listenBefore:b,listen:w,go:function(e){h.go(e)},createHref:function(e){return"#"+r.encodePath(h.createHref(e))}})};t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(88),o=(r(i),n(33)),s=r(o),l=n(126),u=n(85),c=n(236),p=r(c),d=n(188),f=function(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(e)?e={entries:e}:"string"==typeof e&&(e={entries:[e]});var t=function(){var e=m[g],t=(0,u.createPath)(e),n=void 0,r=void 0;e.key&&(n=e.key,r=b(n));var i=(0,u.parsePath)(t);return(0,l.createLocation)(a({},i,{state:r}),void 0,n)},n=function(e){var t=g+e;return t>=0&&t<m.length},r=function(e){if(e&&n(e)){g+=e;var r=t();c.transitionTo(a({},r,{action:d.POP}))}},i=function(e){g+=1,g<m.length&&m.splice(g),m.push(e),y(e.key,e.state)},o=function(e){m[g]=e,y(e.key,e.state)},c=(0,p.default)(a({},e,{getCurrentLocation:t,pushLocation:i,replaceLocation:o,go:r})),h=e,m=h.entries,g=h.current;"string"==typeof m?m=[m]:Array.isArray(m)||(m=["/"]),m=m.map(function(e){return(0,l.createLocation)(e)}),null==g?g=m.length-1:g>=0&&g<m.length||(0,s.default)(!1);var v=f(m),y=function(e,t){return v[e]=t},b=function(e){return v[e]};return a({},c,{canGo:n})};t.default=h},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,o=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,c=u&&u(Object);e.exports=function e(t,n,p){if("string"!=typeof n){if(c){var d=u(n);d&&d!==c&&e(t,d,p)}var f=o(n);s&&(f=f.concat(s(n)));for(var h=0;h<f.length;++h){var m=f[h];if(!(r[m]||a[m]||p&&p[m])){var g=l(n,m);try{i(t,m,g)}catch(e){}}}return t}return t}},function(e,t,n){var r,a;/**
 * @license IDBWrapper - A cross-browser wrapper for IndexedDB
 * Version 1.7.2
 * Copyright (c) 2011 - 2017 Jens Arps
 * http://jensarps.de/
 *
 * Licensed under the MIT license
 */
!function(i,o,s){"use strict";r=o,void 0!==(a="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=a)}(0,function(){"use strict";function e(e,t){var n,r;for(n in t)(r=t[n])!==s[n]&&r!==e[n]&&(e[n]=r);return e}function t(e){return"error"in e.target?"VersionError"==e.target.error.name:"errorCode"in e.target&&12==e.target.errorCode}var n=function(e){throw e},r=function(){},a={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:n,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},i=function(e,t){void 0===t&&"function"==typeof e&&(t=e),"[object Object]"!=Object.prototype.toString.call(e)&&(e={});for(var n in a)this[n]=void 0!==e[n]?e[n]:a[n];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,t&&(this.onStoreReady=t);var r="object"==typeof window?window:self,i=this.implementationPreference.filter(function(e){return e in r});this.implementation=i[0],this.idb=r[this.implementation],this.keyRange=r.IDBKeyRange||r.webkitIDBKeyRange||r.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},o={constructor:i,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var e=this.idb.open(this.dbName,this.dbVersion),n=!1;e.onerror=function(e){if(t(e))this.onError(new Error("The version number provided is lower than the existing one."));else{var n;if(e.target.error)n=e.target.error;else{var r="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in e.target&&(r+=" with error code "+e.target.errorCode),n=new Error(r)}this.onError(n)}}.bind(this),e.onsuccess=function(e){if(!n){if(this.db)return void this.onStoreReady();if(this.db=e.target.result,"string"==typeof this.db.version)return void this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."));if(!this.db.objectStoreNames.contains(this.storeName))return void this.onError(new Error("Object store couldn't be created."));var t=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=t.objectStore(this.storeName);var r=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var t=e.name;if(!t)return n=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(e),this.hasIndex(t)){var a=this.store.index(t);this.indexComplies(a,e)||(n=!0,this.onError(new Error('Cannot modify index "'+t+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),r.splice(r.indexOf(t),1)}else n=!0,this.onError(new Error('Cannot create new index "'+t+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),r.length&&(n=!0,this.onError(new Error('Cannot delete index(es) "'+r.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),n||this.onStoreReady()}}.bind(this),e.onupgradeneeded=function(e){if(this.db=e.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=e.target.transaction.objectStore(this.storeName);else{var t={autoIncrement:this.autoIncrement};null!==this.keyPath&&(t.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,t)}var r=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var t=e.name;if(t||(n=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(e),this.hasIndex(t)){var a=this.store.index(t);this.indexComplies(a,e)||(this.store.deleteIndex(t),this.store.createIndex(t,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})),r.splice(r.indexOf(t),1)}else this.store.createIndex(t,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})},this),r.length&&r.forEach(function(e){this.store.deleteIndex(e)},this)}.bind(this)},deleteDatabase:function(e,t){if(this.idb.deleteDatabase){this.db.close();var n=this.idb.deleteDatabase(this.dbName);n.onsuccess=e,n.onerror=t}else t(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(e,t,a,i){null!==this.keyPath&&(i=a,a=t,t=e),i||(i=n),a||(a=r);var o,s=!1,l=null,u=this.db.transaction([this.storeName],this.consts.READ_WRITE);return u.oncomplete=function(){(s?a:i)(l)},u.onabort=i,u.onerror=i,null!==this.keyPath?(this._addIdPropertyIfNeeded(t),o=u.objectStore(this.storeName).put(t)):o=u.objectStore(this.storeName).put(t,e),o.onsuccess=function(e){s=!0,l=e.target.result},o.onerror=i,u},get:function(e,t,a){a||(a=n),t||(t=r);var i=!1,o=null,s=this.db.transaction([this.storeName],this.consts.READ_ONLY);s.oncomplete=function(){(i?t:a)(o)},s.onabort=a,s.onerror=a;var l=s.objectStore(this.storeName).get(e);return l.onsuccess=function(e){i=!0,o=e.target.result},l.onerror=a,s},remove:function(e,t,a){a||(a=n),t||(t=r);var i=!1,o=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){(i?t:a)(o)},s.onabort=a,s.onerror=a;var l=s.objectStore(this.storeName).delete(e);return l.onsuccess=function(e){i=!0,o=e.target.result},l.onerror=a,s},batch:function(e,t,a){if(a||(a=n),t||(t=r),"[object Array]"!=Object.prototype.toString.call(e))a(new Error("dataArray argument must be of type Array."));else if(0===e.length)return t(!0);var i=e.length,o=!1,s=!1,l=this.db.transaction([this.storeName],this.consts.READ_WRITE);l.oncomplete=function(){(s?t:a)(s)},l.onabort=a,l.onerror=a;var u=function(){0!==--i||o||(o=!0,s=!0)};return e.forEach(function(e){var t=e.type,n=e.key,r=e.value,i=function(e){l.abort(),o||(o=!0,a(e,t,n))};if("remove"==t){var s=l.objectStore(this.storeName).delete(n);s.onsuccess=u,s.onerror=i}else if("put"==t){var c;null!==this.keyPath?(this._addIdPropertyIfNeeded(r),c=l.objectStore(this.storeName).put(r)):c=l.objectStore(this.storeName).put(r,n),c.onsuccess=u,c.onerror=i}},this),l},putBatch:function(e,t,n){var r=e.map(function(e){return{type:"put",value:e}});return this.batch(r,t,n)},upsertBatch:function(e,t,a,i){"function"==typeof t&&(a=t,i=a,t={}),i||(i=n),a||(a=r),t||(t={}),"[object Array]"!=Object.prototype.toString.call(e)&&i(new Error("dataArray argument must be of type Array."));var o=t.keyField||this.keyPath,s=e.length,l=!1,u=!1,c=0,p=this.db.transaction([this.storeName],this.consts.READ_WRITE);p.oncomplete=function(){u?a(e):i(!1)},p.onabort=i,p.onerror=i;var d=function(t){e[c++][o]=t.target.result,0!==--s||l||(l=!0,u=!0)};return e.forEach(function(e){var t,n=e.key,r=function(e){p.abort(),l||(l=!0,i(e))};null!==this.keyPath?(this._addIdPropertyIfNeeded(e),t=p.objectStore(this.storeName).put(e)):t=p.objectStore(this.storeName).put(e,n),t.onsuccess=d,t.onerror=r},this),p},removeBatch:function(e,t,n){var r=e.map(function(e){return{type:"remove",key:e}});return this.batch(r,t,n)},getBatch:function(e,t,a,i){if(a||(a=n),t||(t=r),i||(i="sparse"),"[object Array]"!=Object.prototype.toString.call(e))a(new Error("keyArray argument must be of type Array."));else if(0===e.length)return t([]);var o=[],s=e.length,l=!1,u=!1,c=null,p=this.db.transaction([this.storeName],this.consts.READ_ONLY);p.oncomplete=function(){(u?t:a)(c)},p.onabort=a,p.onerror=a;var d=function(e){e.target.result||"dense"==i?o.push(e.target.result):"sparse"==i&&o.length++,0===--s&&(l=!0,u=!0,c=o)};return e.forEach(function(e){var t=function(e){l=!0,c=e,a(e),p.abort()},n=p.objectStore(this.storeName).get(e);n.onsuccess=d,n.onerror=t},this),p},getAll:function(e,t){t||(t=n),e||(e=r);var a=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=a.objectStore(this.storeName);return i.getAll?this._getAllNative(a,i,e,t):this._getAllCursor(a,i,e,t),a},_getAllNative:function(e,t,n,r){var a=!1,i=null;e.oncomplete=function(){(a?n:r)(i)},e.onabort=r,e.onerror=r;var o=t.getAll();o.onsuccess=function(e){a=!0,i=e.target.result},o.onerror=r},_getAllCursor:function(e,t,n,r){var a=[],i=!1,o=null;e.oncomplete=function(){(i?n:r)(o)},e.onabort=r,e.onerror=r;var s=t.openCursor();s.onsuccess=function(e){var t=e.target.result;t?(a.push(t.value),t.continue()):(i=!0,o=a)},s.onError=r},clear:function(e,t){t||(t=n),e||(e=r);var a=!1,i=null,o=this.db.transaction([this.storeName],this.consts.READ_WRITE);o.oncomplete=function(){(a?e:t)(i)},o.onabort=t,o.onerror=t;var s=o.objectStore(this.storeName).clear();return s.onsuccess=function(e){a=!0,i=e.target.result},s.onerror=t,o},_addIdPropertyIfNeeded:function(e){void 0===e[this.keyPath]&&(e[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(e){return this.store.indexNames.contains(e)},normalizeIndexData:function(e){e.keyPath=e.keyPath||e.name,e.unique=!!e.unique,e.multiEntry=!!e.multiEntry},indexComplies:function(e,t){return["keyPath","unique","multiEntry"].every(function(n){if("multiEntry"==n&&void 0===e[n]&&!1===t[n])return!0;if("keyPath"==n&&"[object Array]"==Object.prototype.toString.call(t[n])){var r=t.keyPath,a=e.keyPath;if("string"==typeof a)return r.toString()==a;if("function"!=typeof a.contains&&"function"!=typeof a.indexOf)return!1;if(a.length!==r.length)return!1;for(var i=0,o=r.length;i<o;i++)if(!(a.contains&&a.contains(r[i])||a.indexOf(-1!==r[i])))return!1;return!0}return t[n]==e[n]})},iterate:function(t,r){r=e({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:n,limit:1/0,offset:0,allowItemRejection:!1},r||{});var a="desc"==r.order.toLowerCase()?"PREV":"NEXT";r.filterDuplicates&&(a+="_NO_DUPLICATE");var i=!1,o=this.db.transaction([this.storeName],this.consts[r.writeAccess?"READ_WRITE":"READ_ONLY"]),s=o.objectStore(this.storeName);r.index&&(s=s.index(r.index));var l=0;o.oncomplete=function(){if(!i)return void r.onError(null);r.onEnd?r.onEnd():t(null)},o.onabort=r.onError,o.onerror=r.onError;var u=s.openCursor(r.keyRange,this.consts[a]);return u.onerror=r.onError,u.onsuccess=function(e){var n=e.target.result;if(n)if(r.offset)n.advance(r.offset),r.offset=0;else{var a=t(n.value,n,o);r.allowItemRejection&&!1===a||l++,r.autoContinue&&(l+r.offset<r.limit?n.continue():i=!0)}else i=!0},o},query:function(e,t){var n=[],r=0;return t=t||{},t.autoContinue=!0,t.writeAccess=!1,t.allowItemRejection=!!t.filter,t.onEnd=function(){e(n,r)},this.iterate(function(e){r++;var a=!t.filter||t.filter(e);return!1!==a&&n.push(e),a},t)},count:function(t,r){r=e({index:null,keyRange:null},r||{});var a=r.onError||n,i=!1,o=null,s=this.db.transaction([this.storeName],this.consts.READ_ONLY);s.oncomplete=function(){(i?t:a)(o)},s.onabort=a,s.onerror=a;var l=s.objectStore(this.storeName);r.index&&(l=l.index(r.index));var u=l.count(r.keyRange);return u.onsuccess=function(e){i=!0,o=e.target.result},u.onError=a,s},makeKeyRange:function(e){var t,n=void 0!==e.lower,r=void 0!==e.upper,a=void 0!==e.only;switch(!0){case a:t=this.keyRange.only(e.only);break;case n&&r:t=this.keyRange.bound(e.lower,e.upper,e.excludeLower,e.excludeUpper);break;case n:t=this.keyRange.lowerBound(e.lower,e.excludeLower);break;case r:t=this.keyRange.upperBound(e.upper,e.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return t}},s={};return i.prototype=o,i.version=o.version,i})},function(e,t,n){var r,a;/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){"use strict";function o(e,t,n){t=t||ce;var r,a=t.createElement("script");if(a.text=e,n)for(r in ke)n[r]&&(a[r]=n[r]);t.head.appendChild(a).parentNode.removeChild(a)}function s(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ge[ve.call(e)]||"object":typeof e}function l(e){var t=!!e&&"length"in e&&e.length,n=s(e);return!_e(e)&&!Ce(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function u(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function c(e,t,n){return _e(t)?Se.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?Se.grep(e,function(e){return e===t!==n}):"string"!=typeof t?Se.grep(e,function(e){return me.call(t,e)>-1!==n}):Se.filter(t,e,n)}function p(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function d(e){var t={};return Se.each(e.match(Me)||[],function(e,n){t[n]=!0}),t}function f(e){return e}function h(e){throw e}function m(e,t,n,r){var a;try{e&&_e(a=e.promise)?a.call(e).done(t).fail(n):e&&_e(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function g(){ce.removeEventListener("DOMContentLoaded",g),n.removeEventListener("load",g),Se.ready()}function v(e,t){return t.toUpperCase()}function y(e){return e.replace(qe,"ms-").replace(Be,v)}function b(){this.expando=Se.expando+b.uid++}function w(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ze.test(e)?JSON.parse(e):e)}function E(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Ye,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=w(n)}catch(e){}We.set(e,t,n)}else n=void 0;return n}function _(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return Se.css(e,t,"")},l=s(),u=n&&n[3]||(Se.cssNumber[t]?"":"px"),c=(Se.cssNumber[t]||"px"!==u&&+l)&&$e.exec(Se.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;o--;)Se.style(e,t,c+u),(1-i)*(1-(i=s()/l||.5))<=0&&(o=0),c/=i;c*=2,Se.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,a=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=a)),a}function C(e){var t,n=e.ownerDocument,r=e.nodeName,a=Qe[r];return a||(t=n.body.appendChild(n.createElement(r)),a=Se.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),Qe[r]=a,a)}function k(e,t){for(var n,r,a=[],i=0,o=e.length;i<o;i++)r=e[i],r.style&&(n=r.style.display,t?("none"===n&&(a[i]=Ve.get(r,"display")||null,a[i]||(r.style.display="")),""===r.style.display&&Ke(r)&&(a[i]=C(r))):"none"!==n&&(a[i]="none",Ve.set(r,"display",n)));for(i=0;i<o;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}function S(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&u(e,t)?Se.merge([e],n):n}function D(e,t){for(var n=0,r=e.length;n<r;n++)Ve.set(e[n],"globalEval",!t||Ve.get(t[n],"globalEval"))}function O(e,t,n,r,a){for(var i,o,l,u,c,p,d=t.createDocumentFragment(),f=[],h=0,m=e.length;h<m;h++)if((i=e[h])||0===i)if("object"===s(i))Se.merge(f,i.nodeType?[i]:i);else if(rt.test(i)){for(o=o||d.appendChild(t.createElement("div")),l=(et.exec(i)||["",""])[1].toLowerCase(),u=nt[l]||nt._default,o.innerHTML=u[1]+Se.htmlPrefilter(i)+u[2],p=u[0];p--;)o=o.lastChild;Se.merge(f,o.childNodes),o=d.firstChild,o.textContent=""}else f.push(t.createTextNode(i));for(d.textContent="",h=0;i=f[h++];)if(r&&Se.inArray(i,r)>-1)a&&a.push(i);else if(c=Se.contains(i.ownerDocument,i),o=S(d.appendChild(i),"script"),c&&D(o),n)for(p=0;i=o[p++];)tt.test(i.type||"")&&n.push(i);return d}function T(){return!0}function R(){return!1}function P(){try{return ce.activeElement}catch(e){}}function x(e,t,n,r,a,i){var o,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)x(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=R;else if(!a)return e;return 1===i&&(o=a,a=function(e){return Se().off(e),o.apply(this,arguments)},a.guid=o.guid||(o.guid=Se.guid++)),e.each(function(){Se.event.add(this,t,a,r,n)})}function N(e,t){return u(e,"table")&&u(11!==t.nodeType?t:t.firstChild,"tr")?Se(e).children("tbody")[0]||e:e}function I(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function A(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function j(e,t){var n,r,a,i,o,s,l,u;if(1===t.nodeType){if(Ve.hasData(e)&&(i=Ve.access(e),o=Ve.set(t,i),u=i.events)){delete o.handle,o.events={};for(a in u)for(n=0,r=u[a].length;n<r;n++)Se.event.add(t,a,u[a][n])}We.hasData(e)&&(s=We.access(e),l=Se.extend({},s),We.set(t,l))}}function M(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ze.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function L(e,t,n,r){t=fe.apply([],t);var a,i,s,l,u,c,p=0,d=e.length,f=d-1,h=t[0],m=_e(h);if(m||d>1&&"string"==typeof h&&!Ee.checkClone&&ct.test(h))return e.each(function(a){var i=e.eq(a);m&&(t[0]=h.call(this,a,i.html())),L(i,t,n,r)});if(d&&(a=O(t,e[0].ownerDocument,!1,e,r),i=a.firstChild,1===a.childNodes.length&&(a=i),i||r)){for(s=Se.map(S(a,"script"),I),l=s.length;p<d;p++)u=a,p!==f&&(u=Se.clone(u,!0,!0),l&&Se.merge(s,S(u,"script"))),n.call(e[p],u,p);if(l)for(c=s[s.length-1].ownerDocument,Se.map(s,A),p=0;p<l;p++)u=s[p],tt.test(u.type||"")&&!Ve.access(u,"globalEval")&&Se.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?Se._evalUrl&&Se._evalUrl(u.src):o(u.textContent.replace(pt,""),c,u))}return e}function U(e,t,n){for(var r,a=t?Se.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||Se.cleanData(S(r)),r.parentNode&&(n&&Se.contains(r.ownerDocument,r)&&D(S(r,"script")),r.parentNode.removeChild(r));return e}function F(e,t,n){var r,a,i,o,s=e.style;return n=n||ft(e),n&&(o=n.getPropertyValue(t)||n[t],""!==o||Se.contains(e.ownerDocument,e)||(o=Se.style(e,t)),!Ee.pixelBoxStyles()&&dt.test(o)&&ht.test(t)&&(r=s.width,a=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=a,s.maxWidth=i)),void 0!==o?o+"":o}function q(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function B(e){if(e in wt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=bt.length;n--;)if((e=bt[n]+t)in wt)return e}function H(e){var t=Se.cssProps[e];return t||(t=Se.cssProps[e]=B(e)||e),t}function V(e,t,n){var r=$e.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function W(e,t,n,r,a,i){var o="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=Se.css(e,n+Xe[o],!0,a)),r?("content"===n&&(l-=Se.css(e,"padding"+Xe[o],!0,a)),"margin"!==n&&(l-=Se.css(e,"border"+Xe[o]+"Width",!0,a))):(l+=Se.css(e,"padding"+Xe[o],!0,a),"padding"!==n?l+=Se.css(e,"border"+Xe[o]+"Width",!0,a):s+=Se.css(e,"border"+Xe[o]+"Width",!0,a));return!r&&i>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))),l}function z(e,t,n){var r=ft(e),a=F(e,t,r),i="border-box"===Se.css(e,"boxSizing",!1,r),o=i;if(dt.test(a)){if(!n)return a;a="auto"}return o=o&&(Ee.boxSizingReliable()||a===e.style[t]),("auto"===a||!parseFloat(a)&&"inline"===Se.css(e,"display",!1,r))&&(a=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(a=parseFloat(a)||0)+W(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Y(e,t,n,r,a){return new Y.prototype.init(e,t,n,r,a)}function J(){_t&&(!1===ce.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(J):n.setTimeout(J,Se.fx.interval),Se.fx.tick())}function $(){return n.setTimeout(function(){Et=void 0}),Et=Date.now()}function X(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)n=Xe[r],a["margin"+n]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function K(e,t,n){for(var r,a=(Z.tweeners[t]||[]).concat(Z.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function G(e,t,n){var r,a,i,o,s,l,u,c,p="width"in t||"height"in t,d=this,f={},h=e.style,m=e.nodeType&&Ke(e),g=Ve.get(e,"fxshow");n.queue||(o=Se._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,Se.queue(e,"fx").length||o.empty.fire()})}));for(r in t)if(a=t[r],Ct.test(a)){if(delete t[r],i=i||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!g||void 0===g[r])continue;m=!0}f[r]=g&&g[r]||Se.style(e,r)}if((l=!Se.isEmptyObject(t))||!Se.isEmptyObject(f)){p&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=g&&g.display,null==u&&(u=Ve.get(e,"display")),c=Se.css(e,"display"),"none"===c&&(u?c=u:(k([e],!0),u=e.style.display||u,c=Se.css(e,"display"),k([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===Se.css(e,"float")&&(l||(d.done(function(){h.display=u}),null==u&&(c=h.display,u="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1;for(r in f)l||(g?"hidden"in g&&(m=g.hidden):g=Ve.access(e,"fxshow",{display:u}),i&&(g.hidden=!m),m&&k([e],!0),d.done(function(){m||k([e]),Ve.remove(e,"fxshow");for(r in f)Se.style(e,r,f[r])})),l=K(m?g[r]:0,r,d),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}}function Q(e,t){var n,r,a,i,o;for(n in e)if(r=y(n),a=t[r],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=Se.cssHooks[r])&&"expand"in o){i=o.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=a)}else t[r]=a}function Z(e,t,n){var r,a,i=0,o=Z.prefilters.length,s=Se.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Et||$(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,i=1-r,o=0,l=u.tweens.length;o<l;o++)u.tweens[o].run(i);return s.notifyWith(e,[u,i,n]),i<1&&l?n:(l||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:Se.extend({},t),opts:Se.extend(!0,{specialEasing:{},easing:Se.easing._default},n),originalProperties:t,originalOptions:n,startTime:Et||$(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Se.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(Q(c,u.opts.specialEasing);i<o;i++)if(r=Z.prefilters[i].call(u,e,c,u.opts))return _e(r.stop)&&(Se._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return Se.map(c,K,u),_e(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),Se.fx.timer(Se.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}function ee(e){return(e.match(Me)||[]).join(" ")}function te(e){return e.getAttribute&&e.getAttribute("class")||""}function ne(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Me)||[]:[]}function re(e,t,n,r){var a;if(Array.isArray(t))Se.each(t,function(t,a){n||jt.test(e)?r(e,a):re(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,n,r)});else if(n||"object"!==s(t))r(e,t);else for(a in t)re(e+"["+a+"]",t[a],n,r)}function ae(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(Me)||[];if(_e(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ie(e,t,n,r){function a(s){var l;return i[s]=!0,Se.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)}),l}var i={},o=e===Jt;return a(t.dataTypes[0])||!i["*"]&&a("*")}function oe(e,t){var n,r,a=Se.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&Se.extend(!0,e,r),e}function se(e,t,n){for(var r,a,i,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)i=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}o||(o=a)}i=i||o}if(i)return i!==l[0]&&l.unshift(i),n[i]}function le(e,t,n,r){var a,i,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(i=c.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=c.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(o=u[l+" "+i]||u["* "+i]))for(a in u)if(s=a.split(" "),s[1]===i&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[a]:!0!==u[a]&&(i=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}var ue=[],ce=n.document,pe=Object.getPrototypeOf,de=ue.slice,fe=ue.concat,he=ue.push,me=ue.indexOf,ge={},ve=ge.toString,ye=ge.hasOwnProperty,be=ye.toString,we=be.call(Object),Ee={},_e=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},Ce=function(e){return null!=e&&e===e.window},ke={type:!0,src:!0,noModule:!0},Se=function(e,t){return new Se.fn.init(e,t)},De=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Se.fn=Se.prototype={jquery:"3.3.1",constructor:Se,length:0,toArray:function(){return de.call(this)},get:function(e){return null==e?de.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Se.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Se.each(this,e)},map:function(e){return this.pushStack(Se.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(de.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:he,sort:ue.sort,splice:ue.splice},Se.extend=Se.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||_e(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],r=e[t],o!==r&&(u&&r&&(Se.isPlainObject(r)||(a=Array.isArray(r)))?(a?(a=!1,i=n&&Array.isArray(n)?n:[]):i=n&&Se.isPlainObject(n)?n:{},o[t]=Se.extend(u,i,r)):void 0!==r&&(o[t]=r));return o},Se.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ve.call(e))&&(!(t=pe(e))||"function"==typeof(n=ye.call(t,"constructor")&&t.constructor)&&be.call(n)===we)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){o(e)},each:function(e,t){var n,r=0;if(l(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(De,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(l(Object(e))?Se.merge(n,"string"==typeof e?[e]:e):he.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:me.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,i=0,o=[];if(l(e))for(r=e.length;i<r;i++)null!=(a=t(e[i],i,n))&&o.push(a);else for(i in e)null!=(a=t(e[i],i,n))&&o.push(a);return fe.apply([],o)},guid:1,support:Ee}),"function"==typeof Symbol&&(Se.fn[Symbol.iterator]=ue[Symbol.iterator]),Se.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ge["[object "+t+"]"]=t.toLowerCase()});var Oe=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){function t(e,t,n,r){var a,i,o,s,l,c,d,f=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!r&&((t?t.ownerDocument||t:F)!==x&&P(t),t=t||x,I)){if(11!==h&&(l=me.exec(e)))if(a=l[1]){if(9===h){if(!(o=t.getElementById(a)))return n;if(o.id===a)return n.push(o),n}else if(f&&(o=f.getElementById(a))&&L(t,o)&&o.id===a)return n.push(o),n}else{if(l[2])return K.apply(n,t.getElementsByTagName(e)),n;if((a=l[3])&&w.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&!W[e+" "]&&(!A||!A.test(e))){if(1!==h)f=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,we):t.setAttribute("id",s=U),c=k(e),i=c.length;i--;)c[i]="#"+s+" "+p(c[i]);d=c.join(","),f=ge.test(e)&&u(t.parentNode)||t}if(d)try{return K.apply(n,f.querySelectorAll(d)),n}catch(e){}finally{s===U&&t.removeAttribute("id")}}}return D(e.replace(ie,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>E.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[U]=!0,e}function a(e){var t=x.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var n=e.split("|"),r=n.length;r--;)E.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&_e(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function c(){}function p(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,a=t.next,i=a||r,o=n&&"parentNode"===i,s=B++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,l){var u,c,p,d=[q,s];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(p=t[U]||(t[U]={}),c=p[t.uniqueID]||(p[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[i])&&u[0]===q&&u[1]===s)return d[2]=u[2];if(c[i]=d,d[2]=e(t,n,l))return!0}return!1}}function f(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function h(e,n,r){for(var a=0,i=n.length;a<i;a++)t(e,n[a],r);return r}function m(e,t,n,r,a){for(var i,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),u&&t.push(s)));return o}function g(e,t,n,a,i,o){return a&&!a[U]&&(a=g(a)),i&&!i[U]&&(i=g(i,o)),r(function(r,o,s,l){var u,c,p,d=[],f=[],g=o.length,v=r||h(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:m(v,d,e,s,l),b=n?i||(r?e:g||a)?[]:o:y;if(n&&n(y,b,s,l),a)for(u=m(b,f),a(u,[],s,l),c=u.length;c--;)(p=u[c])&&(b[f[c]]=!(y[f[c]]=p));if(r){if(i||e){if(i){for(u=[],c=b.length;c--;)(p=b[c])&&u.push(y[c]=p);i(null,b=[],u,l)}for(c=b.length;c--;)(p=b[c])&&(u=i?Q(r,p):d[c])>-1&&(r[u]=!(o[u]=p))}}else b=m(b===o?b.splice(g,b.length):b),i?i(null,o,b,l):K.apply(o,b)})}function v(e){for(var t,n,r,a=e.length,i=E.relative[e[0].type],o=i||E.relative[" "],s=i?1:0,l=d(function(e){return e===t},o,!0),u=d(function(e){return Q(t,e)>-1},o,!0),c=[function(e,n,r){var a=!i&&(r||n!==O)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,a}];s<a;s++)if(n=E.relative[e[s].type])c=[d(f(c),n)];else{if(n=E.filter[e[s].type].apply(null,e[s].matches),n[U]){for(r=++s;r<a&&!E.relative[e[r].type];r++);return g(s>1&&f(c),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ie,"$1"),n,s<r&&v(e.slice(s,r)),r<a&&v(e=e.slice(r)),r<a&&p(e))}c.push(n)}return f(c)}function y(e,n){var a=n.length>0,i=e.length>0,o=function(r,o,s,l,u){var c,p,d,f=0,h="0",g=r&&[],v=[],y=O,b=r||i&&E.find.TAG("*",u),w=q+=null==y?1:Math.random()||.1,_=b.length;for(u&&(O=o===x||o||u);h!==_&&null!=(c=b[h]);h++){if(i&&c){for(p=0,o||c.ownerDocument===x||(P(c),s=!I);d=e[p++];)if(d(c,o||x,s)){l.push(c);break}u&&(q=w)}a&&((c=!d&&c)&&f--,r&&g.push(c))}if(f+=h,a&&h!==f){for(p=0;d=n[p++];)d(g,v,o,s);if(r){if(f>0)for(;h--;)g[h]||v[h]||(v[h]=$.call(l));v=m(v)}K.apply(l,v),u&&!r&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return u&&(q=w,O=y),g};return a?r(o):o}var b,w,E,_,C,k,S,D,O,T,R,P,x,N,I,A,j,M,L,U="sizzle"+1*new Date,F=e.document,q=0,B=0,H=n(),V=n(),W=n(),z=function(e,t){return e===t&&(R=!0),0},Y={}.hasOwnProperty,J=[],$=J.pop,X=J.push,K=J.push,G=J.slice,Q=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",ae=new RegExp(ee+"+","g"),ie=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),oe=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(re),ce=new RegExp("^"+te+"$"),pe={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,we=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ee=function(){P()},_e=d(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{K.apply(J=G.call(F.childNodes),F.childNodes),J[F.childNodes.length].nodeType}catch(e){K={apply:J.length?function(e,t){X.apply(e,G.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},P=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:F;return r!==x&&9===r.nodeType&&r.documentElement?(x=r,N=x.documentElement,I=!C(x),F!==x&&(n=x.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ee,!1):n.attachEvent&&n.attachEvent("onunload",Ee)),w.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=a(function(e){return e.appendChild(x.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=he.test(x.getElementsByClassName),w.getById=a(function(e){return N.appendChild(e).id=U,!x.getElementsByName||!x.getElementsByName(U).length}),w.getById?(E.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){return e.getAttribute("id")===t}},E.find.ID=function(e,t){if(void 0!==t.getElementById&&I){var n=t.getElementById(e);return n?[n]:[]}}):(E.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},E.find.ID=function(e,t){if(void 0!==t.getElementById&&I){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),E.find.TAG=w.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},E.find.CLASS=w.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&I)return t.getElementsByClassName(e)},j=[],A=[],(w.qsa=he.test(x.querySelectorAll))&&(a(function(e){N.appendChild(e).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&A.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||A.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+U+"-]").length||A.push("~="),e.querySelectorAll(":checked").length||A.push(":checked"),e.querySelectorAll("a#"+U+"+*").length||A.push(".#.+[+~]")}),a(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=x.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&A.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&A.push(":enabled",":disabled"),N.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&A.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),A.push(",.*:")})),(w.matchesSelector=he.test(M=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&a(function(e){w.disconnectedMatch=M.call(e,"*"),M.call(e,"[s!='']:x"),j.push("!=",re)}),A=A.length&&new RegExp(A.join("|")),j=j.length&&new RegExp(j.join("|")),t=he.test(N.compareDocumentPosition),L=t||he.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return R=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===x||e.ownerDocument===F&&L(F,e)?-1:t===x||t.ownerDocument===F&&L(F,t)?1:T?Q(T,e)-Q(T,t):0:4&n?-1:1)}:function(e,t){if(e===t)return R=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,s=[e],l=[t];if(!a||!i)return e===x?-1:t===x?1:a?-1:i?1:T?Q(T,e)-Q(T,t):0;if(a===i)return o(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?o(s[r],l[r]):s[r]===F?-1:l[r]===F?1:0},x):x},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==x&&P(e),n=n.replace(le,"='$1']"),w.matchesSelector&&I&&!W[n+" "]&&(!j||!j.test(n))&&(!A||!A.test(n)))try{var r=M.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,x,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==x&&P(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==x&&P(e);var n=E.attrHandle[t.toLowerCase()],r=n&&Y.call(E.attrHandle,t.toLowerCase())?n(e,t,!I):void 0;return void 0!==r?r:w.attributes||!I?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(be,we)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,a=0;if(R=!w.detectDuplicates,T=!w.sortStable&&e.slice(0),e.sort(z),R){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return T=null,e},_=t.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=_(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=_(t);return n},E=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(a){var i=t.attr(a,e);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(ae," ")+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,d,f,h,m=i!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(i){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?g.firstChild:g.lastChild],o&&y){for(d=g,p=d[U]||(d[U]={}),c=p[d.uniqueID]||(p[d.uniqueID]={}),u=c[e]||[],f=u[0]===q&&u[1],b=f&&u[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(b=f=0)||h.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[q,f,b];break}}else if(y&&(d=t,p=d[U]||(d[U]={}),c=p[d.uniqueID]||(p[d.uniqueID]={}),u=c[e]||[],f=u[0]===q&&u[1],b=f),!1===b)for(;(d=++f&&d&&d[m]||(b=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(p=d[U]||(d[U]={}),c=p[d.uniqueID]||(p[d.uniqueID]={}),c[e]=[q,b]),d!==t)););return(b-=a)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var a,i=E.pseudos[e]||E.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[U]?i(n):i.length>1?(a=[e,e,"",n],E.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,a=i(e,n),o=a.length;o--;)r=Q(e,a[o]),e[r]=!(t[r]=a[o])}):function(e){return i(e,0,a)}):i}},pseudos:{not:r(function(e){var t=[],n=[],a=S(e.replace(ie,"$1"));return a[U]?r(function(e,t,n,r){for(var i,o=a(e,null,r,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,r,i){return t[0]=e,a(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ve,ye),function(t){return(t.textContent||t.innerText||_(t)).indexOf(e)>-1}}),lang:r(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,ye).toLowerCase(),function(t){var n;do{if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},E.pseudos.nth=E.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})E.pseudos[b]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(b);return c.prototype=E.filters=E.pseudos,E.setFilters=new c,k=t.tokenize=function(e,n){var r,a,i,o,s,l,u,c=V[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=E.preFilter;s;){r&&!(a=oe.exec(s))||(a&&(s=s.slice(a[0].length)||s),l.push(i=[])),r=!1,(a=se.exec(s))&&(r=a.shift(),i.push({value:r,type:a[0].replace(ie," ")}),s=s.slice(r.length));for(o in E.filter)!(a=pe[o].exec(s))||u[o]&&!(a=u[o](a))||(r=a.shift(),i.push({value:r,type:o,matches:a}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):V(e,l).slice(0)},S=t.compile=function(e,t){var n,r=[],a=[],i=W[e+" "];if(!i){for(t||(t=k(e)),n=t.length;n--;)i=v(t[n]),i[U]?r.push(i):a.push(i);i=W(e,y(a,r)),i.selector=e}return i},D=t.select=function(e,t,n,r){var a,i,o,s,l,c="function"==typeof e&&e,d=!r&&k(e=c.selector||e);if(n=n||[],1===d.length){if(i=d[0]=d[0].slice(0),i.length>2&&"ID"===(o=i[0]).type&&9===t.nodeType&&I&&E.relative[i[1].type]){if(!(t=(E.find.ID(o.matches[0].replace(ve,ye),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(a=pe.needsContext.test(e)?0:i.length;a--&&(o=i[a],!E.relative[s=o.type]);)if((l=E.find[s])&&(r=l(o.matches[0].replace(ve,ye),ge.test(i[0].type)&&u(t.parentNode)||t))){if(i.splice(a,1),!(e=r.length&&p(i)))return K.apply(n,r),n;break}}return(c||S(e,d))(r,t,!I,n,!t||ge.test(e)&&u(t.parentNode)||t),n},w.sortStable=U.split("").sort(z).join("")===U,w.detectDuplicates=!!R,P(),w.sortDetached=a(function(e){return 1&e.compareDocumentPosition(x.createElement("fieldset"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||i(Z,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);Se.find=Oe,Se.expr=Oe.selectors,Se.expr[":"]=Se.expr.pseudos,Se.uniqueSort=Se.unique=Oe.uniqueSort,Se.text=Oe.getText,Se.isXMLDoc=Oe.isXML,Se.contains=Oe.contains,Se.escapeSelector=Oe.escape;var Te=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&Se(e).is(n))break;r.push(e)}return r},Re=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Pe=Se.expr.match.needsContext,xe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Se.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Se.find.matchesSelector(r,e)?[r]:[]:Se.find.matches(e,Se.grep(t,function(e){return 1===e.nodeType}))},Se.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(Se(e).filter(function(){for(t=0;t<r;t++)if(Se.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)Se.find(e,a[t],n);return r>1?Se.uniqueSort(n):n},filter:function(e){return this.pushStack(c(this,e||[],!1))},not:function(e){return this.pushStack(c(this,e||[],!0))},is:function(e){return!!c(this,"string"==typeof e&&Pe.test(e)?Se(e):e||[],!1).length}});var Ne,Ie=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Se.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||Ne,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Ie.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Se?t[0]:t,Se.merge(this,Se.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:ce,!0)),xe.test(r[1])&&Se.isPlainObject(t))for(r in t)_e(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return a=ce.getElementById(r[2]),a&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):_e(e)?void 0!==n.ready?n.ready(e):e(Se):Se.makeArray(e,this)}).prototype=Se.fn,Ne=Se(ce);var Ae=/^(?:parents|prev(?:Until|All))/,je={children:!0,contents:!0,next:!0,prev:!0};Se.fn.extend({has:function(e){var t=Se(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Se.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!=typeof e&&Se(e);if(!Pe.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&Se.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?Se.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?me.call(Se(e),this[0]):me.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Se.uniqueSort(Se.merge(this.get(),Se(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Te(e,"parentNode")},parentsUntil:function(e,t,n){return Te(e,"parentNode",n)},next:function(e){return p(e,"nextSibling")},prev:function(e){return p(e,"previousSibling")},nextAll:function(e){return Te(e,"nextSibling")},prevAll:function(e){return Te(e,"previousSibling")},nextUntil:function(e,t,n){return Te(e,"nextSibling",n)},prevUntil:function(e,t,n){return Te(e,"previousSibling",n)},siblings:function(e){return Re((e.parentNode||{}).firstChild,e)},children:function(e){return Re(e.firstChild)},contents:function(e){return u(e,"iframe")?e.contentDocument:(u(e,"template")&&(e=e.content||e),Se.merge([],e.childNodes))}},function(e,t){Se.fn[e]=function(n,r){var a=Se.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=Se.filter(r,a)),this.length>1&&(je[e]||Se.uniqueSort(a),Ae.test(e)&&a.reverse()),this.pushStack(a)}});var Me=/[^\x20\t\r\n\f]+/g;Se.Callbacks=function(e){e="string"==typeof e?d(e):Se.extend({},e);var t,n,r,a,i=[],o=[],l=-1,u=function(){for(a=a||e.once,r=t=!0;o.length;l=-1)for(n=o.shift();++l<i.length;)!1===i[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=i.length,n=!1);e.memory||(n=!1),t=!1,a&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(l=i.length-1,o.push(n)),function t(n){Se.each(n,function(n,r){_e(r)?e.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==s(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return Se.each(arguments,function(e,t){for(var n;(n=Se.inArray(t,i,n))>-1;)i.splice(n,1),n<=l&&l--}),this},has:function(e){return e?Se.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=o=[],i=n="",this},disabled:function(){return!i},lock:function(){return a=o=[],n||t||(i=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=n||[],n=[e,n.slice?n.slice():n],o.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},Se.extend({Deferred:function(e){var t=[["notify","progress",Se.Callbacks("memory"),Se.Callbacks("memory"),2],["resolve","done",Se.Callbacks("once memory"),Se.Callbacks("once memory"),0,"resolved"],["reject","fail",Se.Callbacks("once memory"),Se.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return Se.Deferred(function(n){Se.each(t,function(t,r){var a=_e(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=a&&a.apply(this,arguments);e&&_e(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(e,r,a){function i(e,t,r,a){return function(){var s=this,l=arguments,u=function(){var n,u;if(!(e<o)){if((n=r.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,_e(u)?a?u.call(n,i(o,t,f,a),i(o,t,h,a)):(o++,u.call(n,i(o,t,f,a),i(o,t,h,a),i(o,t,f,t.notifyWith))):(r!==f&&(s=void 0,l=[n]),(a||t.resolveWith)(s,l))}},c=a?u:function(){try{u()}catch(n){Se.Deferred.exceptionHook&&Se.Deferred.exceptionHook(n,c.stackTrace),e+1>=o&&(r!==h&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?c():(Se.Deferred.getStackHook&&(c.stackTrace=Se.Deferred.getStackHook()),n.setTimeout(c))}}var o=0;return Se.Deferred(function(n){t[0][3].add(i(0,n,_e(a)?a:f,n.notifyWith)),t[1][3].add(i(0,n,_e(e)?e:f)),t[2][3].add(i(0,n,_e(r)?r:h))}).promise()},promise:function(e){return null!=e?Se.extend(e,a):a}},i={};return Se.each(t,function(e,n){var o=n[2],s=n[5];a[n[1]]=o.add,s&&o.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(n[3].fire),i[n[0]]=function(){return i[n[0]+"With"](this===i?void 0:this,arguments),this},i[n[0]+"With"]=o.fireWith}),a.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),a=de.call(arguments),i=Se.Deferred(),o=function(e){return function(n){r[e]=this,a[e]=arguments.length>1?de.call(arguments):n,--t||i.resolveWith(r,a)}};if(t<=1&&(m(e,i.done(o(n)).resolve,i.reject,!t),"pending"===i.state()||_e(a[n]&&a[n].then)))return i.then();for(;n--;)m(a[n],o(n),i.reject);return i.promise()}});var Le=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Se.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Le.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},Se.readyException=function(e){n.setTimeout(function(){throw e})};var Ue=Se.Deferred();Se.fn.ready=function(e){return Ue.then(e).catch(function(e){Se.readyException(e)}),this},Se.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--Se.readyWait:Se.isReady)||(Se.isReady=!0,!0!==e&&--Se.readyWait>0||Ue.resolveWith(ce,[Se]))}}),Se.ready.then=Ue.then,"complete"===ce.readyState||"loading"!==ce.readyState&&!ce.documentElement.doScroll?n.setTimeout(Se.ready):(ce.addEventListener("DOMContentLoaded",g),n.addEventListener("load",g));var Fe=function(e,t,n,r,a,i,o){var l=0,u=e.length,c=null==n;if("object"===s(n)){a=!0;for(l in n)Fe(e,t,l,n[l],!0,i,o)}else if(void 0!==r&&(a=!0,_e(r)||(o=!0),c&&(o?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(Se(e),n)})),t))for(;l<u;l++)t(e[l],n,o?r:r.call(e[l],l,t(e[l],n)));return a?e:c?t.call(e):u?t(e[0],n):i},qe=/^-ms-/,Be=/-([a-z])/g,He=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};b.uid=1,b.prototype={cache:function(e){var t=e[this.expando];return t||(t={},He(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[y(t)]=n;else for(r in t)a[y(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][y(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(y):(t=y(t),t=t in r?[t]:t.match(Me)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||Se.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Se.isEmptyObject(t)}};var Ve=new b,We=new b,ze=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ye=/[A-Z]/g;Se.extend({hasData:function(e){return We.hasData(e)||Ve.hasData(e)},data:function(e,t,n){return We.access(e,t,n)},removeData:function(e,t){We.remove(e,t)},_data:function(e,t,n){return Ve.access(e,t,n)},_removeData:function(e,t){Ve.remove(e,t)}}),Se.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=We.get(i),1===i.nodeType&&!Ve.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=y(r.slice(5)),E(i,r,a[r])));Ve.set(i,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){We.set(this,e)}):Fe(this,function(t){var n;if(i&&void 0===t){if(void 0!==(n=We.get(i,e)))return n;if(void 0!==(n=E(i,e)))return n}else this.each(function(){We.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){We.remove(this,e)})}}),Se.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Ve.get(e,t),n&&(!r||Array.isArray(n)?r=Ve.access(e,t,Se.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Se.queue(e,t),r=n.length,a=n.shift(),i=Se._queueHooks(e,t),o=function(){Se.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,o,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ve.get(e,n)||Ve.access(e,n,{empty:Se.Callbacks("once memory").add(function(){Ve.remove(e,[t+"queue",n])})})}}),Se.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Se.queue(this[0],e):void 0===t?this:this.each(function(){var n=Se.queue(this,e,t);Se._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Se.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=Se.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=Ve.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var Je=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$e=new RegExp("^(?:([+-])=|)("+Je+")([a-z%]*)$","i"),Xe=["Top","Right","Bottom","Left"],Ke=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&Se.contains(e.ownerDocument,e)&&"none"===Se.css(e,"display")},Ge=function(e,t,n,r){var a,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];a=n.apply(e,r||[]);for(i in t)e.style[i]=o[i];return a},Qe={};Se.fn.extend({show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ke(this)?Se(this).show():Se(this).hide()})}});var Ze=/^(?:checkbox|radio)$/i,et=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,tt=/^$|^module$|\/(?:java|ecma)script/i,nt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};nt.optgroup=nt.option,nt.tbody=nt.tfoot=nt.colgroup=nt.caption=nt.thead,nt.th=nt.td;var rt=/<|&#?\w+;/;!function(){var e=ce.createDocumentFragment(),t=e.appendChild(ce.createElement("div")),n=ce.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Ee.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Ee.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var at=ce.documentElement,it=/^key/,ot=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,st=/^([^.]*)(?:\.(.+)|)/;Se.event={global:{},add:function(e,t,n,r,a){var i,o,s,l,u,c,p,d,f,h,m,g=Ve.get(e);if(g)for(n.handler&&(i=n,n=i.handler,a=i.selector),a&&Se.find.matchesSelector(at,a),n.guid||(n.guid=Se.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==Se&&Se.event.triggered!==t.type?Se.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Me)||[""],u=t.length;u--;)s=st.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f&&(p=Se.event.special[f]||{},f=(a?p.delegateType:p.bindType)||f,p=Se.event.special[f]||{},c=Se.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&Se.expr.match.needsContext.test(a),namespace:h.join(".")},i),(d=l[f])||(d=l[f]=[],d.delegateCount=0,p.setup&&!1!==p.setup.call(e,r,h,o)||e.addEventListener&&e.addEventListener(f,o)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),a?d.splice(d.delegateCount++,0,c):d.push(c),Se.event.global[f]=!0)},remove:function(e,t,n,r,a){var i,o,s,l,u,c,p,d,f,h,m,g=Ve.hasData(e)&&Ve.get(e);if(g&&(l=g.events)){for(t=(t||"").match(Me)||[""],u=t.length;u--;)if(s=st.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(p=Se.event.special[f]||{},f=(r?p.delegateType:p.bindType)||f,d=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=d.length;i--;)c=d[i],!a&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(i,1),c.selector&&d.delegateCount--,p.remove&&p.remove.call(e,c));o&&!d.length&&(p.teardown&&!1!==p.teardown.call(e,h,g.handle)||Se.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)Se.event.remove(e,f+t[u],n,r,!0);Se.isEmptyObject(l)&&Ve.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o,s=Se.event.fix(e),l=new Array(arguments.length),u=(Ve.get(this,"events")||{})[s.type]||[],c=Se.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(o=Se.event.handlers.call(this,s,u),t=0;(a=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(i.namespace)||(s.handleObj=i,s.data=i.data,void 0!==(r=((Se.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,a,i,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(i=[],o={},n=0;n<l;n++)r=t[n],a=r.selector+" ",void 0===o[a]&&(o[a]=r.needsContext?Se(a,this).index(u)>-1:Se.find(a,this,null,[u]).length),o[a]&&i.push(r);i.length&&s.push({elem:u,handlers:i})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(Se.Event.prototype,e,{enumerable:!0,configurable:!0,get:_e(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Se.expando]?e:new Se.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==P()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===P()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&u(this,"input"))return this.click(),!1},_default:function(e){return u(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Se.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Se.Event=function(e,t){if(!(this instanceof Se.Event))return new Se.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?T:R,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Se.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[Se.expando]=!0},Se.Event.prototype={constructor:Se.Event,isDefaultPrevented:R,isPropagationStopped:R,isImmediatePropagationStopped:R,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=T,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=T,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=T,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Se.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&it.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ot.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Se.event.addProp),Se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,a=e.relatedTarget,i=e.handleObj;return a&&(a===r||Se.contains(r,a))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),Se.fn.extend({on:function(e,t,n,r){return x(this,e,t,n,r)},one:function(e,t,n,r){return x(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Se(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=R),this.each(function(){Se.event.remove(this,e,n,t)})}});var lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ut=/<script|<style|<link/i,ct=/checked\s*(?:[^=]|=\s*.checked.)/i,pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Se.extend({htmlPrefilter:function(e){return e.replace(lt,"<$1></$2>")},clone:function(e,t,n){var r,a,i,o,s=e.cloneNode(!0),l=Se.contains(e.ownerDocument,e);if(!(Ee.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Se.isXMLDoc(e)))for(o=S(s),i=S(e),r=0,a=i.length;r<a;r++)M(i[r],o[r]);if(t)if(n)for(i=i||S(e),o=o||S(s),r=0,a=i.length;r<a;r++)j(i[r],o[r]);else j(e,s);return o=S(s,"script"),o.length>0&&D(o,!l&&S(e,"script")),s},cleanData:function(e){for(var t,n,r,a=Se.event.special,i=0;void 0!==(n=e[i]);i++)if(He(n)){if(t=n[Ve.expando]){if(t.events)for(r in t.events)a[r]?Se.event.remove(n,r):Se.removeEvent(n,r,t.handle);n[Ve.expando]=void 0}n[We.expando]&&(n[We.expando]=void 0)}}}),Se.fn.extend({detach:function(e){return U(this,e,!0)},remove:function(e){return U(this,e)},text:function(e){return Fe(this,function(e){return void 0===e?Se.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return L(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){N(this,e).appendChild(e)}})},prepend:function(){return L(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=N(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Se.cleanData(S(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Se.clone(this,e,t)})},html:function(e){return Fe(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ut.test(e)&&!nt[(et.exec(e)||["",""])[1].toLowerCase()]){e=Se.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(Se.cleanData(S(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return L(this,arguments,function(t){var n=this.parentNode;Se.inArray(this,e)<0&&(Se.cleanData(S(this)),n&&n.replaceChild(t,this))},e)}}),Se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Se.fn[e]=function(e){for(var n,r=[],a=Se(e),i=a.length-1,o=0;o<=i;o++)n=o===i?this:this.clone(!0),Se(a[o])[t](n),he.apply(r,n.get());return this.pushStack(r)}});var dt=new RegExp("^("+Je+")(?!px)[a-z%]+$","i"),ft=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},ht=new RegExp(Xe.join("|"),"i");!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(l).appendChild(u);var e=n.getComputedStyle(u);r="1%"!==e.top,s=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),a=36===t(e.width),u.style.position="absolute",i=36===u.offsetWidth||"absolute",at.removeChild(l),u=null}}function t(e){return Math.round(parseFloat(e))}var r,a,i,o,s,l=ce.createElement("div"),u=ce.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",Ee.clearCloneStyle="content-box"===u.style.backgroundClip,Se.extend(Ee,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i}}))}();var mt=/^(none|table(?!-c[ea]).+)/,gt=/^--/,vt={position:"absolute",visibility:"hidden",display:"block"},yt={letterSpacing:"0",fontWeight:"400"},bt=["Webkit","Moz","ms"],wt=ce.createElement("div").style;Se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=F(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=y(t),l=gt.test(t),u=e.style;if(l||(t=H(s)),o=Se.cssHooks[t]||Se.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:u[t];i=typeof n,"string"===i&&(a=$e.exec(n))&&a[1]&&(n=_(e,t,a),i="number"),null!=n&&n===n&&("number"===i&&(n+=a&&a[3]||(Se.cssNumber[s]?"":"px")),Ee.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var a,i,o,s=y(t);return gt.test(t)||(t=H(s)),o=Se.cssHooks[t]||Se.cssHooks[s],o&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=F(e,t,r)),"normal"===a&&t in yt&&(a=yt[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),Se.each(["height","width"],function(e,t){Se.cssHooks[t]={get:function(e,n,r){if(n)return!mt.test(Se.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?z(e,t,r):Ge(e,vt,function(){return z(e,t,r)})},set:function(e,n,r){var a,i=ft(e),o="border-box"===Se.css(e,"boxSizing",!1,i),s=r&&W(e,t,r,o,i);return o&&Ee.scrollboxSize()===i.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-W(e,t,"border",!1,i)-.5)),s&&(a=$e.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=Se.css(e,t)),V(e,n,s)}}}),Se.cssHooks.marginLeft=q(Ee.reliableMarginLeft,function(e,t){if(t)return(parseFloat(F(e,"marginLeft"))||e.getBoundingClientRect().left-Ge(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Se.each({margin:"",padding:"",border:"Width"},function(e,t){Se.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"==typeof n?n.split(" "):[n];r<4;r++)a[e+Xe[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(Se.cssHooks[e+t].set=V)}),Se.fn.extend({css:function(e,t){return Fe(this,function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=ft(e),a=t.length;o<a;o++)i[t[o]]=Se.css(e,t[o],!1,r);return i}return void 0!==n?Se.style(e,t,n):Se.css(e,t)},e,t,arguments.length>1)}}),Se.Tween=Y,Y.prototype={constructor:Y,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||Se.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(Se.cssNumber[n]?"":"px")},cur:function(){var e=Y.propHooks[this.prop];return e&&e.get?e.get(this):Y.propHooks._default.get(this)},run:function(e){var t,n=Y.propHooks[this.prop];return this.options.duration?this.pos=t=Se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Y.propHooks._default.set(this),this}},Y.prototype.init.prototype=Y.prototype,Y.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){Se.fx.step[e.prop]?Se.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[Se.cssProps[e.prop]]&&!Se.cssHooks[e.prop]?e.elem[e.prop]=e.now:Se.style(e.elem,e.prop,e.now+e.unit)}}},Y.propHooks.scrollTop=Y.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Se.fx=Y.prototype.init,Se.fx.step={};var Et,_t,Ct=/^(?:toggle|show|hide)$/,kt=/queueHooks$/;Se.Animation=Se.extend(Z,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return _(n.elem,e,$e.exec(t),n),n}]},tweener:function(e,t){_e(e)?(t=e,e=["*"]):e=e.match(Me);for(var n,r=0,a=e.length;r<a;r++)n=e[r],Z.tweeners[n]=Z.tweeners[n]||[],Z.tweeners[n].unshift(t)},prefilters:[G],prefilter:function(e,t){t?Z.prefilters.unshift(e):Z.prefilters.push(e)}}),Se.speed=function(e,t,n){var r=e&&"object"==typeof e?Se.extend({},e):{complete:n||!n&&t||_e(e)&&e,duration:e,easing:n&&t||t&&!_e(t)&&t};return Se.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in Se.fx.speeds?r.duration=Se.fx.speeds[r.duration]:r.duration=Se.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){_e(r.old)&&r.old.call(this),r.queue&&Se.dequeue(this,r.queue)},r},Se.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ke).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=Se.isEmptyObject(e),i=Se.speed(t,n,r),o=function(){var t=Z(this,Se.extend({},e),i);(a||Ve.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",i=Se.timers,o=Ve.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&kt.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||Se.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Ve.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=Se.timers,o=r?r.length:0;for(n.finish=!0,Se.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Se.each(["toggle","show","hide"],function(e,t){var n=Se.fn[t];Se.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(X(t,!0),e,r,a)}}),Se.each({slideDown:X("show"),slideUp:X("hide"),slideToggle:X("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Se.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Se.timers=[],Se.fx.tick=function(){var e,t=0,n=Se.timers;for(Et=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||Se.fx.stop(),Et=void 0},Se.fx.timer=function(e){Se.timers.push(e),Se.fx.start()},Se.fx.interval=13,Se.fx.start=function(){_t||(_t=!0,J())},Se.fx.stop=function(){_t=null},Se.fx.speeds={slow:600,fast:200,_default:400},Se.fn.delay=function(e,t){return e=Se.fx?Se.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var a=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(a)}})},function(){var e=ce.createElement("input"),t=ce.createElement("select"),n=t.appendChild(ce.createElement("option"));e.type="checkbox",Ee.checkOn=""!==e.value,Ee.optSelected=n.selected,e=ce.createElement("input"),e.value="t",e.type="radio",Ee.radioValue="t"===e.value}();var St,Dt=Se.expr.attrHandle;Se.fn.extend({attr:function(e,t){return Fe(this,Se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Se.removeAttr(this,e)})}}),Se.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?Se.prop(e,t,n):(1===i&&Se.isXMLDoc(e)||(a=Se.attrHooks[t.toLowerCase()]||(Se.expr.match.bool.test(t)?St:void 0)),void 0!==n?null===n?void Se.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:(r=Se.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!Ee.radioValue&&"radio"===t&&u(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(Me);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),St={set:function(e,t,n){return!1===t?Se.removeAttr(e,n):e.setAttribute(n,n),n}},Se.each(Se.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Dt[t]||Se.find.attr;Dt[t]=function(e,t,r){var a,i,o=t.toLowerCase();return r||(i=Dt[o],Dt[o]=a,a=null!=n(e,t,r)?o:null,Dt[o]=i),a}});var Ot=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;Se.fn.extend({prop:function(e,t){return Fe(this,Se.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Se.propFix[e]||e]})}}),Se.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&Se.isXMLDoc(e)||(t=Se.propFix[t]||t,a=Se.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=Se.find.attr(e,"tabindex");return t?parseInt(t,10):Ot.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ee.optSelected||(Se.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Se.propFix[this.toLowerCase()]=this}),Se.fn.extend({addClass:function(e){var t,n,r,a,i,o,s,l=0;if(_e(e))return this.each(function(t){Se(this).addClass(e.call(this,t,te(this)))});if(t=ne(e),t.length)for(;n=this[l++];)if(a=te(n),r=1===n.nodeType&&" "+ee(a)+" "){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=ee(r),a!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,a,i,o,s,l=0;if(_e(e))return this.each(function(t){Se(this).removeClass(e.call(this,t,te(this)))});if(!arguments.length)return this.attr("class","");if(t=ne(e),t.length)for(;n=this[l++];)if(a=te(n),r=1===n.nodeType&&" "+ee(a)+" "){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");s=ee(r),a!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):_e(e)?this.each(function(n){Se(this).toggleClass(e.call(this,n,te(this),t),t)}):this.each(function(){var t,a,i,o;if(r)for(a=0,i=Se(this),o=ne(e);t=o[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||(t=te(this),t&&Ve.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Ve.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ee(te(n))+" ").indexOf(t)>-1)return!0;return!1}});var Rt=/\r/g;Se.fn.extend({val:function(e){var t,n,r,a=this[0];{if(arguments.length)return r=_e(e),this.each(function(n){var a;1===this.nodeType&&(a=r?e.call(this,n,Se(this).val()):e,null==a?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=Se.map(a,function(e){return null==e?"":e+""})),(t=Se.valHooks[this.type]||Se.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))});if(a)return(t=Se.valHooks[a.type]||Se.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:(n=a.value,"string"==typeof n?n.replace(Rt,""):null==n?"":n)}}}),Se.extend({valHooks:{option:{get:function(e){var t=Se.find.attr(e,"value");return null!=t?t:ee(Se.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],l=o?i+1:a.length;for(r=i<0?l:o?i:0;r<l;r++)if(n=a[r],(n.selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!u(n.parentNode,"optgroup"))){if(t=Se(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,i=Se.makeArray(t),o=a.length;o--;)r=a[o],(r.selected=Se.inArray(Se.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),Se.each(["radio","checkbox"],function(){Se.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Se.inArray(Se(e).val(),t)>-1}},Ee.checkOn||(Se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Ee.focusin="onfocusin"in n;var Pt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};Se.extend(Se.event,{trigger:function(e,t,r,a){var i,o,s,l,u,c,p,d,f=[r||ce],h=ye.call(e,"type")?e.type:e,m=ye.call(e,"namespace")?e.namespace.split("."):[];if(o=d=s=r=r||ce,3!==r.nodeType&&8!==r.nodeType&&!Pt.test(h+Se.event.triggered)&&(h.indexOf(".")>-1&&(m=h.split("."),h=m.shift(),m.sort()),u=h.indexOf(":")<0&&"on"+h,e=e[Se.expando]?e:new Se.Event(h,"object"==typeof e&&e),e.isTrigger=a?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:Se.makeArray(t,[e]),p=Se.event.special[h]||{},a||!p.trigger||!1!==p.trigger.apply(r,t))){if(!a&&!p.noBubble&&!Ce(r)){for(l=p.delegateType||h,Pt.test(l+h)||(o=o.parentNode);o;o=o.parentNode)f.push(o),s=o;s===(r.ownerDocument||ce)&&f.push(s.defaultView||s.parentWindow||n)}for(i=0;(o=f[i++])&&!e.isPropagationStopped();)d=o,e.type=i>1?l:p.bindType||h,c=(Ve.get(o,"events")||{})[e.type]&&Ve.get(o,"handle"),c&&c.apply(o,t),(c=u&&o[u])&&c.apply&&He(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=h,a||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(f.pop(),t)||!He(r)||u&&_e(r[h])&&!Ce(r)&&(s=r[u],s&&(r[u]=null),Se.event.triggered=h,e.isPropagationStopped()&&d.addEventListener(h,xt),r[h](),e.isPropagationStopped()&&d.removeEventListener(h,xt),Se.event.triggered=void 0,s&&(r[u]=s)),e.result}},simulate:function(e,t,n){var r=Se.extend(new Se.Event,n,{type:e,isSimulated:!0});Se.event.trigger(r,null,t)}}),Se.fn.extend({trigger:function(e,t){return this.each(function(){Se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Se.event.trigger(e,t,n,!0)}}),Ee.focusin||Se.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Se.event.simulate(t,e.target,Se.event.fix(e))};Se.event.special[t]={setup:function(){var r=this.ownerDocument||this,a=Ve.access(r,t);a||r.addEventListener(e,n,!0),Ve.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this,a=Ve.access(r,t)-1;a?Ve.access(r,t,a):(r.removeEventListener(e,n,!0),Ve.remove(r,t))}}});var Nt=n.location,It=Date.now(),At=/\?/;Se.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||Se.error("Invalid XML: "+e),t};var jt=/\[\]$/,Mt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Ut=/^(?:input|select|textarea|keygen)/i;Se.param=function(e,t){var n,r=[],a=function(e,t){var n=_e(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!Se.isPlainObject(e))Se.each(e,function(){a(this.name,this.value)});else for(n in e)re(n,e[n],t,a);return r.join("&")},Se.fn.extend({serialize:function(){return Se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Se.prop(this,"elements");return e?Se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Se(this).is(":disabled")&&Ut.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!Ze.test(e))}).map(function(e,t){var n=Se(this).val();return null==n?null:Array.isArray(n)?Se.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}});var Ft=/%20/g,qt=/#.*$/,Bt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wt=/^(?:GET|HEAD)$/,zt=/^\/\//,Yt={},Jt={},$t="*/".concat("*"),Xt=ce.createElement("a");Xt.href=Nt.href,Se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nt.href,type:"GET",isLocal:Vt.test(Nt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?oe(oe(e,Se.ajaxSettings),t):oe(Se.ajaxSettings,e)},ajaxPrefilter:ae(Yt),ajaxTransport:ae(Jt),ajax:function(e,t){function r(e,t,r,s){var u,d,f,w,E,_=t;c||(c=!0,l&&n.clearTimeout(l),a=void 0,o=s||"",C.readyState=e>0?4:0,u=e>=200&&e<300||304===e,r&&(w=se(h,C,r)),w=le(h,w,C,u),u?(h.ifModified&&(E=C.getResponseHeader("Last-Modified"),E&&(Se.lastModified[i]=E),(E=C.getResponseHeader("etag"))&&(Se.etag[i]=E)),204===e||"HEAD"===h.type?_="nocontent":304===e?_="notmodified":(_=w.state,d=w.data,f=w.error,u=!f)):(f=_,!e&&_||(_="error",e<0&&(e=0))),C.status=e,C.statusText=(t||_)+"",u?v.resolveWith(m,[d,_,C]):v.rejectWith(m,[C,_,f]),C.statusCode(b),b=void 0,p&&g.trigger(u?"ajaxSuccess":"ajaxError",[C,h,u?d:f]),y.fireWith(m,[C,_]),p&&(g.trigger("ajaxComplete",[C,h]),--Se.active||Se.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var a,i,o,s,l,u,c,p,d,f,h=Se.ajaxSetup({},t),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?Se(m):Se.event,v=Se.Deferred(),y=Se.Callbacks("once memory"),b=h.statusCode||{},w={},E={},_="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Ht.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)C.always(e[C.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||_;return a&&a.abort(t),r(0,t),this}};if(v.promise(C),h.url=((e||h.url||Nt.href)+"").replace(zt,Nt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Me)||[""],null==h.crossDomain){u=ce.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=Xt.protocol+"//"+Xt.host!=u.protocol+"//"+u.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Se.param(h.data,h.traditional)),ie(Yt,h,t,C),c)return C;p=Se.event&&h.global,p&&0==Se.active++&&Se.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Wt.test(h.type),i=h.url.replace(qt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Ft,"+")):(f=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(At.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Bt,"$1"),f=(At.test(i)?"&":"?")+"_="+It+++f),h.url=i+f),h.ifModified&&(Se.lastModified[i]&&C.setRequestHeader("If-Modified-Since",Se.lastModified[i]),Se.etag[i]&&C.setRequestHeader("If-None-Match",Se.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)C.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(m,C,h)||c))return C.abort();if(_="abort",y.add(h.complete),C.done(h.success),C.fail(h.error),a=ie(Jt,h,t,C)){if(C.readyState=1,p&&g.trigger("ajaxSend",[C,h]),c)return C;h.async&&h.timeout>0&&(l=n.setTimeout(function(){C.abort("timeout")},h.timeout));try{c=!1,a.send(w,r)}catch(e){if(c)throw e;r(-1,e)}}else r(-1,"No Transport");return C},getJSON:function(e,t,n){return Se.get(e,t,n,"json")},getScript:function(e,t){return Se.get(e,void 0,t,"script")}}),Se.each(["get","post"],function(e,t){Se[t]=function(e,n,r,a){return _e(n)&&(a=a||r,r=n,n=void 0),Se.ajax(Se.extend({url:e,type:t,dataType:a,data:n,success:r},Se.isPlainObject(e)&&e))}}),Se._evalUrl=function(e){return Se.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},Se.fn.extend({wrapAll:function(e){var t;return this[0]&&(_e(e)&&(e=e.call(this[0])),t=Se(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return _e(e)?this.each(function(t){Se(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Se(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=_e(e);return this.each(function(n){Se(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Se(this).replaceWith(this.childNodes)}),this}}),Se.expr.pseudos.hidden=function(e){return!Se.expr.pseudos.visible(e)},Se.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Se.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Kt={0:200,1223:204},Gt=Se.ajaxSettings.xhr();Ee.cors=!!Gt&&"withCredentials"in Gt,Ee.ajax=Gt=!!Gt,Se.ajaxTransport(function(e){var t,r;if(Ee.cors||Gt&&!e.crossDomain)return{send:function(a,i){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(o in a)s.setRequestHeader(o,a[o]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Kt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),Se.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Se.globalEval(e),e}}}),Se.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Se.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,a){t=Se("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),ce.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Qt=[],Zt=/(=)\?(?=&|$)|\?\?/;Se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Qt.pop()||Se.expando+"_"+It++;return this[e]=!0,e}}),Se.ajaxPrefilter("json jsonp",function(e,t,r){var a,i,o,s=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=_e(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Zt,"$1"+a):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return o||Se.error(a+" was not called"),o[0]},e.dataTypes[0]="json",i=n[a],n[a]=function(){o=arguments},r.always(function(){void 0===i?Se(n).removeProp(a):n[a]=i,e[a]&&(e.jsonpCallback=t.jsonpCallback,Qt.push(a)),o&&_e(i)&&i(o[0]),o=i=void 0}),"script"}),Ee.createHTMLDocument=function(){var e=ce.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),Se.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,a,i;return t||(Ee.createHTMLDocument?(t=ce.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=ce.location.href,t.head.appendChild(r)):t=ce),a=xe.exec(e),i=!n&&[],a?[t.createElement(a[1])]:(a=O([e],t,i),i&&i.length&&Se(i).remove(),Se.merge([],a.childNodes))},Se.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return s>-1&&(r=ee(e.slice(s)),e=e.slice(0,s)),_e(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&Se.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?Se("<div>").append(Se.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},Se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Se.fn[t]=function(e){return this.on(t,e)}}),Se.expr.pseudos.animated=function(e){return Se.grep(Se.timers,function(t){return e===t.elem}).length},Se.offset={setOffset:function(e,t,n){var r,a,i,o,s,l,u,c=Se.css(e,"position"),p=Se(e),d={};"static"===c&&(e.style.position="relative"),s=p.offset(),i=Se.css(e,"top"),l=Se.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1,u?(r=p.position(),o=r.top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(l)||0),_e(t)&&(t=t.call(e,n,Se.extend({},s))),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+a),"using"in t?t.using.call(e,d):p.css(d)}},Se.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Se.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===Se.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Se.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&(a=Se(e).offset(),a.top+=Se.css(e,"borderTopWidth",!0),a.left+=Se.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-Se.css(r,"marginTop",!0),left:t.left-a.left-Se.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Se.css(e,"position");)e=e.offsetParent;return e||at})}}),Se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;Se.fn[e]=function(r){return Fe(this,function(e,r,a){var i;if(Ce(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a},e,r,arguments.length)}}),Se.each(["top","left"],function(e,t){Se.cssHooks[t]=q(Ee.pixelPosition,function(e,n){if(n)return n=F(e,t),dt.test(n)?Se(e).position()[t]+"px":n})}),Se.each({Height:"height",Width:"width"},function(e,t){Se.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Se.fn[r]=function(a,i){var o=arguments.length&&(n||"boolean"!=typeof a),s=n||(!0===a||!0===i?"margin":"border");return Fe(this,function(t,n,a){var i;return Ce(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?Se.css(t,n,s):Se.style(t,n,a,s)},t,o?a:void 0,o)}})}),Se.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Se.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Se.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),Se.proxy=function(e,t){var n,r,a;if("string"==typeof t&&(n=e[t],t=e,e=n),_e(e))return r=de.call(arguments,2),a=function(){return e.apply(t||this,r.concat(de.call(arguments)))},a.guid=e.guid=e.guid||Se.guid++,a},Se.holdReady=function(e){e?Se.readyWait++:Se.ready(!0)},Se.isArray=Array.isArray,Se.parseJSON=JSON.parse,Se.nodeName=u,Se.isFunction=_e,Se.isWindow=Ce,Se.camelCase=y,Se.type=s,Se.now=Date.now,Se.isNumeric=function(e){var t=Se.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},r=[],void 0!==(a=function(){return Se}.apply(t,r))&&(e.exports=a);var en=n.jQuery,tn=n.$;return Se.noConflict=function(e){return n.$===Se&&(n.$=tn),e&&n.jQuery===Se&&(n.jQuery=en),Se},i||(n.jQuery=n.$=Se),Se})},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){"use strict";function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(324),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,a=0,i=e.length||0,o=this.blocks;a<i;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(r=this.start;a<i&&r<64;++a)o[r>>2]|=e[a]<<SHIFT[3&r++];else for(r=this.start;a<i&&r<64;++a)n=e.charCodeAt(a),n<128?o[r>>2]|=n<<SHIFT[3&r++]:n<2048?(o[r>>2]|=(192|n>>6)<<SHIFT[3&r++],o[r>>2]|=(128|63&n)<<SHIFT[3&r++]):n<55296||n>=57344?(o[r>>2]|=(224|n>>12)<<SHIFT[3&r++],o[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],o[r>>2]|=(128|63&n)<<SHIFT[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++a)),o[r>>2]|=(240|n>>18)<<SHIFT[3&r++],o[r>>2]|=(128|n>>12&63)<<SHIFT[3&r++],o[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],o[r>>2]|=(128|63&n)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=o[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,n,r=this.h0,a=this.h1,i=this.h2,o=this.h3,s=this.h4,l=this.blocks;for(t=16;t<80;++t)n=l[t-3]^l[t-8]^l[t-14]^l[t-16],l[t]=n<<1|n>>>31;for(t=0;t<20;t+=5)e=a&i|~a&o,n=r<<5|r>>>27,s=n+e+s+1518500249+l[t]<<0,a=a<<30|a>>>2,e=r&a|~r&i,n=s<<5|s>>>27,o=n+e+o+1518500249+l[t+1]<<0,r=r<<30|r>>>2,e=s&r|~s&a,n=o<<5|o>>>27,i=n+e+i+1518500249+l[t+2]<<0,s=s<<30|s>>>2,e=o&s|~o&r,n=i<<5|i>>>27,a=n+e+a+1518500249+l[t+3]<<0,o=o<<30|o>>>2,e=i&o|~i&s,n=a<<5|a>>>27,r=n+e+r+1518500249+l[t+4]<<0,i=i<<30|i>>>2;for(;t<40;t+=5)e=a^i^o,n=r<<5|r>>>27,s=n+e+s+1859775393+l[t]<<0,a=a<<30|a>>>2,e=r^a^i,n=s<<5|s>>>27,o=n+e+o+1859775393+l[t+1]<<0,r=r<<30|r>>>2,e=s^r^a,n=o<<5|o>>>27,i=n+e+i+1859775393+l[t+2]<<0,s=s<<30|s>>>2,e=o^s^r,n=i<<5|i>>>27,a=n+e+a+1859775393+l[t+3]<<0,o=o<<30|o>>>2,e=i^o^s,n=a<<5|a>>>27,r=n+e+r+1859775393+l[t+4]<<0,i=i<<30|i>>>2;for(;t<60;t+=5)e=a&i|a&o|i&o,n=r<<5|r>>>27,s=n+e+s-1894007588+l[t]<<0,a=a<<30|a>>>2,e=r&a|r&i|a&i,n=s<<5|s>>>27,o=n+e+o-1894007588+l[t+1]<<0,r=r<<30|r>>>2,e=s&r|s&a|r&a,n=o<<5|o>>>27,i=n+e+i-1894007588+l[t+2]<<0,s=s<<30|s>>>2,e=o&s|o&r|s&r,n=i<<5|i>>>27,a=n+e+a-1894007588+l[t+3]<<0,o=o<<30|o>>>2,e=i&o|i&s|o&s,n=a<<5|a>>>27,r=n+e+r-1894007588+l[t+4]<<0,i=i<<30|i>>>2;for(;t<80;t+=5)e=a^i^o,n=r<<5|r>>>27,s=n+e+s-899497514+l[t]<<0,a=a<<30|a>>>2,e=r^a^i,n=s<<5|s>>>27,o=n+e+o-899497514+l[t+1]<<0,r=r<<30|r>>>2,e=s^r^a,n=o<<5|o>>>27,i=n+e+i-899497514+l[t+2]<<0,s=s<<30|s>>>2,e=o^s^r,n=i<<5|i>>>27,a=n+e+a-899497514+l[t+3]<<0,o=o<<30|o>>>2,e=i^o^s,n=a<<5|a>>>27,r=n+e+r-899497514+l[t+4]<<0,i=i<<30|i>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+a<<0,this.h2=this.h2+i<<0,this.h3=this.h3+o<<0,this.h4=this.h4+s<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,a=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}()}).call(exports,__webpack_require__(59),__webpack_require__(65))},function(e,t,n){"use strict";function r(e){return null==e?void 0===e?l:s:u&&u in Object(e)?n.i(i.a)(e):n.i(o.a)(e)}var a=n(496),i=n(1018),o=n(1019),s="[object Null]",l="[object Undefined]",u=a.a?a.a.toStringTag:void 0;t.a=r},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(t,n(65))},function(e,t,n){"use strict";var r=n(1020),a=n.i(r.a)(Object.getPrototypeOf,Object);t.a=a},function(e,t,n){"use strict";function r(e){var t=o.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var a=s.call(e);return r&&(t?e[l]=n:delete e[l]),a}var a=n(496),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,l=a.a?a.a.toStringTag:void 0;t.a=r},function(e,t,n){"use strict";function r(e){return i.call(e)}var a=Object.prototype,i=a.toString;t.a=r},function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}t.a=r},function(e,t,n){"use strict";var r=n(1016),a="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||a||Function("return this")();t.a=i},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}t.a=r},function(e,t,n){t.MemoryDb=n(500),t.LocalStorageDb=n(499),t.IndexedDb=n(498),t.WebSQLDb=n(501),t.RemoteDb=n(1025),t.HybridDb=n(497),t.ReplicatingDb=n(1026),t.quickfind=n(502),t.utils=n(42)},function(e,t,n){var r=n(58);EJSON={};var a={};EJSON.addType=function(e,t){if(r.has(a,e))throw new Error("Type "+e+" already present");a[e]=t};var i=[{matchJSONValue:function(e){return r.has(e,"$date")&&1===r.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return r.has(e,"$binary")&&1===r.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&r.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:EJSON._base64Encode(e)}},fromJSONValue:function(e){return EJSON._base64Decode(e.$binary)}},{matchJSONValue:function(e){return r.has(e,"$escape")&&1===r.size(e)},matchObject:function(e){return!(r.isEmpty(e)||r.size(e)>2)&&r.any(i,function(t){return t.matchJSONValue(e)})},toJSONValue:function(e){var t={};return r.each(e,function(e,n){t[n]=EJSON.toJSONValue(e)}),{$escape:t}},fromJSONValue:function(e){var t={};return r.each(e.$escape,function(e,n){t[n]=EJSON.fromJSONValue(e)}),t}},{matchJSONValue:function(e){return r.has(e,"$type")&&r.has(e,"$value")&&2===r.size(e)},matchObject:function(e){return EJSON._isCustomType(e)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(e){var t=e.$type;return(0,a[t])(e.$value)}}];EJSON._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&r.has(a,e.typeName())};var o=EJSON._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=s(e);return void 0!==t?t:(r.each(e,function(t,n){if("object"==typeof t||void 0===t){var r=s(t);if(r)return void(e[n]=r);o(t)}}),e)},s=function(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.matchObject(e))return n.toJSONValue(e)}};EJSON.toJSONValue=function(e){var t=s(e);return void 0!==t?t:("object"==typeof e&&(e=EJSON.clone(e),o(e)),e)};var l=EJSON._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=u(e);return t!==e?t:(r.each(e,function(t,n){if("object"==typeof t){var r=u(t);if(t!==r)return void(e[n]=r);l(t)}}),e)},u=function(e){if("object"==typeof e&&null!==e&&r.size(e)<=2&&r.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var t=0;t<i.length;t++){var n=i[t];if(n.matchJSONValue(e))return n.fromJSONValue(e)}return e};EJSON.fromJSONValue=function(e){var t=u(e);return t===e&&"object"==typeof e?(e=EJSON.clone(e),l(e),e):t},EJSON.stringify=function(e){return JSON.stringify(EJSON.toJSONValue(e))},EJSON.parse=function(e){return EJSON.fromJSONValue(JSON.parse(e))},EJSON.isBinary=function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill},EJSON.equals=function(e,t,n){var a,i=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(!e||!t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(EJSON.isBinary(e)&&EJSON.isBinary(t)){if(e.length!==t.length)return!1;for(a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}if("function"==typeof e.equals)return e.equals(t,n);if(e instanceof Array){if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(a=0;a<e.length;a++)if(!EJSON.equals(e[a],t[a],n))return!1;return!0}if(i){var o=[];return r.each(t,function(e,t){o.push(t)}),a=0,r.all(e,function(e,r){return!(a>=o.length)&&(r===o[a]&&(!!EJSON.equals(e,t[o[a]],n)&&(a++,!0)))})&&a===o.length}return a=0,r.all(e,function(e,i){return!!r.has(t,i)&&(!!EJSON.equals(e,t[i],n)&&(a++,!0))})&&r.size(t)===a},EJSON.clone=function(e){var t;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(EJSON.isBinary(e)){t=EJSON.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}if(r.isArray(e)||r.isArguments(e)){for(t=[],n=0;n<e.length;n++)t[n]=EJSON.clone(e[n]);return t}return"function"==typeof e.clone?e.clone():(t={},r.each(e,function(e,n){t[n]=EJSON.clone(e)}),t)},e.exports=EJSON},function(e,t,n){var r,a,i,o,s,l;l=n(58),n(1013),a=n(127),s=n(42),i=n(1027),o=n(502),e.exports=function(){function e(e,t,n,r){null==r&&(r=!1),this.url=e,this.client=t,this.collections={},this.httpClient=n,this.useQuickFind=r}return e.prototype.addCollection=function(e,t,n,a){var i,o,s;if(null==t&&(t={}),l.isFunction(t)&&(s=[{},t,n],t=s[0],n=s[1],s[2]),o=t.url||this.url+e,i=new r(e,o,this.client,this.httpClient,this.useQuickFind),this[e]=i,this.collections[e]=i,null!=n)return n()},e.prototype.removeCollection=function(e,t,n){if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.getCollectionNames=function(){return l.keys(this.collections)},e}(),r=function(){function e(e,t,n,r,a){this.name=e,this.url=t,this.client=n,this.httpClient=r||i,this.useQuickFind=a}return e.prototype.find=function(e,t){return null==t&&(t={}),{fetch:function(n){return function(r,a){var i;return i={},t.sort&&(i.sort=JSON.stringify(t.sort)),t.limit&&(i.limit=t.limit),t.skip&&(i.skip=t.skip),t.fields&&(i.fields=JSON.stringify(t.fields)),n.client&&(i.client=n.client),i.selector=JSON.stringify(e||{}),"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(i._=(new Date).getTime()),!n.useQuickFind||!t.localData||t.fields&&!t.fields._rev||t.limit&&!t.sort?n.httpClient("GET",n.url,i,null,r,a):n.httpClient("POST",n.url+"/quickfind",i,o.encodeRequest(t.localData),function(e){return r(o.decodeResponse(e,t.localData,t.sort))},a)}}(this)}},e.prototype.findOne=function(e,t,n,r){var a,i;return null==t&&(t={}),l.isFunction(t)&&(i=[{},t,n],t=i[0],n=i[1],r=i[2]),a={},t.sort&&(a.sort=JSON.stringify(t.sort)),a.limit=1,this.client&&(a.client=this.client),a.selector=JSON.stringify(e||{}),"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(a._=(new Date).getTime()),this.httpClient("GET",this.url,a,null,function(e){return n(e&&e.length>0?e[0]:null)},r)},e.prototype.upsert=function(e,t,n,r){var i,o,u;if(u=s.regularizeUpsert(e,t,n,r),i=u[0],n=u[1],r=u[2],!this.client)throw new Error("Client required to upsert");return o=[],a.eachSeries(i,function(e){return function(t,n){var r;return t.doc._id||(t.doc._id=s.createUid()),r={client:e.client},"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(r._=(new Date).getTime()),t.base?e.httpClient("PATCH",e.url+"/"+t.doc._id,r,t,function(e){return o.push(e),n()},function(e){return n(e)}):e.httpClient("POST",e.url,r,t.doc,function(e){return o.push(e),n()},function(e){return n(e)})}}(this),function(t){if(t)return void(r&&r(t));if(l.isArray(e)){if(n)return n(o)}else if(n)return n(o[0])})},e.prototype.remove=function(e,t,n){var r;if(!this.client)throw new Error("Client required to remove");return r={client:this.client},this.httpClient("DELETE",this.url+"/"+e,r,null,t,function(e){return 410===e.status?t():n(e)})},e}()},function(e,t,n){var r,a,i,o;o=n(58),i=n(42),a=n(86).compileSort,e.exports=function(){function e(e,t){this.collections={},this.masterDb=e,this.replicaDb=t}return e.prototype.addCollection=function(e,t,n){var a;if(a=new r(e,this.masterDb[e],this.replicaDb[e]),this[e]=a,this.collections[e]=a,null!=t)return t()},e.prototype.removeCollection=function(e,t,n){if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.getCollectionNames=function(){return o.keys(this.collections)},e}(),r=function(){function e(e,t,n){this.name=e,this.masterCol=t,this.replicaCol=n}return e.prototype.find=function(e,t){return this.masterCol.find(e,t)},e.prototype.findOne=function(e,t,n,r){return this.masterCol.findOne(e,t,n,r)},e.prototype.upsert=function(e,t,n,r){var a,s;return s=i.regularizeUpsert(e,t,n,r),a=s[0],n=s[1],r=s[2],this.masterCol.upsert(o.pluck(a,"doc"),o.pluck(a,"base"),function(t){return function(){return t.replicaCol.upsert(o.pluck(a,"doc"),o.pluck(a,"base"),function(t){return n(e)},r)}}(this),r)},e.prototype.remove=function(e,t,n){return this.masterCol.remove(e,function(r){return function(){return r.replicaCol.remove(e,t,n)}}(this),n)},e.prototype.cache=function(e,t,n,r,i){var s,l;return s=o.indexBy(e,"_id"),n.sort&&(l=a(n.sort)),this.masterCol.find(t,n).fetch(function(t){return function(a){var u,c,p,d,f,h,m,g,v,y,b;for(f=o.indexBy(a,"_id"),h=[],g=0,y=e.length;g<y;g++)u=e[g],d=f[u._id],d?u._rev&&d._rev&&u._rev<=d._rev||o.isEqual(u,d)||h.push(u):h.push(u);for(m=[],v=0,b=a.length;v<b;v++){if(d=a[v],n.limit&&e.length===n.limit){if(n.sort&&l(d,o.last(e))>=0)continue;if(!n.sort)continue}s[d._id]||m.push(d._id)}return c=function(e){return h.length>0?t.masterCol.cacheList(h,function(){return t.replicaCol.cacheList(h,function(){return e()},i)},i):e()},p=function(e){return m.length>0?t.masterCol.uncacheList(m,function(){return t.replicaCol.uncacheList(m,function(){return e()},i)},i):e()},c(function(){return p(function(){null!=r&&r()})})}}(this),i)},e.prototype.pendingUpserts=function(e,t){return this.masterCol.pendingUpserts(e,t)},e.prototype.pendingRemoves=function(e,t){return this.masterCol.pendingRemoves(e,t)},e.prototype.resolveUpserts=function(e,t,n){return this.masterCol.resolveUpserts(e,function(r){return function(){return r.replicaCol.resolveUpserts(e,t,n)}}(this),n)},e.prototype.resolveRemove=function(e,t,n){return this.masterCol.resolveRemove(e,function(r){return function(){return r.replicaCol.resolveRemove(e,t,n)}}(this),n)},e.prototype.seed=function(e,t,n){return this.masterCol.seed(e,function(r){return function(){return r.replicaCol.seed(e,t,n)}}(this),n)},e.prototype.cacheOne=function(e,t,n){return this.masterCol.cacheOne(e,function(r){return function(){return r.replicaCol.cacheOne(e,t,n)}}(this),n)},e.prototype.cacheList=function(e,t,n){return this.masterCol.cacheList(e,function(r){return function(){return r.replicaCol.cacheList(e,t,n)}}(this),n)},e.prototype.uncache=function(e,t,n){return this.masterCol.uncache(e,function(r){return function(){return r.replicaCol.uncache(e,t,n)}}(this),n)},e.prototype.uncacheList=function(e,t,n){return this.masterCol.uncacheList(e,function(r){return function(){return r.replicaCol.uncacheList(e,t,n)}}(this),n)},e}()},function(e,t){e.exports=function(e,t,n,r,a,i){var o,s;if(o=t+"?"+$.param(n),"GET"===e)s=$.ajax(o,{dataType:"json",timeout:18e4});else if("DELETE"===e)s=$.ajax(o,{type:"DELETE",timeout:6e4});else{if("POST"!==e&&"PATCH"!==e)throw new Error("Unknown method "+e);s=$.ajax(o,{data:JSON.stringify(r),contentType:"application/json",timeout:6e4,type:e})}return s.done(function(e,t,n){return a(e||null)}),s.fail(function(e,t,n){if(i)return i(e)})}},function(e,t,n){(function(e,r){var a;!function(i){function o(e){throw new RangeError(N[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function l(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(x,"."),r+s(e.split("."),t).join(".")}function u(e){for(var t,n,r=[],a=0,i=e.length;a<i;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<i?(n=e.charCodeAt(a++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--)):r.push(t);return r}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=j(e>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function p(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:E}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,n){var r=0;for(e=n?A(e/S):e>>1,e+=A(e/t);e>I*C>>1;r+=E)e=A(e/I);return A(r+(I+1)*e/(e+k))}function h(e){var t,n,r,a,i,s,l,u,d,h,m=[],g=e.length,v=0,y=O,b=D;for(n=e.lastIndexOf(T),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&o("not-basic"),m.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<g;){for(i=v,s=1,l=E;a>=g&&o("invalid-input"),u=p(e.charCodeAt(a++)),(u>=E||u>A((w-v)/s))&&o("overflow"),v+=u*s,d=l<=b?_:l>=b+C?C:l-b,!(u<d);l+=E)h=E-d,s>A(w/h)&&o("overflow"),s*=h;t=m.length+1,b=f(v-i,t,0==i),A(v/t)>w-y&&o("overflow"),y+=A(v/t),v%=t,m.splice(v++,0,y)}return c(m)}function m(e){var t,n,r,a,i,s,l,c,p,h,m,g,v,y,b,k=[];for(e=u(e),g=e.length,t=O,n=0,i=D,s=0;s<g;++s)(m=e[s])<128&&k.push(j(m));for(r=a=k.length,a&&k.push(T);r<g;){for(l=w,s=0;s<g;++s)(m=e[s])>=t&&m<l&&(l=m);for(v=r+1,l-t>A((w-n)/v)&&o("overflow"),n+=(l-t)*v,t=l,s=0;s<g;++s)if(m=e[s],m<t&&++n>w&&o("overflow"),m==t){for(c=n,p=E;h=p<=i?_:p>=i+C?C:p-i,!(c<h);p+=E)b=c-h,y=E-h,k.push(j(d(h+b%y,0))),c=A(b/y);k.push(j(d(c,0))),i=f(n,v,r==a),n=0,++r}++n,++t}return k.join("")}function g(e){return l(e,function(e){return R.test(e)?h(e.slice(4).toLowerCase()):e})}function v(e){return l(e,function(e){return P.test(e)?"xn--"+m(e):e})}var y=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var b,w=2147483647,E=36,_=1,C=26,k=38,S=700,D=72,O=128,T="-",R=/^xn--/,P=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=E-_,A=Math.floor,j=String.fromCharCode;b={version:"1.4.1",ucs2:{decode:u,encode:c},decode:h,encode:m,toASCII:v,toUnicode:g},void 0!==(a=function(){return b}.call(t,n,t,e))&&(e.exports=a)}()}).call(t,n(130)(e),n(65))},function(e,t,n){"use strict";function r(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[i(t,e),"[",r,"]"].join(""):[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")};case"bracket":return function(t,n){return null===n?i(t,e):[i(t,e),"[]=",i(n,e)].join("")};default:return function(t,n){return null===n?i(t,e):[i(t,e),"=",i(n,e)].join("")}}}function a(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(r[e]=n);void 0===r[e]&&(r[e]={}),r[e][t[1]]=n};case"bracket":return function(e,n,r){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===r[e]?void(r[e]=[n]):void(r[e]=[].concat(r[e],n)):void(r[e]=n)};default:return function(e,t,n){if(void 0===n[e])return void(n[e]=t);n[e]=[].concat(n[e],t)}}}function i(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function o(e){return Array.isArray(e)?e.sort():"object"==typeof e?o(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var s=n(1145),l=n(8);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){t=l({arrayFormat:"none"},t);var n=a(t),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(a),i,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=o(n):e[t]=n,e},Object.create(null))):r},t.stringify=function(e,t){t=l({encode:!0,strict:!0,arrayFormat:"none"},t);var n=r(t);return e?Object.keys(e).sort().map(function(r){var a=e[r];if(void 0===a)return"";if(null===a)return i(r,t);if(Array.isArray(a)){var o=[];return a.slice().forEach(function(e){void 0!==e&&o.push(n(r,e,o.length))}),o.join("&")}return i(r,t)+"="+i(a,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var l=1e3;i&&"number"==typeof i.maxKeys&&(l=i.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var p,d,f,h,m=e[c].replace(s,"%20"),g=m.indexOf(n);g>=0?(p=m.substr(0,g),d=m.substr(g+1)):(p=m,d=""),f=decodeURIComponent(p),h=decodeURIComponent(d),r(o,f)?a(o[f])?o[f].push(h):o[f]=[o[f],h]:o[f]=h}return o};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(o(e),function(o){var s=encodeURIComponent(a(o))+n;return i(e[o])?r(e[o],function(e){return s+encodeURIComponent(a(e))}).join(t):s+encodeURIComponent(a(e[o]))}).join(t):s?encodeURIComponent(a(s))+n+encodeURIComponent(a(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";t.decode=t.parse=n(1030),t.encode=t.stringify=n(1031)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function a(e){function t(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}this.setState(t.bind(this))}function i(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function o(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==s){var l=e.displayName||e.name,u="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+u+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"polyfill",function(){return o}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],o=n||t+"Subscription",l=function(e){function n(i,o){r(this,n);var s=a(this,e.call(this,i,o));return s[t]=i.store,s}return i(n,e),n.prototype.getChildContext=function(){var e;return e={},e[t]=this[t],e[o]=null,e},n.prototype.render=function(){return s.Children.only(this.props.children)},n}(s.Component);return l.propTypes={store:c.a.isRequired,children:u.a.element.isRequired},l.childContextTypes=(e={},e[t]=c.a.isRequired,e[o]=c.b,e),l}t.b=o;var s=n(4),l=(n.n(s),n(3)),u=n.n(l),c=n(620);n(306);t.a=o()},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t,n){for(var r=t.length-1;r>=0;r--){var a=t[r](e);if(a)return a}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function i(e,t){return e===t}var o=n(618),s=n(1108),l=n(1102),u=n(1103),c=n(1104),p=n(1105),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?o.a:t,f=e.mapStateToPropsFactories,h=void 0===f?u.a:f,m=e.mapDispatchToPropsFactories,g=void 0===m?l.a:m,v=e.mergePropsFactories,y=void 0===v?c.a:v,b=e.selectorFactory,w=void 0===b?p.a:b;return function(e,t,o){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=l.pure,c=void 0===u||u,p=l.areStatesEqual,f=void 0===p?i:p,m=l.areOwnPropsEqual,v=void 0===m?s.a:m,b=l.areStatePropsEqual,E=void 0===b?s.a:b,_=l.areMergedPropsEqual,C=void 0===_?s.a:_,k=r(l,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),S=a(e,h,"mapStateToProps"),D=a(t,g,"mapDispatchToProps"),O=a(o,y,"mergeProps");return n(w,d({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:D,initMergeProps:O,pure:c,areStatesEqual:f,areOwnPropsEqual:v,areStatePropsEqual:E,areMergedPropsEqual:C},k))}}()},function(e,t,n){"use strict";function r(e){return"function"==typeof e?n.i(s.a)(e,"mapDispatchToProps"):void 0}function a(e){return e?void 0:n.i(s.b)(function(e){return{dispatch:e}})}function i(e){return e&&"object"==typeof e?n.i(s.b)(function(t){return n.i(o.bindActionCreators)(e,t)}):void 0}var o=n(323),s=n(619);t.a=[r,a,i]},function(e,t,n){"use strict";function r(e){return"function"==typeof e?n.i(i.a)(e,"mapStateToProps"):void 0}function a(e){return e?void 0:n.i(i.b)(function(){return{}})}var i=n(619);t.a=[r,a]},function(e,t,n){"use strict";function r(e,t,n){return s({},n,e,t)}function a(e){return function(t,n){var r=(n.displayName,n.pure),a=n.areMergedPropsEqual,i=!1,o=void 0;return function(t,n,s){var l=e(t,n,s);return i?r&&a(l,o)||(o=l):(i=!0,o=l),o}}}function i(e){return"function"==typeof e?a(e):void 0}function o(e){return e?void 0:function(){return r}}var s=(n(621),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.a=[i,o]},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t,n,r){return function(a,i){return n(e(a,i),t(r,i),i)}}function i(e,t,n,r,a){function i(a,i){return h=a,m=i,g=e(h,m),v=t(r,m),y=n(g,v,m),f=!0,y}function o(){return g=e(h,m),t.dependsOnOwnProps&&(v=t(r,m)),y=n(g,v,m)}function s(){return e.dependsOnOwnProps&&(g=e(h,m)),t.dependsOnOwnProps&&(v=t(r,m)),y=n(g,v,m)}function l(){var t=e(h,m),r=!d(t,g);return g=t,r&&(y=n(g,v,m)),y}function u(e,t){var n=!p(t,m),r=!c(e,h);return h=e,m=t,n&&r?o():n?s():r?l():y}var c=a.areStatesEqual,p=a.areOwnPropsEqual,d=a.areStatePropsEqual,f=!1,h=void 0,m=void 0,g=void 0,v=void 0,y=void 0;return function(e,t){return f?u(e,t):i(e,t)}}function o(e,t){var n=t.initMapStateToProps,o=t.initMapDispatchToProps,s=t.initMergeProps,l=r(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),u=n(e,l),c=o(e,l),p=s(e,l);return(l.pure?i:a)(u,c,p,e,l)}t.a=o;n(1106)},function(e,t,n){"use strict";n(306)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){var e=[],t=[];return{clear:function(){t=i,e=i},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==i&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}n.d(t,"a",function(){return s});var i=null,o={notify:function(){}},s=function(){function e(t,n,a){r(this,e),this.store=t,this.parentSub=n,this.onStateChange=a,this.unsubscribe=null,this.listeners=o}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=a())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=o)},e}()},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function a(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var o=0;o<n.length;o++)if(!i.call(t,n[o])||!r(e[n[o]],t[n[o]]))return!1;return!0}t.a=a;var i=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){return function(){return function(t){return function(n){if(n.type!==i.CALL_HISTORY_METHOD)return t(n);var a=n.payload,o=a.method,s=a.args;e[o].apply(e,r(s))}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(622)},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.selectLocationState,s=void 0===r?o:r,l=n.adjustUrlOnReplay,u=void 0===l||l;if(void 0===s(t.getState()))throw new Error("Expected the routing state to be available either as `state.routing` or as the custom expression you can specify as `selectLocationState` in the `syncHistoryWithStore()` options. Ensure you have added the `routerReducer` to your store's reducers via `combineReducers` or whatever method you use to isolate your reducers.");var c=void 0,p=void 0,d=void 0,f=void 0,h=void 0,m=function(e){return s(t.getState()).locationBeforeTransitions||(e?c:void 0)};if(c=m(),u){var g=function(){var t=m(!0);h!==t&&c!==t&&(p=!0,h=t,e.transitionTo(a({},t,{action:"PUSH"})),p=!1)};d=t.subscribe(g),g()}var v=function(e){p||(h=e,!c&&(c=e,m())||t.dispatch({type:i.LOCATION_CHANGE,payload:e}))};return f=e.listen(v),e.getCurrentLocation&&v(e.getCurrentLocation()),a({},e,{listen:function(n){var r=m(!0),a=!1,i=t.subscribe(function(){var e=m(!0);e!==r&&(r=e,a||n(r))});return e.getCurrentLocation||n(r),function(){a=!0,i()}},unsubscribe:function(){u&&d(),f()}})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var i=n(623),o=function(e){return e.routing}},function(e,t,n){"use strict";var r=n(4),a=n.n(r),i=n(75),o=n.n(i),s=n(624),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};o()({displayName:"IndexLink",render:function(){return a.a.createElement(s.a,l({},this.props,{onlyActiveOnIndex:!0}))}})},function(e,t,n){"use strict";var r=n(75),a=n.n(r),i=n(3),o=(n.n(i),n(129),n(33)),s=n.n(o),l=n(626),u=n(163),c=a()({displayName:"IndexRedirect",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=l.a.createRouteFromReactElement(e))}},propTypes:{to:i.string.isRequired,query:i.object,state:i.object,onEnter:u.c,children:u.c},render:function(){s()(!1)}});t.a=c},function(e,t,n){"use strict";var r=n(75),a=n.n(r),i=n(3),o=(n.n(i),n(129),n(33)),s=n.n(o),l=n(87),u=n(163),c=a()({displayName:"IndexRoute",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=n.i(l.c)(e))}},propTypes:{path:u.c,component:u.a,components:u.b,getComponent:i.func,getComponents:i.func},render:function(){s()(!1)}});t.a=c},function(e,t,n){"use strict";var r=n(75),a=n.n(r),i=n(3),o=(n.n(i),n(33)),s=n.n(o),l=n(87),u=n(163),c=a()({displayName:"Route",statics:{createRouteFromReactElement:l.c},propTypes:{path:i.string,component:u.a,components:u.b,getComponent:i.func,getComponents:i.func},render:function(){s()(!1)}});t.a=c},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var a=n(33),i=n.n(a),o=n(4),s=n.n(o),l=n(75),u=n.n(l),c=n(3),p=(n.n(c),n(630)),d=n(163),f=n(310),h=n(87),m=n(627),g=(n(129),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),v={history:c.object,children:d.d,routes:d.d,render:c.func,createElement:c.func,onError:c.func,onUpdate:c.func,matchContext:c.object},y=u()({displayName:"Router",propTypes:v,getDefaultProps:function(){return{render:function(e){return s.a.createElement(f.a,e)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},createRouterObject:function(e){var t=this.props.matchContext;if(t)return t.router;var r=this.props.history;return n.i(m.a)(r,this.transitionManager,e)},createTransitionManager:function(){var e=this.props.matchContext;if(e)return e.transitionManager;var t=this.props.history,r=this.props,a=r.routes,o=r.children;return t.getCurrentLocation||i()(!1),n.i(p.a)(t,n.i(h.b)(a||o))},componentWillMount:function(){var e=this;this.transitionManager=this.createTransitionManager(),this.router=this.createRouterObject(this.state),this._unlisten=this.transitionManager.listen(function(t,r){t?e.handleError(t):(n.i(m.b)(e.router,r),e.setState(r,e.props.onUpdate))})},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function(){var e=this.state,t=e.location,n=e.routes,a=e.params,i=e.components,o=this.props,s=o.createElement,l=o.render,u=r(o,["createElement","render"]);return null==t?null:(Object.keys(v).forEach(function(e){return delete u[e]}),l(g({},u,{router:this.router,location:t,routes:n,params:a,components:i,createElement:s})))}});t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){function e(e,t,n,r){var a=e.length<n,i=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];if(e.apply(t,r),a){(0,r[r.length-1])()}};return r.add(i),i}function t(t){return t.reduce(function(t,n){return n.onEnter&&t.push(e(n.onEnter,n,3,c)),t},[])}function r(t){return t.reduce(function(t,n){return n.onChange&&t.push(e(n.onChange,n,4,p)),t},[])}function a(e,t,r){function a(e){o=e}if(!e)return void r();var o=void 0;n.i(i.b)(e,function(e,n,r){t(e,a,function(e){e||o?r(e,o):n()})},r)}function s(e,n,r){c.clear();var i=t(e);return a(i.length,function(e,t,r){var a=function(){c.has(i[e])&&(r.apply(void 0,arguments),c.remove(i[e]))};i[e](n,t,a)},r)}function l(e,t,n,i){p.clear();var o=r(e);return a(o.length,function(e,r,a){var i=function(){p.has(o[e])&&(a.apply(void 0,arguments),p.remove(o[e]))};o[e](t,n,r,i)},i)}function u(e,t){for(var n=0,r=e.length;n<r;++n)e[n].onLeave&&e[n].onLeave.call(e[n],t)}var c=new o,p=new o;return{runEnterHooks:s,runChangeHooks:l,runLeaveHooks:u}}t.a=a;var i=n(307),o=function e(){var t=this;r(this,e),this.hooks=[],this.add=function(e){return t.hooks.push(e)},this.remove=function(e){return t.hooks=t.hooks.filter(function(t){return t!==e})},this.has=function(e){return-1!==t.hooks.indexOf(e)},this.clear=function(){return t.hooks=[]}}},function(e,t,n){"use strict";var r=n(4);n.n(r),n(310),n(129),Object.assign},function(e,t,n){"use strict";var r=n(1008),a=n.n(r),i=n(629);t.a=n.i(i.a)(a.a)},function(e,t,n){"use strict";function r(e,t,r){return!!e.path&&n.i(i.a)(e.path).some(function(e){return t.params[e]!==r.params[e]})}function a(e,t){var n=e&&e.routes,a=t.routes,i=void 0,o=void 0,s=void 0;if(n){var l=!1;i=n.filter(function(n){if(l)return!0;var i=-1===a.indexOf(n)||r(n,e,t);return i&&(l=!0),i}),i.reverse(),s=[],o=[],a.forEach(function(e){var t=-1===n.indexOf(e),r=-1!==i.indexOf(e);t||r?s.push(e):o.push(e)})}else i=[],o=[],s=a;return{leaveRoutes:i,changeRoutes:o,enterRoutes:s}}var i=n(128);t.a=a},function(e,t,n){"use strict";function r(e,t,r){if(t.component||t.components)return void r(null,t.component||t.components);var a=t.getComponent||t.getComponents;if(a){var i=a.call(t,e,r);n.i(o.a)(i)&&i.then(function(e){return r(null,e)},r)}else r()}function a(e,t){n.i(i.a)(e.routes,function(t,n,a){r(e,t,a)},t)}var i=n(307),o=n(625);t.a=a},function(e,t,n){"use strict";function r(e,t){var r={};return e.path?(n.i(a.a)(e.path).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}),r):r}var a=n(128);t.a=r},function(e,t,n){"use strict";var r=n(1009),a=n.n(r),i=n(629);n.i(i.a)(a.a)},function(e,t,n){"use strict";function r(e,t){if(e==t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return r(e,t[n])});if("object"===(void 0===e?"undefined":u(e))){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))if(void 0===e[n]){if(void 0!==t[n])return!1}else{if(!Object.prototype.hasOwnProperty.call(t,n))return!1;if(!r(e[n],t[n]))return!1}return!0}return String(e)===String(t)}function a(e,t){return"/"!==t.charAt(0)&&(t="/"+t),"/"!==e.charAt(e.length-1)&&(e+="/"),"/"!==t.charAt(t.length-1)&&(t+="/"),t===e}function i(e,t,r){for(var a=e,i=[],o=[],s=0,u=t.length;s<u;++s){var c=t[s],p=c.path||"";if("/"===p.charAt(0)&&(a=e,i=[],o=[]),null!==a&&p){var d=n.i(l.b)(p,a);if(d?(a=d.remainingPathname,i=[].concat(i,d.paramNames),o=[].concat(o,d.paramValues)):a=null,""===a)return i.every(function(e,t){return String(o[t])===String(r[e])})}}return!1}function o(e,t){return null==t?null==e:null==e||r(e,t)}function s(e,t,n,r,s){var l=e.pathname,u=e.query;return null!=n&&("/"!==l.charAt(0)&&(l="/"+l),!!(a(l,n.pathname)||!t&&i(l,r,s))&&o(u,n.query))}t.a=s;var l=n(128),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}},function(e,t,n){"use strict";var r=n(188),a=(n.n(r),n(33));n.n(a),n(628),n(630),n(87),n(627),Object.assign},function(e,t,n){"use strict";function r(e,t,r,a,i){if(e.childRoutes)return[null,e.childRoutes];if(!e.getChildRoutes)return[];var s=!0,l=void 0,u={location:t,params:o(r,a)},p=e.getChildRoutes(u,function(e,t){if(t=!e&&n.i(d.b)(t),s)return void(l=[e,t]);i(e,t)});return n.i(c.a)(p)&&p.then(function(e){return i(null,n.i(d.b)(e))},i),s=!1,l}function a(e,t,i,s,l){if(e.indexRoute)l(null,e.indexRoute);else if(e.getIndexRoute){var p={location:t,params:o(i,s)},f=e.getIndexRoute(p,function(e,t){l(e,!e&&n.i(d.b)(t)[0])});n.i(c.a)(f)&&f.then(function(e){return l(null,n.i(d.b)(e)[0])},l)}else if(e.childRoutes||e.getChildRoutes){var h=function(e,r){if(e)return void l(e);var o=r.filter(function(e){return!e.path});n.i(u.b)(o.length,function(e,n,r){a(o[e],t,i,s,function(t,a){if(t||a){var i=[o[e]].concat(Array.isArray(a)?a:[a]);r(t,i)}else n()})},function(e,t){l(null,t)})},m=r(e,t,i,s,h);m&&h.apply(void 0,m)}else l()}function i(e,t,n){return t.reduce(function(e,t,r){var a=n&&n[r];return Array.isArray(e[t])?e[t].push(a):e[t]=t in e?[e[t],a]:a,e},e)}function o(e,t){return i({},e,t)}function s(e,t,i,s,u,c){var d=e.path||"";if("/"===d.charAt(0)&&(i=t.pathname,s=[],u=[]),null!==i&&d){try{var f=n.i(p.b)(d,i);f?(i=f.remainingPathname,s=[].concat(s,f.paramNames),u=[].concat(u,f.paramValues)):i=null}catch(e){c(e)}if(""===i){var h={routes:[e],params:o(s,u)};return void a(e,t,s,u,function(e,t){if(e)c(e);else{if(Array.isArray(t)){var n;(n=h.routes).push.apply(n,t)}else t&&h.routes.push(t);c(null,h)}})}}if(null!=i||e.childRoutes){var m=function(n,r){n?c(n):r?l(r,t,function(t,n){t?c(t):n?(n.routes.unshift(e),c(null,n)):c()},i,s,u):c()},g=r(e,t,s,u,m);g&&m.apply(void 0,g)}else c()}function l(e,t,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];void 0===a&&("/"!==t.pathname.charAt(0)&&(t=f({},t,{pathname:"/"+t.pathname})),a=t.pathname),n.i(u.b)(e.length,function(n,r,l){s(e[n],t,a,i,o,function(e,t){e||t?l(e,t):r()})},r)}t.a=l;var u=n(307),c=n(625),p=n(128),d=(n(129),n(87)),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";var r=n(33),a=(n.n(r),n(4)),i=(n.n(a),n(75)),o=(n.n(i),n(1127));n.n(o),n(308),n(309),Object.assign},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var o=Object.getOwnPropertyNames(t);i&&(o=o.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;++s)if(!(r[o[s]]||a[o[s]]||n&&n[o[s]]))try{e[o[s]]=t[o[s]]}catch(e){}}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var u=n(632),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),p=n(4),d=r(p),f=n(169),h=r(f),m=n(1099),g=(n(1131),t.UNMOUNTED="unmounted"),v=t.EXITED="exited",y=t.ENTERING="entering",b=t.ENTERED="entered",w=t.EXITING="exiting",E=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r)),s=r.transitionGroup,l=s&&!s.isMounting?n.enter:n.appear,u=void 0;return a.appearStatus=null,n.in?l?(u=v,a.appearStatus=y):u=b:u=n.unmountOnExit||n.mountOnEnter?g:v,a.state={status:u},a.nextCallback=null,a}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===g?{status:v}:null},t.prototype.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.prototype.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==y&&n!==b&&(t=y):n!==y&&n!==b||(t=w)}this.updateStatus(!1,t)},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,n=void 0,r=void 0;return t=n=r=e,null!=e&&"number"!=typeof e&&(t=e.exit,n=e.enter,r=e.appear),{exit:t,enter:n,appear:r}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(null!==t){this.cancelNextCallback();var n=h.default.findDOMNode(this);t===y?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===v&&this.setState({status:g})},t.prototype.performEnter=function(e,t){var n=this,r=this.props.enter,a=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts();if(!t&&!r)return void this.safeSetState({status:b},function(){n.props.onEntered(e)});this.props.onEnter(e,a),this.safeSetState({status:y},function(){n.props.onEntering(e,a),n.onTransitionEnd(e,i.enter,function(){n.safeSetState({status:b},function(){n.props.onEntered(e,a)})})})},t.prototype.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();if(!n)return void this.safeSetState({status:v},function(){t.props.onExited(e)});this.props.onExit(e),this.safeSetState({status:w},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:v},function(){t.props.onExited(e)})})})},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===g)return null;var t=this.props,n=t.children,r=a(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var i=d.default.Children.only(n);return d.default.cloneElement(i,r)},t}(d.default.Component);E.contextTypes={transitionGroup:c.object},E.childContextTypes={transitionGroup:function(){}},E.propTypes={},E.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},E.UNMOUNTED=0,E.EXITED=1,E.ENTERING=2,E.ENTERED=3,E.EXITING=4,t.default=(0,m.polyfill)(E)},function(e,t,n){"use strict";function r(){}var a=n(1130);e.exports=function(){function e(e,t,n,r,i,o){if(o!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=r;var a=n(632),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.timeoutsShape=i.default.oneOfType([i.default.number,i.default.shape({enter:i.default.number,exit:i.default.number}).isRequired]),t.classNamesShape=i.default.oneOfType([i.default.string,i.default.shape({enter:i.default.string,exit:i.default.string,active:i.default.string}),i.default.shape({enter:i.default.string,enterDone:i.default.string,enterActive:i.default.string,exit:i.default.string,exitDone:i.default.string,exitActive:i.default.string})])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(4),c=r(u),p=n(3),d=r(p),f=n(1136),h=r(f),m={AuthenticatingComponent:function(){return null},FailureComponent:function(){return null},wrapperDisplayName:"AuthWrapper"};t.default=function(e){function t(e){var t,n,l=e.displayName||e.name||"Component",m=(n=t=function(t){function n(){return a(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),s(n,[{key:"render",value:function(){var t=this.props,n=t.isAuthenticated,a=t.isAuthenticating;return n?c.default.createElement(e,this.props):a?c.default.createElement(r,this.props):c.default.createElement(p,this.props)}}]),n}(u.Component),t.displayName=f+"("+l+")",t.propTypes={isAuthenticated:d.default.bool,isAuthenticating:d.default.bool},t.defaultProps={isAuthenticating:!1},n);return(0,h.default)(m,e)}var n=l({},m,e),r=n.AuthenticatingComponent,p=n.FailureComponent,f=n.wrapperDisplayName;return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(16),o=n(33),s=r(o),l=n(1132),u=r(l),c=n(1137),p=r(c),d={authenticatingSelector:function(){return!1},allowRedirectBack:!0,FailureComponent:p.default,redirectQueryParamName:"redirect"};t.default=function(e){var t=e.locationHelperBuilder,n=e.getRouterRedirect;return{connectedRouterRedirect:function(e){var r=a({},d,e),o=r.FailureComponent,l=r.redirectPath,c=r.authenticatedSelector,p=r.authenticatingSelector,f=r.allowRedirectBack,h=r.redirectQueryParamName,m=t({redirectQueryParamName:h}),g=m.createRedirectLoc,v=void 0;"string"==typeof l?v=function(){return l}:"function"==typeof l?v=l:(0,s.default)(!1,"redirectPath must be either a string or a function");var y=void 0;"boolean"==typeof f?y=function(){return f}:"function"==typeof f?y=f:(0,s.default)(!1,"allowRedirectBack must be either a boolean or a function");var b=function(e){return function(t,n){return e(g(y(t,n))(t,n))}},w=(0,i.connect)(function(e,t){return{redirect:b(n(t))}})(o);return function(e){return(0,i.connect)(function(e,t){return{redirectPath:v(e,t),isAuthenticated:c(e,t),isAuthenticating:p(e,t)}})((0,u.default)(a({},r,{FailureComponent:w}))(e))}},connectedReduxRedirect:function(e){var n=a({},d,e),r=n.FailureComponent,o=n.redirectPath,l=n.authenticatedSelector,c=n.authenticatingSelector,p=n.allowRedirectBack,f=n.redirectAction,h=n.redirectQueryParamName,m=t({redirectQueryParamName:h}),g=m.createRedirectLoc,v=void 0;"string"==typeof o?v=function(){return o}:"function"==typeof o?v=o:(0,s.default)(!1,"redirectPath must be either a string or a function");var y=void 0;"boolean"==typeof p?y=function(){return p}:"function"==typeof p?y=p:(0,s.default)(!1,"allowRedirectBack must be either a boolean or a function");var b=function(e){return{redirect:function(t,n){return e(f(g(y(t,n))(t,n)))}}},w=(0,i.connect)(null,b)(r);return function(e){return(0,i.connect)(function(e,t){return{redirectPath:v(e,t),isAuthenticated:l(e,t),isAuthenticating:c(e,t)}})((0,u.default)(a({},n,{FailureComponent:w}))(e))}}}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1150),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s={redirectQueryParamName:"redirect",locationSelector:function(e){return e.location}};t.default=function(e){var t=a({},s,e),n=t.redirectQueryParamName,i=t.locationSelector;return{getRedirectQueryParam:function(e){return i(e).query[n]},createRedirectLoc:function(e){return function(t,s){var l=i(t),u=o.default.parse(s,!0),c=void 0;return c=e?r({},n,""+l.pathname+l.search+l.hash):{},c=a({},c,u.query),{pathname:u.pathname,hash:u.hash,query:c}}}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createOnEnter=t.connectedReduxRedirect=t.connectedRouterRedirect=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1134),o=r(i),s=n(1133),l=r(s),u=n(33),c=r(u),p=(0,l.default)({locationHelperBuilder:o.default,getRouterRedirect:function(e){return e.router.replace}}),d=p.connectedRouterRedirect,f=p.connectedReduxRedirect;t.connectedRouterRedirect=d,t.connectedReduxRedirect=f;var h={allowRedirectBack:!0,authenticatingSelector:function(){return!1},redirectQueryParamName:"redirect"};t.createOnEnter=function(e){var t=a({},h,e),n=t.authenticatedSelector,r=t.authenticatingSelector,i=t.redirectPath,s=t.allowRedirectBack,l=t.redirectQueryParamName,u=void 0;"string"==typeof i?u=function(){return i}:"function"==typeof i?u=i:(0,c.default)(!1,"redirectPath must be either a string or a function");var p=void 0;return"boolean"==typeof s?p=function(){return s}:"function"==typeof s?p=s:(0,c.default)(!1,"allowRedirectBack must be either a boolean or a function"),function(e,t,a){var i=(0,o.default)({redirectQueryParamName:l}),s=i.createRedirectLoc,c=n(e.getState(),t),d=r(e.getState(),t);if(!c&&!d){var f=u(e.getState(),t);a(s(p(t,f))(t,f))}}}},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var o=Object.getOwnPropertyNames(t);i&&(o=o.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;++s)if(!(r[o[s]]||a[o[s]]||n&&n[o[s]]))try{e[o[s]]=t[o[s]]}catch(e){}}return e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,s,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=n(3),p=function(e){return e&&e.__esModule?e:{default:e}}(c),d=(s=o=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"componentWillMount",value:function(){this.props.redirect(this.props,this.props.redirectPath)}},{key:"render",value:function(){return null}}]),t}(u.Component),o.propTypes={redirectPath:p.default.string.isRequired,redirect:p.default.func.isRequired},s);t.default=d},function(e,t,n){"use strict";var r=n(323).compose;t.__esModule=!0,t.composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}}},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"==typeof a?a(n,r,e):t(a)}}}}t.__esModule=!0;var a=r();a.withExtraArgument=r,t.default=a},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,o){var s=e(n,r,o),l=s.dispatch,u=[],c={getState:s.getState,dispatch:function(e){return l(e)}};return u=t.map(function(e){return e(c)}),l=a.a.apply(void 0,u)(s.dispatch),i({},s,{dispatch:l})}}}t.a=r;var a=n(633),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function a(e,t){if("function"==typeof e)return r(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),a={},i=0;i<n.length;i++){var o=n[i],s=e[o];"function"==typeof s&&(a[o]=r(s,t))}return a}t.a=a},function(e,t,n){"use strict";function r(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function a(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:o.a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function i(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var o=t[i];"function"==typeof e[o]&&(n[o]=e[o])}var s=Object.keys(n),l=void 0;try{a(n)}catch(e){l=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(l)throw l;for(var a=!1,i={},o=0;o<s.length;o++){var u=s[o],c=n[u],p=e[u],d=c(p,t);if(void 0===d){var f=r(u,t);throw new Error(f)}i[u]=d,a=a||d!==p}return a?i:e}}t.a=i;var o=n(634);n(239),n(635)},,function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[l]=r,s(l),l++}function a(e){delete u[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function o(e){if(c)setTimeout(o,0,e);else{var t=u[e];if(t){c=!0;try{i(t)}finally{a(e),c=!1}}}}if(!e.setImmediate){var s,l=1,u={},c=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){o(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},s=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;s=function(t){var n=p.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(o,0,e)}}(),d.setImmediate=r,d.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(65),n(59))},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){e.exports=n(1147)},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(1148),o=function(e){return e&&e.__esModule?e:{default:e}}(i);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=(0,o.default)(a);t.default=s}).call(t,n(65),n(130)(e))},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(1144),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,n){if(e&&u.isObject(e)&&e instanceof r)return e;var a=new r;return a.parse(e,t,n),a}function i(e){return u.isString(e)&&(e=a(e)),e instanceof r?e.format():r.prototype.format.call(e)}function o(e,t){return a(e,!1,!0).resolve(t)}function s(e,t){return e?a(e,!1,!0).resolveObject(t):t}var l=n(1028),u=n(1151);t.parse=a,t.resolve=o,t.resolveObject=s,t.format=i,t.Url=r;var c=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(h),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=n(1032);r.prototype.parse=function(e,t,n){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),a=-1!==r&&r<e.indexOf("#")?"?":"#",i=e.split(a),o=/\\/g;i[0]=i[0].replace(o,"/"),e=i.join(a);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var p=d.exec(s);if(p)return this.path=s,this.href=s,this.pathname=p[1],p[2]?(this.search=p[2],this.query=t?C.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=c.exec(s);if(f){f=f[0];var h=f.toLowerCase();this.protocol=h,s=s.substr(f.length)}if(n||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===s.substr(0,2);!k||f&&E[f]||(s=s.substr(2),this.slashes=!0)}if(!E[f]&&(k||f&&!_[f])){for(var S=-1,D=0;D<v.length;D++){var O=s.indexOf(v[D]);-1!==O&&(-1===S||O<S)&&(S=O)}var T,R;R=-1===S?s.lastIndexOf("@"):s.lastIndexOf("@",S),-1!==R&&(T=s.slice(0,R),s=s.slice(R+1),this.auth=decodeURIComponent(T)),S=-1;for(var D=0;D<g.length;D++){var O=s.indexOf(g[D]);-1!==O&&(-1===S||O<S)&&(S=O)}-1===S&&(S=s.length),this.host=s.slice(0,S),s=s.slice(S),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var x=this.hostname.split(/\./),D=0,N=x.length;D<N;D++){var I=x[D];if(I&&!I.match(y)){for(var A="",j=0,M=I.length;j<M;j++)I.charCodeAt(j)>127?A+="x":A+=I[j];if(!A.match(y)){var L=x.slice(0,D),U=x.slice(D+1),F=I.match(b);F&&(L.push(F[1]),U.unshift(F[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=l.toASCII(this.hostname));var q=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+q,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[h])for(var D=0,N=m.length;D<N;D++){var H=m[D];if(-1!==s.indexOf(H)){var V=encodeURIComponent(H);V===H&&(V=escape(H)),s=s.split(H).join(V)}}var W=s.indexOf("#");-1!==W&&(this.hash=s.substr(W),s=s.slice(0,W));var z=s.indexOf("?");if(-1!==z?(this.search=s.substr(z),this.query=s.substr(z+1),t&&(this.query=C.parse(this.query)),s=s.slice(0,z)):t&&(this.search="",this.query={}),s&&(this.pathname=s),_[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",Y=this.search||"";this.path=q+Y}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,i="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(i=C.stringify(this.query));var o=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+a+n+o+r},r.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,a=Object.keys(this),i=0;i<a.length;i++){var o=a[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(n[c]=e[c])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var p=Object.keys(e),d=0;d<p.length;d++){var f=p[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||E[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||v||n.host&&e.pathname,w=b,C=n.pathname&&n.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],k=n.protocol&&!_[n.protocol];if(k&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),b=b&&(""===h[0]||""===C[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=h;else if(h.length)C||(C=[]),C.pop(),C=C.concat(h),n.search=e.search,n.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(k){n.hostname=n.host=C.shift();var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return n.search=e.search,n.query=e.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var D=C.slice(-1)[0],O=(n.host||e.host||C.length>1)&&("."===D||".."===D)||""===D,T=0,R=C.length;R>=0;R--)D=C[R],"."===D?C.splice(R,1):".."===D?(C.splice(R,1),T++):T&&(C.splice(R,1),T--);if(!b&&!w)for(;T--;T)C.unshift("..");!b||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),O&&"/"!==C.join("/").substr(-1)&&C.push("");var P=""===C[0]||C[0]&&"/"===C[0].charAt(0);if(k){n.hostname=n.host=P?"":C.length?C.shift():"";var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return b=b||n.host&&C.length,b&&!P&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t){function n(e,t){var n=t||0,a=r;return a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]}for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);e.exports=n},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},,function(e,t){e.exports=Resumable},function(e,t,n){n(637),e.exports=n(636)}]);