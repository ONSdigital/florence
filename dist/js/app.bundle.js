!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=594)}([function(e,t,n){"use strict";e.exports=n(32)},function(e,t,n){e.exports=n(265)()},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.routerMiddleware=t.routerActions=t.goForward=t.goBack=t.go=t.replace=t.push=t.CALL_HISTORY_METHOD=t.routerReducer=t.LOCATION_CHANGE=t.syncHistoryWithStore=void 0;var r=n(302);Object.defineProperty(t,"LOCATION_CHANGE",{enumerable:!0,get:function(){return r.LOCATION_CHANGE}}),Object.defineProperty(t,"routerReducer",{enumerable:!0,get:function(){return r.routerReducer}});var a=n(303);Object.defineProperty(t,"CALL_HISTORY_METHOD",{enumerable:!0,get:function(){return a.CALL_HISTORY_METHOD}}),Object.defineProperty(t,"push",{enumerable:!0,get:function(){return a.push}}),Object.defineProperty(t,"replace",{enumerable:!0,get:function(){return a.replace}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return a.go}}),Object.defineProperty(t,"goBack",{enumerable:!0,get:function(){return a.goBack}}),Object.defineProperty(t,"goForward",{enumerable:!0,get:function(){return a.goForward}}),Object.defineProperty(t,"routerActions",{enumerable:!0,get:function(){return a.routerActions}});var i=o(n(601)),s=o(n(602));function o(e){return e&&e.__esModule?e:{default:e}}t.syncHistoryWithStore=i.default,t.routerMiddleware=s.default},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,a,i,s,o,l){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,i,s,o,l],d=0;(c=new Error(t.replace(/%s/g,function(){return u[d++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";e.exports=function(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var a=new Error(n);throw a.name="Invariant Violation",a.framesToPop=1,a}},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.r(t);var a=n(0),i=n(1),s=n.n(i),o=s.a.shape({trySubscribe:s.a.func.isRequired,tryUnsubscribe:s.a.func.isRequired,notifyNestedSubs:s.a.func.isRequired,isSubscribed:s.a.func.isRequired}),l=s.a.shape({subscribe:s.a.func.isRequired,dispatch:s.a.func.isRequired,getState:s.a.func.isRequired});function c(e){var t;void 0===e&&(e="store");var n=e+"Subscription",i=function(t){r(s,t);var i=s.prototype;function s(n,r){var a;return(a=t.call(this,n,r)||this)[e]=n.store,a}return i.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},i.render=function(){return a.Children.only(this.props.children)},s}(a.Component);return i.propTypes={store:l.isRequired,children:s.a.element.isRequired},i.childContextTypes=((t={})[e]=l.isRequired,t[n]=o,t),i}var u=c();function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var f=n(582),m=n.n(f),g=n(14),v=n.n(g),y=n(108),b=null,E={notify:function(){}};var w=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=E}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=b,e=b},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==b&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=E)},e}(),C=0,_={};function S(){}function D(e,t){var n,i;void 0===t&&(t={});var s=t,c=s.getDisplayName,u=void 0===c?function(e){return"ConnectAdvanced("+e+")"}:c,f=s.methodName,g=void 0===f?"connectAdvanced":f,b=s.renderCountProp,E=void 0===b?void 0:b,D=s.shouldHandleStateChanges,R=void 0===D||D,k=s.storeKey,T=void 0===k?"store":k,x=s.withRef,N=void 0!==x&&x,O=h(s,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),P=T+"Subscription",I=C++,A=((n={})[T]=l,n[P]=o,n),M=((i={})[P]=o,i);return function(t){v()(Object(y.isValidElementType)(t),"You must pass a component to the function returned by "+g+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",i=u(n),s=p({},O,{getDisplayName:u,methodName:g,renderCountProp:E,shouldHandleStateChanges:R,storeKey:T,withRef:N,displayName:i,wrappedComponentName:n,WrappedComponent:t}),o=function(n){function o(e,t){var r;return(r=n.call(this,e,t)||this).version=I,r.state={},r.renderCount=0,r.store=e[T]||t[T],r.propsMode=Boolean(e[T]),r.setWrappedInstance=r.setWrappedInstance.bind(d(d(r))),v()(r.store,'Could not find "'+T+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+T+'" as a prop to "'+i+'".'),r.initSelector(),r.initSubscription(),r}r(o,n);var l=o.prototype;return l.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[P]=t||this.context[P],e},l.componentDidMount=function(){R&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},l.componentWillReceiveProps=function(e){this.selector.run(e)},l.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},l.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=S,this.store=null,this.selector.run=S,this.selector.shouldComponentUpdate=!1},l.getWrappedInstance=function(){return v()(N,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+g+"() call."),this.wrappedInstance},l.setWrappedInstance=function(e){this.wrappedInstance=e},l.initSelector=function(){var t=e(this.store.dispatch,s);this.selector=function(e,t){var n={run:function(r){try{var a=e(t.getState(),r);(a!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=a,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},l.initSubscription=function(){if(R){var e=(this.propsMode?this.props:this.context)[P];this.subscription=new w(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},l.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(_)):this.notifyNestedSubs()},l.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},l.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},l.addExtraProps=function(e){if(!(N||E||this.propsMode&&this.subscription))return e;var t=p({},e);return N&&(t.ref=this.setWrappedInstance),E&&(t[E]=this.renderCount++),this.propsMode&&this.subscription&&(t[P]=this.subscription),t},l.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(a.createElement)(t,this.addExtraProps(e.props))},o}(a.Component);return o.WrappedComponent=t,o.displayName=i,o.childContextTypes=M,o.contextTypes=A,o.propTypes=A,m()(o,t)}}var R=Object.prototype.hasOwnProperty;function k(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function T(e,t){if(k(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!R.call(t,n[a])||!k(e[n[a]],t[n[a]]))return!1;return!0}var x=n(110);function N(e){return function(t,n){var r=e(t,n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function O(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function P(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=O(e);var a=r(t,n);return"function"==typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=O(a),a=r(t,n)),a},r}}var I=[function(e){return"function"==typeof e?P(e):void 0},function(e){return e?void 0:N(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?N(function(t){return Object(x.bindActionCreators)(e,t)}):void 0}];var A=[function(e){return"function"==typeof e?P(e):void 0},function(e){return e?void 0:N(function(){return{}})}];function M(e,t,n){return p({},n,e,t)}var j=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,a=n.pure,i=n.areMergedPropsEqual,s=!1;return function(t,n,o){var l=e(t,n,o);return s?a&&i(l,r)||(r=l):(s=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return M}}];function L(e,t,n,r){return function(a,i){return n(e(a,i),t(r,i),i)}}function F(e,t,n,r,a){var i,s,o,l,c,u=a.areStatesEqual,d=a.areOwnPropsEqual,p=a.areStatePropsEqual,h=!1;function f(a,h){var f,m,g=!d(h,s),v=!u(a,i);return i=a,s=h,g&&v?(o=e(i,s),t.dependsOnOwnProps&&(l=t(r,s)),c=n(o,l,s)):g?(e.dependsOnOwnProps&&(o=e(i,s)),t.dependsOnOwnProps&&(l=t(r,s)),c=n(o,l,s)):v?(f=e(i,s),m=!p(f,o),o=f,m&&(c=n(o,l,s)),c):c}return function(a,u){return h?f(a,u):(o=e(i=a,s=u),l=t(r,s),c=n(o,l,s),h=!0,c)}}function U(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,a=t.initMergeProps,i=h(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(e,i),o=r(e,i),l=a(e,i);return(i.pure?F:L)(s,o,l,e,i)}function q(e,t,n){for(var r=t.length-1;r>=0;r--){var a=t[r](e);if(a)return a}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function $(e,t){return e===t}var B,H,V,W,Y,z,X,J,G,K,Q,Z,ee=(V=(H=void 0===B?{}:B).connectHOC,W=void 0===V?D:V,Y=H.mapStateToPropsFactories,z=void 0===Y?A:Y,X=H.mapDispatchToPropsFactories,J=void 0===X?I:X,G=H.mergePropsFactories,K=void 0===G?j:G,Q=H.selectorFactory,Z=void 0===Q?U:Q,function(e,t,n,r){void 0===r&&(r={});var a=r,i=a.pure,s=void 0===i||i,o=a.areStatesEqual,l=void 0===o?$:o,c=a.areOwnPropsEqual,u=void 0===c?T:c,d=a.areStatePropsEqual,f=void 0===d?T:d,m=a.areMergedPropsEqual,g=void 0===m?T:m,v=h(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=q(e,z,"mapStateToProps"),b=q(t,J,"mapDispatchToProps"),E=q(n,K,"mergeProps");return W(Z,p({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:y,initMapDispatchToProps:b,initMergeProps:E,pure:s,areStatesEqual:l,areOwnPropsEqual:u,areStatePropsEqual:f,areMergedPropsEqual:g},v))});n.d(t,"Provider",function(){return u}),n.d(t,"createProvider",function(){return c}),n.d(t,"connectAdvanced",function(){return D}),n.d(t,"connect",function(){return ee})},function(e,t,n){"use strict";var r=n(22);e.exports=r},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))a.call(n,c)&&(o[c]=n[c]);if(r){s=r(n);for(var u=0;u<s.length;u++)i.call(n,s[u])&&(o[s[u]]=n[s[u]])}}return o}},function(e,t,n){"use strict";var r=n(7),a=n(34),i=n(123),s=(n(6),a.ID_ATTRIBUTE_NAME),o=i,l="__reactInternalInstance$"+Math.random().toString(36).slice(2);function c(e,t){return 1===e.nodeType&&e.getAttribute(s)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function u(e){for(var t;t=e._renderedComponent;)e=t;return e}function d(e,t){var n=u(e);n._hostNode=t,t[l]=n}function p(e,t){if(!(e._flags&o.hasCachedChildNodes)){var n=e._renderedChildren,a=t.firstChild;e:for(var i in n)if(n.hasOwnProperty(i)){var s=n[i],l=u(s)._domID;if(0!==l){for(;null!==a;a=a.nextSibling)if(c(a,l)){d(s,a);continue e}r("32",l)}}e._flags|=o.hasCachedChildNodes}}function h(e){if(e[l])return e[l];for(var t,n,r=[];!e[l];){if(r.push(e),!e.parentNode)return null;e=e.parentNode}for(;e&&(n=e[l]);e=r.pop())t=n,r.length&&p(n,e);return t}var f={getClosestInstanceFromNode:h,getInstanceFromNode:function(e){var t=h(e);return null!=t&&t._hostNode===e?t:null},getNodeFromInstance:function(e){if(void 0===e._hostNode&&r("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||r("34"),e=e._hostParent;for(;t.length;e=t.pop())p(e,e._hostNode);return e._hostNode},precacheChildNodes:p,precacheNode:d,uncacheNode:function(e){var t=e._hostNode;t&&(delete t[l],e._hostNode=null)}};e.exports=f},,,function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,s,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,s,o],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},,,function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=a},function(e,t,n){var r=n(614),a=n(615);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[i+o]=s[o];return t||a(s)}},,,function(e,t,n){"use strict";e.exports={debugTool:null}},function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},function(e,t,n){"use strict";var r=n(7),a=n(10),i=n(127),s=n(30),o=n(128),l=n(35),c=n(64),u=n(6),d=[],p=0,h=i.getPooled(),f=!1,m=null;function g(){C.ReactReconcileTransaction&&m||r("123")}var v=[{initialize:function(){this.dirtyComponentsLength=d.length},close:function(){this.dirtyComponentsLength!==d.length?(d.splice(0,this.dirtyComponentsLength),w()):d.length=0}},{initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}}];function y(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=i.getPooled(),this.reconcileTransaction=C.ReactReconcileTransaction.getPooled(!0)}function b(e,t){return e._mountOrder-t._mountOrder}function E(e){var t=e.dirtyComponentsLength;t!==d.length&&r("124",t,d.length),d.sort(b),p++;for(var n=0;n<t;n++){var a,i=d[n],s=i._pendingCallbacks;if(i._pendingCallbacks=null,o.logTopLevelRenders){var c=i;i._currentElement.type.isReactTopLevelWrapper&&(c=i._renderedComponent),a="React update: "+c.getName(),console.time(a)}if(l.performUpdateIfNecessary(i,e.reconcileTransaction,p),a&&console.timeEnd(a),s)for(var u=0;u<s.length;u++)e.callbackQueue.enqueue(s[u],i.getPublicInstance())}}a(y.prototype,c,{getTransactionWrappers:function(){return v},destructor:function(){this.dirtyComponentsLength=null,i.release(this.callbackQueue),this.callbackQueue=null,C.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return c.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),s.addPoolingTo(y);var w=function(){for(;d.length||f;){if(d.length){var e=y.getPooled();e.perform(E,null,e),y.release(e)}if(f){f=!1;var t=h;h=i.getPooled(),t.notifyAll(),i.release(t)}}};var C={ReactReconcileTransaction:null,batchedUpdates:function(e,t,n,r,a,i){return g(),m.batchedUpdates(e,t,n,r,a,i)},enqueueUpdate:function e(t){g(),m.isBatchingUpdates?(d.push(t),null==t._updateBatchNumber&&(t._updateBatchNumber=p+1)):m.batchedUpdates(e,t)},flushBatchedUpdates:w,injection:{injectReconcileTransaction:function(e){e||r("126"),C.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||r("127"),"function"!=typeof e.batchedUpdates&&r("128"),"boolean"!=typeof e.isBatchingUpdates&&r("129"),m=e}},asap:function(e,t){u(m.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),h.enqueue(e,t),f=!0}};e.exports=C},,,function(e,t,n){"use strict";e.exports={current:null}},function(e,t,n){"use strict";var r=n(10),a=n(30),i=n(22),s=(n(9),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),o={type:null,target:null,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function l(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var a=this.constructor.Interface;for(var s in a)if(a.hasOwnProperty(s)){0;var o=a[s];o?this[s]=o(n):"target"===s?this.target=r:this[s]=n[s]}var l=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=l?i.thatReturnsTrue:i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse,this}r(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=i.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=i.thatReturnsTrue)},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),l.Interface=o,l.augmentClass=function(e,t){var n=function(){};n.prototype=this.prototype;var i=new n;r(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=r({},this.Interface,t),e.augmentClass=this.augmentClass,a.addPoolingTo(e,a.fourArgumentPooler)},a.addPoolingTo(l,a.fourArgumentPooler),e.exports=l},,function(e,t,n){"use strict";var r=n(0),a=n(155);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new r.Component).updater;e.exports=a(r.Component,r.isValidElement,i)},function(e,t,n){"use strict";var r=n(7),a=(n(6),function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)}),i=function(e){e instanceof this||r("25"),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)},s=a,o={addPoolingTo:function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||s,n.poolSize||(n.poolSize=10),n.release=i,n},oneArgumentPooler:a,twoArgumentPooler:function(e,t){if(this.instancePool.length){var n=this.instancePool.pop();return this.call(n,e,t),n}return new this(e,t)},threeArgumentPooler:function(e,t,n){if(this.instancePool.length){var r=this.instancePool.pop();return this.call(r,e,t,n),r}return new this(e,t,n)},fourArgumentPooler:function(e,t,n,r){if(this.instancePool.length){var a=this.instancePool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}};e.exports=o},,function(e,t,n){"use strict";var r=n(10),a=n(117),i=n(176),s=n(181),o=n(33),l=n(182),c=n(186),u=n(187),d=n(188),p=o.createElement,h=o.createFactory,f=o.cloneElement,m=r,g={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:d},Component:a.Component,PureComponent:a.PureComponent,createElement:p,cloneElement:f,isValidElement:o.isValidElement,PropTypes:l,createClass:u,createFactory:h,createMixin:function(e){return e},DOM:s,version:c,__spread:m};e.exports=g},function(e,t,n){"use strict";var r=n(10),a=n(26),i=(n(9),n(119),Object.prototype.hasOwnProperty),s=n(120),o={key:!0,ref:!0,__self:!0,__source:!0};function l(e){return void 0!==e.ref}function c(e){return void 0!==e.key}var u=function(e,t,n,r,a,i,o){return{$$typeof:s,type:e,key:t,ref:n,props:o,_owner:i}};u.createElement=function(e,t,n){var r,s={},d=null,p=null;if(null!=t)for(r in l(t)&&(p=t.ref),c(t)&&(d=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source,t)i.call(t,r)&&!o.hasOwnProperty(r)&&(s[r]=t[r]);var h=arguments.length-2;if(1===h)s.children=n;else if(h>1){for(var f=Array(h),m=0;m<h;m++)f[m]=arguments[m+2];0,s.children=f}if(e&&e.defaultProps){var g=e.defaultProps;for(r in g)void 0===s[r]&&(s[r]=g[r])}return u(e,d,p,0,0,a.current,s)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceKey=function(e,t){return u(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},u.cloneElement=function(e,t,n){var s,d,p=r({},e.props),h=e.key,f=e.ref,m=(e._self,e._source,e._owner);if(null!=t)for(s in l(t)&&(f=t.ref,m=a.current),c(t)&&(h=""+t.key),e.type&&e.type.defaultProps&&(d=e.type.defaultProps),t)i.call(t,s)&&!o.hasOwnProperty(s)&&(void 0===t[s]&&void 0!==d?p[s]=d[s]:p[s]=t[s]);var g=arguments.length-2;if(1===g)p.children=n;else if(g>1){for(var v=Array(g),y=0;y<g;y++)v[y]=arguments[y+2];p.children=v}return u(e.type,h,f,0,0,m,p)},u.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===s},e.exports=u},function(e,t,n){"use strict";var r=n(7);n(6);function a(e,t){return(e&t)===t}var i={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=i,n=e.Properties||{},s=e.DOMAttributeNamespaces||{},l=e.DOMAttributeNames||{},c=e.DOMPropertyNames||{},u=e.DOMMutationMethods||{};for(var d in e.isCustomAttribute&&o._isCustomAttributeFunctions.push(e.isCustomAttribute),n){o.properties.hasOwnProperty(d)&&r("48",d);var p=d.toLowerCase(),h=n[d],f={attributeName:p,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseProperty:a(h,t.MUST_USE_PROPERTY),hasBooleanValue:a(h,t.HAS_BOOLEAN_VALUE),hasNumericValue:a(h,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:a(h,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:a(h,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1||r("50",d),l.hasOwnProperty(d)){var m=l[d];f.attributeName=m}s.hasOwnProperty(d)&&(f.attributeNamespace=s[d]),c.hasOwnProperty(d)&&(f.propertyName=c[d]),u.hasOwnProperty(d)&&(f.mutationMethod=u[d]),o.properties[d]=f}}},s=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:s,ATTRIBUTE_NAME_CHAR:s+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<o._isCustomAttributeFunctions.length;t++){if((0,o._isCustomAttributeFunctions[t])(e))return!0}return!1},injection:i};e.exports=o},function(e,t,n){"use strict";var r=n(197);n(21),n(9);function a(){r.attachRefs(this,this._currentElement)}var i={mountComponent:function(e,t,n,r,i,s){var o=e.mountComponent(t,n,r,i,s);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(a,e),o},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){r.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,i){var s=e._currentElement;if(t!==s||i!==e._context){0;var o=r.shouldUpdateRefs(s,t);o&&r.detachRefs(e,s),e.receiveComponent(t,n,i),o&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(a,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}};e.exports=i},function(e,t,n){"use strict";var r=n(87),a=n(66),i=n(88),s=n(132),o="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent);function l(e){if(o){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)c(t,n[r],null);else null!=e.html?a(t,e.html):null!=e.text&&s(t,e.text)}}var c=i(function(e,t,n){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===r.html)?(l(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),l(t))});function u(){return this.node.nodeName}function d(e){return{node:e,children:[],html:null,text:null,toString:u}}d.insertTreeBefore=c,d.replaceChildWithTree=function(e,t){e.parentNode.replaceChild(t.node,e),l(t)},d.queueChild=function(e,t){o?e.children.push(t):e.node.appendChild(t.node)},d.queueHTML=function(e,t){o?e.html=t:a(e.node,t)},d.queueText=function(e,t){o?e.text=t:s(e.node,t)},e.exports=d},function(e,t,n){var r,a,i,s,o,l,c,u,d,p,h,f,m,g,v,y;y=n(52),r=n(112),o=n(618),l=n(73).compileDocumentSelector,c=n(73).compileSort,i=n(270).default,p=n(620).default,a=n(622).default,s=n(629).default,h=function(){if(!window.localStorage)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(e){return e,!1}},t.compileDocumentSelector=l,t.autoselectLocalDb=function(e,t,r){var a,i,s,l,c;return a=n(306),l=n(307),i=n(308),s=n(304),c=o.browser,h()?window.cordova?(console.log("Selecting WebSQLDb for Cordova"),new l(e,t,r)):c.android||c.ios||c.chrome||c.safari||c.opera||c.blackberry?(console.log("Selecting WebSQLDb for browser"),new l(e,t,function(n){return console.log("Failed to create WebSQLDb: "+(n?n.message:void 0)),new a(e,t,function(n){return console.log("Failed to create IndexedDb: "+(n?n.message:void 0)),new s(e,t)})})):c.firefox&&c.version>=16?(console.log("Selecting IndexedDb for browser"),new a(e,t,function(n){return console.log("Failed to create IndexedDb: "+(n?n.message:void 0)),new s(e,t)})):(console.log("Selecting LocalStorageDb for fallback"),new i(e,t,r)):new s(e,t)},t.migrateLocalDb=function(e,t,r,a){var i,s,o;for(s in i=new(n(309))(e,t),o=e.collections)o[s],t[s]&&i.addCollection(s);return i.upload(r,a)},t.cloneLocalDb=function(e,t,n,a){var i,s;for(i in s=e.collections)s[i],t[i]||t.addCollection(i);return r.each(y.values(e.collections),function(e,n){var a;return a=t[e.name],e.find({}).fetch(function(t){return a.seed(t,function(){return e.pendingUpserts(function(t){return a.upsert(y.pluck(t,"doc"),y.pluck(t,"base"),function(){return e.pendingRemoves(function(e){return r.eachSeries(e,function(e,t){return a.remove(e,function(){return t()},t)},n)},n)},n)},n)},n)},n)},function(e){return e?a(e):n()})},t.processFind=function(e,n,r){var a;return a=y.filter(e,l(n)),a=v(n,a),a=g(n,a),r&&r.sort&&a.sort(c(r.sort)),r&&r.skip&&(a=y.slice(a,r.skip)),r&&r.limit&&(a=y.take(a,r.limit)),r&&r.fields&&(a=t.filterFields(a,r.fields)),a},t.filterFields=function(e,t){return null==t&&(t={}),0===y.keys(t).length?e:y.map(e,function(e){var n,r,a,i,s,o,l,c,u,d,p,h,f,m,g,v,b,E,w,C;if(r={},1===y.first(y.values(t))){for(l=0,p=(b=y.keys(t).concat(["_id"])).length;l<p;l++){for(a=e,c=0,h=(i=b[l].split(".")).length;c<h;c++)s=i[c],a&&(a=a[s]);if(null!=a){for(n=e,o=r,u=0,f=(E=y.initial(i)).length;u<f;u++)o[s=E[u]]=o[s]||{},o=o[s],n=n[s];o[y.last(i)]=n[y.last(i)]}}return r}for(e=y.cloneDeep(e),d=0,m=(w=y.keys(t)).length;d<m;d++){for(i=w[d].split("."),a=e,v=0,g=(C=y.initial(i)).length;v<g;v++)s=C[v],a&&(a=a[s]);null!=a&&delete a[y.last(i)]}return e})},t.createUid=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t;return t=16*Math.random()|0,("x"===e?t:3&t|8).toString(16)})},v=function(e,t){var n,r,a,i;for(a in e)if(null!=(i=e[a])&&i.$near){if("Point"!==(r=i.$near.$geometry).type)break;t=y.filter(t,function(e){return e[a]&&"Point"===e[a].type}),n=y.map(t,function(e){return{doc:e,distance:d(r.coordinates[1],r.coordinates[0],e[a].coordinates[1],e[a].coordinates[0])}}),n=y.filter(n,function(e){return e.distance>=0}),n=y.sortBy(n,"distance"),i.$near.$maxDistance&&(n=y.filter(n,function(e){return e.distance<=i.$near.$maxDistance})),t=y.pluck(n,"doc")}return t},f=function(e,t){return i(e,t)},m=function(e,t){return null!=p(e,t)},d=function(e,t,n,r){var a,i,s;return 6370986,i=u(n-e),s=u(r-t),a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(u(e))*Math.cos(u(n))*Math.sin(s/2)*Math.sin(s/2),6370986*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},u=function(e){return e*(Math.PI/180)},g=function(e,t){var n,r,i;for(r in e)if(null!=(i=e[r])&&i.$geoIntersects){if("Polygon"!==(n=i.$geoIntersects.$geometry).type)break;t=y.filter(t,function(e){var t,i,o,l,c,u;if(!e[r])return!1;if("Point"===e[r].type)return f(e[r],n);if("Polygon"===(c=e[r].type)||"MultiPolygon"===c)return m(e[r],n);if("LineString"===e[r].type)return a(e[r],n)||s(e[r],n);if("MultiLineString"===e[r].type){for(o=0,l=(u=e[r].coordinates).length;o<l;o++)if(t=u[o],a(i={type:"LineString",coordinates:t},n)||s(i,n))return!0;return!1}})}return t},t.regularizeUpsert=function(e,n,r,a){var i,s,o,l,c;for(y.isFunction(n)&&(n=(c=[void 0,n,r])[0],r=c[1],a=c[2]),y.isArray(e)?n=n||[]:(e=[e],n=[n]),o=0,l=(s=y.map(e,function(e,t){return{doc:e,base:t<n.length?n[t]:void 0}})).length;o<l;o++){if((i=s[o]).doc._id||(i.doc._id=t.createUid()),i.base&&!i.base._id)throw new Error("Base needs _id");if(i.base&&i.base._id!==i.doc._id)throw new Error("Base needs same _id")}return[s,r,a]}},,,,function(e,t,n){var r;!function(a){"use strict";var i,s,o,l=(i=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g,function(e,t,n,r){if(1!==arguments.length||"string"!==(null===(a=e)?"null":void 0===a?"undefined":"object"!=typeof a?typeof a:Array.isArray(a)?"array":{}.toString.call(a).slice(8,-1).toLowerCase())||/\d/.test(e)||(t=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var a,u=(t=String(l.masks[t]||t||l.masks.default)).slice(0,4);"UTC:"!==u&&"GMT:"!==u||(t=t.slice(4),n=!0,"GMT:"===u&&(r=!0));var d=n?"getUTC":"get",p=e[d+"Date"](),h=e[d+"Day"](),f=e[d+"Month"](),m=e[d+"FullYear"](),g=e[d+"Hours"](),v=e[d+"Minutes"](),y=e[d+"Seconds"](),b=e[d+"Milliseconds"](),E=n?0:e.getTimezoneOffset(),w=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var a=(t-n)/6048e5;return 1+Math.floor(a)}(e),C=function(e){var t=e.getDay();return 0===t&&(t=7),t}(e),_={d:p,dd:c(p),ddd:l.i18n.dayNames[h],dddd:l.i18n.dayNames[h+7],m:f+1,mm:c(f+1),mmm:l.i18n.monthNames[f],mmmm:l.i18n.monthNames[f+12],yy:String(m).slice(2),yyyy:m,h:g%12||12,hh:c(g%12||12),H:g,HH:c(g),M:v,MM:c(v),s:y,ss:c(y),l:c(b,3),L:c(Math.round(b/10)),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:r?"GMT":n?"UTC":(String(e).match(s)||[""]).pop().replace(o,""),o:(E>0?"-":"+")+c(100*Math.floor(Math.abs(E)/60)+Math.abs(E)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10],W:w,N:C};return t.replace(i,function(e){return e in _?_[e]:e.slice(1,e.length-1)})});function c(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}l.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},l.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},void 0===(r=function(){return l}.call(t,n,t,e))||(e.exports=r)}()},,,,,function(e,t,n){"use strict";e.exports=function(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var a=new Error(n);throw a.name="Invariant Violation",a.framesToPop=1,a}},function(e,t,n){"use strict";var r=n(48),a=n(81),i=n(124),s=n(125),o=(n(9),r.getListener);function l(e,t,n){var r=function(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return o(e,r)}(e,n,t);r&&(n._dispatchListeners=i(n._dispatchListeners,r),n._dispatchInstances=i(n._dispatchInstances,e))}function c(e){e&&e.dispatchConfig.phasedRegistrationNames&&a.traverseTwoPhase(e._targetInst,l,e)}function u(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?a.getParentInstance(t):null;a.traverseTwoPhase(n,l,e)}}function d(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,a=o(e,r);a&&(n._dispatchListeners=i(n._dispatchListeners,a),n._dispatchInstances=i(n._dispatchInstances,e))}}function p(e){e&&e.dispatchConfig.registrationName&&d(e._targetInst,0,e)}var h={accumulateTwoPhaseDispatches:function(e){s(e,c)},accumulateTwoPhaseDispatchesSkipTarget:function(e){s(e,u)},accumulateDirectDispatches:function(e){s(e,p)},accumulateEnterLeaveDispatches:function(e,t,n,r){a.traverseEnterLeave(n,r,d,e,t)}};e.exports=h},function(e,t,n){"use strict";var r=n(7),a=n(80),i=n(81),s=n(82),o=n(124),l=n(125),c=(n(6),{}),u=null,d=function(e,t){e&&(i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},p=function(e){return d(e,!0)},h=function(e){return d(e,!1)},f=function(e){return"."+e._rootNodeID};var m={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n&&r("94",t,typeof n);var i=f(e);(c[t]||(c[t]={}))[i]=n;var s=a.registrationNameModules[t];s&&s.didPutListener&&s.didPutListener(e,t,n)},getListener:function(e,t){var n=c[t];if(function(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||(r=t,"button"!==r&&"input"!==r&&"select"!==r&&"textarea"!==r));default:return!1}var r}(t,e._currentElement.type,e._currentElement.props))return null;var r=f(e);return n&&n[r]},deleteListener:function(e,t){var n=a.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=c[t];r&&delete r[f(e)]},deleteAllListeners:function(e){var t=f(e);for(var n in c)if(c.hasOwnProperty(n)&&c[n][t]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete c[n][t]}},extractEvents:function(e,t,n,r){for(var i,s=a.plugins,l=0;l<s.length;l++){var c=s[l];if(c){var u=c.extractEvents(e,t,n,r);u&&(i=o(i,u))}}return i},enqueueEvents:function(e){e&&(u=o(u,e))},processEventQueue:function(e){var t=u;u=null,l(t,e?p:h),u&&r("95"),s.rethrowCaughtError()},__purge:function(){c={}},__getListenerBank:function(){return c}};e.exports=m},function(e,t,n){"use strict";var r=n(27),a=n(83),i={view:function(e){if(e.view)return e.view;var t=a(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};function s(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(s,i),e.exports=s},function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=r},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e,r){var a;
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */(function(){var i,s,o,l="3.10.1",c=1,u=2,d=4,p=8,h=16,f=32,m=64,g=128,v=256,y=30,b="...",E=150,w=16,C=200,_=1,S=2,D="Expected a function",R="__lodash_placeholder__",k="[object Arguments]",T="[object Array]",x="[object Boolean]",N="[object Date]",O="[object Error]",P="[object Function]",I="[object Number]",A="[object Object]",M="[object RegExp]",j="[object String]",L="[object ArrayBuffer]",F="[object Float32Array]",U="[object Float64Array]",q="[object Int8Array]",$="[object Int16Array]",B="[object Int32Array]",H="[object Uint8Array]",V="[object Uint8ClampedArray]",W="[object Uint16Array]",Y="[object Uint32Array]",z=/\b__p \+= '';/g,X=/\b(__p \+=) '' \+/g,J=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39|#96);/g,K=/[&<>"'`]/g,Q=RegExp(G.source),Z=RegExp(K.source),ee=/<%-([\s\S]+?)%>/g,te=/<%([\s\S]+?)%>/g,ne=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ae=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,se=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,oe=RegExp(se.source),le=/[\u0300-\u036f\ufe20-\ufe23]/g,ce=/\\(\\)?/g,ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,pe=/^0[xX]/,he=/^\[object .+?Constructor\]$/,fe=/^\d+$/,me=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,ge=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,ye=(s="[A-Z\\xc0-\\xd6\\xd8-\\xde]",o="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(s+"+(?="+s+o+")|"+s+"?"+o+"|"+s+"+|[0-9]+","g")),be=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ee=-1,we={};we[F]=we[U]=we[q]=we[$]=we[B]=we[H]=we[V]=we[W]=we[Y]=!0,we[k]=we[T]=we[L]=we[x]=we[N]=we[O]=we[P]=we["[object Map]"]=we[I]=we[A]=we[M]=we["[object Set]"]=we[j]=we["[object WeakMap]"]=!1;var Ce={};Ce[k]=Ce[T]=Ce[L]=Ce[x]=Ce[N]=Ce[F]=Ce[U]=Ce[q]=Ce[$]=Ce[B]=Ce[I]=Ce[A]=Ce[M]=Ce[j]=Ce[H]=Ce[V]=Ce[W]=Ce[Y]=!0,Ce[O]=Ce[P]=Ce["[object Map]"]=Ce["[object Set]"]=Ce["[object WeakMap]"]=!1;var _e={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},De={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Re={function:!0,object:!0},ke={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xe=Re[typeof t]&&t&&!t.nodeType&&t,Ne=Re[typeof e]&&e&&!e.nodeType&&e,Oe=xe&&Ne&&"object"==typeof r&&r&&r.Object&&r,Pe=Re[typeof self]&&self&&self.Object&&self,Ie=Re[typeof window]&&window&&window.Object&&window,Ae=(Ne&&Ne.exports,Oe||Ie!==(this&&this.window)&&Ie||Pe||this);function Me(e,t){if(e!==t){var n=null===e,r=e===i,a=e==e,s=null===t,o=t===i,l=t==t;if(e>t&&!s||!a||n&&!o&&l||r&&l)return 1;if(e<t&&!n||!l||s&&!r&&a||o&&a)return-1}return 0}function je(e,t,n){for(var r=e.length,a=n?r:-1;n?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function Le(e,t,n){if(t!=t)return ze(e,n);for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}function Fe(e){return"function"==typeof e||!1}function Ue(e){return null==e?"":e+""}function qe(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function $e(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function Be(e,t){return Me(e.criteria,t.criteria)||e.index-t.index}function He(e){return _e[e]}function Ve(e){return Se[e]}function We(e,t,n){return t?e=ke[e]:n&&(e=Te[e]),"\\"+e}function Ye(e){return"\\"+Te[e]}function ze(e,t,n){for(var r=e.length,a=t+(n?0:-1);n?a--:++a<r;){var i=e[a];if(i!=i)return a}return-1}function Xe(e){return!!e&&"object"==typeof e}function Je(e){return e<=160&&e>=9&&e<=13||32==e||160==e||5760==e||6158==e||e>=8192&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function Ge(e,t){for(var n=-1,r=e.length,a=-1,i=[];++n<r;)e[n]===t&&(e[n]=R,i[++a]=n);return i}function Ke(e){for(var t=-1,n=e.length;++t<n&&Je(e.charCodeAt(t)););return t}function Qe(e){for(var t=e.length;t--&&Je(e.charCodeAt(t)););return t}function Ze(e){return De[e]}var et=function e(t){var n=(t=t?et.defaults(Ae.Object(),t,et.pick(Ae,be)):Ae).Array,r=t.Date,a=t.Error,s=t.Function,o=t.Math,_e=t.Number,Se=t.Object,De=t.RegExp,Re=t.String,ke=t.TypeError,Te=n.prototype,xe=Se.prototype,Ne=Re.prototype,Oe=s.prototype.toString,Pe=xe.hasOwnProperty,Ie=0,Je=xe.toString,tt=Ae._,nt=De("^"+Oe.call(Pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=t.ArrayBuffer,at=t.clearTimeout,it=t.parseFloat,st=o.pow,ot=xe.propertyIsEnumerable,lt=yr(t,"Set"),ct=t.setTimeout,ut=Te.splice,dt=t.Uint8Array,pt=yr(t,"WeakMap"),ht=o.ceil,ft=yr(Se,"create"),mt=o.floor,gt=yr(n,"isArray"),vt=t.isFinite,yt=yr(Se,"keys"),bt=o.max,Et=o.min,wt=yr(r,"now"),Ct=t.parseInt,_t=o.random,St=_e.NEGATIVE_INFINITY,Dt=_e.POSITIVE_INFINITY,Rt=4294967295,kt=Rt-1,Tt=Rt>>>1,xt=9007199254740991,Nt=pt&&new pt,Ot={};function Pt(e){if(Xe(e)&&!Ya(e)&&!(e instanceof Mt)){if(e instanceof At)return e;if(Pe.call(e,"__chain__")&&Pe.call(e,"__wrapped__"))return jr(e)}return new At(e)}function It(){}function At(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}Pt.support={};function Mt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function jt(){this.__data__={}}function Lt(e){var t=e?e.length:0;for(this.data={hash:ft(null),set:new lt};t--;)this.push(e[t])}function Ft(e,t){var n=e.data;return("string"==typeof t||Ga(t)?n.set.has(t):n.hash[t])?0:-1}function Ut(e,t){var r=-1,a=e.length;for(t||(t=n(a));++r<a;)t[r]=e[r];return t}function qt(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function $t(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Bt(e,t){for(var n=-1,r=e.length,a=-1,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[++a]=s)}return i}function Ht(e,t){for(var r=-1,a=e.length,i=n(a);++r<a;)i[r]=t(e[r],r,e);return i}function Vt(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function Wt(e,t,n,r){var a=-1,i=e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function Yt(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function zt(e,t,n,r){return e!==i&&Pe.call(r,n)?e:t}function Xt(e,t,n){for(var r=-1,a=vi(t),s=a.length;++r<s;){var o=a[r],l=e[o],c=n(l,t[o],o,e,t);(c==c?c===l:l!=l)&&(l!==i||o in e)||(e[o]=c)}return e}function Jt(e,t){return null==t?e:Kt(t,vi(t),e)}function Gt(e,t){for(var r=-1,a=null==e,s=!a&&Er(e),o=s?e.length:0,l=t.length,c=n(l);++r<l;){var u=t[r];c[r]=s?wr(u,o)?e[u]:i:a?i:e[u]}return c}function Kt(e,t,n){n||(n={});for(var r=-1,a=t.length;++r<a;){var i=t[r];n[i]=e[i]}return n}function Qt(e,t,n){var r=typeof e;return"function"==r?t===i?e:jn(e,t,n):null==e?Li:"object"==r?En(e):t===i?Hi(e):wn(e,t)}function Zt(e,t,n,r,a,s,o){var l;if(n&&(l=a?n(e,r,a):n(e)),l!==i)return l;if(!Ga(e))return e;var c=Ya(e);if(c){if(l=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Pe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!t)return Ut(e,l)}else{var u=Je.call(e),d=u==P;if(u!=A&&u!=k&&(!d||a))return Ce[u]?function(e,t,n){var r=e.constructor;switch(t){case L:return Ln(e);case x:case N:return new r(+e);case F:case U:case q:case $:case B:case H:case V:case W:case Y:var a=e.buffer;return new r(n?Ln(a):a,e.byteOffset,e.length);case I:case j:return new r(e);case M:var i=new r(e.source,de.exec(e));i.lastIndex=e.lastIndex}return i}(e,u,t):a?e:{};if(l=function(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Se),new t}(d?{}:e),!t)return Jt(l,e)}s||(s=[]),o||(o=[]);for(var p=s.length;p--;)if(s[p]==e)return o[p];return s.push(e),o.push(l),(c?qt:hn)(e,function(r,a){l[a]=Zt(r,t,n,a,e,s,o)}),l}Pt.templateSettings={escape:ee,evaluate:te,interpolate:ne,variable:"",imports:{_:Pt}};var en=function(){function e(){}return function(t){if(Ga(t)){e.prototype=t;var n=new e;e.prototype=i}return n||{}}}();function tn(e,t,n){if("function"!=typeof e)throw new ke(D);return ct(function(){e.apply(i,n)},t)}function nn(e,t){var n=e?e.length:0,r=[];if(!n)return r;var a=-1,i=mr(),s=i==Le,o=s&&t.length>=C?Vn(t):null,l=t.length;o&&(i=Ft,s=!1,t=o);e:for(;++a<n;){var c=e[a];if(s&&c==c){for(var u=l;u--;)if(t[u]===c)continue e;r.push(c)}else i(t,c,0)<0&&r.push(c)}return r}var rn=Bn(hn),an=Bn(fn,!0);function sn(e,t){var n=!0;return rn(e,function(e,r,a){return n=!!t(e,r,a)}),n}function on(e,t){var n=[];return rn(e,function(e,r,a){t(e,r,a)&&n.push(e)}),n}function ln(e,t,n,r){var a;return n(e,function(e,n,i){if(t(e,n,i))return a=r?n:e,!1}),a}function cn(e,t,n,r){r||(r=[]);for(var a=-1,i=e.length;++a<i;){var s=e[a];Xe(s)&&Er(s)&&(n||Ya(s)||Wa(s))?t?cn(s,t,n,r):Vt(r,s):n||(r[r.length]=s)}return r}var un=Hn(),dn=Hn(!0);function pn(e,t){return un(e,t,yi)}function hn(e,t){return un(e,t,vi)}function fn(e,t){return dn(e,t,vi)}function mn(e,t){for(var n=-1,r=t.length,a=-1,i=[];++n<r;){var s=t[n];Ja(e[s])&&(i[++a]=s)}return i}function gn(e,t,n){if(null!=e){n!==i&&n in Ar(e)&&(t=[n]);for(var r=0,a=t.length;null!=e&&r<a;)e=e[t[r++]];return r&&r==a?e:i}}function vn(e,t,n,r,a,s){return e===t||(null==e||null==t||!Ga(e)&&!Xe(t)?e!=e&&t!=t:function(e,t,n,r,a,s,o){var l=Ya(e),c=Ya(t),u=T,d=T;l||((u=Je.call(e))==k?u=A:u!=A&&(l=ni(e))),c||((d=Je.call(t))==k?d=A:d!=A&&(c=ni(t)));var p=u==A,h=d==A,f=u==d;if(f&&!l&&!p)return function(e,t,n){switch(n){case x:case N:return+e==+t;case O:return e.name==t.name&&e.message==t.message;case I:return e!=+e?t!=+t:e==+t;case M:case j:return e==t+""}return!1}(e,t,u);if(!a){var m=p&&Pe.call(e,"__wrapped__"),g=h&&Pe.call(t,"__wrapped__");if(m||g)return n(m?e.value():e,g?t.value():t,r,a,s,o)}if(!f)return!1;s||(s=[]),o||(o=[]);for(var v=s.length;v--;)if(s[v]==e)return o[v]==t;s.push(e),o.push(t);var y=(l?function(e,t,n,r,a,s,o){var l=-1,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;for(;++l<c;){var d=e[l],p=t[l],h=r?r(a?p:d,a?d:p,l):i;if(h!==i){if(h)continue;return!1}if(a){if(!Yt(t,function(e){return d===e||n(d,e,r,a,s,o)}))return!1}else if(d!==p&&!n(d,p,r,a,s,o))return!1}return!0}:function(e,t,n,r,a,s,o){var l=vi(e),c=l.length,u=vi(t).length;if(c!=u&&!a)return!1;for(var d=c;d--;){var p=l[d];if(!(a?p in t:Pe.call(t,p)))return!1}for(var h=a;++d<c;){p=l[d];var f=e[p],m=t[p],g=r?r(a?m:f,a?f:m,p):i;if(!(g===i?n(f,m,r,a,s,o):g))return!1;h||(h="constructor"==p)}if(!h){var v=e.constructor,y=t.constructor;if(v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0})(e,t,n,r,a,s,o);return s.pop(),o.pop(),y}(e,t,vn,n,r,a,s))}function yn(e,t,n){var r=t.length,a=r,s=!n;if(null==e)return!a;for(e=Ar(e);r--;){var o=t[r];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++r<a;){var l=(o=t[r])[0],c=e[l],u=o[1];if(s&&o[2]){if(c===i&&!(l in e))return!1}else{var d=n?n(c,u,l):i;if(!(d===i?vn(u,c,n,!0):d))return!1}}return!0}function bn(e,t){var r=-1,a=Er(e)?n(e.length):[];return rn(e,function(e,n,i){a[++r]=t(e,n,i)}),a}function En(e){var t=vr(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&e[n]===r&&(r!==i||n in Ar(e))}}return function(e){return yn(e,t)}}function wn(e,t){var n=Ya(e),r=_r(e)&&Rr(t),a=e+"";return e=Mr(e),function(s){if(null==s)return!1;var o=a;if(s=Ar(s),(n||!r)&&!(o in s)){if(null==(s=1==e.length?s:gn(s,Rn(e,0,-1))))return!1;o=Wr(e),s=Ar(s)}return s[o]===t?t!==i||o in s:vn(t,s[o],i,!0)}}function Cn(e){return function(t){return null==t?i:t[e]}}function _n(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=a&&wr(r)){var a=r;ut.call(e,r,1)}}return e}function Sn(e,t){return e+mt(_t()*(t-e+1))}var Dn=Nt?function(e,t){return Nt.set(e,t),e}:Li;function Rn(e,t,r){var a=-1,s=e.length;(t=null==t?0:+t||0)<0&&(t=-t>s?0:s+t),(r=r===i||r>s?s:+r||0)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=n(s);++a<s;)o[a]=e[a+t];return o}function kn(e,t){var n;return rn(e,function(e,r,a){return!(n=t(e,r,a))}),!!n}function Tn(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function xn(e,t,n){var r=pr(),a=-1;return t=Ht(t,function(e){return r(e)}),Tn(bn(e,function(e){return{criteria:Ht(t,function(t){return t(e)}),index:++a,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,s=a.length,o=n.length;++r<s;){var l=Me(a[r],i[r]);if(l){if(r>=o)return l;var c=n[r];return l*("asc"===c||!0===c?1:-1)}}return e.index-t.index}(e,t,n)})}function Nn(e,t){var n=-1,r=mr(),a=e.length,i=r==Le,s=i&&a>=C,o=s?Vn():null,l=[];o?(r=Ft,i=!1):(s=!1,o=t?[]:l);e:for(;++n<a;){var c=e[n],u=t?t(c,n,e):c;if(i&&c==c){for(var d=o.length;d--;)if(o[d]===u)continue e;t&&o.push(u),l.push(c)}else r(o,u,0)<0&&((t||s)&&o.push(u),l.push(c))}return l}function On(e,t){for(var r=-1,a=t.length,i=n(a);++r<a;)i[r]=e[t[r]];return i}function Pn(e,t,n,r){for(var a=e.length,i=r?a:-1;(r?i--:++i<a)&&t(e[i],i,e););return n?Rn(e,r?0:i,r?i+1:a):Rn(e,r?i+1:0,r?a:i)}function In(e,t){var n=e;n instanceof Mt&&(n=n.value());for(var r=-1,a=t.length;++r<a;){var i=t[r];n=i.func.apply(i.thisArg,Vt([n],i.args))}return n}function An(e,t,n){var r=0,a=e?e.length:r;if("number"==typeof t&&t==t&&a<=Tt){for(;r<a;){var i=r+a>>>1,s=e[i];(n?s<=t:s<t)&&null!==s?r=i+1:a=i}return a}return Mn(e,t,Li,n)}function Mn(e,t,n,r){t=n(t);for(var a=0,s=e?e.length:0,o=t!=t,l=null===t,c=t===i;a<s;){var u=mt((a+s)/2),d=n(e[u]),p=d!==i,h=d==d;if(o)var f=h||r;else f=l?h&&p&&(r||null!=d):c?h&&(r||p):null!=d&&(r?d<=t:d<t);f?a=u+1:s=u}return Et(s,kt)}function jn(e,t,n){if("function"!=typeof e)return Li;if(t===i)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,i){return e.call(t,n,r,a,i)};case 5:return function(n,r,a,i,s){return e.call(t,n,r,a,i,s)}}return function(){return e.apply(t,arguments)}}function Ln(e){var t=new rt(e.byteLength);return new dt(t).set(new dt(e)),t}function Fn(e,t,r){for(var a=r.length,i=-1,s=bt(e.length-a,0),o=-1,l=t.length,c=n(l+s);++o<l;)c[o]=t[o];for(;++i<a;)c[r[i]]=e[i];for(;s--;)c[o++]=e[i++];return c}function Un(e,t,r){for(var a=-1,i=r.length,s=-1,o=bt(e.length-i,0),l=-1,c=t.length,u=n(o+c);++s<o;)u[s]=e[s];for(var d=s;++l<c;)u[d+l]=t[l];for(;++a<i;)u[d+r[a]]=e[s++];return u}function qn(e,t){return function(n,r,a){var i=t?t():{};if(r=pr(r,a,3),Ya(n))for(var s=-1,o=n.length;++s<o;){var l=n[s];e(i,l,r(l,s,n),n)}else rn(n,function(t,n,a){e(i,t,r(t,n,a),a)});return i}}function $n(e){return Ha(function(t,n){var r=-1,a=null==t?0:n.length,s=a>2?n[a-2]:i,o=a>2?n[2]:i,l=a>1?n[a-1]:i;for("function"==typeof s?(s=jn(s,l,5),a-=2):a-=(s="function"==typeof l?l:i)?1:0,o&&Cr(n[0],n[1],o)&&(s=a<3?i:s,a=1);++r<a;){var c=n[r];c&&e(t,c,s)}return t})}function Bn(e,t){return function(n,r){var a=n?gr(n):0;if(!Dr(a))return e(n,r);for(var i=t?a:-1,s=Ar(n);(t?i--:++i<a)&&!1!==r(s[i],i,s););return n}}function Hn(e){return function(t,n,r){for(var a=Ar(t),i=r(t),s=i.length,o=e?s:-1;e?o--:++o<s;){var l=i[o];if(!1===n(a[l],l,a))break}return t}}function Vn(e){return ft&&lt?new Lt(e):null}function Wn(e){return function(t){for(var n=-1,r=Ai(Ri(t)),a=r.length,i="";++n<a;)i=e(i,r[n],n);return i}}function Yn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=en(e.prototype),r=e.apply(n,t);return Ga(r)?r:n}}function zn(e){return function t(n,r,a){a&&Cr(n,r,a)&&(r=i);var s=dr(n,e,i,i,i,i,i,r);return s.placeholder=t.placeholder,s}}function Xn(e,t){return Ha(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(i,n))})}function Jn(e,t){return function(n,r,a){if(a&&Cr(n,r,a)&&(r=i),1==(r=pr(r,a,3)).length){var s=function(e,t,n,r){for(var a=-1,i=e.length,s=r,o=s;++a<i;){var l=e[a],c=+t(l);n(c,s)&&(s=c,o=l)}return o}(n=Ya(n)?n:Ir(n),r,e,t);if(!n.length||s!==t)return s}return function(e,t,n,r){var a=r,i=a;return rn(e,function(e,s,o){var l=+t(e,s,o);(n(l,a)||l===r&&l===i)&&(a=l,i=e)}),i}(n,r,e,t)}}function Gn(e,t){return function(n,r,a){if(r=pr(r,a,3),Ya(n)){var s=je(n,r,t);return s>-1?n[s]:i}return ln(n,r,e)}}function Kn(e){return function(t,n,r){return t&&t.length?je(t,n=pr(n,r,3),e):-1}}function Qn(e){return function(t,n,r){return ln(t,n=pr(n,r,3),e,!0)}}function Zn(e){return function(){for(var t,r=arguments.length,a=e?r:-1,s=0,o=n(r);e?a--:++a<r;){var l=o[s++]=arguments[a];if("function"!=typeof l)throw new ke(D);!t&&At.prototype.thru&&"wrapper"==fr(l)&&(t=new At([],!0))}for(a=t?-1:r;++a<r;){var c=fr(l=o[a]),u="wrapper"==c?hr(l):i;t=u&&Sr(u[0])&&u[1]==(g|p|f|v)&&!u[4].length&&1==u[9]?t[fr(u[0])].apply(t,u[3]):1==l.length&&Sr(l)?t[c]():t.thru(l)}return function(){var e=arguments,n=e[0];if(t&&1==e.length&&Ya(n)&&n.length>=C)return t.plant(n).value();for(var a=0,i=r?o[a].apply(this,e):n;++a<r;)i=o[a].call(this,i);return i}}}function er(e,t){return function(n,r,a){return"function"==typeof r&&a===i&&Ya(n)?e(n,r):t(n,jn(r,a,3))}}function tr(e){return function(t,n,r){return"function"==typeof n&&r===i||(n=jn(n,r,3)),e(t,n,yi)}}function nr(e){return function(t,n,r){return"function"==typeof n&&r===i||(n=jn(n,r,3)),e(t,n)}}function rr(e){return function(t,n,r){var a={};return n=pr(n,r,3),hn(t,function(t,r,i){var s=n(t,r,i);t=e?t:s,a[r=e?s:r]=t}),a}}function ar(e){return function(t,n,r){return t=Ue(t),(e?t:"")+lr(t,n,r)+(e?"":t)}}function ir(e){var t=Ha(function(n,r){var a=Ge(r,t.placeholder);return dr(n,e,i,r,a)});return t}function sr(e,t){return function(n,r,a,s){var o=arguments.length<3;return"function"==typeof r&&s===i&&Ya(n)?e(n,r,a,o):function(e,t,n,r,a){return a(e,function(e,a,i){n=r?(r=!1,e):t(n,e,a,i)}),n}(n,pr(r,s,4),a,o,t)}}function or(e,t,r,a,s,o,l,v,y,b){var E=t&g,w=t&c,C=t&u,_=t&p,S=t&d,D=t&h,R=C?i:Yn(e);return function d(){for(var p=arguments.length,h=p,g=n(p);h--;)g[h]=arguments[h];if(a&&(g=Fn(g,a,s)),o&&(g=Un(g,o,l)),_||D){var k=d.placeholder,T=Ge(g,k);if((p-=T.length)<b){var x=v?Ut(v):i,N=bt(b-p,0);t|=_?f:m,t&=~(_?m:f),S||(t&=~(c|u));var O=[e,t,r,_?g:i,_?T:i,_?i:g,_?i:T,x,y,N],P=or.apply(i,O);return Sr(e)&&Or(P,O),P.placeholder=k,P}}var I=w?r:this,A=C?I[e]:e;return v&&(g=function(e,t){for(var n=e.length,r=Et(t.length,n),a=Ut(e);r--;){var s=t[r];e[r]=wr(s,n)?a[s]:i}return e}(g,v)),E&&y<g.length&&(g.length=y),this&&this!==Ae&&this instanceof d&&(A=R||Yn(e)),A.apply(I,g)}}function lr(e,t,n){var r=e.length;if(r>=(t=+t)||!vt(t))return"";var a=t-r;return Ni(n=null==n?" ":n+"",ht(a/n.length)).slice(0,a)}function cr(e){var t=o[e];return function(e,n){return(n=n===i?0:+n||0)?(n=st(10,n),t(e*n)/n):t(e)}}function ur(e){return function(t,n,r,a){var i=pr(r);return null==r&&i===Qt?An(t,n,e):Mn(t,n,i(r,a,1),e)}}function dr(e,t,r,a,s,o,l,h){var y=t&u;if(!y&&"function"!=typeof e)throw new ke(D);var b=a?a.length:0;if(b||(t&=~(f|m),a=s=i),b-=s?s.length:0,t&m){var E=a,w=s;a=s=i}var C=y?i:hr(e),_=[e,t,r,a,s,E,w,o,l,h];if(C&&(function(e,t){var n=e[1],r=t[1],a=n|r,i=a<g,s=r==g&&n==p||r==g&&n==v&&e[7].length<=t[8]||r==(g|v)&&n==p;if(!i&&!s)return e;r&c&&(e[2]=t[2],a|=n&c?0:d);var o=t[3];if(o){var l=e[3];e[3]=l?Fn(l,o,t[4]):Ut(o),e[4]=l?Ge(e[3],R):Ut(t[4])}(o=t[5])&&(l=e[5],e[5]=l?Un(l,o,t[6]):Ut(o),e[6]=l?Ge(e[5],R):Ut(t[6])),(o=t[7])&&(e[7]=Ut(o)),r&g&&(e[8]=null==e[8]?t[8]:Et(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(_,C),t=_[1],h=_[9]),_[9]=null==h?y?0:e.length:bt(h-b,0)||0,t==c)var S=function(e,t){var n=Yn(e);return function r(){return(this&&this!==Ae&&this instanceof r?n:e).apply(t,arguments)}}(_[0],_[2]);else S=t!=f&&t!=(c|f)||_[4].length?or.apply(i,_):function(e,t,r,a){var i=t&c,s=Yn(e);return function t(){for(var o=-1,l=arguments.length,c=-1,u=a.length,d=n(u+l);++c<u;)d[c]=a[c];for(;l--;)d[c++]=arguments[++o];return(this&&this!==Ae&&this instanceof t?s:e).apply(i?r:this,d)}}.apply(i,_);return(C?Dn:Or)(S,_)}function pr(e,t,n){var r=Pt.callback||ji;return r=r===ji?Qt:r,n?r(e,t,n):r}var hr=Nt?function(e){return Nt.get(e)}:Bi;function fr(e){for(var t=e.name,n=Ot[t],r=n?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==e)return a.name}return t}function mr(e,t,n){var r=Pt.indexOf||Hr;return r=r===Hr?Le:r,e?r(e,t,n):r}var gr=Cn("length");function vr(e){for(var t=Ci(e),n=t.length;n--;)t[n][2]=Rr(t[n][1]);return t}function yr(e,t){var n=null==e?i:e[t];return Ka(n)?n:i}function br(e,t,n){null==e||_r(t,e)||(e=1==(t=Mr(t)).length?e:gn(e,Rn(t,0,-1)),t=Wr(t));var r=null==e?e:e[t];return null==r?i:r.apply(e,n)}function Er(e){return null!=e&&Dr(gr(e))}function wr(e,t){return e="number"==typeof e||fe.test(e)?+e:-1,t=null==t?xt:t,e>-1&&e%1==0&&e<t}function Cr(e,t,n){if(!Ga(n))return!1;var r=typeof t;if("number"==r?Er(n)&&wr(t,n.length):"string"==r&&t in n){var a=n[t];return e==e?e===a:a!=a}return!1}function _r(e,t){var n=typeof e;return!!("string"==n&&ae.test(e)||"number"==n)||!Ya(e)&&(!re.test(e)||null!=t&&e in Ar(t))}function Sr(e){var t=fr(e);if(!(t in Mt.prototype))return!1;var n=Pt[t];if(e===n)return!0;var r=hr(n);return!!r&&e===r[0]}function Dr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=xt}function Rr(e){return e==e&&!Ga(e)}function kr(e,t){e=Ar(e);for(var n=-1,r=t.length,a={};++n<r;){var i=t[n];i in e&&(a[i]=e[i])}return a}function Tr(e,t){var n={};return pn(e,function(e,r,a){t(e,r,a)&&(n[r]=e)}),n}var xr,Nr,Or=(xr=0,Nr=0,function(e,t){var n=Ra(),r=w-(n-Nr);if(Nr=n,r>0){if(++xr>=E)return e}else xr=0;return Dn(e,t)});function Pr(e){for(var t=yi(e),n=t.length,r=n&&e.length,a=!!r&&Dr(r)&&(Ya(e)||Wa(e)),i=-1,s=[];++i<n;){var o=t[i];(a&&wr(o,r)||Pe.call(e,o))&&s.push(o)}return s}function Ir(e){return null==e?[]:Er(e)?Ga(e)?e:Se(e):Si(e)}function Ar(e){return Ga(e)?e:Se(e)}function Mr(e){if(Ya(e))return e;var t=[];return Ue(e).replace(ie,function(e,n,r,a){t.push(r?a.replace(ce,"$1"):n||e)}),t}function jr(e){return e instanceof Mt?e.clone():new At(e.__wrapped__,e.__chain__,Ut(e.__actions__))}var Lr=Ha(function(e,t){return Xe(e)&&Er(e)?nn(e,cn(t,!1,!0)):[]});function Fr(e,t,n){return e&&e.length?((n?Cr(e,t,n):null==t)&&(t=1),Rn(e,t<0?0:t)):[]}function Ur(e,t,n){var r=e?e.length:0;return r?((n?Cr(e,t,n):null==t)&&(t=1),Rn(e,0,(t=r-(+t||0))<0?0:t)):[]}var qr=Kn(),$r=Kn(!0);function Br(e){return e?e[0]:i}function Hr(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?bt(r+n,0):n;else if(n){var a=An(e,t);return a<r&&(t==t?t===e[a]:e[a]!=e[a])?a:-1}return Le(e,t,n||0)}var Vr=Ha(function(e){for(var t=e.length,r=t,a=n(d),i=mr(),s=i==Le,o=[];r--;){var l=e[r]=Er(l=e[r])?l:[];a[r]=s&&l.length>=120?Vn(r&&l):null}var c=e[0],u=-1,d=c?c.length:0,p=a[0];e:for(;++u<d;)if(l=c[u],(p?Ft(p,l):i(o,l,0))<0){for(r=t;--r;){var h=a[r];if((h?Ft(h,l):i(e[r],l,0))<0)continue e}p&&p.push(l),o.push(l)}return o});function Wr(e){var t=e?e.length:0;return t?e[t-1]:i}var Yr=Ha(function(e,t){var n=Gt(e,t=cn(t));return _n(e,t.sort(Me)),n});function zr(e){return Fr(e,1)}var Xr=ur(),Jr=ur(!0);var Gr=Ha(function(e){return Nn(cn(e,!1,!0))});function Kr(e,t,n,r){if(!e||!e.length)return[];null!=t&&"boolean"!=typeof t&&(n=Cr(e,t,r=n)?i:t,t=!1);var a=pr();return null==n&&a===Qt||(n=a(n,r,3)),t&&mr()==Le?function(e,t){for(var n,r=-1,a=e.length,i=-1,s=[];++r<a;){var o=e[r],l=t?t(o,r,e):o;r&&n===l||(n=l,s[++i]=o)}return s}(e,n):Nn(e,n)}function Qr(e){if(!e||!e.length)return[];var t=-1,r=0;e=Bt(e,function(e){if(Er(e))return r=bt(e.length,r),!0});for(var a=n(r);++t<r;)a[t]=Ht(e,Cn(t));return a}function Zr(e,t,n){if(!e||!e.length)return[];var r=Qr(e);return null==t?r:(t=jn(t,n,4),Ht(r,function(e){return Wt(e,t,i,!0)}))}var ea=Ha(function(e,t){return Er(e)?nn(e,t):[]});var ta=Ha(Qr);function na(e,t){var n=-1,r=e?e.length:0,a={};for(!r||t||Ya(e[0])||(t=[]);++n<r;){var i=e[n];t?a[i]=t[n]:i&&(a[i[0]]=i[1])}return a}var ra=Ha(function(e){var t=e.length,n=t>2?e[t-2]:i,r=t>1?e[t-1]:i;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):i,r=i),e.length=t,Zr(e,n,r)});function aa(e){var t=Pt(e);return t.__chain__=!0,t}function ia(e,t,n){return t.call(n,e)}var sa=Ha(function(e){return e=cn(e),this.thru(function(t){return function(e,t){for(var r=-1,a=e.length,i=-1,s=t.length,o=n(a+s);++r<a;)o[r]=e[r];for(;++i<s;)o[r++]=t[i];return o}(Ya(t)?t:[Ar(t)],e)})});var oa=Ha(function(e,t){return Gt(e,cn(t))}),la=qn(function(e,t,n){Pe.call(e,n)?++e[n]:e[n]=1});function ca(e,t,n){var r=Ya(e)?$t:sn;return n&&Cr(e,t,n)&&(t=i),"function"==typeof t&&n===i||(t=pr(t,n,3)),r(e,t)}function ua(e,t,n){return(Ya(e)?Bt:on)(e,t=pr(t,n,3))}var da=Gn(rn),pa=Gn(an,!0);var ha=er(qt,rn),fa=er(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},an),ma=qn(function(e,t,n){Pe.call(e,n)?e[n].push(t):e[n]=[t]});function ga(e,t,n,r){var a=e?gr(e):0;return Dr(a)||(a=(e=Si(e)).length),n="number"!=typeof n||r&&Cr(t,n,r)?0:n<0?bt(a+n,0):n||0,"string"==typeof e||!Ya(e)&&ti(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&mr(e,t,n)>-1}var va=qn(function(e,t,n){e[n]=t}),ya=Ha(function(e,t,r){var a=-1,s="function"==typeof t,o=_r(t),l=Er(e)?n(e.length):[];return rn(e,function(e){var n=s?t:o&&null!=e?e[t]:i;l[++a]=n?n.apply(e,r):br(e,t,r)}),l});function ba(e,t,n){return(Ya(e)?Ht:bn)(e,t=pr(t,n,3))}var Ea=qn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var wa=sr(Wt,rn),Ca=sr(function(e,t,n,r){var a=e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n},an);function _a(e,t,n){if(n?Cr(e,t,n):null==t)return(r=(e=Ir(e)).length)>0?e[Sn(0,r-1)]:i;var r,a=-1,s=ai(e),o=(r=s.length)-1;for(t=Et(t<0?0:+t||0,r);++a<t;){var l=Sn(a,o),c=s[l];s[l]=s[a],s[a]=c}return s.length=t,s}function Sa(e,t,n){var r=Ya(e)?Yt:kn;return n&&Cr(e,t,n)&&(t=i),"function"==typeof t&&n===i||(t=pr(t,n,3)),r(e,t)}var Da=Ha(function(e,t){if(null==e)return[];var n=t[2];return n&&Cr(t[0],t[1],n)&&(t.length=1),xn(e,cn(t),[])});var Ra=wt||function(){return(new r).getTime()};function ka(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new ke(D);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Ta=Ha(function(e,t,n){var r=c;if(n.length){var a=Ge(n,Ta.placeholder);r|=f}return dr(e,r,t,n,a)}),xa=Ha(function(e,t){for(var n=-1,r=(t=t.length?cn(t):gi(e)).length;++n<r;){var a=t[n];e[a]=dr(e[a],c,e)}return e}),Na=Ha(function(e,t,n){var r=c|u;if(n.length){var a=Ge(n,Na.placeholder);r|=f}return dr(t,r,e,n,a)}),Oa=zn(p),Pa=zn(h);function Ia(e,t,n){var r,a,s,o,l,c,u,d=0,p=!1,h=!0;if("function"!=typeof e)throw new ke(D);if(t=t<0?0:+t||0,!0===n){var f=!0;h=!1}else Ga(n)&&(f=!!n.leading,p="maxWait"in n&&bt(+n.maxWait||0,t),h="trailing"in n?!!n.trailing:h);function m(t,n){n&&at(n),a=c=u=i,t&&(d=Ra(),s=e.apply(l,r),c||a||(r=l=i))}function g(){var e=t-(Ra()-o);e<=0||e>t?m(u,a):c=ct(g,e)}function v(){m(h,c)}function y(){if(r=arguments,o=Ra(),l=this,u=h&&(c||!f),!1===p)var n=f&&!c;else{a||f||(d=o);var m=p-(o-d),y=m<=0||m>p;y?(a&&(a=at(a)),d=o,s=e.apply(l,r)):a||(a=ct(v,m))}return y&&c?c=at(c):c||t===p||(c=ct(g,t)),n&&(y=!0,s=e.apply(l,r)),!y||c||a||(r=l=i),s}return y.cancel=function(){c&&at(c),a&&at(a),d=0,a=c=u=i},y}var Aa=Ha(function(e,t){return tn(e,1,t)}),Ma=Ha(function(e,t,n){return tn(e,t,n)}),ja=Zn(),La=Zn(!0);function Fa(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new ke(D);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var s=e.apply(this,r);return n.cache=i.set(a,s),s};return n.cache=new Fa.Cache,n}var Ua=Ha(function(e,t){if(t=cn(t),"function"!=typeof e||!$t(t,Fe))throw new ke(D);var n=t.length;return Ha(function(r){for(var a=Et(r.length,n);a--;)r[a]=t[a](r[a]);return e.apply(this,r)})});var qa=ir(f),$a=ir(m),Ba=Ha(function(e,t){return dr(e,v,i,i,i,cn(t))});function Ha(e,t){if("function"!=typeof e)throw new ke(D);return t=bt(t===i?e.length-1:+t||0,0),function(){for(var r=arguments,a=-1,i=bt(r.length-t,0),s=n(i);++a<i;)s[a]=r[t+a];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,r[0],s);case 2:return e.call(this,r[0],r[1],s)}var o=n(t+1);for(a=-1;++a<t;)o[a]=r[a];return o[t]=s,e.apply(this,o)}}function Va(e,t){return e>t}function Wa(e){return Xe(e)&&Er(e)&&Pe.call(e,"callee")&&!ot.call(e,"callee")}var Ya=gt||function(e){return Xe(e)&&Dr(e.length)&&Je.call(e)==T};function za(e,t,n,r){var a=(n="function"==typeof n?jn(n,r,3):i)?n(e,t):i;return a===i?vn(e,t,n):!!a}function Xa(e){return Xe(e)&&"string"==typeof e.message&&Je.call(e)==O}function Ja(e){return Ga(e)&&Je.call(e)==P}function Ga(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ka(e){return null!=e&&(Ja(e)?nt.test(Oe.call(e)):Xe(e)&&he.test(e))}function Qa(e){return"number"==typeof e||Xe(e)&&Je.call(e)==I}function Za(e){var t,n;return!(!Xe(e)||Je.call(e)!=A||Wa(e)||!(Pe.call(e,"constructor")||"function"!=typeof(t=e.constructor)||t instanceof t))&&(pn(e,function(e,t){n=t}),n===i||Pe.call(e,n))}function ei(e){return Ga(e)&&Je.call(e)==M}function ti(e){return"string"==typeof e||Xe(e)&&Je.call(e)==j}function ni(e){return Xe(e)&&Dr(e.length)&&!!we[Je.call(e)]}function ri(e,t){return e<t}function ai(e){var t=e?gr(e):0;return Dr(t)?t?Ut(e):[]:Si(e)}function ii(e){return Kt(e,yi(e))}var si=$n(function e(t,n,r,a,s){if(!Ga(t))return t;var o=Er(n)&&(Ya(n)||ni(n)),l=o?i:vi(n);return qt(l||n,function(c,u){if(l&&(c=n[u=c]),Xe(c))a||(a=[]),s||(s=[]),function(e,t,n,r,a,s,o){for(var l=s.length,c=t[n];l--;)if(s[l]==c)return void(e[n]=o[l]);var u=e[n],d=a?a(u,c,n,e,t):i,p=d===i;p&&(d=c,Er(c)&&(Ya(c)||ni(c))?d=Ya(u)?u:Er(u)?Ut(u):[]:Za(c)||Wa(c)?d=Wa(u)?ii(u):Za(u)?u:{}:p=!1),s.push(c),o.push(d),p?e[n]=r(d,c,a,s,o):(d==d?d!==u:u==u)&&(e[n]=d)}(t,n,u,e,r,a,s);else{var d=t[u],p=r?r(d,c,u,t,n):i,h=p===i;h&&(p=c),p===i&&(!o||u in t)||!h&&(p==p?p===d:d!=d)||(t[u]=p)}}),t}),oi=$n(function(e,t,n){return n?Xt(e,t,n):Jt(e,t)});var li=Xn(oi,function(e,t){return e===i?t:e}),ci=Xn(si,function e(t,n){return t===i?n:si(t,n,e)}),ui=Qn(hn),di=Qn(fn),pi=tr(un),hi=tr(dn),fi=nr(hn),mi=nr(fn);function gi(e){return mn(e,yi(e))}var vi=yt?function(e){var t=null==e?i:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Er(e)?Pr(e):Ga(e)?yt(e):[]}:Pr;function yi(e){if(null==e)return[];Ga(e)||(e=Se(e));var t=e.length;t=t&&Dr(t)&&(Ya(e)||Wa(e))&&t||0;for(var r=e.constructor,a=-1,i="function"==typeof r&&r.prototype===e,s=n(t),o=t>0;++a<t;)s[a]=a+"";for(var l in e)o&&wr(l,t)||"constructor"==l&&(i||!Pe.call(e,l))||s.push(l);return s}var bi=rr(!0),Ei=rr(),wi=Ha(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=Ht(cn(t),Re),kr(e,nn(yi(e),t));var n=jn(t[0],t[1],3);return Tr(e,function(e,t,r){return!n(e,t,r)})});function Ci(e){e=Ar(e);for(var t=-1,r=vi(e),a=r.length,i=n(a);++t<a;){var s=r[t];i[t]=[s,e[s]]}return i}var _i=Ha(function(e,t){return null==e?{}:"function"==typeof t[0]?Tr(e,jn(t[0],t[1],3)):kr(e,cn(t))});function Si(e){return On(e,vi(e))}var Di=Wn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)});function Ri(e){return(e=Ue(e))&&e.replace(me,He).replace(le,"")}var ki=Wn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});var Ti=ar(),xi=ar(!0);function Ni(e,t){var n="";if(e=Ue(e),(t=+t)<1||!e||!vt(t))return n;do{t%2&&(n+=e),t=mt(t/2),e+=e}while(t);return n}var Oi=Wn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Pi=Wn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});function Ii(e,t,n){var r=e;return(e=Ue(e))?(n?Cr(r,t,n):null==t)?e.slice(Ke(e),Qe(e)+1):(t+="",e.slice(qe(e,t),$e(e,t)+1)):e}function Ai(e,t,n){return n&&Cr(e,t,n)&&(t=i),(e=Ue(e)).match(t||ye)||[]}var Mi=Ha(function(e,t){try{return e.apply(i,t)}catch(e){return Xa(e)?e:new a(e)}});function ji(e,t,n){return n&&Cr(e,t,n)&&(t=i),Xe(e)?Fi(e):Qt(e,t)}function Li(e){return e}function Fi(e){return En(Zt(e,!0))}var Ui=Ha(function(e,t){return function(n){return br(n,e,t)}}),qi=Ha(function(e,t){return function(n){return br(e,n,t)}});function $i(e,t,n){if(null==n){var r=Ga(t),a=r?vi(t):i,s=a&&a.length?mn(t,a):i;(s?s.length:r)||(s=!1,n=t,t=e,e=this)}s||(s=mn(t,vi(t)));var o=!0,l=-1,c=Ja(e),u=s.length;!1===n?o=!1:Ga(n)&&"chain"in n&&(o=n.chain);for(;++l<u;){var d=s[l],p=t[d];e[d]=p,c&&(e.prototype[d]=function(t){return function(){var n=this.__chain__;if(o||n){var r=e(this.__wrapped__);return(r.__actions__=Ut(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,Vt([this.value()],arguments))}}(p))}return e}function Bi(){}function Hi(e){return _r(e)?Cn(e):function(e){var t=e+"";return e=Mr(e),function(n){return gn(n,e,t)}}(e)}var Vi,Wi=cr("ceil"),Yi=cr("floor"),zi=Jn(Va,St),Xi=Jn(ri,Dt),Ji=cr("round");return Pt.prototype=It.prototype,At.prototype=en(It.prototype),At.prototype.constructor=At,Mt.prototype=en(It.prototype),Mt.prototype.constructor=Mt,jt.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},jt.prototype.get=function(e){return"__proto__"==e?i:this.__data__[e]},jt.prototype.has=function(e){return"__proto__"!=e&&Pe.call(this.__data__,e)},jt.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},Lt.prototype.push=function(e){var t=this.data;"string"==typeof e||Ga(e)?t.set.add(e):t.hash[e]=!0},Fa.Cache=jt,Pt.after=function(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new ke(D);var n=e;e=t,t=n}return e=vt(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}},Pt.ary=function(e,t,n){return n&&Cr(e,t,n)&&(t=i),t=e&&null==t?e.length:bt(+t||0,0),dr(e,g,i,i,i,i,t)},Pt.assign=oi,Pt.at=oa,Pt.before=ka,Pt.bind=Ta,Pt.bindAll=xa,Pt.bindKey=Na,Pt.callback=ji,Pt.chain=aa,Pt.chunk=function(e,t,r){t=(r?Cr(e,t,r):null==t)?1:bt(mt(t)||1,1);for(var a=0,i=e?e.length:0,s=-1,o=n(ht(i/t));a<i;)o[++s]=Rn(e,a,a+=t);return o},Pt.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,a=[];++t<n;){var i=e[t];i&&(a[++r]=i)}return a},Pt.constant=function(e){return function(){return e}},Pt.countBy=la,Pt.create=function(e,t,n){var r=en(e);return n&&Cr(e,t,n)&&(t=i),t?Jt(r,t):r},Pt.curry=Oa,Pt.curryRight=Pa,Pt.debounce=Ia,Pt.defaults=li,Pt.defaultsDeep=ci,Pt.defer=Aa,Pt.delay=Ma,Pt.difference=Lr,Pt.drop=Fr,Pt.dropRight=Ur,Pt.dropRightWhile=function(e,t,n){return e&&e.length?Pn(e,pr(t,n,3),!0,!0):[]},Pt.dropWhile=function(e,t,n){return e&&e.length?Pn(e,pr(t,n,3),!0):[]},Pt.fill=function(e,t,n,r){var a=e?e.length:0;return a?(n&&"number"!=typeof n&&Cr(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=null==n?0:+n||0)<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:+r||0)<0&&(r+=a),a=n>r?0:r>>>0,n>>>=0;n<a;)e[n++]=t;return e}(e,t,n,r)):[]},Pt.filter=ua,Pt.flatten=function(e,t,n){var r=e?e.length:0;return n&&Cr(e,t,n)&&(t=!1),r?cn(e,t):[]},Pt.flattenDeep=function(e){return e&&e.length?cn(e,!0):[]},Pt.flow=ja,Pt.flowRight=La,Pt.forEach=ha,Pt.forEachRight=fa,Pt.forIn=pi,Pt.forInRight=hi,Pt.forOwn=fi,Pt.forOwnRight=mi,Pt.functions=gi,Pt.groupBy=ma,Pt.indexBy=va,Pt.initial=function(e){return Ur(e,1)},Pt.intersection=Vr,Pt.invert=function(e,t,n){n&&Cr(e,t,n)&&(t=i);for(var r=-1,a=vi(e),s=a.length,o={};++r<s;){var l=a[r],c=e[l];t?Pe.call(o,c)?o[c].push(l):o[c]=[l]:o[c]=l}return o},Pt.invoke=ya,Pt.keys=vi,Pt.keysIn=yi,Pt.map=ba,Pt.mapKeys=bi,Pt.mapValues=Ei,Pt.matches=Fi,Pt.matchesProperty=function(e,t){return wn(e,Zt(t,!0))},Pt.memoize=Fa,Pt.merge=si,Pt.method=Ui,Pt.methodOf=qi,Pt.mixin=$i,Pt.modArgs=Ua,Pt.negate=function(e){if("function"!=typeof e)throw new ke(D);return function(){return!e.apply(this,arguments)}},Pt.omit=wi,Pt.once=function(e){return ka(2,e)},Pt.pairs=Ci,Pt.partial=qa,Pt.partialRight=$a,Pt.partition=Ea,Pt.pick=_i,Pt.pluck=function(e,t){return ba(e,Hi(t))},Pt.property=Hi,Pt.propertyOf=function(e){return function(t){return gn(e,Mr(t),t+"")}},Pt.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=mr(),a=e.length;++n<a;)for(var i=0,s=e[n];(i=r(t,s,i))>-1;)ut.call(t,i,1);return t},Pt.pullAt=Yr,Pt.range=function(e,t,r){r&&Cr(e,t,r)&&(t=r=i),e=+e||0,null==t?(t=e,e=0):t=+t||0;for(var a=-1,s=bt(ht((t-e)/((r=null==r?1:+r||0)||1)),0),o=n(s);++a<s;)o[a]=e,e+=r;return o},Pt.rearg=Ba,Pt.reject=function(e,t,n){var r=Ya(e)?Bt:on;return t=pr(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},Pt.remove=function(e,t,n){var r=[];if(!e||!e.length)return r;var a=-1,i=[],s=e.length;for(t=pr(t,n,3);++a<s;){var o=e[a];t(o,a,e)&&(r.push(o),i.push(a))}return _n(e,i),r},Pt.rest=zr,Pt.restParam=Ha,Pt.set=function(e,t,n){if(null==e)return e;for(var r=t+"",a=-1,i=(t=null!=e[r]||_r(t,e)?[r]:Mr(t)).length,s=i-1,o=e;null!=o&&++a<i;){var l=t[a];Ga(o)&&(a==s?o[l]=n:null==o[l]&&(o[l]=wr(t[a+1])?[]:{})),o=o[l]}return e},Pt.shuffle=function(e){return _a(e,Dt)},Pt.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Cr(e,t,n)&&(t=0,n=r),Rn(e,t,n)):[]},Pt.sortBy=function(e,t,n){if(null==e)return[];n&&Cr(e,t,n)&&(t=i);var r=-1;return t=pr(t,n,3),Tn(bn(e,function(e,n,a){return{criteria:t(e,n,a),index:++r,value:e}}),Be)},Pt.sortByAll=Da,Pt.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&Cr(t,n,r)&&(n=i),Ya(t)||(t=null==t?[]:[t]),Ya(n)||(n=null==n?[]:[n]),xn(e,t,n))},Pt.spread=function(e){if("function"!=typeof e)throw new ke(D);return function(t){return e.apply(this,t)}},Pt.take=function(e,t,n){return e&&e.length?((n?Cr(e,t,n):null==t)&&(t=1),Rn(e,0,t<0?0:t)):[]},Pt.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?Cr(e,t,n):null==t)&&(t=1),Rn(e,(t=r-(+t||0))<0?0:t)):[]},Pt.takeRightWhile=function(e,t,n){return e&&e.length?Pn(e,pr(t,n,3),!1,!0):[]},Pt.takeWhile=function(e,t,n){return e&&e.length?Pn(e,pr(t,n,3)):[]},Pt.tap=function(e,t,n){return t.call(n,e),e},Pt.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new ke(D);return!1===n?r=!1:Ga(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Ia(e,t,{leading:r,maxWait:+t,trailing:a})},Pt.thru=ia,Pt.times=function(e,t,r){if((e=mt(e))<1||!vt(e))return[];var a=-1,i=n(Et(e,Rt));for(t=jn(t,r,1);++a<e;)a<Rt?i[a]=t(a):t(a);return i},Pt.toArray=ai,Pt.toPlainObject=ii,Pt.transform=function(e,t,n,r){var a=Ya(e)||ni(e);if(t=pr(t,r,4),null==n)if(a||Ga(e)){var s=e.constructor;n=a?Ya(e)?new s:[]:en(Ja(s)?s.prototype:i)}else n={};return(a?qt:hn)(e,function(e,r,a){return t(n,e,r,a)}),n},Pt.union=Gr,Pt.uniq=Kr,Pt.unzip=Qr,Pt.unzipWith=Zr,Pt.values=Si,Pt.valuesIn=function(e){return On(e,yi(e))},Pt.where=function(e,t){return ua(e,En(t))},Pt.without=ea,Pt.wrap=function(e,t){return dr(t=null==t?Li:t,f,i,[e],[])},Pt.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Er(n))var r=r?Vt(nn(r,n),nn(n,r)):n}return r?Nn(r):[]},Pt.zip=ta,Pt.zipObject=na,Pt.zipWith=ra,Pt.backflow=La,Pt.collect=ba,Pt.compose=La,Pt.each=ha,Pt.eachRight=fa,Pt.extend=oi,Pt.iteratee=ji,Pt.methods=gi,Pt.object=na,Pt.select=ua,Pt.tail=zr,Pt.unique=Kr,$i(Pt,Pt),Pt.add=function(e,t){return(+e||0)+(+t||0)},Pt.attempt=Mi,Pt.camelCase=Di,Pt.capitalize=function(e){return(e=Ue(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Pt.ceil=Wi,Pt.clone=function(e,t,n,r){return t&&"boolean"!=typeof t&&Cr(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?Zt(e,t,jn(n,r,1)):Zt(e,t)},Pt.cloneDeep=function(e,t,n){return"function"==typeof t?Zt(e,!0,jn(t,n,1)):Zt(e,!0)},Pt.deburr=Ri,Pt.endsWith=function(e,t,n){t+="";var r=(e=Ue(e)).length;return n=n===i?r:Et(n<0?0:+n||0,r),(n-=t.length)>=0&&e.indexOf(t,n)==n},Pt.escape=function(e){return(e=Ue(e))&&Z.test(e)?e.replace(K,Ve):e},Pt.escapeRegExp=function(e){return(e=Ue(e))&&oe.test(e)?e.replace(se,We):e||"(?:)"},Pt.every=ca,Pt.find=da,Pt.findIndex=qr,Pt.findKey=ui,Pt.findLast=pa,Pt.findLastIndex=$r,Pt.findLastKey=di,Pt.findWhere=function(e,t){return da(e,En(t))},Pt.first=Br,Pt.floor=Yi,Pt.get=function(e,t,n){var r=null==e?i:gn(e,Mr(t),t+"");return r===i?n:r},Pt.gt=Va,Pt.gte=function(e,t){return e>=t},Pt.has=function(e,t){if(null==e)return!1;var n=Pe.call(e,t);if(!n&&!_r(t)){if(null==(e=1==(t=Mr(t)).length?e:gn(e,Rn(t,0,-1))))return!1;t=Wr(t),n=Pe.call(e,t)}return n||Dr(e.length)&&wr(t,e.length)&&(Ya(e)||Wa(e))},Pt.identity=Li,Pt.includes=ga,Pt.indexOf=Hr,Pt.inRange=function(e,t,n){return t=+t||0,n===i?(n=t,t=0):n=+n||0,e>=Et(t,n)&&e<bt(t,n)},Pt.isArguments=Wa,Pt.isArray=Ya,Pt.isBoolean=function(e){return!0===e||!1===e||Xe(e)&&Je.call(e)==x},Pt.isDate=function(e){return Xe(e)&&Je.call(e)==N},Pt.isElement=function(e){return!!e&&1===e.nodeType&&Xe(e)&&!Za(e)},Pt.isEmpty=function(e){return null==e||(Er(e)&&(Ya(e)||ti(e)||Wa(e)||Xe(e)&&Ja(e.splice))?!e.length:!vi(e).length)},Pt.isEqual=za,Pt.isError=Xa,Pt.isFinite=function(e){return"number"==typeof e&&vt(e)},Pt.isFunction=Ja,Pt.isMatch=function(e,t,n,r){return n="function"==typeof n?jn(n,r,3):i,yn(e,vr(t),n)},Pt.isNaN=function(e){return Qa(e)&&e!=+e},Pt.isNative=Ka,Pt.isNull=function(e){return null===e},Pt.isNumber=Qa,Pt.isObject=Ga,Pt.isPlainObject=Za,Pt.isRegExp=ei,Pt.isString=ti,Pt.isTypedArray=ni,Pt.isUndefined=function(e){return e===i},Pt.kebabCase=ki,Pt.last=Wr,Pt.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var a=r;if("number"==typeof n)a=(n<0?bt(r+n,0):Et(n||0,r-1))+1;else if(n){var i=e[a=An(e,t,!0)-1];return(t==t?t===i:i!=i)?a:-1}if(t!=t)return ze(e,a,!0);for(;a--;)if(e[a]===t)return a;return-1},Pt.lt=ri,Pt.lte=function(e,t){return e<=t},Pt.max=zi,Pt.min=Xi,Pt.noConflict=function(){return Ae._=tt,this},Pt.noop=Bi,Pt.now=Ra,Pt.pad=function(e,t,n){t=+t;var r=(e=Ue(e)).length;if(r>=t||!vt(t))return e;var a=(t-r)/2,i=mt(a);return(n=lr("",ht(a),n)).slice(0,i)+e+n},Pt.padLeft=Ti,Pt.padRight=xi,Pt.parseInt=function(e,t,n){return(n?Cr(e,t,n):null==t)?t=0:t&&(t=+t),e=Ii(e),Ct(e,t||(pe.test(e)?16:10))},Pt.random=function(e,t,n){n&&Cr(e,t,n)&&(t=n=i);var r=null==e,a=null==t;if(null==n&&(a&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,a=!0)),r&&a&&(t=1,a=!1),e=+e||0,a?(t=e,e=0):t=+t||0,n||e%1||t%1){var s=_t();return Et(e+s*(t-e+it("1e-"+((s+"").length-1))),t)}return Sn(e,t)},Pt.reduce=wa,Pt.reduceRight=Ca,Pt.repeat=Ni,Pt.result=function(e,t,n){var r=null==e?i:e[t];return r===i&&(null==e||_r(t,e)||(r=null==(e=1==(t=Mr(t)).length?e:gn(e,Rn(t,0,-1)))?i:e[Wr(t)]),r=r===i?n:r),Ja(r)?r.call(e):r},Pt.round=Ji,Pt.runInContext=e,Pt.size=function(e){var t=e?gr(e):0;return Dr(t)?t:vi(e).length},Pt.snakeCase=Oi,Pt.some=Sa,Pt.sortedIndex=Xr,Pt.sortedLastIndex=Jr,Pt.startCase=Pi,Pt.startsWith=function(e,t,n){return e=Ue(e),n=null==n?0:Et(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n},Pt.sum=function(e,t,n){return n&&Cr(e,t,n)&&(t=i),1==(t=pr(t,n,3)).length?function(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}(Ya(e)?e:Ir(e),t):function(e,t){var n=0;return rn(e,function(e,r,a){n+=+t(e,r,a)||0}),n}(e,t)},Pt.template=function(e,t,n){var r=Pt.templateSettings;n&&Cr(e,t,n)&&(t=n=i),e=Ue(e),t=Xt(Jt({},n||t),r,zt);var a,o,l=Xt(Jt({},t.imports),r.imports,zt),c=vi(l),u=On(l,c),d=0,p=t.interpolate||ge,h="__p += '",f=De((t.escape||ge).source+"|"+p.source+"|"+(p===ne?ue:ge).source+"|"+(t.evaluate||ge).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Ee+"]")+"\n";e.replace(f,function(t,n,r,i,s,l){return r||(r=i),h+=e.slice(d,l).replace(ve,Ye),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=l+t.length,t}),h+="';\n";var g=t.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(z,""):h).replace(X,"$1").replace(J,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Mi(function(){return s(c,m+"return "+h).apply(i,u)});if(v.source=h,Xa(v))throw v;return v},Pt.trim=Ii,Pt.trimLeft=function(e,t,n){var r=e;return(e=Ue(e))?(n?Cr(r,t,n):null==t)?e.slice(Ke(e)):e.slice(qe(e,t+"")):e},Pt.trimRight=function(e,t,n){var r=e;return(e=Ue(e))?(n?Cr(r,t,n):null==t)?e.slice(0,Qe(e)+1):e.slice(0,$e(e,t+"")+1):e},Pt.trunc=function(e,t,n){n&&Cr(e,t,n)&&(t=i);var r=y,a=b;if(null!=t)if(Ga(t)){var s="separator"in t?t.separator:s;r="length"in t?+t.length||0:r,a="omission"in t?Ue(t.omission):a}else r=+t||0;if(r>=(e=Ue(e)).length)return e;var o=r-a.length;if(o<1)return a;var l=e.slice(0,o);if(null==s)return l+a;if(ei(s)){if(e.slice(o).search(s)){var c,u,d=e.slice(0,o);for(s.global||(s=De(s.source,(de.exec(s)||"")+"g")),s.lastIndex=0;c=s.exec(d);)u=c.index;l=l.slice(0,null==u?o:u)}}else if(e.indexOf(s,o)!=o){var p=l.lastIndexOf(s);p>-1&&(l=l.slice(0,p))}return l+a},Pt.unescape=function(e){return(e=Ue(e))&&Q.test(e)?e.replace(G,Ze):e},Pt.uniqueId=function(e){var t=++Ie;return Ue(e)+t},Pt.words=Ai,Pt.all=ca,Pt.any=Sa,Pt.contains=ga,Pt.eq=za,Pt.detect=da,Pt.foldl=wa,Pt.foldr=Ca,Pt.head=Br,Pt.include=ga,Pt.inject=wa,$i(Pt,(Vi={},hn(Pt,function(e,t){Pt.prototype[t]||(Vi[t]=e)}),Vi),!1),Pt.sample=_a,Pt.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return _a(t,e)}):_a(this.value())},Pt.VERSION=l,qt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Pt[e].placeholder=Pt}),qt(["drop","take"],function(e,t){Mt.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new Mt(this);n=null==n?1:bt(mt(n)||0,0);var a=this.clone();return r?a.__takeCount__=Et(a.__takeCount__,n):a.__views__.push({size:n,type:e+(a.__dir__<0?"Right":"")}),a},Mt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),qt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=S;Mt.prototype[e]=function(e,t){var a=this.clone();return a.__iteratees__.push({iteratee:pr(e,t,1),type:n}),a.__filtered__=a.__filtered__||r,a}}),qt(["first","last"],function(e,t){var n="take"+(t?"Right":"");Mt.prototype[e]=function(){return this[n](1).value()[0]}}),qt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Mt.prototype[e]=function(){return this.__filtered__?new Mt(this):this[n](1)}}),qt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?En:Hi;Mt.prototype[e]=function(e){return this[n](r(e))}}),Mt.prototype.compact=function(){return this.filter(Li)},Mt.prototype.reject=function(e,t){return e=pr(e,t,1),this.filter(function(t){return!e(t)})},Mt.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||t<0)?new Mt(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=+t||0)<0?n.dropRight(-t):n.take(t-e)),n)},Mt.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},Mt.prototype.toArray=function(){return this.take(Dt)},hn(Mt.prototype,function(e,t){var n=/^(?:filter|map|reject)|While$/.test(t),r=/^(?:first|last)$/.test(t),a=Pt[r?"take"+("last"==t?"Right":""):t];a&&(Pt.prototype[t]=function(){var t=r?[1]:arguments,s=this.__chain__,o=this.__wrapped__,l=!!this.__actions__.length,c=o instanceof Mt,u=t[0],d=c||Ya(o);d&&n&&"function"==typeof u&&1!=u.length&&(c=d=!1);var p=function(e){return r&&s?a(e,1)[0]:a.apply(i,Vt([e],t))},h={func:ia,args:[p],thisArg:i},f=c&&!l;if(r&&!s)return f?((o=o.clone()).__actions__.push(h),e.call(o)):a.call(i,this.value())[0];if(!r&&d){o=f?o:new Mt(this);var m=e.apply(o,t);return m.__actions__.push(h),new At(m,s)}return this.thru(p)})}),qt(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?Ne:Te)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);Pt.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),hn(Mt.prototype,function(e,t){var n=Pt[t];if(n){var r=n.name;(Ot[r]||(Ot[r]=[])).push({name:t,func:n})}}),Ot[or(i,u).name]=[{name:"wrapper",func:i}],Mt.prototype.clone=function(){var e=new Mt(this.__wrapped__);return e.__actions__=Ut(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ut(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ut(this.__views__),e},Mt.prototype.reverse=function(){if(this.__filtered__){var e=new Mt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Mt.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ya(e),r=t<0,a=n?e.length:0,i=function(e,t,n){for(var r=-1,a=n.length;++r<a;){var i=n[r],s=i.size;switch(i.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Et(t,e+s);break;case"takeRight":e=bt(e,t-s)}}return{start:e,end:t}}(0,a,this.__views__),s=i.start,o=i.end,l=o-s,c=r?o:s-1,u=this.__iteratees__,d=u.length,p=0,h=Et(l,this.__takeCount__);if(!n||a<C||a==l&&h==l)return In(r&&n?e.reverse():e,this.__actions__);var f=[];e:for(;l--&&p<h;){for(var m=-1,g=e[c+=t];++m<d;){var v=u[m],y=v.iteratee,b=v.type,E=y(g);if(b==S)g=E;else if(!E){if(b==_)continue e;break e}}f[p++]=g}return f},Pt.prototype.chain=function(){return aa(this)},Pt.prototype.commit=function(){return new At(this.value(),this.__chain__)},Pt.prototype.concat=sa,Pt.prototype.plant=function(e){for(var t,n=this;n instanceof It;){var r=jr(n);t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Pt.prototype.reverse=function(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof Mt){var n=e;return this.__actions__.length&&(n=new Mt(this)),(n=n.reverse()).__actions__.push({func:ia,args:[t],thisArg:i}),new At(n,this.__chain__)}return this.thru(t)},Pt.prototype.toString=function(){return this.value()+""},Pt.prototype.run=Pt.prototype.toJSON=Pt.prototype.valueOf=Pt.prototype.value=function(){return In(this.__wrapped__,this.__actions__)},Pt.prototype.collect=Pt.prototype.map,Pt.prototype.head=Pt.prototype.first,Pt.prototype.select=Pt.prototype.filter,Pt.prototype.tail=Pt.prototype.rest,Pt}();Ae._=et,(a=function(){return et}.call(t,n,t,e))===i||(e.exports=a)}).call(this)}).call(this,n(148)(e),n(51))},,,,,,function(e,t,n){"use strict";e.exports={}},function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=o(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||o(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},,,,,function(e,t,n){"use strict";var r=n(7),a=(n(6),{}),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,a,i,s,o,l){var c,u;this.isInTransaction()&&r("27");try{this._isInTransaction=!0,c=!0,this.initializeAll(0),u=e.call(t,n,a,i,s,o,l),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return u},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=a,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===a)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,s=t[n],o=this.wrapperInitData[n];try{i=!0,o!==a&&s.close&&s.close.call(this,o),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};e.exports=i},function(e,t,n){"use strict";var r=n(49),a=n(131),i={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:n(85),button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+a.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+a.currentScrollTop}};function s(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(s,i),e.exports=s},function(e,t,n){"use strict";var r,a=n(17),i=n(87),s=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(88)(function(e,t){if(e.namespaceURI!==i.svg||"innerHTML"in e)e.innerHTML=t;else{(r=r||document.createElement("div")).innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(a.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),s.test(t)||"<"===t[0]&&o.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}e.exports=l},function(e,t,n){"use strict";var r=/["'&<>]/;e.exports=function(e){return"boolean"==typeof e||"number"==typeof e?""+e:function(e){var t,n=""+e,a=r.exec(n);if(!a)return n;var i="",s=0,o=0;for(s=a.index;s<n.length;s++){switch(n.charCodeAt(s)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==s&&(i+=n.substring(o,s)),o=s+1,i+=t}return o!==s?i+n.substring(o,s):i}(e)}},function(e,t,n){"use strict";var r,a=n(10),i=n(80),s=n(218),o=n(131),l=n(219),c=n(84),u={},d=!1,p=0,h={topAbort:"abort",topAnimationEnd:l("animationend")||"animationend",topAnimationIteration:l("animationiteration")||"animationiteration",topAnimationStart:l("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:l("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},f="_reactListenersID"+String(Math.random()).slice(2);var m=a({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!m.ReactEventListener||!m.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,r=function(e){return Object.prototype.hasOwnProperty.call(e,f)||(e[f]=p++,u[e[f]]={}),u[e[f]]}(n),a=i.registrationNameDependencies[e],s=0;s<a.length;s++){var o=a[s];r.hasOwnProperty(o)&&r[o]||("topWheel"===o?c("wheel")?m.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):c("mousewheel")?m.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):m.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===o?c("scroll",!0)?m.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):m.ReactEventListener.trapBubbledEvent("topScroll","scroll",m.ReactEventListener.WINDOW_HANDLE):"topFocus"===o||"topBlur"===o?(c("focus",!0)?(m.ReactEventListener.trapCapturedEvent("topFocus","focus",n),m.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):c("focusin")&&(m.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),m.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),r.topBlur=!0,r.topFocus=!0):h.hasOwnProperty(o)&&m.ReactEventListener.trapBubbledEvent(o,h[o],n),r[o]=!0)}},trapBubbledEvent:function(e,t,n){return m.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return m.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===r&&(r=m.supportsEventPageXY()),!r&&!d){var e=o.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),d=!0}}});e.exports=m},,,function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";t.__esModule=!0,t.createPath=t.parsePath=t.getQueryStringValueFromPath=t.stripQueryStringValueFromPath=t.addQueryStringValueToPath=void 0;var r,a=n(71);(r=a)&&r.__esModule;t.addQueryStringValueToPath=function(e,t,n){var r=i(e),a=r.pathname,o=r.search,l=r.hash;return s({pathname:a,search:o+(-1===o.indexOf("?")?"?":"&")+t+"="+n,hash:l})},t.stripQueryStringValueFromPath=function(e,t){var n=i(e),r=n.pathname,a=n.search,o=n.hash;return s({pathname:r,search:a.replace(new RegExp("([?&])"+t+"=[a-zA-Z0-9]+(&?)"),function(e,t,n){return"?"===t?t:n}),hash:o})},t.getQueryStringValueFromPath=function(e,t){var n=i(e).search.match(new RegExp("[?&]"+t+"=([a-zA-Z0-9]+)"));return n&&n[1]};var i=t.parsePath=function(e){var t,n,r=null==(n=(t=e).match(/^(https?:)?\/\/[^\/]*/))?t:t.substring(n[0].length),a="",i="",s=r.indexOf("#");-1!==s&&(i=r.substring(s),r=r.substring(0,s));var o=r.indexOf("?");return-1!==o&&(a=r.substring(o),r=r.substring(0,o)),""===r&&(r="/"),{pathname:r,search:a,hash:i}},s=t.createPath=function(e){if(null==e||"string"==typeof e)return e;var t=e.basename,n=e.pathname,r=e.search,a=e.hash,i=(t||"")+n;return r&&"?"!==r&&(i+=r),a&&(i+=a),i}},function(e,t,n){LocalCollection={},EJSON=n(619);var r=n(52),a=function(e){return r.isArray(e)&&!EJSON.isBinary(e)},i=function(e,t){return a(e)?r.any(e,t):t(e)},s=function(e,t){return!!t(e)||a(e)&&r.any(e,t)},o=function(e){if(null==e)return function(e){return i(e,function(e){return null==e})};if(!r.isObject(e))return function(t){return i(t,function(t){return t===e})};if(e instanceof RegExp)return function(t){return void 0!==t&&i(t,function(t){return e.test(t)})};if(a(e))return function(t){return!!a(t)&&s(t,function(t){return LocalCollection._f._equal(e,t)})};if(function(e){var t=void 0;for(var n in e){var r="$"===n.substr(0,1);if(void 0===t)t=r;else if(t!==r)throw new Error("Inconsistent selector: "+e)}return!!t}(e)){var t=[];return r.each(e,function(n,a){if(!r.has(c,a))throw new Error("Unrecognized operator: "+a);t.push(c[a](n,e.$options))}),function(e){return r.all(t,function(t){return t(e)})}}return function(t){return i(t,function(t){return LocalCollection._f._equal(e,t)})}},l={$and:function(e){if(!a(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,u);return function(e){return r.all(t,function(t){return t(e)})}},$or:function(e){if(!a(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,u);return function(e){return r.any(t,function(t){return t(e)})}},$nor:function(e){if(!a(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,u);return function(e){return r.all(t,function(t){return!t(e)})}},$where:function(e){return e instanceof Function||(e=Function("return "+e)),function(t){return e.call(t)}}},c={$in:function(e){if(!a(e))throw new Error("Argument to $in must be array");var t=null;return r.all(e,r.isString)&&(t=r.indexBy(e)),function(n){return s(n,function(n){return r.isString(n)&&null!==t?null!=t[n]:r.any(e,function(e){return LocalCollection._f._equal(e,n)})})}},$all:function(e){if(!a(e))throw new Error("Argument to $all must be array");return function(t){return!!a(t)&&r.all(e,function(e){return r.any(t,function(t){return LocalCollection._f._equal(e,t)})})}},$lt:function(e){return function(t){return i(t,function(t){return LocalCollection._f._cmp(t,e)<0})}},$lte:function(e){return function(t){return i(t,function(t){return LocalCollection._f._cmp(t,e)<=0})}},$gt:function(e){return function(t){return i(t,function(t){return LocalCollection._f._cmp(t,e)>0})}},$gte:function(e){return function(t){return i(t,function(t){return LocalCollection._f._cmp(t,e)>=0})}},$ne:function(e){return function(t){return!s(t,function(t){return LocalCollection._f._equal(t,e)})}},$nin:function(e){if(!a(e))throw new Error("Argument to $nin must be array");var t=c.$in(e);return function(e){return void 0===e||!t(e)}},$exists:function(e){return function(t){return e===(void 0!==t)}},$mod:function(e){var t=e[0],n=e[1];return function(e){return i(e,function(e){return e%t===n})}},$size:function(e){return function(t){return a(t)&&e===t.length}},$type:function(e){return function(t){return void 0!==t&&i(t,function(t){return LocalCollection._f._type(t)===e})}},$regex:function(e,t){if(void 0!==t){if(/[^gim]/.test(t))throw new Error("Only the i, m, and g regexp options are supported");var n=e instanceof RegExp?e.source:e;e=new RegExp(n,t)}else e instanceof RegExp||(e=new RegExp(e));return function(t){return void 0!==t&&i(t,function(t){return e.test(t)})}},$options:function(e){return function(e){return!0}},$elemMatch:function(e){var t=u(e);return function(e){return!!a(e)&&r.any(e,function(e){return t(e)})}},$not:function(e){var t=o(e);return function(e){return!t(e)}},$near:function(e){return function(e){return!0}},$geoIntersects:function(e){return function(e){return!0}}};LocalCollection._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:a(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:EJSON.isBinary(e)?5:e instanceof Meteor.Collection.ObjectID?7:3},_equal:function(e,t){return EJSON.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,t){if(void 0===e)return void 0===t?0:-1;if(void 0===t)return 1;var n=LocalCollection._f._type(e),r=LocalCollection._f._type(t),a=LocalCollection._f._typeorder(n),i=LocalCollection._f._typeorder(r);if(a!==i)return a<i?-1:1;if(n!==r)throw Error("Missing type coercion logic in _cmp");if(7===n&&(n=r=2,e=e.toHexString(),t=t.toHexString()),9===n&&(n=r=1,e=e.getTime(),t=t.getTime()),1===n)return e-t;if(2===r)return e<t?-1:e===t?0:1;if(3===n){var s=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return LocalCollection._f._cmp(s(e),s(t))}if(4===n)for(var o=0;;o++){if(o===e.length)return o===t.length?0:-1;if(o===t.length)return 1;var l=LocalCollection._f._cmp(e[o],t[o]);if(0!==l)return l}if(5===n){if(e.length!==t.length)return e.length-t.length;for(o=0;o<e.length;o++){if(e[o]<t[o])return-1;if(e[o]>t[o])return 1}return 0}if(8===n)return e?t?0:1:t?-1:0;if(10===n)return 0;if(11===n)throw Error("Sorting not supported on regular expression");if(13===n)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},LocalCollection._matches=function(e,t){return LocalCollection._compileSelector(e)(t)},LocalCollection._makeLookupFunction=function(e){var t,n,i,s=e.indexOf(".");if(-1===s)t=e;else{t=e.substr(0,s);var o=e.substr(s+1);n=LocalCollection._makeLookupFunction(o),i=/^\d+(\.|$)/.test(o)}return function(e){if(null==e)return[void 0];var s=e[t];return n?a(s)&&0===s.length?[void 0]:(a(s)&&!i||(s=[s]),Array.prototype.concat.apply([],r.map(s,n))):[s]}};var u=function(e){var t=[];return r.each(e,function(e,n){if("$"===n.substr(0,1)){if(!r.has(l,n))throw new Error("Unrecognized logical operator: "+n);t.push(l[n](e))}else{var a=LocalCollection._makeLookupFunction(n),i=o(e);t.push(function(e){var t=a(e);return r.any(t,i)})}}),function(e){return r.all(t,function(t){return t(e)})}};LocalCollection._compileSelector=function(e){if(e instanceof Function)return function(t){return e.call(t)};if(LocalCollection._selectorIsId(e))return function(t){return EJSON.equals(t._id,e)};if(!e||"_id"in e&&!e._id)return function(e){return!1};if("boolean"==typeof e||a(e)||EJSON.isBinary(e))throw new Error("Invalid selector: "+e);return u(e)},LocalCollection._compileSort=function(e){var t=[];if(e instanceof Array)for(var n=0;n<e.length;n++)"string"==typeof e[n]?t.push({lookup:LocalCollection._makeLookupFunction(e[n]),ascending:!0}):t.push({lookup:LocalCollection._makeLookupFunction(e[n][0]),ascending:"desc"!==e[n][1]});else{if("object"!=typeof e)throw Error("Bad sort specification: ",JSON.stringify(e));for(var i in e)t.push({lookup:LocalCollection._makeLookupFunction(i),ascending:e[i]>=0})}if(0===t.length)return function(){return 0};var s=function(e,t){var n,i=!0;return r.each(e,function(e){a(e)||(e=[e]),a(e)&&0===e.length&&(e=[void 0]),r.each(e,function(e){if(i)n=e,i=!1;else{var r=LocalCollection._f._cmp(n,e);(t&&r>0||!t&&r<0)&&(n=e)}})}),n};return function(e,n){for(var r=0;r<t.length;++r){var a=t[r],i=s(a.lookup(e),a.ascending),o=s(a.lookup(n),a.ascending),l=LocalCollection._f._cmp(i,o);if(0!==l)return a.ascending?l:-l}return 0}},t.compileDocumentSelector=u,t.compileSort=LocalCollection._compileSort},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75);t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&r.isNumber(t[0])&&r.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,a=e.features;r<a.length;r++){var i=a[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+i.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function a(e,t,n){return void 0===n&&(n={}),r({type:"Point",coordinates:e},t,n)}function i(e,t,n){void 0===n&&(n={});for(var a=0,i=e;a<i.length;a++){var s=i[a];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t,n)}function s(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:e},t,n)}function o(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function l(e,t,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:e},t,n)}function c(e,t,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:e},t,n)}function u(e,t,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:e},t,n)}function d(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e*r}function p(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e/r}function h(e){return 180*(e%(2*Math.PI))/Math.PI}function f(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=r,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return a(t).geometry;case"LineString":return s(t).geometry;case"Polygon":return i(t).geometry;case"MultiPoint":return c(t).geometry;case"MultiLineString":return l(t).geometry;case"MultiPolygon":return u(t).geometry;default:throw new Error(e+" is invalid")}},t.point=a,t.points=function(e,t,n){return void 0===n&&(n={}),o(e.map(function(e){return a(e,t)}),n)},t.polygon=i,t.polygons=function(e,t,n){return void 0===n&&(n={}),o(e.map(function(e){return i(e,t)}),n)},t.lineString=s,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),o(e.map(function(e){return s(e,t)}),n)},t.featureCollection=o,t.multiLineString=l,t.multiPoint=c,t.multiPolygon=u,t.geometryCollection=function(e,t,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:e},t,n)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=d,t.lengthToRadians=p,t.lengthToDegrees=function(e,t){return h(p(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=h,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return d(p(e,t),n)},t.convertArea=function(e,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var a=t.areaFactors[n];if(!a)throw new Error("invalid original units");var i=t.areaFactors[r];if(!i)throw new Error("invalid final units");return e/a*i},t.isNumber=f,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!f(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},,,,function(e,t){var n=Array.isArray;e.exports=function(e){return!(!e||"object"!=typeof e||n(e)||Object.keys(e).length)}},function(e,t,n){"use strict";var r=n(7),a=(n(6),null),i={};function s(){if(a)for(var e in i){var t=i[e],n=a.indexOf(e);if(n>-1||r("96",e),!c.plugins[n]){t.extractEvents||r("97",e),c.plugins[n]=t;var s=t.eventTypes;for(var l in s)o(s[l],t,l)||r("98",l,e)}}}function o(e,t,n){c.eventNameDispatchConfigs.hasOwnProperty(n)&&r("99",n),c.eventNameDispatchConfigs[n]=e;var a=e.phasedRegistrationNames;if(a){for(var i in a){if(a.hasOwnProperty(i))l(a[i],t,n)}return!0}return!!e.registrationName&&(l(e.registrationName,t,n),!0)}function l(e,t,n){c.registrationNameModules[e]&&r("100",e),c.registrationNameModules[e]=t,c.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){a&&r("101"),a=Array.prototype.slice.call(e),s()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];i.hasOwnProperty(n)&&i[n]===a||(i[n]&&r("102",n),i[n]=a,t=!0)}t&&s()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return c.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var a=c.registrationNameModules[n[r]];if(a)return a}}return null},_resetEventPlugins:function(){for(var e in a=null,i)i.hasOwnProperty(e)&&delete i[e];c.plugins.length=0;var t=c.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=c.registrationNameModules;for(var s in r)r.hasOwnProperty(s)&&delete r[s]}};e.exports=c},function(e,t,n){"use strict";var r,a,i=n(7),s=n(82);n(6),n(9);function o(e,t,n,r){var a=e.type||"unknown-event";e.currentTarget=l.getNodeFromInstance(r),t?s.invokeGuardedCallbackWithCatch(a,n,e):s.invokeGuardedCallback(a,n,e),e.currentTarget=null}var l={isEndish:function(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e},isMoveish:function(e){return"topMouseMove"===e||"topTouchMove"===e},isStartish:function(e){return"topMouseDown"===e||"topTouchStart"===e},executeDirectDispatch:function(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)&&i("103"),e.currentTarget=t?l.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r},executeDispatchesInOrder:function(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var a=0;a<n.length&&!e.isPropagationStopped();a++)o(e,t,n[a],r[a]);else n&&o(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(e){var t=function(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}(e);return e._dispatchInstances=null,e._dispatchListeners=null,t},hasDispatches:function(e){return!!e._dispatchListeners},getInstanceFromNode:function(e){return r.getInstanceFromNode(e)},getNodeFromInstance:function(e){return r.getNodeFromInstance(e)},isAncestor:function(e,t){return a.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return a.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return a.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return a.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,i){return a.traverseEnterLeave(e,t,n,r,i)},injection:{injectComponentTree:function(e){r=e},injectTreeTraversal:function(e){a=e}}};e.exports=l},function(e,t,n){"use strict";var r=null;function a(e,t,n){try{t(n)}catch(e){null===r&&(r=e)}}var i={invokeGuardedCallback:a,invokeGuardedCallbackWithCatch:a,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};e.exports=i},function(e,t,n){"use strict";e.exports=function(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}},function(e,t,n){"use strict";var r,a=n(17);a.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,e.exports=function(e,t){if(!a.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var s=document.createElement("div");s.setAttribute(n,"return;"),i="function"==typeof s[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}},function(e,t,n){"use strict";var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var n=r[e];return!!n&&!!t[n]}e.exports=function(e){return a}},function(e,t,n){"use strict";var r=n(36),a=n(203),i=(n(11),n(21),n(88)),s=n(66),o=n(132);function l(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}var c=i(function(e,t,n){e.insertBefore(t,n)});function u(e,t,n){r.insertTreeBefore(e,t,n)}function d(e,t,n){Array.isArray(t)?function(e,t,n,r){var a=t;for(;;){var i=a.nextSibling;if(c(e,a,r),a===n)break;a=i}}(e,t[0],t[1],n):c(e,t,n)}function p(e,t){if(Array.isArray(t)){var n=t[1];h(e,t=t[0],n),e.removeChild(n)}e.removeChild(t)}function h(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}var f={dangerouslyReplaceNodeWithMarkup:a.dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:function(e,t,n){var r=e.parentNode,a=e.nextSibling;a===t?n&&c(r,document.createTextNode(n),a):n?(o(a,n),h(r,a,t)):h(r,e,t)},processUpdates:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];switch(r.type){case"INSERT_MARKUP":u(e,r.content,l(e,r.afterNode));break;case"MOVE_EXISTING":d(e,r.fromNode,l(e,r.afterNode));break;case"SET_MARKUP":s(e,r.content);break;case"TEXT_CONTENT":o(e,r.content);break;case"REMOVE_NODE":p(e,r.fromNode)}}}};e.exports=f},function(e,t,n){"use strict";e.exports={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"}},function(e,t,n){"use strict";e.exports=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}},function(e,t,n){"use strict";var r=n(7),a=n(221),i=n(121)(n(32).isValidElement),s=(n(6),n(9),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0});function o(e){null!=e.checkedLink&&null!=e.valueLink&&r("87")}function l(e){o(e),(null!=e.value||null!=e.onChange)&&r("88")}function c(e){o(e),(null!=e.checked||null!=e.onChange)&&r("89")}var u={value:function(e,t,n){return!e[t]||s[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:i.func},d={};function p(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var h={checkPropTypes:function(e,t,n){for(var r in u){if(u.hasOwnProperty(r))var i=u[r](t,r,e,"prop",null,a);if(i instanceof Error&&!(i.message in d)){d[i.message]=!0;p(n)}}},getValue:function(e){return e.valueLink?(l(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(c(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(l(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(c(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=h},function(e,t,n){"use strict";var r=n(7),a=(n(6),!1),i={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){a&&r("104"),i.replaceNodeWithMarkup=e.replaceNodeWithMarkup,i.processChildrenUpdates=e.processChildrenUpdates,a=!0}}};e.exports=i},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(a(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(!r.call(t,n[s])||!a(e[n[s]],t[n[s]]))return!1;return!0}},function(e,t,n){"use strict";e.exports=function(e,t){var n=null===e||!1===e,r=null===t||!1===t;if(n||r)return n===r;var a=typeof e,i=typeof t;return"string"===a||"number"===a?"string"===i||"number"===i:"object"===i&&e.type===t.type&&e.key===t.key}},function(e,t,n){"use strict";var r={escape:function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})},unescape:function(e){var t={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(/(=0|=2)/g,function(e){return t[e]})}};e.exports=r},function(e,t,n){"use strict";var r=n(7),a=(n(26),n(50)),i=(n(21),n(23));n(6),n(9);function s(e){i.enqueueUpdate(e)}function o(e,t){var n=a.get(e);return n||null}var l={isMounted:function(e){var t=a.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){l.validateCallback(t,n);var r=o(e);if(!r)return null;r._pendingCallbacks?r._pendingCallbacks.push(t):r._pendingCallbacks=[t],s(r)},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],s(e)},enqueueForceUpdate:function(e){var t=o(e);t&&(t._pendingForceUpdate=!0,s(t))},enqueueReplaceState:function(e,t,n){var r=o(e);r&&(r._pendingStateQueue=[t],r._pendingReplaceState=!0,null!=n&&(l.validateCallback(n,"replaceState"),r._pendingCallbacks?r._pendingCallbacks.push(n):r._pendingCallbacks=[n]),s(r))},enqueueSetState:function(e,t){var n=o(e);n&&((n._pendingStateQueue||(n._pendingStateQueue=[])).push(t),s(n))},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,s(e)},validateCallback:function(e,t){e&&"function"!=typeof e&&r("122",t,function(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}(e))}};e.exports=l},function(e,t,n){"use strict";n(10);var r=n(22),a=(n(9),r);e.exports=a},function(e,t,n){"use strict";e.exports=function(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,t>=32||13===t?t:0}},,,,,,,,,,,,function(e,t,n){"use strict";e.exports=n(184)},function(e,t,n){"use strict";e.exports=n(189)},function(e,t,n){"use strict";n.r(t);var r=n(584),a="object"==typeof self&&self&&self.Object===Object&&self,i=(r.a||a||Function("return this")()).Symbol,s=Object.prototype,o=s.hasOwnProperty,l=s.toString,c=i?i.toStringTag:void 0;var u=function(e){var t=o.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var a=l.call(e);return r&&(t?e[c]=n:delete e[c]),a},d=Object.prototype.toString;var p=function(e){return d.call(e)},h="[object Null]",f="[object Undefined]",m=i?i.toStringTag:void 0;var g=function(e){return null==e?void 0===e?f:h:m&&m in Object(e)?u(e):p(e)};var v=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var y=function(e){return null!=e&&"object"==typeof e},b="[object Object]",E=Function.prototype,w=Object.prototype,C=E.toString,_=w.hasOwnProperty,S=C.call(Object);var D=function(e){if(!y(e)||g(e)!=b)return!1;var t=v(e);if(null===t)return!0;var n=_.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&C.call(n)==S},R=n(299),k={INIT:"@@redux/INIT"};function T(e,t,n){var r;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(T)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var a=e,i=t,s=[],o=s,l=!1;function c(){o===s&&(o=s.slice())}function u(){return i}function d(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return c(),o.push(e),function(){if(t){t=!1,c();var n=o.indexOf(e);o.splice(n,1)}}}function p(e){if(!D(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,i=a(i,e)}finally{l=!1}for(var t=s=o,n=0;n<t.length;n++){(0,t[n])()}return e}return p({type:k.INIT}),(r={dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");a=e,p({type:k.INIT})}})[R.a]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[R.a]=function(){return this},e},r}function x(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function N(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"==typeof e[a]&&(n[a]=e[a])}var i=Object.keys(n);var s=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:k.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+k.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var r=!1,a={},o=0;o<i.length;o++){var l=i[o],c=n[l],u=e[l],d=c(u,t);if(void 0===d){var p=x(l,t);throw new Error(p)}a[l]=d,r=r||d!==u}return r?a:e}}function O(e,t){return function(){return t(e.apply(void 0,arguments))}}function P(e,t){if("function"==typeof e)return O(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},a=0;a<n.length;a++){var i=n[a],s=e[i];"function"==typeof s&&(r[i]=O(s,t))}return r}function I(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function M(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,a){var i,s=e(n,r,a),o=s.dispatch,l={getState:s.getState,dispatch:function(e){return o(e)}};return i=t.map(function(e){return e(l)}),o=I.apply(void 0,i)(s.dispatch),A({},s,{dispatch:o})}}}n.d(t,"createStore",function(){return T}),n.d(t,"combineReducers",function(){return N}),n.d(t,"bindActionCreators",function(){return P}),n.d(t,"applyMiddleware",function(){return M}),n.d(t,"compose",function(){return I})},function(e,t,n){"use strict";t.__esModule=!0,t.locationsAreEqual=t.statesAreEqual=t.createLocation=t.createQuery=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n(14)),s=(l(n(71)),n(72)),o=n(154);function l(e){return e&&e.__esModule?e:{default:e}}t.createQuery=function(e){return a(Object.create(null),e)},t.createLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.POP,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="string"==typeof e?(0,s.parsePath)(e):e;return{pathname:r.pathname||"/",search:r.search||"",hash:r.hash||"",state:r.state,action:t,key:n}};var c=function(e){return"[object Date]"===Object.prototype.toString.call(e)},u=t.statesAreEqual=function e(t,n){if(t===n)return!0;var a=void 0===t?"undefined":r(t);if(a!==(void 0===n?"undefined":r(n)))return!1;if("function"===a&&(0,i.default)(!1),"object"===a){if(c(t)&&c(n)&&(0,i.default)(!1),!Array.isArray(t)){var s=Object.keys(t),o=Object.keys(n);return s.length===o.length&&s.every(function(r){return e(t[r],n[r])})}return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])})}return!1};t.locationsAreEqual=function(e,t){return e.key===t.key&&e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&u(e.state,t.state)}},function(e,t,n){(function(n,r,a){var i;
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){var s,o={};function l(){}function c(e){return e}function u(e){return!!e}function d(e){return!e}var p="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;function h(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function f(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}null!=p&&(s=p.async),o.noConflict=function(){return p.async=s,o};var m=Object.prototype.toString,g=Array.isArray||function(e){return"[object Array]"===m.call(e)};function v(e){return g(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function y(e,t){for(var n=-1,r=e.length;++n<r;)t(e[n],n,e)}function b(e,t){for(var n=-1,r=e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function E(e){return b(Array(e),function(e,t){return t})}function w(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var C=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};function _(e){var t,n,r=-1;return v(e)?(t=e.length,function(){return++r<t?r:null}):(n=C(e),t=n.length,function(){return++r<t?n[r]:null})}function S(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),a=0;a<n;a++)r[a]=arguments[a+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r)}}}function D(e){return function(t,n,r){return e(t,r)}}var R="function"==typeof r&&r,k=R?function(e){R(e)}:function(e){setTimeout(e,0)};function T(e){return function(t,n,r){r=f(r||l);var a=_(t=t||[]);if(e<=0)return r(null);var i=!1,s=0,o=!1;!function l(){if(i&&s<=0)return r(null);for(;s<e&&!o;){var c=a();if(null===c)return i=!0,void(s<=0&&r(null));s+=1,n(t[c],c,h(function(e){s-=1,e?(r(e),o=!0):l()}))}}()}}function x(e){return function(t,n,r){return e(o.eachOf,t,n,r)}}function N(e){return function(t,n,r,a){return e(T(n),t,r,a)}}function O(e){return function(t,n,r){return e(o.eachOfSeries,t,n,r)}}function P(e,t,n,r){r=f(r||l);var a=v(t=t||[])?[]:{};e(t,function(e,t,r){n(e,function(e,n){a[t]=n,r(e)})},function(e){r(e,a)})}function I(e,t,n,r){var a=[];e(t,function(e,t,r){n(e,function(n){n&&a.push({index:t,value:e}),r()})},function(){r(b(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function A(e,t,n,r){I(e,t,function(e,t){n(e,function(e){t(!e)})},r)}function M(e,t,n){return function(r,a,i,s){function o(){s&&s(n(!1,void 0))}function l(e,r,a){if(!s)return a();i(e,function(r){s&&t(r)&&(s(n(!0,e)),s=i=!1),a()})}arguments.length>3?e(r,a,l,o):(s=i,i=a,e(r,l,o))}}function j(e,t){return t}function L(e,t,n){n=n||l;var r=v(t)?[]:{};e(t,function(e,t,n){e(S(function(e,a){a.length<=1&&(a=a[0]),r[t]=a,n(e)}))},function(e){n(e,r)})}function F(e,t,n,r){var a=[];e(t,function(e,t,r){n(e,function(e,t){a=a.concat(t||[]),r(e)})},function(e){r(e,a)})}function U(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function r(e,t,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(e.started=!0,g(t)||(t=[t]),0===t.length&&e.idle())return o.setImmediate(function(){e.drain()});y(t,function(t){var a={data:t,callback:r||l};n?e.tasks.unshift(a):e.tasks.push(a),e.tasks.length===e.concurrency&&e.saturated()}),o.setImmediate(e.process)}function a(e,t){return function(){i-=1;var n=!1,r=arguments;y(t,function(e){y(s,function(t,r){t!==e||n||(s.splice(r,1),n=!0)}),e.callback.apply(e,r)}),e.tasks.length+i===0&&e.drain(),e.process()}}var i=0,s=[],c={tasks:[],concurrency:t,payload:n,saturated:l,empty:l,drain:l,started:!1,paused:!1,push:function(e,t){r(c,e,!1,t)},kill:function(){c.drain=l,c.tasks=[]},unshift:function(e,t){r(c,e,!0,t)},process:function(){for(;!c.paused&&i<c.concurrency&&c.tasks.length;){var t=c.payload?c.tasks.splice(0,c.payload):c.tasks.splice(0,c.tasks.length),n=b(t,function(e){return e.data});0===c.tasks.length&&c.empty(),i+=1,s.push(t[0]);var r=h(a(c,t));e(n,r)}},length:function(){return c.tasks.length},running:function(){return i},workersList:function(){return s},idle:function(){return c.tasks.length+i===0},pause:function(){c.paused=!0},resume:function(){if(!1!==c.paused){c.paused=!1;for(var e=Math.min(c.concurrency,c.tasks.length),t=1;t<=e;t++)o.setImmediate(c.process)}}};return c}function q(e){return S(function(t,n){t.apply(null,n.concat([S(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&y(n,function(t){console[e](t)}))})]))})}function $(e){return function(t,n,r){e(E(t),n,r)}}function B(e){return S(function(t,n){var r=S(function(n){var r=this,a=n.pop();return e(t,function(e,t,a){e.apply(r,n.concat([a]))},a)});return n.length?r.apply(this,n):r})}function H(e){return S(function(t){var n=t.pop();t.push(function(){var e=arguments;r?o.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var r=!0;e.apply(this,t),r=!1})}"object"==typeof a&&"function"==typeof a.nextTick?o.nextTick=a.nextTick:o.nextTick=k,o.setImmediate=R?k:o.nextTick,o.forEach=o.each=function(e,t,n){return o.eachOf(e,D(t),n)},o.forEachSeries=o.eachSeries=function(e,t,n){return o.eachOfSeries(e,D(t),n)},o.forEachLimit=o.eachLimit=function(e,t,n,r){return T(t)(e,D(n),r)},o.forEachOf=o.eachOf=function(e,t,n){n=f(n||l);for(var r,a=_(e=e||[]),i=0;null!=(r=a());)i+=1,t(e[r],r,h(s));function s(e){i--,e?n(e):null===r&&i<=0&&n(null)}0===i&&n(null)},o.forEachOfSeries=o.eachOfSeries=function(e,t,n){n=f(n||l);var r=_(e=e||[]),a=r();!function i(){var s=!0;if(null===a)return n(null);t(e[a],a,h(function(e){if(e)n(e);else{if(null===(a=r()))return n(null);s?o.setImmediate(i):i()}})),s=!1}()},o.forEachOfLimit=o.eachOfLimit=function(e,t,n,r){T(t)(e,n,r)},o.map=x(P),o.mapSeries=O(P),o.mapLimit=N(P),o.inject=o.foldl=o.reduce=function(e,t,n,r){o.eachOfSeries(e,function(e,r,a){n(t,e,function(e,n){t=n,a(e)})},function(e){r(e,t)})},o.foldr=o.reduceRight=function(e,t,n,r){var a=b(e,c).reverse();o.reduce(a,t,n,r)},o.transform=function(e,t,n,r){3===arguments.length&&(r=n,n=t,t=g(e)?[]:{}),o.eachOf(e,function(e,r,a){n(t,e,r,a)},function(e){r(e,t)})},o.select=o.filter=x(I),o.selectLimit=o.filterLimit=N(I),o.selectSeries=o.filterSeries=O(I),o.reject=x(A),o.rejectLimit=N(A),o.rejectSeries=O(A),o.any=o.some=M(o.eachOf,u,c),o.someLimit=M(o.eachOfLimit,u,c),o.all=o.every=M(o.eachOf,d,d),o.everyLimit=M(o.eachOfLimit,d,d),o.detect=M(o.eachOf,c,j),o.detectSeries=M(o.eachOfSeries,c,j),o.detectLimit=M(o.eachOfLimit,c,j),o.sortBy=function(e,t,n){function r(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}o.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);n(null,b(t.sort(r),function(e){return e.value}))})},o.auto=function(e,t,n){"function"==typeof arguments[1]&&(n=t,t=null),n=f(n||l);var r=C(e),a=r.length;if(!a)return n(null);t||(t=a);var i={},s=0,c=!1,u=[];function d(e){u.unshift(e)}function p(){a--,y(u.slice(0),function(e){e()})}d(function(){a||n(null,i)}),y(r,function(r){if(!c){for(var a,l=g(e[r])?e[r]:[e[r]],h=S(function(e,t){if(s--,t.length<=1&&(t=t[0]),e){var a={};u=function(e,t){a[t]=e},y(C(l=i),function(e){u(l[e],e)}),a[r]=t,c=!0,n(e,a)}else i[r]=t,o.setImmediate(p);var l,u}),f=l.slice(0,l.length-1),m=f.length;m--;){if(!(a=e[f[m]]))throw new Error("Has nonexistent dependency in "+f.join(", "));if(g(a)&&w(a,r)>=0)throw new Error("Has cyclic dependencies")}v()?(s++,l[l.length-1](h,i)):d(function e(){v()&&(s++,(t=w(u,e))>=0&&u.splice(t,1),l[l.length-1](h,i));var t})}function v(){return s<t&&(e=function(e,t){return e&&i.hasOwnProperty(t)},n=!0,y(f,function(t,r,a){n=e(n,t,r,a)}),n)&&!i.hasOwnProperty(r);var e,n}})},o.retry=function(e,t,n){var r=5,a=0,i=[],s={times:r,interval:a};var l=arguments.length;if(l<1||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function c(e,t){function n(e,n){return function(r){e(function(e,t){r(!e||n,{err:e,result:t})},t)}}function r(e){return function(t){setTimeout(function(){t(null)},e)}}for(;s.times;){var a=!(s.times-=1);i.push(n(s.task,a)),!a&&s.interval>0&&i.push(r(s.interval))}o.series(i,function(t,n){n=n[n.length-1],(e||s.callback)(n.err,n.result)})}return l<=2&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&function(e,t){if("number"==typeof t)e.times=parseInt(t,10)||r;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||r,e.interval=parseInt(t.interval,10)||a}}(s,e),s.callback=n,s.task=t,s.callback?c():c},o.waterfall=function(e,t){if(t=f(t||l),!g(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();!function e(n){return S(function(r,a){if(r)t.apply(null,[r].concat(a));else{var i=n.next();i?a.push(e(i)):a.push(t),H(n).apply(null,a)}})}(o.iterator(e))()},o.parallel=function(e,t){L(o.eachOf,e,t)},o.parallelLimit=function(e,t,n){L(T(t),e,n)},o.series=function(e,t){L(o.eachOfSeries,e,t)},o.iterator=function(e){return function t(n){function r(){return e.length&&e[n].apply(null,arguments),r.next()}return r.next=function(){return n<e.length-1?t(n+1):null},r}(0)},o.apply=S(function(e,t){return S(function(n){return e.apply(null,t.concat(n))})}),o.concat=x(F),o.concatSeries=O(F),o.whilst=function(e,t,n){if(n=n||l,e()){var r=S(function(a,i){a?n(a):e.apply(this,i)?t(r):n.apply(null,[null].concat(i))});t(r)}else n(null)},o.doWhilst=function(e,t,n){var r=0;return o.whilst(function(){return++r<=1||t.apply(this,arguments)},e,n)},o.until=function(e,t,n){return o.whilst(function(){return!e.apply(this,arguments)},t,n)},o.doUntil=function(e,t,n){return o.doWhilst(e,function(){return!t.apply(this,arguments)},n)},o.during=function(e,t,n){n=n||l;var r=S(function(t,r){t?n(t):(r.push(a),e.apply(this,r))}),a=function(e,a){e?n(e):a?t(r):n(null)};e(a)},o.doDuring=function(e,t,n){var r=0;o.during(function(e){r++<1?e(null,!0):t.apply(this,arguments)},e,n)},o.queue=function(e,t){return U(function(t,n){e(t[0],n)},t,1)},o.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}var r=o.queue(e,t);return r.push=function(e,t,a){!function(e,t,r,a){if(null!=a&&"function"!=typeof a)throw new Error("task callback must be a function");if(e.started=!0,g(t)||(t=[t]),0===t.length)return o.setImmediate(function(){e.drain()});y(t,function(t){var i={data:t,priority:r,callback:"function"==typeof a?a:l};e.tasks.splice(function(e,t,n){for(var r=-1,a=e.length-1;r<a;){var i=r+(a-r+1>>>1);n(t,e[i])>=0?r=i:a=i-1}return r}(e.tasks,i,n)+1,0,i),e.tasks.length===e.concurrency&&e.saturated(),o.setImmediate(e.process)})}(r,e,t,a)},delete r.unshift,r},o.cargo=function(e,t){return U(e,1,t)},o.log=q("log"),o.dir=q("dir"),o.memoize=function(e,t){var n={},r={},a=Object.prototype.hasOwnProperty;t=t||c;var i=S(function(i){var s=i.pop(),l=t.apply(null,i);a.call(n,l)?o.setImmediate(function(){s.apply(null,n[l])}):a.call(r,l)?r[l].push(s):(r[l]=[s],e.apply(null,i.concat([S(function(e){n[l]=e;var t=r[l];delete r[l];for(var a=0,i=t.length;a<i;a++)t[a].apply(null,e)})])))});return i.memo=n,i.unmemoized=e,i},o.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},o.times=$(o.map),o.timesSeries=$(o.mapSeries),o.timesLimit=function(e,t,n,r){return o.mapLimit(E(e),t,n,r)},o.seq=function(){var e=arguments;return S(function(t){var n=this,r=t[t.length-1];"function"==typeof r?t.pop():r=l,o.reduce(e,t,function(e,t,r){t.apply(n,e.concat([S(function(e,t){r(e,t)})]))},function(e,t){r.apply(n,[e].concat(t))})})},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))},o.applyEach=B(o.eachOf),o.applyEachSeries=B(o.eachOfSeries),o.forever=function(e,t){var n=h(t||l),r=H(e);!function e(t){if(t)return n(t);r(e)}()},o.ensureAsync=H,o.constant=S(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),o.wrapSync=o.asyncify=function(e){return S(function(t){var n,r,a,i=t.pop();try{n=e.apply(this,t)}catch(e){return i(e)}("function"===(a=typeof(r=n))||"object"===a&&r)&&"function"==typeof n.then?n.then(function(e){i(null,e)}).catch(function(e){i(e.message?e:new Error(e))}):i(null,n)})},e.exports?e.exports=o:void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}()}).call(this,n(51),n(616).setImmediate,n(59))},,,,,function(e,t,n){"use strict";var r=n(46),a=n(10),i=n(118),s=(n(119),n(58));n(6),n(175);function o(e,t,n){this.props=e,this.context=t,this.refs=s,this.updater=n||i}function l(e,t,n){this.props=e,this.context=t,this.refs=s,this.updater=n||i}function c(){}o.prototype.isReactComponent={},o.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")},c.prototype=o.prototype,l.prototype=new c,l.prototype.constructor=l,a(l.prototype,o.prototype),l.prototype.isPureReactComponent=!0,e.exports={Component:o,PureComponent:l}},function(e,t,n){"use strict";n(9);var r={isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}};e.exports=r},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=r},function(e,t,n){"use strict";var r=n(183);e.exports=function(e){return r(e,!1)}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports={hasCachedChildNodes:1}},function(e,t,n){"use strict";var r=n(7);n(6);e.exports=function(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}},function(e,t,n){"use strict";e.exports=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}},function(e,t,n){"use strict";var r=n(17),a=null;e.exports=function(){return!a&&r.canUseDOM&&(a="textContent"in document.documentElement?"textContent":"innerText"),a}},function(e,t,n){"use strict";var r=n(7);var a=n(30),i=(n(6),function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,n=this._arg;if(e&&t){e.length!==t.length&&r("24"),this._callbacks=null,this._contexts=null;for(var a=0;a<e.length;a++)e[a].call(t[a],n);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());e.exports=a.addPoolingTo(i)},function(e,t,n){"use strict";e.exports={logTopLevelRenders:!1}},function(e,t,n){"use strict";var r=n(11);function a(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function i(e){return e._wrapperState.valueTracker}var s={_getTrackerFromNode:function(e){return i(r.getInstanceFromNode(e))},track:function(e){if(!i(e)){var t=r.getNodeFromInstance(e),n=a(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];t.hasOwnProperty(n)||"function"!=typeof s.get||"function"!=typeof s.set||(Object.defineProperty(t,n,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(e){o=""+e,s.set.call(this,e)}}),function(e,t){e._wrapperState.valueTracker=t}(e,{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){!function(e){e._wrapperState.valueTracker=null}(e),delete t[n]}}))}},updateValueIfChanged:function(e){if(!e)return!1;var t=i(e);if(!t)return s.track(e),!0;var n,o,l=t.getValue(),c=((n=r.getNodeFromInstance(e))&&(o=a(n)?""+n.checked:n.value),o);return c!==l&&(t.setValue(c),!0)},stopTracking:function(e){var t=i(e);t&&t.stopTracking()}};e.exports=s},function(e,t,n){"use strict";var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!r[e.type]:"textarea"===t}},function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};e.exports=r},function(e,t,n){"use strict";var r=n(17),a=n(67),i=n(66),s=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(s=function(e,t){3!==e.nodeType?i(e,a(t)):e.nodeValue=t})),e.exports=s},function(e,t,n){"use strict";e.exports=function(e){try{e.focus()}catch(e){}}},function(e,t,n){"use strict";var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var a=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){a.forEach(function(t){r[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=r[e]})});var i={isUnitlessNumber:r,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}};e.exports=i},function(e,t,n){"use strict";var r=n(34),a=(n(11),n(21),n(217)),i=(n(9),new RegExp("^["+r.ATTRIBUTE_NAME_START_CHAR+"]["+r.ATTRIBUTE_NAME_CHAR+"]*$")),s={},o={};function l(e){return!!o.hasOwnProperty(e)||!s.hasOwnProperty(e)&&(i.test(e)?(o[e]=!0,!0):(s[e]=!0,!1))}function c(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var u={createMarkupForID:function(e){return r.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(r.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return r.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(r.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=r.properties.hasOwnProperty(e)?r.properties[e]:null;if(n){if(c(n,t))return"";var i=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t?i+'=""':i+"="+a(t)}return r.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return l(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var a=r.properties.hasOwnProperty(t)?r.properties[t]:null;if(a){var i=a.mutationMethod;if(i)i(e,n);else{if(c(a,n))return void this.deleteValueForProperty(e,t);if(a.mustUseProperty)e[a.propertyName]=n;else{var s=a.attributeName,o=a.attributeNamespace;o?e.setAttributeNS(o,s,""+n):a.hasBooleanValue||a.hasOverloadedBooleanValue&&!0===n?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(r.isCustomAttribute(t))return void u.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){l(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=r.properties.hasOwnProperty(t)?r.properties[t]:null;if(n){var a=n.mutationMethod;if(a)a(e,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?e[i]=!1:e[i]=""}else e.removeAttribute(n.attributeName)}else r.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=u},function(e,t,n){"use strict";var r=n(10),a=n(89),i=n(11),s=n(23),o=(n(9),!1);function l(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=a.getValue(e);null!=t&&c(this,Boolean(e.multiple),t)}}function c(e,t,n){var r,a,s=i.getNodeFromInstance(e).options;if(t){for(r={},a=0;a<n.length;a++)r[""+n[a]]=!0;for(a=0;a<s.length;a++){var o=r.hasOwnProperty(s[a].value);s[a].selected!==o&&(s[a].selected=o)}}else{for(r=""+n,a=0;a<s.length;a++)if(s[a].value===r)return void(s[a].selected=!0);s.length&&(s[0].selected=!0)}}var u={getHostProps:function(e,t){return r({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=a.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:d.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||o||(o=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=a.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,c(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?c(e,Boolean(t.multiple),t.defaultValue):c(e,Boolean(t.multiple),t.multiple?[]:""))}};function d(e){var t=this._currentElement.props,n=a.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),s.asap(l,this),n}e.exports=u},function(e,t,n){"use strict";var r=n(7),a=n(10),i=n(226),s=n(139),o=n(140),l=(n(227),n(6),n(9),function(e){this.construct(e)});function c(e,t){var n;if(null===e||!1===e)n=s.create(c);else if("object"==typeof e){var a=e,i=a.type;if("function"!=typeof i&&"string"!=typeof i){var u="";0,u+=function(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}(a._owner),r("130",null==i?i:typeof i,u)}"string"==typeof a.type?n=o.createInternalComponent(a):!function(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}(a.type)?n=new l(a):(n=new a.type(a)).getHostNode||(n.getHostNode=n.getNativeNode)}else"string"==typeof e||"number"==typeof e?n=o.createInstanceForText(e):r("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}a(l.prototype,i,{_instantiateReactComponent:c}),e.exports=c},function(e,t,n){"use strict";var r=n(7),a=n(32),i=(n(6),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?i.EMPTY:a.isValidElement(e)?"function"==typeof e.type?i.COMPOSITE:i.HOST:void r("26",e)}});e.exports=i},function(e,t,n){"use strict";var r,a={injectEmptyComponentFactory:function(e){r=e}},i={create:function(e){return r(e)}};i.injection=a,e.exports=i},function(e,t,n){"use strict";var r=n(7),a=(n(6),null),i=null;var s={createInternalComponent:function(e){return a||r("111",e.type),new a(e)},createInstanceForText:function(e){return new i(e)},isTextComponent:function(e){return e instanceof i},injection:{injectGenericComponentClass:function(e){a=e},injectTextComponentClass:function(e){i=e}}};e.exports=s},function(e,t,n){"use strict";var r=n(7),a=(n(26),n(228)),i=n(229),s=(n(6),n(93)),o=(n(9),"."),l=":";function c(e,t){return e&&"object"==typeof e&&null!=e.key?s.escape(e.key):t.toString(36)}e.exports=function(e,t,n){return null==e?0:function e(t,n,u,d){var p,h=typeof t;if("undefined"!==h&&"boolean"!==h||(t=null),null===t||"string"===h||"number"===h||"object"===h&&t.$$typeof===a)return u(d,t,""===n?o+c(t,0):n),1;var f=0,m=""===n?o:n+l;if(Array.isArray(t))for(var g=0;g<t.length;g++)f+=e(p=t[g],m+c(p,g),u,d);else{var v=i(t);if(v){var y,b=v.call(t);if(v!==t.entries)for(var E=0;!(y=b.next()).done;)f+=e(p=y.value,m+c(p,E++),u,d);else for(;!(y=b.next()).done;){var w=y.value;w&&(f+=e(p=w[1],m+s.escape(w[0])+l+c(p,0),u,d))}}else if("object"===h){var C=String(t);r("31","[object Object]"===C?"object with keys {"+Object.keys(t).join(", ")+"}":C,"")}}return f}(e,"",t,n)}},function(e,t,n){"use strict";var r,a,i,s,o,l,c,u=n(46),d=n(26);n(6),n(9);function p(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var a=t.call(e);return r.test(a)}catch(e){return!1}}if("function"==typeof Array.from&&"function"==typeof Map&&p(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&p(Map.prototype.keys)&&"function"==typeof Set&&p(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&p(Set.prototype.keys)){var h=new Map,f=new Set;r=function(e,t){h.set(e,t)},a=function(e){return h.get(e)},i=function(e){h.delete(e)},s=function(){return Array.from(h.keys())},o=function(e){f.add(e)},l=function(e){f.delete(e)},c=function(){return Array.from(f.keys())}}else{var m={},g={},v=function(e){return"."+e},y=function(e){return parseInt(e.substr(1),10)};r=function(e,t){var n=v(e);m[n]=t},a=function(e){var t=v(e);return m[t]},i=function(e){var t=v(e);delete m[t]},s=function(){return Object.keys(m).map(y)},o=function(e){var t=v(e);g[t]=!0},l=function(e){var t=v(e);delete g[t]},c=function(){return Object.keys(g).map(y)}}var b=[];function E(e){var t=a(e);if(t){var n=t.childIDs;i(e),n.forEach(E)}}function w(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function C(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function _(e){var t,n=S.getDisplayName(e),r=S.getElement(e),a=S.getOwnerID(e);return a&&(t=S.getDisplayName(a)),w(n,r&&r._source,t)}var S={onSetChildren:function(e,t){var n=a(e);n||u("144"),n.childIDs=t;for(var r=0;r<t.length;r++){var i=t[r],s=a(i);s||u("140"),null==s.childIDs&&"object"==typeof s.element&&null!=s.element&&u("141"),s.isMounted||u("71"),null==s.parentID&&(s.parentID=e),s.parentID!==e&&u("142",i,s.parentID,e)}},onBeforeMountComponent:function(e,t,n){r(e,{element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0})},onBeforeUpdateComponent:function(e,t){var n=a(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=a(e);t||u("144"),t.isMounted=!0,0===t.parentID&&o(e)},onUpdateComponent:function(e){var t=a(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=a(e);t&&(t.isMounted=!1,0===t.parentID&&l(e));b.push(e)},purgeUnmountedComponents:function(){if(!S._preventPurging){for(var e=0;e<b.length;e++){E(b[e])}b.length=0}},isMounted:function(e){var t=a(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=C(e),r=e._owner;t+=w(n,e._source,r&&r.getName())}var a=d.current,i=a&&a._debugID;return t+=S.getStackAddendumByID(i)},getStackAddendumByID:function(e){for(var t="";e;)t+=_(e),e=S.getParentID(e);return t},getChildIDs:function(e){var t=a(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=S.getElement(e);return t?C(t):null},getElement:function(e){var t=a(e);return t?t.element:null},getOwnerID:function(e){var t=S.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=a(e);return t?t.parentID:null},getSource:function(e){var t=a(e),n=t?t.element:null;return null!=n?n._source:null},getText:function(e){var t=S.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=a(e);return t?t.updateCount:0},getRootIDs:c,getRegisteredIDs:s,pushNonStandardWarningStack:function(e,t){if("function"==typeof console.reactStack){var n=[],r=d.current,a=r&&r._debugID;try{for(e&&n.push({name:a?S.getDisplayName(a):null,fileName:t?t.fileName:null,lineNumber:t?t.lineNumber:null});a;){var i=S.getElement(a),s=S.getParentID(a),o=S.getOwnerID(a),l=o?S.getDisplayName(o):null,c=i&&i._source;n.push({name:l,fileName:c?c.fileName:null,lineNumber:c?c.lineNumber:null}),a=s}}catch(e){}console.reactStack(n)}},popNonStandardWarningStack:function(){"function"==typeof console.reactStackEnd&&console.reactStackEnd()}};e.exports=S},function(e,t,n){"use strict";var r=n(22),a={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=a},function(e,t,n){"use strict";var r=n(241),a=n(243),i=n(133),s=n(145);var o={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:o.hasSelectionCapabilities(e)?o.getSelection(e):null}},restoreSelection:function(e){var t,n=s(),r=e.focusedElem,l=e.selectionRange;n!==r&&(t=r,a(document.documentElement,t))&&(o.hasSelectionCapabilities(r)&&o.setSelection(r,l),i(r))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,a=t.end;if(void 0===a&&(a=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(a,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",a-n),i.select()}else r.setOffsets(e,t)}};e.exports=o},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";var r=n(7),a=n(36),i=n(34),s=n(32),o=n(68),l=(n(26),n(11)),c=n(258),u=n(259),d=n(128),p=n(50),h=(n(21),n(260)),f=n(35),m=n(94),g=n(23),v=n(58),y=n(137),b=(n(6),n(66)),E=n(92),w=(n(9),i.ID_ATTRIBUTE_NAME),C=i.ROOT_ATTRIBUTE_NAME,_=1,S=9,D=11,R={};function k(e){return e?e.nodeType===S?e.documentElement:e.firstChild:null}function T(e,t,n,r,a){var i;if(d.logTopLevelRenders){var s=e._currentElement.props.child.type;i="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(i)}var o=f.mountComponent(e,n,null,c(e,t),a,0);i&&console.timeEnd(i),e._renderedComponent._topLevelWrapper=e,j._mountImageIntoNode(o,t,e,r,n)}function x(e,t,n,r){var a=g.ReactReconcileTransaction.getPooled(!n&&u.useCreateElement);a.perform(T,null,e,t,a,n,r),g.ReactReconcileTransaction.release(a)}function N(e,t,n){for(0,f.unmountComponent(e,n),t.nodeType===S&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function O(e){var t=k(e);if(t){var n=l.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function P(e){return!(!e||e.nodeType!==_&&e.nodeType!==S&&e.nodeType!==D)}function I(e){var t=function(e){var t=k(e),n=t&&l.getInstanceFromNode(t);return n&&!n._hostParent?n:null}(e);return t?t._hostContainerInfo._topLevelWrapper:null}var A=1,M=function(){this.rootID=A++};M.prototype.isReactComponent={},M.prototype.render=function(){return this.props.child},M.isReactTopLevelWrapper=!0;var j={TopLevelWrapper:M,_instancesByReactRootID:R,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,a){return j.scrollMonitor(r,function(){m.enqueueElementInternal(e,t,n),a&&m.enqueueCallbackInternal(e,a)}),e},_renderNewRootComponent:function(e,t,n,a){P(t)||r("37"),o.ensureScrollValueMonitoring();var i=y(e,!1);g.batchedUpdates(x,i,t,n,a);var s=i._instance.rootID;return R[s]=i,i},renderSubtreeIntoContainer:function(e,t,n,a){return null!=e&&p.has(e)||r("38"),j._renderSubtreeIntoContainer(e,t,n,a)},_renderSubtreeIntoContainer:function(e,t,n,a){m.validateCallback(a,"ReactDOM.render"),s.isValidElement(t)||r("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var i,o=s.createElement(M,{child:t});if(e){var l=p.get(e);i=l._processChildContext(l._context)}else i=v;var c=I(n);if(c){var u=c._currentElement.props.child;if(E(u,t)){var d=c._renderedComponent.getPublicInstance(),h=a&&function(){a.call(d)};return j._updateRootComponent(c,o,i,n,h),d}j.unmountComponentAtNode(n)}var f,g=k(n),y=g&&!(!(f=g).getAttribute||!f.getAttribute(w)),b=O(n),C=y&&!c&&!b,_=j._renderNewRootComponent(o,n,C,i)._renderedComponent.getPublicInstance();return a&&a.call(_),_},render:function(e,t,n){return j._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){P(e)||r("40");var t=I(e);if(!t){O(e),1===e.nodeType&&e.hasAttribute(C);return!1}return delete R[t._instance.rootID],g.batchedUpdates(N,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,i,s){if(P(t)||r("41"),i){var o=k(t);if(h.canReuseMarkup(e,o))return void l.precacheNode(n,o);var c=o.getAttribute(h.CHECKSUM_ATTR_NAME);o.removeAttribute(h.CHECKSUM_ATTR_NAME);var u=o.outerHTML;o.setAttribute(h.CHECKSUM_ATTR_NAME,c);var d=e,p=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}(d,u),f=" (client) "+d.substring(p-20,p+20)+"\n (server) "+u.substring(p-20,p+20);t.nodeType===S&&r("42",f)}if(t.nodeType===S&&r("43"),s.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);a.insertTreeBefore(t,e,null)}else b(t,e),l.precacheNode(n,t.firstChild)}};e.exports=j},function(e,t,n){"use strict";var r=n(138);e.exports=function(e){for(var t;(t=e._renderedNodeType)===r.COMPOSITE;)e=e._renderedComponent;return t===r.HOST?e._renderedComponent:t===r.EMPTY?null:void 0}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,,,,,function(e,t,n){"use strict";t.__esModule=!0;t.PUSH="PUSH",t.REPLACE="REPLACE",t.POP="POP"},function(e,t,n){"use strict";var r=n(10),a=n(58),i=n(6),s="mixins";e.exports=function(e,t,n){var o=[],l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},c={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},u={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)p(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=f(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var a=n in u;i(!a,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var s=n in e;if(s){var o=c.hasOwnProperty(n)?c[n]:null;return i("DEFINE_MANY_MERGED"===o,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=f(e[n],r))}e[n]=r}}}(e,t)},autobind:function(){}};function d(e,t){var n=l.hasOwnProperty(t)?l[t]:null;b.hasOwnProperty(t)&&i("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&i("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function p(e,n){if(n){i("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,a=r.__reactAutoBindPairs;for(var o in n.hasOwnProperty(s)&&u.mixins(e,n.mixins),n)if(n.hasOwnProperty(o)&&o!==s){var c=n[o],p=r.hasOwnProperty(o);if(d(p,o),u.hasOwnProperty(o))u[o](e,c);else{var h=l.hasOwnProperty(o);if("function"!=typeof c||h||p||!1===n.autobind)if(p){var g=l[o];i(h&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,o),"DEFINE_MANY_MERGED"===g?r[o]=f(r[o],c):"DEFINE_MANY"===g&&(r[o]=m(r[o],c))}else r[o]=c;else a.push(o,c),r[o]=c}}}}function h(e,t){for(var n in i(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(n)&&(i(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function f(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var a={};return h(a,n),h(a,r),a}}function m(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function g(e,t){return t.bind(e)}var v={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},E=function(){};return r(E.prototype,e.prototype,b),function(e){var t=function(e,r,s){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];e[r]=g(e,a)}}(this),this.props=e,this.context=r,this.refs=a,this.updater=s||n,this.state=null;var o=this.getInitialState?this.getInitialState():null;i("object"==typeof o&&!Array.isArray(o),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=o};for(var r in t.prototype=new E,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],o.forEach(p.bind(null,t)),p(t,v),p(t,e),p(t,y),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),i(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),l)t.prototype[r]||(t.prototype[r]=null);return t}}},function(e,t,n){"use strict";t.__esModule=!0;t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.supportsPopstateOnHashchange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75);function a(e,t,n){if(null!==e)for(var r,i,s,o,l,c,u,d,p=0,h=0,f=e.type,m="FeatureCollection"===f,g="Feature"===f,v=m?e.features.length:1,y=0;y<v;y++){l=(d=!!(u=m?e.features[y].geometry:g?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var b=0;b<l;b++){var E=0,w=0;if(null!==(o=d?u.geometries[b]:u)){c=o.coordinates;var C=o.type;switch(p=!n||"Polygon"!==C&&"MultiPolygon"!==C?0:1,C){case null:break;case"Point":if(!1===t(c,h,y,E,w))return!1;h++,E++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===t(c[r],h,y,E,w))return!1;h++,"MultiPoint"===C&&E++}"LineString"===C&&E++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(i=0;i<c[r].length-p;i++){if(!1===t(c[r][i],h,y,E,w))return!1;h++}"MultiLineString"===C&&E++,"Polygon"===C&&w++}"Polygon"===C&&E++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(w=0,i=0;i<c[r].length;i++){for(s=0;s<c[r][i].length-p;s++){if(!1===t(c[r][i][s],h,y,E,w))return!1;h++}w++}E++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===a(o.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function s(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function o(e,t){var n,r,a,i,s,o,l,c,u,d,p=0,h="FeatureCollection"===e.type,f="Feature"===e.type,m=h?e.features.length:1;for(n=0;n<m;n++){for(o=h?e.features[n].geometry:f?e.geometry:e,c=h?e.features[n].properties:f?e.properties:{},u=h?e.features[n].bbox:f?e.bbox:void 0,d=h?e.features[n].id:f?e.id:void 0,s=(l=!!o&&"GeometryCollection"===o.type)?o.geometries.length:1,a=0;a<s;a++)if(null!==(i=l?o.geometries[a]:o))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,c,u,d))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===t(i.geometries[r],p,c,u,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,c,u,d))return!1;p++}}function l(e,t){o(e,function(e,n,a,i,s){var o,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(r.feature(e,a,{bbox:i,id:s}),n,0)&&void 0}switch(l){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var c=0;c<e.coordinates.length;c++){var u={type:o,coordinates:e.coordinates[c]};if(!1===t(r.feature(u,a),n,c))return!1}})}function c(e,t){l(e,function(e,n,i){var s=0;if(e.geometry){var o=e.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var l,c=0,u=0,d=0;return!1!==a(e,function(a,o,p,h,f){if(void 0===l||n>c||h>u||f>d)return l=a,c=n,u=h,d=f,void(s=0);var m=r.lineString([l,a],e.properties);if(!1===t(m,n,i,f,s))return!1;s++,l=a})&&void 0}}})}function u(e,t){if(!e)throw new Error("geojson is required");l(e,function(e,n,a){if(null!==e.geometry){var i=e.geometry.type,s=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,n,a,0,0))return!1;break;case"Polygon":for(var o=0;o<s.length;o++)if(!1===t(r.lineString(s[o],e.properties),n,a,o))return!1}}})}t.coordEach=a,t.coordReduce=function(e,t,n,r){var i=n;return a(e,function(e,r,a,s,o){i=0===r&&void 0===n?e:t(i,e,r,a,s,o)},r),i},t.propEach=i,t.propReduce=function(e,t,n){var r=n;return i(e,function(e,a){r=0===a&&void 0===n?e:t(r,e,a)}),r},t.featureEach=s,t.featureReduce=function(e,t,n){var r=n;return s(e,function(e,a){r=0===a&&void 0===n?e:t(r,e,a)}),r},t.coordAll=function(e){var t=[];return a(e,function(e){t.push(e)}),t},t.geomEach=o,t.geomReduce=function(e,t,n){var r=n;return o(e,function(e,a,i,s,o){r=0===a&&void 0===n?e:t(r,e,a,i,s,o)}),r},t.flattenEach=l,t.flattenReduce=function(e,t,n){var r=n;return l(e,function(e,a,i){r=0===a&&0===i&&void 0===n?e:t(r,e,a,i)}),r},t.segmentEach=c,t.segmentReduce=function(e,t,n){var r=n,a=!1;return c(e,function(e,i,s,o,l){r=!1===a&&void 0===n?e:t(r,e,i,s,o,l),a=!0}),r},t.lineEach=u,t.lineReduce=function(e,t,n){var r=n;return u(e,function(e,a,i,s){r=0===a&&void 0===n?e:t(r,e,a,i,s)}),r},t.findSegment=function(e,t){if(t=t||{},!r.isObject(t))throw new Error("options is invalid");var n,a=t.featureIndex||0,i=t.multiFeatureIndex||0,s=t.geometryIndex||0,o=t.segmentIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":a<0&&(a=e.features.length+a),l=l||e.features[a].properties,n=e.features[a].geometry;break;case"Feature":l=l||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=c.length+o-1),r.lineString([c[o],c[o+1]],l,t);case"Polygon":return s<0&&(s=c.length+s),o<0&&(o=c[s].length+o-1),r.lineString([c[s][o],c[s][o+1]],l,t);case"MultiLineString":return i<0&&(i=c.length+i),o<0&&(o=c[i].length+o-1),r.lineString([c[i][o],c[i][o+1]],l,t);case"MultiPolygon":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s),o<0&&(o=c[i][s].length-o-1),r.lineString([c[i][s][o],c[i][s][o+1]],l,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!r.isObject(t))throw new Error("options is invalid");var n,a=t.featureIndex||0,i=t.multiFeatureIndex||0,s=t.geometryIndex||0,o=t.coordIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":a<0&&(a=e.features.length+a),l=l||e.features[a].properties,n=e.features[a].geometry;break;case"Feature":l=l||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,l,t);case"MultiPoint":return i<0&&(i=c.length+i),r.point(c[i],l,t);case"LineString":return o<0&&(o=c.length+o),r.point(c[o],l,t);case"Polygon":return s<0&&(s=c.length+s),o<0&&(o=c[s].length+o),r.point(c[s][o],l,t);case"MultiLineString":return i<0&&(i=c.length+i),o<0&&(o=c[i].length+o),r.point(c[i][o],l,t);case"MultiPolygon":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s),o<0&&(o=c[i][s].length-o),r.point(c[i][s][o],l,t)}throw new Error("geojson is invalid")}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(596),s=n(266),o=(r=s)&&r.__esModule?r:{default:r},l=n(111),c=n(72);var u=function(e){return(0,i.stringify)(e).replace(/%20/g,"+")},d=i.parse;t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e(t),r=t.stringifyQuery,i=t.parseQueryString;"function"!=typeof r&&(r=u),"function"!=typeof i&&(i=d);var s=function(e){return e?(null==e.query&&(e.query=i(e.search.substring(1))),e):e},p=function(e,t){if(null==t)return e;var n="string"==typeof e?(0,c.parsePath)(e):e,i=r(t);return a({},n,{search:i?"?"+i:""})};return a({},n,{getCurrentLocation:function(){return s(n.getCurrentLocation())},listenBefore:function(e){return n.listenBefore(function(t,n){return(0,o.default)(e,s(t),n)})},listen:function(e){return n.listen(function(t){return e(s(t))})},push:function(e){return n.push(p(e,e.query))},replace:function(e){return n.replace(p(e,e.query))},createPath:function(e){return n.createPath(p(e,e.query))},createHref:function(e){return n.createHref(p(e,e.query))},createLocation:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=n.createLocation.apply(n,[p(e,e.query)].concat(r));return e.query&&(i.query=(0,l.createQuery)(e.query)),s(i)}})}}},function(e,t,n){"use strict";t.__esModule=!0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(266),s=(r=i)&&r.__esModule?r:{default:r},o=n(72);t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e(t),r=t.basename,i=function(e){return e?(r&&null==e.basename&&(0===e.pathname.toLowerCase().indexOf(r.toLowerCase())?(e.pathname=e.pathname.substring(r.length),e.basename=r,""===e.pathname&&(e.pathname="/")):e.basename=""),e):e},l=function(e){if(!r)return e;var t="string"==typeof e?(0,o.parsePath)(e):e,n=t.pathname,i="/"===r.slice(-1)?r:r+"/",s="/"===n.charAt(0)?n.slice(1):n;return a({},t,{pathname:i+s})};return a({},n,{getCurrentLocation:function(){return i(n.getCurrentLocation())},listenBefore:function(e){return n.listenBefore(function(t,n){return(0,s.default)(e,i(t),n)})},listen:function(e){return n.listen(function(t){return e(i(t))})},push:function(e){return n.push(l(e))},replace:function(e){return n.replace(l(e))},createPath:function(e){return n.createPath(l(e))},createHref:function(e){return n.createHref(l(e))},createLocation:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return i(n.createLocation.apply(n,[l(e)].concat(r)))}})}}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(177),a=n(33),i=n(22),s=n(178),o=r.twoArgumentPooler,l=r.fourArgumentPooler,c=/\/+/g;function u(e){return(""+e).replace(c,"$&/")}function d(e,t){this.func=e,this.context=t,this.count=0}function p(e,t,n){var r=e.func,a=e.context;r.call(a,t,e.count++)}function h(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function f(e,t,n){var r=e.result,s=e.keyPrefix,o=e.func,l=e.context,c=o.call(l,t,e.count++);Array.isArray(c)?m(c,r,n,i.thatReturnsArgument):null!=c&&(a.isValidElement(c)&&(c=a.cloneAndReplaceKey(c,s+(!c.key||t&&t.key===c.key?"":u(c.key)+"/")+n)),r.push(c))}function m(e,t,n,r,a){var i="";null!=n&&(i=u(n)+"/");var o=h.getPooled(t,i,r,a);s(e,f,o),h.release(o)}function g(e,t,n){return null}d.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},r.addPoolingTo(d,o),h.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},r.addPoolingTo(h,l);var v={forEach:function(e,t,n){if(null==e)return e;var r=d.getPooled(t,n);s(e,p,r),d.release(r)},map:function(e,t,n){if(null==e)return e;var r=[];return m(e,r,null,t,n),r},mapIntoWithKeyPrefixInternal:m,count:function(e,t){return s(e,g,null)},toArray:function(e){var t=[];return m(e,t,null,i.thatReturnsArgument),t}};e.exports=v},function(e,t,n){"use strict";var r=n(46),a=(n(6),function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)}),i=function(e){e instanceof this||r("25"),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)},s=a,o={addPoolingTo:function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||s,n.poolSize||(n.poolSize=10),n.release=i,n},oneArgumentPooler:a,twoArgumentPooler:function(e,t){if(this.instancePool.length){var n=this.instancePool.pop();return this.call(n,e,t),n}return new this(e,t)},threeArgumentPooler:function(e,t,n){if(this.instancePool.length){var r=this.instancePool.pop();return this.call(r,e,t,n),r}return new this(e,t,n)},fourArgumentPooler:function(e,t,n,r){if(this.instancePool.length){var a=this.instancePool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}};e.exports=o},function(e,t,n){"use strict";var r=n(46),a=(n(26),n(120)),i=n(179),s=(n(6),n(180)),o=(n(9),"."),l=":";function c(e,t){return e&&"object"==typeof e&&null!=e.key?s.escape(e.key):t.toString(36)}e.exports=function(e,t,n){return null==e?0:function e(t,n,u,d){var p,h=typeof t;if("undefined"!==h&&"boolean"!==h||(t=null),null===t||"string"===h||"number"===h||"object"===h&&t.$$typeof===a)return u(d,t,""===n?o+c(t,0):n),1;var f=0,m=""===n?o:n+l;if(Array.isArray(t))for(var g=0;g<t.length;g++)f+=e(p=t[g],m+c(p,g),u,d);else{var v=i(t);if(v){var y,b=v.call(t);if(v!==t.entries)for(var E=0;!(y=b.next()).done;)f+=e(p=y.value,m+c(p,E++),u,d);else for(;!(y=b.next()).done;){var w=y.value;w&&(f+=e(p=w[1],m+s.escape(w[0])+l+c(p,0),u,d))}}else if("object"===h){var C=String(t);r("31","[object Object]"===C?"object with keys {"+Object.keys(t).join(", ")+"}":C,"")}}return f}(e,"",t,n)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";e.exports=function(e){var t=e&&(r&&e[r]||e[a]);if("function"==typeof t)return t}},function(e,t,n){"use strict";var r={escape:function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})},unescape:function(e){var t={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(/(=0|=2)/g,function(e){return t[e]})}};e.exports=r},function(e,t,n){"use strict";var r=n(33).createFactory,a={a:r("a"),abbr:r("abbr"),address:r("address"),area:r("area"),article:r("article"),aside:r("aside"),audio:r("audio"),b:r("b"),base:r("base"),bdi:r("bdi"),bdo:r("bdo"),big:r("big"),blockquote:r("blockquote"),body:r("body"),br:r("br"),button:r("button"),canvas:r("canvas"),caption:r("caption"),cite:r("cite"),code:r("code"),col:r("col"),colgroup:r("colgroup"),data:r("data"),datalist:r("datalist"),dd:r("dd"),del:r("del"),details:r("details"),dfn:r("dfn"),dialog:r("dialog"),div:r("div"),dl:r("dl"),dt:r("dt"),em:r("em"),embed:r("embed"),fieldset:r("fieldset"),figcaption:r("figcaption"),figure:r("figure"),footer:r("footer"),form:r("form"),h1:r("h1"),h2:r("h2"),h3:r("h3"),h4:r("h4"),h5:r("h5"),h6:r("h6"),head:r("head"),header:r("header"),hgroup:r("hgroup"),hr:r("hr"),html:r("html"),i:r("i"),iframe:r("iframe"),img:r("img"),input:r("input"),ins:r("ins"),kbd:r("kbd"),keygen:r("keygen"),label:r("label"),legend:r("legend"),li:r("li"),link:r("link"),main:r("main"),map:r("map"),mark:r("mark"),menu:r("menu"),menuitem:r("menuitem"),meta:r("meta"),meter:r("meter"),nav:r("nav"),noscript:r("noscript"),object:r("object"),ol:r("ol"),optgroup:r("optgroup"),option:r("option"),output:r("output"),p:r("p"),param:r("param"),picture:r("picture"),pre:r("pre"),progress:r("progress"),q:r("q"),rp:r("rp"),rt:r("rt"),ruby:r("ruby"),s:r("s"),samp:r("samp"),script:r("script"),section:r("section"),select:r("select"),small:r("small"),source:r("source"),span:r("span"),strong:r("strong"),style:r("style"),sub:r("sub"),summary:r("summary"),sup:r("sup"),table:r("table"),tbody:r("tbody"),td:r("td"),textarea:r("textarea"),tfoot:r("tfoot"),th:r("th"),thead:r("thead"),time:r("time"),title:r("title"),tr:r("tr"),track:r("track"),u:r("u"),ul:r("ul"),var:r("var"),video:r("video"),wbr:r("wbr"),circle:r("circle"),clipPath:r("clipPath"),defs:r("defs"),ellipse:r("ellipse"),g:r("g"),image:r("image"),line:r("line"),linearGradient:r("linearGradient"),mask:r("mask"),path:r("path"),pattern:r("pattern"),polygon:r("polygon"),polyline:r("polyline"),radialGradient:r("radialGradient"),rect:r("rect"),stop:r("stop"),svg:r("svg"),text:r("text"),tspan:r("tspan")};e.exports=a},function(e,t,n){"use strict";var r=n(33).isValidElement,a=n(121);e.exports=a(r)},function(e,t,n){"use strict";var r=n(108),a=n(10),i=n(122),s=n(185),o=Function.call.bind(Object.prototype.hasOwnProperty),l=function(){};function c(){return null}e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,u="@@iterator";var d="<<anonymous>>",p={array:g("array"),bool:g("boolean"),func:g("function"),number:g("number"),object:g("object"),string:g("string"),symbol:g("symbol"),any:m(c),arrayOf:function(e){return m(function(t,n,r,a,s){if("function"!=typeof e)return new f("Property `"+s+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o)){var l=y(o);return new f("Invalid "+a+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected an array.")}for(var c=0;c<o.length;c++){var u=e(o,c,r,a,s+"["+c+"]",i);if(u instanceof Error)return u}return null})},element:function(){return m(function(t,n,r,a,i){var s=t[n];if(!e(s)){var o=y(s);return new f("Invalid "+a+" `"+i+"` of type `"+o+"` supplied to `"+r+"`, expected a single ReactElement.")}return null})}(),elementType:function(){return m(function(e,t,n,a,i){var s=e[t];if(!r.isValidElementType(s)){var o=y(s);return new f("Invalid "+a+" `"+i+"` of type `"+o+"` supplied to `"+n+"`, expected a single ReactElement type.")}return null})}(),instanceOf:function(e){return m(function(t,n,r,a,i){if(!(t[n]instanceof e)){var s=e.name||d,o=function(e){if(!e.constructor||!e.constructor.name)return d;return e.constructor.name}(t[n]);return new f("Invalid "+a+" `"+i+"` of type `"+o+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}return null})},node:function(){return m(function(e,t,n,r,a){if(!v(e[t]))return new f("Invalid "+r+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.");return null})}(),objectOf:function(e){return m(function(t,n,r,a,s){if("function"!=typeof e)return new f("Property `"+s+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var l=t[n],c=y(l);if("object"!==c)return new f("Invalid "+a+" `"+s+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var u in l)if(o(l,u)){var d=e(l,u,r,a,s+"."+u,i);if(d instanceof Error)return d}return null})},oneOf:function(e){if(!Array.isArray(e))return c;return m(function(t,n,r,a,i){for(var s=t[n],o=0;o<e.length;o++)if(h(s,e[o]))return null;var l=JSON.stringify(e,function(e,t){var n=b(t);return"symbol"===n?String(t):t});return new f("Invalid "+a+" `"+i+"` of value `"+String(s)+"` supplied to `"+r+"`, expected one of "+l+".")})},oneOfType:function(e){if(!Array.isArray(e))return c;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return l("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+E(n)+" at index "+t+"."),c}return m(function(t,n,r,a,s){for(var o=0;o<e.length;o++){var l=e[o];if(null==l(t,n,r,a,s,i))return null}return new f("Invalid "+a+" `"+s+"` supplied to `"+r+"`.")})},shape:function(e){return m(function(t,n,r,a,s){var o=t[n],l=y(o);if("object"!==l)return new f("Invalid "+a+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var d=u(o,c,r,a,s+"."+c,i);if(d)return d}}return null})},exact:function(e){return m(function(t,n,r,s,o){var l=t[n],c=y(l);if("object"!==c)return new f("Invalid "+s+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var u=a({},t[n],e);for(var d in u){var p=e[d];if(!p)return new f("Invalid "+s+" `"+o+"` key `"+d+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var h=p(l,d,r,s,o+"."+d,i);if(h)return h}return null})}};function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){this.message=e,this.stack=""}function m(e){function n(n,r,a,s,o,l,c){if((s=s||d,l=l||a,c!==i)&&t){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}return null==r[a]?n?null===r[a]?new f("The "+o+" `"+l+"` is marked as required in `"+s+"`, but its value is `null`."):new f("The "+o+" `"+l+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(r,a,s,o,l)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function g(e){return m(function(t,n,r,a,i,s){var o=t[n];return y(o)!==e?new f("Invalid "+a+" `"+i+"` of type `"+b(o)+"` supplied to `"+r+"`, expected `"+e+"`."):null})}function v(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(v);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e[u]);if("function"==typeof t)return t}(t);if(!r)return!1;var a,i=r.call(t);if(r!==t.entries){for(;!(a=i.next()).done;)if(!v(a.value))return!1}else for(;!(a=i.next()).done;){var s=a.value;if(s&&!v(s[1]))return!1}return!0;default:return!1}}function y(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function b(e){if(null==e)return""+e;var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function E(e){var t=b(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return f.prototype=Error.prototype,p.checkPropTypes=s,p.resetWarningCache=s.resetWarningCache,p.PropTypes=p,p}},function(e,t,n){"use strict";
/** @license React v16.8.3
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case d:case p:case s:case l:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case h:case c:return e;default:return t}}case g:case m:case i:return t}}}function y(e){return v(e)===p}t.typeOf=v,t.AsyncMode=d,t.ConcurrentMode=p,t.ContextConsumer=u,t.ContextProvider=c,t.Element=a,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=l,t.StrictMode=o,t.Suspense=f,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===p||e===l||e===o||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===h)},t.isAsyncMode=function(e){return y(e)||v(e)===d},t.isConcurrentMode=y,t.isContextConsumer=function(e){return v(e)===u},t.isContextProvider=function(e){return v(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return v(e)===h},t.isFragment=function(e){return v(e)===s},t.isLazy=function(e){return v(e)===g},t.isMemo=function(e){return v(e)===m},t.isPortal=function(e){return v(e)===i},t.isProfiler=function(e){return v(e)===l},t.isStrictMode=function(e){return v(e)===o},t.isSuspense=function(e){return v(e)===f}},function(e,t,n){"use strict";function r(e,t,n,r,a){}r.resetWarningCache=function(){0},e.exports=r},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";var r=n(117).Component,a=n(33).isValidElement,i=n(118),s=n(155);e.exports=s(r,a,i)},function(e,t,n){"use strict";var r=n(46),a=n(33);n(6);e.exports=function(e){return a.isValidElement(e)||r("143"),e}},function(e,t,n){"use strict";var r=n(11),a=n(190),i=n(146),s=n(35),o=n(23),l=n(262),c=n(263),u=n(147),d=n(264);n(9);a.inject();var p={findDOMNode:c,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:l,unstable_batchedUpdates:o.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=u(e)),e?r.getNodeFromInstance(e):null}},Mount:i,Reconciler:s}),e.exports=p},function(e,t,n){"use strict";var r=n(191),a=n(192),i=n(196),s=n(199),o=n(200),l=n(201),c=n(202),u=n(208),d=n(11),p=n(233),h=n(234),f=n(235),m=n(236),g=n(237),v=n(239),y=n(240),b=n(246),E=n(247),w=n(248),C=!1;e.exports={inject:function(){C||(C=!0,v.EventEmitter.injectReactEventListener(g),v.EventPluginHub.injectEventPluginOrder(s),v.EventPluginUtils.injectComponentTree(d),v.EventPluginUtils.injectTreeTraversal(h),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:o,ChangeEventPlugin:i,SelectEventPlugin:E,BeforeInputEventPlugin:a}),v.HostComponent.injectGenericComponentClass(u),v.HostComponent.injectTextComponentClass(f),v.DOMProperty.injectDOMPropertyConfig(r),v.DOMProperty.injectDOMPropertyConfig(l),v.DOMProperty.injectDOMPropertyConfig(b),v.EmptyComponent.injectEmptyComponentFactory(function(e){return new p(e)}),v.Updates.injectReconcileTransaction(y),v.Updates.injectBatchingStrategy(m),v.Component.injectEnvironment(c))}}},function(e,t,n){"use strict";e.exports={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}}},function(e,t,n){"use strict";var r=n(47),a=n(17),i=n(193),s=n(194),o=n(195),l=[9,13,27,32],c=229,u=a.canUseDOM&&"CompositionEvent"in window,d=null;a.canUseDOM&&"documentMode"in document&&(d=document.documentMode);var p,h=a.canUseDOM&&"TextEvent"in window&&!d&&!("object"==typeof(p=window.opera)&&"function"==typeof p.version&&parseInt(p.version(),10)<=12),f=a.canUseDOM&&(!u||d&&d>8&&d<=11);var m=32,g=String.fromCharCode(m),v={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},y=!1;function b(e,t){switch(e){case"topKeyUp":return-1!==l.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==c;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function E(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}var w=null;function C(e,t,n,a){var o,l;if(u?o=function(e){switch(e){case"topCompositionStart":return v.compositionStart;case"topCompositionEnd":return v.compositionEnd;case"topCompositionUpdate":return v.compositionUpdate}}(e):w?b(e,n)&&(o=v.compositionEnd):function(e,t){return"topKeyDown"===e&&t.keyCode===c}(e,n)&&(o=v.compositionStart),!o)return null;f&&(w||o!==v.compositionStart?o===v.compositionEnd&&w&&(l=w.getData()):w=i.getPooled(a));var d=s.getPooled(o,t,n,a);if(l)d.data=l;else{var p=E(n);null!==p&&(d.data=p)}return r.accumulateTwoPhaseDispatches(d),d}function _(e,t,n,a){var s;if(!(s=h?function(e,t){switch(e){case"topCompositionEnd":return E(t);case"topKeyPress":return t.which!==m?null:(y=!0,g);case"topTextInput":var n=t.data;return n===g&&y?null:n;default:return null}}(e,n):function(e,t){if(w){if("topCompositionEnd"===e||!u&&b(e,t)){var n=w.getData();return i.release(w),w=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!function(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return f?null:t.data;default:return null}}(e,n)))return null;var l=o.getPooled(v.beforeInput,t,n,a);return l.data=s,r.accumulateTwoPhaseDispatches(l),l}var S={eventTypes:v,extractEvents:function(e,t,n,r){return[C(e,t,n,r),_(e,t,n,r)]}};e.exports=S},function(e,t,n){"use strict";var r=n(10),a=n(30),i=n(126);function s(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}r(s.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[i()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,a=this.getText(),i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);var o=t>1?1-t:void 0;return this._fallbackText=a.slice(e,o),this._fallbackText}}),a.addPoolingTo(s),e.exports=s},function(e,t,n){"use strict";var r=n(27);function a(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(a,{data:null}),e.exports=a},function(e,t,n){"use strict";var r=n(27);function a(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(a,{data:null}),e.exports=a},function(e,t,n){"use strict";var r=n(48),a=n(47),i=n(17),s=n(11),o=n(23),l=n(27),c=n(129),u=n(83),d=n(84),p=n(130),h={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}};function f(e,t,n){var r=l.getPooled(h.change,e,t,n);return r.type="change",a.accumulateTwoPhaseDispatches(r),r}var m=null,g=null;var v=!1;function y(e){var t=f(g,e,u(e));o.batchedUpdates(b,t)}function b(e){r.enqueueEvents(e),r.processEventQueue(!1)}function E(){m&&(m.detachEvent("onchange",y),m=null,g=null)}function w(e,t){var n=c.updateValueIfChanged(e),r=!0===t.simulated&&O._allowSimulatedPassThrough;if(n||r)return e}function C(e,t){if("topChange"===e)return t}function _(e,t,n){"topFocus"===e?(E(),function(e,t){g=t,(m=e).attachEvent("onchange",y)}(t,n)):"topBlur"===e&&E()}i.canUseDOM&&(v=d("change")&&(!document.documentMode||document.documentMode>8));var S=!1;function D(){m&&(m.detachEvent("onpropertychange",R),m=null,g=null)}function R(e){"value"===e.propertyName&&w(g,e)&&y(e)}function k(e,t,n){"topFocus"===e?(D(),function(e,t){g=t,(m=e).attachEvent("onpropertychange",R)}(t,n)):"topBlur"===e&&D()}function T(e,t,n){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return w(g,n)}function x(e,t,n){if("topClick"===e)return w(t,n)}function N(e,t,n){if("topInput"===e||"topChange"===e)return w(t,n)}i.canUseDOM&&(S=d("input")&&(!document.documentMode||document.documentMode>9));var O={eventTypes:h,_allowSimulatedPassThrough:!0,_isInputEventSupported:S,extractEvents:function(e,t,n,r){var a,i,o,l,c=t?s.getNodeFromInstance(t):window;if("select"===(l=(o=c).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type?v?a=C:i=_:p(c)?S?a=N:(a=T,i=k):function(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}(c)&&(a=x),a){var u=a(e,t,n);if(u)return f(u,n,r)}i&&i(e,c,t),"topBlur"===e&&function(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;if(n&&n.controlled&&"number"===t.type){var r=""+t.value;t.getAttribute("value")!==r&&t.setAttribute("value",r)}}}(t,c)}};e.exports=O},function(e,t,n){"use strict";var r=n(198),a={};a.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&function(e,t,n){"function"==typeof e?e(t.getPublicInstance()):r.addComponentAsRefTo(t,e,n)}(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null,r=null;null!==e&&"object"==typeof e&&(n=e.ref,r=e._owner);var a=null,i=null;return null!==t&&"object"==typeof t&&(a=t.ref,i=t._owner),n!==a||"string"==typeof a&&i!==r},a.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&function(e,t,n){"function"==typeof e?e(null):r.removeComponentAsRefFrom(t,e,n)}(n,e,t._owner)}},e.exports=a},function(e,t,n){"use strict";var r=n(7);n(6);function a(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var i={addComponentAsRefTo:function(e,t,n){a(n)||r("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){a(n)||r("120");var i=n.getPublicInstance();i&&i.refs[t]===e.getPublicInstance()&&n.detachRef(t)}};e.exports=i},function(e,t,n){"use strict";e.exports=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"]},function(e,t,n){"use strict";var r=n(47),a=n(11),i=n(65),s={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},o={eventTypes:s,extractEvents:function(e,t,n,o){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var l,c,u;if(o.window===o)l=o;else{var d=o.ownerDocument;l=d?d.defaultView||d.parentWindow:window}if("topMouseOut"===e){c=t;var p=n.relatedTarget||n.toElement;u=p?a.getClosestInstanceFromNode(p):null}else c=null,u=t;if(c===u)return null;var h=null==c?l:a.getNodeFromInstance(c),f=null==u?l:a.getNodeFromInstance(u),m=i.getPooled(s.mouseLeave,c,n,o);m.type="mouseleave",m.target=h,m.relatedTarget=f;var g=i.getPooled(s.mouseEnter,u,n,o);return g.type="mouseenter",g.target=f,g.relatedTarget=h,r.accumulateEnterLeaveDispatches(m,g,c,u),[m,g]}};e.exports=o},function(e,t,n){"use strict";var r=n(34),a=r.injection.MUST_USE_PROPERTY,i=r.injection.HAS_BOOLEAN_VALUE,s=r.injection.HAS_NUMERIC_VALUE,o=r.injection.HAS_POSITIVE_NUMERIC_VALUE,l=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,c={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,as:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:a|i,cite:0,classID:0,className:0,cols:o,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:i,defer:i,dir:0,disabled:i,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:a|i,muted:a|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,playsInline:i,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,referrerPolicy:0,rel:0,required:i,reversed:i,role:0,rows:o,rowSpan:s,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:a|i,shape:0,size:o,sizes:0,span:o,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:s,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}};e.exports=c},function(e,t,n){"use strict";var r=n(86),a={processChildrenUpdates:n(207).dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};e.exports=a},function(e,t,n){"use strict";var r=n(7),a=n(36),i=n(17),s=n(204),o=n(22),l=(n(6),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(i.canUseDOM||r("56"),t||r("57"),"HTML"===e.nodeName&&r("58"),"string"==typeof t){var n=s(t,o)[0];e.parentNode.replaceChild(n,e)}else a.replaceChildWithTree(e,t)}});e.exports=l},function(e,t,n){"use strict";var r=n(17),a=n(205),i=n(206),s=n(6),o=r.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;e.exports=function(e,t){var n=o;o||s(!1);var r=function(e){var t=e.match(l);return t&&t[1].toLowerCase()}(e),c=r&&i(r);if(c){n.innerHTML=c[1]+e+c[2];for(var u=c[0];u--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(t||s(!1),a(d).forEach(t));for(var p=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&r(!1),"number"!=typeof t&&r(!1),0===t||t-1 in e||r(!1),"function"==typeof e.callee&&r(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),a=0;a<t;a++)n[a]=e[a];return n}(e):[e]}},function(e,t,n){"use strict";var r=n(17),a=n(6),i=r.canUseDOM?document.createElement("div"):null,s={},o=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],u=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:o,option:o,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){d[e]=u,s[e]=!0}),e.exports=function(e){return i||a(!1),d.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||(i.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",s[e]=!i.firstChild),s[e]?d[e]:null}},function(e,t,n){"use strict";var r=n(86),a=n(11),i={dangerouslyProcessChildrenUpdates:function(e,t){var n=a.getNodeFromInstance(e);r.processUpdates(n,t)}};e.exports=i},function(e,t,n){"use strict";var r=n(7),a=n(10),i=n(209),s=n(210),o=n(36),l=n(87),c=n(34),u=n(135),d=n(48),p=n(80),h=n(68),f=n(123),m=n(11),g=n(220),v=n(222),y=n(136),b=n(223),E=(n(21),n(224)),w=n(231),C=(n(22),n(67)),_=(n(6),n(84),n(91),n(129)),S=(n(95),n(9),f),D=d.deleteListener,R=m.getNodeFromInstance,k=h.listenTo,T=p.registrationNameModules,x={string:!0,number:!0},N="__html",O={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},P=11;function I(e,t){t&&(W[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"==typeof t.dangerouslySetInnerHTML&&N in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!=typeof t.style&&r("62",function(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}(e)))}function A(e,t,n,r){if(!(r instanceof w)){0;var a=e._hostContainerInfo,i=a._node&&a._node.nodeType===P?a._node:a._ownerDocument;k(t,i),r.getReactMountReady().enqueue(M,{inst:e,registrationName:t,listener:n})}}function M(){d.putListener(this.inst,this.registrationName,this.listener)}function j(){g.postMountWrapper(this)}function L(){b.postMountWrapper(this)}function F(){v.postMountWrapper(this)}var U={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function q(){_.track(this)}function $(){this._rootNodeID||r("63");var e=R(this);switch(e||r("64"),this._tag){case"iframe":case"object":this._wrapperState.listeners=[h.trapBubbledEvent("topLoad","load",e)];break;case"video":case"audio":for(var t in this._wrapperState.listeners=[],U)U.hasOwnProperty(t)&&this._wrapperState.listeners.push(h.trapBubbledEvent(t,U[t],e));break;case"source":this._wrapperState.listeners=[h.trapBubbledEvent("topError","error",e)];break;case"img":this._wrapperState.listeners=[h.trapBubbledEvent("topError","error",e),h.trapBubbledEvent("topLoad","load",e)];break;case"form":this._wrapperState.listeners=[h.trapBubbledEvent("topReset","reset",e),h.trapBubbledEvent("topSubmit","submit",e)];break;case"input":case"select":case"textarea":this._wrapperState.listeners=[h.trapBubbledEvent("topInvalid","invalid",e)]}}function B(){y.postUpdateWrapper(this)}var H={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},V={listing:!0,pre:!0,textarea:!0},W=a({menuitem:!0},H),Y=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,z={},X={}.hasOwnProperty;function J(e,t){return e.indexOf("-")>=0||null!=t.is}var G=1;function K(e){var t=e.type;!function(e){X.call(z,e)||(Y.test(e)||r("65",e),z[e]=!0)}(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}K.displayName="ReactDOMComponent",K.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=G++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var a,s,c,d=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue($,this);break;case"input":g.mountWrapper(this,d,t),d=g.getHostProps(this,d),e.getReactMountReady().enqueue(q,this),e.getReactMountReady().enqueue($,this);break;case"option":v.mountWrapper(this,d,t),d=v.getHostProps(this,d);break;case"select":y.mountWrapper(this,d,t),d=y.getHostProps(this,d),e.getReactMountReady().enqueue($,this);break;case"textarea":b.mountWrapper(this,d,t),d=b.getHostProps(this,d),e.getReactMountReady().enqueue(q,this),e.getReactMountReady().enqueue($,this)}if(I(this,d),null!=t?(a=t._namespaceURI,s=t._tag):n._tag&&(a=n._namespaceURI,s=n._tag),(null==a||a===l.svg&&"foreignobject"===s)&&(a=l.html),a===l.html&&("svg"===this._tag?a=l.svg:"math"===this._tag&&(a=l.mathml)),this._namespaceURI=a,e.useCreateElement){var p,h=n._ownerDocument;if(a===l.html)if("script"===this._tag){var f=h.createElement("div"),E=this._currentElement.type;f.innerHTML="<"+E+"></"+E+">",p=f.removeChild(f.firstChild)}else p=d.is?h.createElement(this._currentElement.type,d.is):h.createElement(this._currentElement.type);else p=h.createElementNS(a,this._currentElement.type);m.precacheNode(this,p),this._flags|=S.hasCachedChildNodes,this._hostParent||u.setAttributeForRoot(p),this._updateDOMProperties(null,d,e);var w=o(p);this._createInitialChildren(e,d,r,w),c=w}else{var C=this._createOpenTagMarkupAndPutListeners(e,d),_=this._createContentMarkup(e,d,r);c=!_&&H[this._tag]?C+"/>":C+">"+_+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(j,this),d.autoFocus&&e.getReactMountReady().enqueue(i.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(L,this),d.autoFocus&&e.getReactMountReady().enqueue(i.focusDOMComponent,this);break;case"select":case"button":d.autoFocus&&e.getReactMountReady().enqueue(i.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(F,this)}return c},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(null!=i)if(T.hasOwnProperty(r))i&&A(this,r,i,e);else{"style"===r&&(i&&(i=this._previousStyleCopy=a({},t.style)),i=s.createMarkupForStyles(i,this));var o=null;null!=this._tag&&J(this._tag,t)?O.hasOwnProperty(r)||(o=u.createMarkupForCustomAttribute(r,i)):o=u.createMarkupForProperty(r,i),o&&(n+=" "+o)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+u.createMarkupForRoot()),n+=" "+u.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&(r=a.__html);else{var i=x[typeof t.children]?t.children:null,s=null!=i?null:t.children;if(null!=i)r=C(i);else if(null!=s){r=this.mountChildren(s,e,n).join("")}}return V[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&o.queueHTML(r,a.__html);else{var i=x[typeof t.children]?t.children:null,s=null!=i?null:t.children;if(null!=i)""!==i&&o.queueText(r,i);else if(null!=s)for(var l=this.mountChildren(s,e,n),c=0;c<l.length;c++)o.queueChild(r,l[c])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var a=t.props,i=this._currentElement.props;switch(this._tag){case"input":a=g.getHostProps(this,a),i=g.getHostProps(this,i);break;case"option":a=v.getHostProps(this,a),i=v.getHostProps(this,i);break;case"select":a=y.getHostProps(this,a),i=y.getHostProps(this,i);break;case"textarea":a=b.getHostProps(this,a),i=b.getHostProps(this,i)}switch(I(this,i),this._updateDOMProperties(a,i,e),this._updateDOMChildren(a,i,e,r),this._tag){case"input":g.updateWrapper(this),_.updateValueIfChanged(this);break;case"textarea":b.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(B,this)}},_updateDOMProperties:function(e,t,n){var r,i,o;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if("style"===r){var l=this._previousStyleCopy;for(i in l)l.hasOwnProperty(i)&&((o=o||{})[i]="");this._previousStyleCopy=null}else T.hasOwnProperty(r)?e[r]&&D(this,r):J(this._tag,e)?O.hasOwnProperty(r)||u.deleteValueForAttribute(R(this),r):(c.properties[r]||c.isCustomAttribute(r))&&u.deleteValueForProperty(R(this),r);for(r in t){var d=t[r],p="style"===r?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&d!==p&&(null!=d||null!=p))if("style"===r)if(d?d=this._previousStyleCopy=a({},d):this._previousStyleCopy=null,p){for(i in p)!p.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||((o=o||{})[i]="");for(i in d)d.hasOwnProperty(i)&&p[i]!==d[i]&&((o=o||{})[i]=d[i])}else o=d;else if(T.hasOwnProperty(r))d?A(this,r,d,n):p&&D(this,r);else if(J(this._tag,t))O.hasOwnProperty(r)||u.setValueForAttribute(R(this),r,d);else if(c.properties[r]||c.isCustomAttribute(r)){var h=R(this);null!=d?u.setValueForProperty(h,r,d):u.deleteValueForProperty(h,r)}}o&&s.setValueForStyles(R(this),o,this)},_updateDOMChildren:function(e,t,n,r){var a=x[typeof e.children]?e.children:null,i=x[typeof t.children]?t.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,o=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=a?null:e.children,c=null!=i?null:t.children,u=null!=a||null!=s,d=null!=i||null!=o;null!=l&&null==c?this.updateChildren(null,n,r):u&&!d&&this.updateTextContent(""),null!=i?a!==i&&this.updateTextContent(""+i):null!=o?s!==o&&this.updateMarkup(""+o):null!=c&&this.updateChildren(c,n,r)},getHostNode:function(){return R(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"input":case"textarea":_.stopTracking(this);break;case"html":case"head":case"body":r("66",this._tag)}this.unmountChildren(e),m.uncacheNode(this),d.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return R(this)}},a(K.prototype,K.Mixin,E.Mixin),e.exports=K},function(e,t,n){"use strict";var r=n(11),a=n(133),i={focusDOMComponent:function(){a(r.getNodeFromInstance(this))}};e.exports=i},function(e,t,n){"use strict";var r=n(134),a=n(17),i=(n(21),n(211),n(213)),s=n(214),o=n(216),l=(n(9),o(function(e){return s(e)})),c=!1,u="cssFloat";if(a.canUseDOM){var d=document.createElement("div").style;try{d.font=""}catch(e){c=!0}void 0===document.documentElement.style.cssFloat&&(u="styleFloat")}var p={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var a=0===r.indexOf("--"),s=e[r];0,null!=s&&(n+=l(r)+":",n+=i(r,s,t,a)+";")}return n||null},setValueForStyles:function(e,t,n){var a=e.style;for(var s in t)if(t.hasOwnProperty(s)){var o=0===s.indexOf("--");0;var l=i(s,t[s],n,o);if("float"!==s&&"cssFloat"!==s||(s=u),o)a.setProperty(s,l);else if(l)a[s]=l;else{var d=c&&r.shorthandPropertyExpansions[s];if(d)for(var p in d)a[p]="";else a[s]=""}}}};e.exports=p},function(e,t,n){"use strict";var r=n(212),a=/^-ms-/;e.exports=function(e){return r(e.replace(a,"ms-"))}},function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,function(e,t){return t.toUpperCase()})}},function(e,t,n){"use strict";var r=n(134),a=(n(9),r.isUnitlessNumber);e.exports=function(e,t,n,r){if(null==t||"boolean"==typeof t||""===t)return"";var i=isNaN(t);return r||i||0===t||a.hasOwnProperty(e)&&a[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}},function(e,t,n){"use strict";var r=n(215),a=/^ms-/;e.exports=function(e){return r(e).replace(a,"-ms-")}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";var r=n(67);e.exports=function(e){return'"'+r(e)+'"'}},function(e,t,n){"use strict";var r=n(48);var a={handleTopLevel:function(e,t,n,a){!function(e){r.enqueueEvents(e),r.processEventQueue(!1)}(r.extractEvents(e,t,n,a))}};e.exports=a},function(e,t,n){"use strict";var r=n(17);function a(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var i={animationend:a("Animation","AnimationEnd"),animationiteration:a("Animation","AnimationIteration"),animationstart:a("Animation","AnimationStart"),transitionend:a("Transition","TransitionEnd")},s={},o={};r.canUseDOM&&(o=document.createElement("div").style,"AnimationEvent"in window||(delete i.animationend.animation,delete i.animationiteration.animation,delete i.animationstart.animation),"TransitionEvent"in window||delete i.transitionend.transition),e.exports=function(e){if(s[e])return s[e];if(!i[e])return e;var t=i[e];for(var n in t)if(t.hasOwnProperty(n)&&n in o)return s[e]=t[n];return""}},function(e,t,n){"use strict";var r=n(7),a=n(10),i=n(135),s=n(89),o=n(11),l=n(23);n(6),n(9);function c(){this._rootNodeID&&d.updateWrapper(this)}function u(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}var d={getHostProps:function(e,t){var n=s.getValue(t),r=s.getChecked(t);return a({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:p.bind(e),controlled:u(t)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&i.setValueForProperty(o.getNodeFromInstance(e),"checked",n||!1);var r=o.getNodeFromInstance(e),a=s.getValue(t);if(null!=a)if(0===a&&""===r.value)r.value="0";else if("number"===t.type){var l=parseFloat(r.value,10)||0;(a!=l||a==l&&r.value!=a)&&(r.value=""+a)}else r.value!==""+a&&(r.value=""+a);else null==t.value&&null!=t.defaultValue&&r.defaultValue!==""+t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=o.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}};function p(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);l.asap(c,this);var a=t.name;if("radio"===t.type&&null!=a){for(var i=o.getNodeFromInstance(this),u=i;u.parentNode;)u=u.parentNode;for(var d=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),p=0;p<d.length;p++){var h=d[p];if(h!==i&&h.form===i.form){var f=o.getInstanceFromNode(h);f||r("90"),l.asap(c,f)}}}return n}e.exports=d},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(10),a=n(32),i=n(11),s=n(136),o=(n(9),!1);function l(e){var t="";return a.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:o||(o=!0))}),t}var c={mountWrapper:function(e,t,n){var r=null;if(null!=n){var a=n;"optgroup"===a._tag&&(a=a._hostParent),null!=a&&"select"===a._tag&&(r=s.getSelectValueContext(a))}var i,o=null;if(null!=r)if(i=null!=t.value?t.value+"":l(t.children),o=!1,Array.isArray(r)){for(var c=0;c<r.length;c++)if(""+r[c]===i){o=!0;break}}else o=""+r===i;e._wrapperState={selected:o}},postMountWrapper:function(e){var t=e._currentElement.props;null!=t.value&&i.getNodeFromInstance(e).setAttribute("value",t.value)},getHostProps:function(e,t){var n=r({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var a=l(t.children);return a&&(n.children=a),n}};e.exports=c},function(e,t,n){"use strict";var r=n(7),a=n(10),i=n(89),s=n(11),o=n(23);n(6),n(9);function l(){this._rootNodeID&&c.updateWrapper(this)}var c={getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=i.getValue(t),a=n;if(null==n){var s=t.defaultValue,o=t.children;null!=o&&(null!=s&&r("92"),Array.isArray(o)&&(o.length<=1||r("93"),o=o[0]),s=""+o),null==s&&(s=""),a=s}e._wrapperState={initialValue:""+a,listeners:null,onChange:u.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=s.getNodeFromInstance(e),r=i.getValue(t);if(null!=r){var a=""+r;a!==n.value&&(n.value=a),null==t.defaultValue&&(n.defaultValue=a)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=s.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}};function u(e){var t=this._currentElement.props,n=i.executeOnChange(t,e);return o.asap(l,this),n}e.exports=c},function(e,t,n){"use strict";var r=n(7),a=n(90),i=(n(50),n(21),n(26),n(35)),s=n(225),o=(n(22),n(230));n(6);function l(e,t){return t&&(e=e||[]).push(t),e}function c(e,t){a.processChildrenUpdates(e,t)}var u={Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return s.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,a,i){var l;return l=o(t,0),s.updateChildren(e,l,n,r,a,this,this._hostContainerInfo,i,0),l},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var a=[],s=0;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];0;var c=i.mountComponent(l,t,this,this._hostContainerInfo,n,0);l._mountIndex=s++,a.push(c)}return a},updateTextContent:function(e){var t,n=this._renderedChildren;for(var a in s.unmountChildren(n,!1),n)n.hasOwnProperty(a)&&r("118");c(this,[(t=e,{type:"TEXT_CONTENT",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null})])},updateMarkup:function(e){var t,n=this._renderedChildren;for(var a in s.unmountChildren(n,!1),n)n.hasOwnProperty(a)&&r("118");c(this,[(t=e,{type:"SET_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null})])},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,a={},s=[],o=this._reconcilerUpdateChildren(r,e,s,a,t,n);if(o||r){var u,d=null,p=0,h=0,f=0,m=null;for(u in o)if(o.hasOwnProperty(u)){var g=r&&r[u],v=o[u];g===v?(d=l(d,this.moveChild(g,m,p,h)),h=Math.max(g._mountIndex,h),g._mountIndex=p):(g&&(h=Math.max(g._mountIndex,h)),d=l(d,this._mountChildAtIndex(v,s[f],m,p,t,n)),f++),p++,m=i.getHostNode(v)}for(u in a)a.hasOwnProperty(u)&&(d=l(d,this._unmountChild(r[u],a[u])));d&&c(this,d),this._renderedChildren=o}},unmountChildren:function(e){var t=this._renderedChildren;s.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return function(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:i.getHostNode(e),toIndex:n,afterNode:t}}(e,t,n)},createChild:function(e,t,n){return function(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}(n,t,e._mountIndex)},removeChild:function(e,t){return function(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}(e,t)},_mountChildAtIndex:function(e,t,n,r,a,i){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}};e.exports=u},function(e,t,n){"use strict";(function(t){var r=n(35),a=n(137),i=(n(93),n(92)),s=n(141);n(9);function o(e,t,n,r){var i=void 0===e[n];null!=t&&i&&(e[n]=a(t,!0))}void 0!==t&&t.env;var l={instantiateChildren:function(e,t,n,r){if(null==e)return null;var a={};return s(e,o,a),a},updateChildren:function(e,t,n,s,o,l,c,u,d){if(t||e){var p,h;for(p in t)if(t.hasOwnProperty(p)){var f=(h=e&&e[p])&&h._currentElement,m=t[p];if(null!=h&&i(f,m))r.receiveComponent(h,m,o,u),t[p]=h;else{h&&(s[p]=r.getHostNode(h),r.unmountComponent(h,!1));var g=a(m,!0);t[p]=g;var v=r.mountComponent(g,o,l,c,u,d);n.push(v)}}for(p in e)!e.hasOwnProperty(p)||t&&t.hasOwnProperty(p)||(h=e[p],s[p]=r.getHostNode(h),r.unmountComponent(h,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];r.unmountComponent(a,t)}}};e.exports=l}).call(this,n(59))},function(e,t,n){"use strict";var r=n(7),a=n(10),i=n(32),s=n(90),o=n(26),l=n(82),c=n(50),u=(n(21),n(138)),d=n(35),p=n(58),h=(n(6),n(91)),f=n(92),m=(n(9),0),g=1,v=2;function y(e){}function b(e,t){0}y.prototype.render=function(){var e=c.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return b(e,t),t};var E=1,w={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,a){this._context=a,this._mountOrder=E++,this._hostParent=t,this._hostContainerInfo=n;var s,o=this._currentElement.props,l=this._processContext(a),u=this._currentElement.type,d=e.getUpdateQueue(),h=function(e){return!(!e.prototype||!e.prototype.isReactComponent)}(u),f=this._constructComponent(h,o,l,d);h||null!=f&&null!=f.render?!function(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}(u)?this._compositeType=m:this._compositeType=g:(s=f,b(),null===f||!1===f||i.isValidElement(f)||r("105",u.displayName||u.name||"Component"),f=new y(u),this._compositeType=v),f.props=o,f.context=l,f.refs=p,f.updater=d,this._instance=f,c.set(f,this);var w,C=f.state;return void 0===C&&(f.state=C=null),("object"!=typeof C||Array.isArray(C))&&r("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,w=f.unstable_handleError?this.performInitialMountWithErrorHandling(s,t,n,e,a):this.performInitialMount(s,t,n,e,a),f.componentDidMount&&e.getReactMountReady().enqueue(f.componentDidMount,f),w},_constructComponent:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)},_constructComponentWithoutOwner:function(e,t,n,r){var a=this._currentElement.type;return e?new a(t,n,r):a(t,n,r)},performInitialMountWithErrorHandling:function(e,t,n,r,a){var i,s=r.checkpoint();try{i=this.performInitialMount(e,t,n,r,a)}catch(o){r.rollback(s),this._instance.unstable_handleError(o),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),s=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(s),i=this.performInitialMount(e,t,n,r,a)}return i},performInitialMount:function(e,t,n,r,a){var i=this._instance;i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===e&&(e=this._renderValidatedComponent());var s=u.getType(e);this._renderedNodeType=s;var o=this._instantiateReactComponent(e,s!==u.EMPTY);return this._renderedComponent=o,d.mountComponent(o,r,t,n,this._processChildContext(a),0)},getHostNode:function(){return d.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";l.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(d.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,c.remove(t)}},_maskContext:function(e){var t=this._currentElement.type.contextTypes;if(!t)return p;var n={};for(var r in t)n[r]=e[r];return n},_processContext:function(e){return this._maskContext(e)},_processChildContext:function(e){var t,n=this._currentElement.type,i=this._instance;if(i.getChildContext&&(t=i.getChildContext()),t){for(var s in"object"!=typeof n.childContextTypes&&r("107",this.getName()||"ReactCompositeComponent"),t)s in n.childContextTypes||r("108",this.getName()||"ReactCompositeComponent",s);return a({},e,t)}return e},_checkContextTypes:function(e,t,n){0},receiveComponent:function(e,t,n){var r=this._currentElement,a=this._context;this._pendingElement=null,this.updateComponent(t,r,e,a,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?d.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,a,i){var s=this._instance;null==s&&r("136",this.getName()||"ReactCompositeComponent");var o,l=!1;this._context===i?o=s.context:(o=this._processContext(i),l=!0);var c=t.props,u=n.props;t!==n&&(l=!0),l&&s.componentWillReceiveProps&&s.componentWillReceiveProps(u,o);var d=this._processPendingState(u,o),p=!0;this._pendingForceUpdate||(s.shouldComponentUpdate?p=s.shouldComponentUpdate(u,d,o):this._compositeType===g&&(p=!h(c,u)||!h(s.state,d))),this._updateBatchNumber=null,p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,u,d,o,e,i)):(this._currentElement=n,this._context=i,s.props=u,s.state=d,s.context=o)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var s=a({},i?r[0]:n.state),o=i?1:0;o<r.length;o++){var l=r[o];a(s,"function"==typeof l?l.call(n,s,e,t):l)}return s},_performComponentUpdate:function(e,t,n,r,a,i){var s,o,l,c=this._instance,u=Boolean(c.componentDidUpdate);u&&(s=c.props,o=c.state,l=c.context),c.componentWillUpdate&&c.componentWillUpdate(t,n,r),this._currentElement=e,this._context=i,c.props=t,c.state=n,c.context=r,this._updateRenderedComponent(a,i),u&&a.getReactMountReady().enqueue(c.componentDidUpdate.bind(c,s,o,l),c)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,a=this._renderValidatedComponent();if(f(r,a))d.receiveComponent(n,a,e,this._processChildContext(t));else{var i=d.getHostNode(n);d.unmountComponent(n,!1);var s=u.getType(a);this._renderedNodeType=s;var o=this._instantiateReactComponent(a,s!==u.EMPTY);this._renderedComponent=o;var l=d.mountComponent(o,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),0);this._replaceNodeWithMarkup(i,l,n)}},_replaceNodeWithMarkup:function(e,t,n){s.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==v){o.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{o.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||!1===e||i.isValidElement(e)||r("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&r("110");var a=t.getPublicInstance();(n.refs===p?n.refs={}:n.refs)[e]=a},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===v?null:e},_instantiateReactComponent:null};e.exports=w},function(e,t,n){"use strict";var r=1;e.exports=function(){return r++}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=r},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";e.exports=function(e){var t=e&&(r&&e[r]||e[a]);if("function"==typeof t)return t}},function(e,t,n){"use strict";(function(t){n(93);var r=n(141);n(9);function a(e,t,n,r){if(e&&"object"==typeof e){var a=e;0,void 0===a[n]&&null!=t&&(a[n]=t)}}void 0!==t&&t.env,e.exports=function(e,t){if(null==e)return e;var n={};return r(e,a,n),n}}).call(this,n(59))},function(e,t,n){"use strict";var r=n(10),a=n(30),i=n(64),s=(n(21),n(232)),o=[];var l={enqueue:function(){}};function c(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var u={getTransactionWrappers:function(){return o},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};r(c.prototype,i,u),a.addPoolingTo(c),e.exports=c},function(e,t,n){"use strict";var r=n(94);n(9);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&r.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()&&r.enqueueForceUpdate(e)},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()&&r.enqueueReplaceState(e,t)},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()&&r.enqueueSetState(e,t)},e}();e.exports=a},function(e,t,n){"use strict";var r=n(10),a=n(36),i=n(11),s=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(s.prototype,{mountComponent:function(e,t,n,r){var s=n._idCounter++;this._domID=s,this._hostParent=t,this._hostContainerInfo=n;var o=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument.createComment(o);return i.precacheNode(this,l),a(l)}return e.renderToStaticMarkup?"":"\x3c!--"+o+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),e.exports=s},function(e,t,n){"use strict";var r=n(7);n(6);function a(e,t){"_hostNode"in e||r("33"),"_hostNode"in t||r("33");for(var n=0,a=e;a;a=a._hostParent)n++;for(var i=0,s=t;s;s=s._hostParent)i++;for(;n-i>0;)e=e._hostParent,n--;for(;i-n>0;)t=t._hostParent,i--;for(var o=n;o--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}e.exports={isAncestor:function(e,t){"_hostNode"in e||r("35"),"_hostNode"in t||r("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1},getLowestCommonAncestor:a,getParentInstance:function(e){return"_hostNode"in e||r("36"),e._hostParent},traverseTwoPhase:function(e,t,n){for(var r,a=[];e;)a.push(e),e=e._hostParent;for(r=a.length;r-- >0;)t(a[r],"captured",n);for(r=0;r<a.length;r++)t(a[r],"bubbled",n)},traverseEnterLeave:function(e,t,n,r,i){for(var s=e&&t?a(e,t):null,o=[];e&&e!==s;)o.push(e),e=e._hostParent;for(var l,c=[];t&&t!==s;)c.push(t),t=t._hostParent;for(l=0;l<o.length;l++)n(o[l],"bubbled",r);for(l=c.length;l-- >0;)n(c[l],"captured",i)}}},function(e,t,n){"use strict";var r=n(7),a=n(10),i=n(86),s=n(36),o=n(11),l=n(67),c=(n(6),n(95),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});a(c.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++,i=" react-text: "+a+" ";if(this._domID=a,this._hostParent=t,e.useCreateElement){var c=n._ownerDocument,u=c.createComment(i),d=c.createComment(" /react-text "),p=s(c.createDocumentFragment());return s.queueChild(p,s(u)),this._stringText&&s.queueChild(p,s(c.createTextNode(this._stringText))),s.queueChild(p,s(d)),o.precacheNode(this,u),this._closingComment=d,p}var h=l(this._stringText);return e.renderToStaticMarkup?h:"\x3c!--"+i+"--\x3e"+h+"\x3c!-- /react-text --\x3e"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();i.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=o.getNodeFromInstance(this).nextSibling;;){if(null==t&&r("67",this._domID),8===t.nodeType&&" /react-text "===t.nodeValue){this._closingComment=t;break}t=t.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,o.uncacheNode(this)}}),e.exports=c},function(e,t,n){"use strict";var r=n(10),a=n(23),i=n(64),s=n(22),o={initialize:s,close:function(){d.isBatchingUpdates=!1}},l=[{initialize:s,close:a.flushBatchedUpdates.bind(a)},o];function c(){this.reinitializeTransaction()}r(c.prototype,i,{getTransactionWrappers:function(){return l}});var u=new c,d={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,a,i){var s=d.isBatchingUpdates;return d.isBatchingUpdates=!0,s?e(t,n,r,a,i):u.perform(e,null,t,n,r,a,i)}};e.exports=d},function(e,t,n){"use strict";var r=n(10),a=n(143),i=n(17),s=n(30),o=n(11),l=n(23),c=n(83),u=n(238);function d(e){for(;e._hostParent;)e=e._hostParent;var t=o.getNodeFromInstance(e).parentNode;return o.getClosestInstanceFromNode(t)}function p(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function h(e){var t=c(e.nativeEvent),n=o.getClosestInstanceFromNode(t),r=n;do{e.ancestors.push(r),r=r&&d(r)}while(r);for(var a=0;a<e.ancestors.length;a++)n=e.ancestors[a],f._handleTopLevel(e.topLevelType,n,e.nativeEvent,c(e.nativeEvent))}r(p.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),s.addPoolingTo(p,s.twoArgumentPooler);var f={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:i.canUseDOM?window:null,setHandleTopLevel:function(e){f._handleTopLevel=e},setEnabled:function(e){f._enabled=!!e},isEnabled:function(){return f._enabled},trapBubbledEvent:function(e,t,n){return n?a.listen(n,t,f.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?a.capture(n,t,f.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=function(e){e(u(window))}.bind(null,e);a.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(f._enabled){var n=p.getPooled(e,t);try{l.batchedUpdates(h,n)}finally{p.release(n)}}}};e.exports=f},function(e,t,n){"use strict";e.exports=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}},function(e,t,n){"use strict";var r=n(34),a=n(48),i=n(81),s=n(90),o=n(139),l=n(68),c=n(140),u=n(23),d={Component:s.injection,DOMProperty:r.injection,EmptyComponent:o.injection,EventPluginHub:a.injection,EventPluginUtils:i.injection,EventEmitter:l.injection,HostComponent:c.injection,Updates:u.injection};e.exports=d},function(e,t,n){"use strict";var r=n(10),a=n(127),i=n(30),s=n(68),o=n(144),l=(n(21),n(64)),c=n(94),u=[{initialize:o.getSelectionInformation,close:o.restoreSelection},{initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},{initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}}];function d(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=a.getPooled(null),this.useCreateElement=e}var p={getTransactionWrappers:function(){return u},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){a.release(this.reactMountReady),this.reactMountReady=null}};r(d.prototype,l,p),i.addPoolingTo(d),e.exports=d},function(e,t,n){"use strict";var r=n(17),a=n(242),i=n(126);function s(e,t,n,r){return e===n&&t===r}var o=r.canUseDOM&&"selection"in document&&!("getSelection"in window),l={getOffsets:o?function(e){var t=document.selection.createRange(),n=t.text.length,r=t.duplicate();r.moveToElementText(e),r.setEndPoint("EndToStart",t);var a=r.text.length;return{start:a,end:a+n}}:function(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,a=t.focusNode,i=t.focusOffset,o=t.getRangeAt(0);try{o.startContainer.nodeType,o.endContainer.nodeType}catch(e){return null}var l=s(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)?0:o.toString().length,c=o.cloneRange();c.selectNodeContents(e),c.setEnd(o.startContainer,o.startOffset);var u=s(c.startContainer,c.startOffset,c.endContainer,c.endOffset)?0:c.toString().length,d=u+l,p=document.createRange();p.setStart(n,r),p.setEnd(a,i);var h=p.collapsed;return{start:h?d:u,end:h?u:d}},setOffsets:o?function(e,t){var n,r,a=document.selection.createRange().duplicate();void 0===t.end?r=n=t.start:t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),a.moveToElementText(e),a.moveStart("character",n),a.setEndPoint("EndToStart",a),a.moveEnd("character",r-n),a.select()}:function(e,t){if(window.getSelection){var n=window.getSelection(),r=e[i()].length,s=Math.min(t.start,r),o=void 0===t.end?s:Math.min(t.end,r);if(!n.extend&&s>o){var l=o;o=s,s=l}var c=a(e,s),u=a(e,o);if(c&&u){var d=document.createRange();d.setStart(c.node,c.offset),n.removeAllRanges(),s>o?(n.addRange(d),n.extend(u.node,u.offset)):(d.setEnd(u.node,u.offset),n.addRange(d))}}}};e.exports=l},function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function a(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}e.exports=function(e,t){for(var n=r(e),i=0,s=0;n;){if(3===n.nodeType){if(s=i+n.textContent.length,i<=t&&s>=t)return{node:n,offset:t-i};i=s}n=r(a(n))}}},function(e,t,n){"use strict";var r=n(244);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},function(e,t,n){"use strict";var r=n(245);e.exports=function(e){return r(e)&&3==e.nodeType}},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";var r="http://www.w3.org/1999/xlink",a="http://www.w3.org/XML/1998/namespace",i={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},s={Properties:{},DOMAttributeNamespaces:{xlinkActuate:r,xlinkArcrole:r,xlinkHref:r,xlinkRole:r,xlinkShow:r,xlinkTitle:r,xlinkType:r,xmlBase:a,xmlLang:a,xmlSpace:a},DOMAttributeNames:{}};Object.keys(i).forEach(function(e){s.Properties[e]=0,i[e]&&(s.DOMAttributeNames[e]=i[e])}),e.exports=s},function(e,t,n){"use strict";var r=n(47),a=n(17),i=n(11),s=n(144),o=n(27),l=n(145),c=n(130),u=n(91),d=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,p={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},h=null,f=null,m=null,g=!1,v=!1;function y(e,t){if(g||null==h||h!==l())return null;var n=function(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}(h);if(!m||!u(m,n)){m=n;var a=o.getPooled(p.select,f,e,t);return a.type="select",a.target=h,r.accumulateTwoPhaseDispatches(a),a}return null}var b={eventTypes:p,extractEvents:function(e,t,n,r){if(!v)return null;var a=t?i.getNodeFromInstance(t):window;switch(e){case"topFocus":(c(a)||"true"===a.contentEditable)&&(h=a,f=t,m=null);break;case"topBlur":h=null,f=null,m=null;break;case"topMouseDown":g=!0;break;case"topContextMenu":case"topMouseUp":return g=!1,y(n,r);case"topSelectionChange":if(d)break;case"topKeyDown":case"topKeyUp":return y(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(v=!0)}};e.exports=b},function(e,t,n){"use strict";var r=n(7),a=n(143),i=n(47),s=n(11),o=n(249),l=n(250),c=n(27),u=n(251),d=n(252),p=n(65),h=n(254),f=n(255),m=n(256),g=n(49),v=n(257),y=n(22),b=n(96),E=(n(6),{}),w={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,a={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};E[e]=a,w[r]=a});var C={};function _(e){return"."+e._rootNodeID}function S(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var D={eventTypes:E,extractEvents:function(e,t,n,a){var s,y=w[e];if(!y)return null;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":s=c;break;case"topKeyPress":if(0===b(n))return null;case"topKeyDown":case"topKeyUp":s=d;break;case"topBlur":case"topFocus":s=u;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":s=p;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":s=h;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":s=f;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":s=o;break;case"topTransitionEnd":s=m;break;case"topScroll":s=g;break;case"topWheel":s=v;break;case"topCopy":case"topCut":case"topPaste":s=l}s||r("86",e);var E=s.getPooled(y,t,n,a);return i.accumulateTwoPhaseDispatches(E),E},didPutListener:function(e,t,n){if("onClick"===t&&!S(e._tag)){var r=_(e),i=s.getNodeFromInstance(e);C[r]||(C[r]=a.listen(i,"click",y))}},willDeleteListener:function(e,t){if("onClick"===t&&!S(e._tag)){var n=_(e);C[n].remove(),delete C[n]}}};e.exports=D},function(e,t,n){"use strict";var r=n(27);function a(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(a,{animationName:null,elapsedTime:null,pseudoElement:null}),e.exports=a},function(e,t,n){"use strict";var r=n(27),a={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};function i(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(i,a),e.exports=i},function(e,t,n){"use strict";var r=n(49);function a(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(a,{relatedTarget:null}),e.exports=a},function(e,t,n){"use strict";var r=n(49),a=n(96),i={key:n(253),location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:n(85),charCode:function(e){return"keypress"===e.type?a(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?a(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};function s(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(s,i),e.exports=s},function(e,t,n){"use strict";var r=n(96),a={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=function(e){if(e.key){var t=a[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?i[e.keyCode]||"Unidentified":""}},function(e,t,n){"use strict";var r=n(65);function a(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(a,{dataTransfer:null}),e.exports=a},function(e,t,n){"use strict";var r=n(49),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:n(85)};function i(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(i,a),e.exports=i},function(e,t,n){"use strict";var r=n(27);function a(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(a,{propertyName:null,elapsedTime:null,pseudoElement:null}),e.exports=a},function(e,t,n){"use strict";var r=n(65);function a(e,t,n,a){return r.call(this,e,t,n,a)}r.augmentClass(a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),e.exports=a},function(e,t,n){"use strict";n(95);var r=9;e.exports=function(e,t){return{_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===r?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null}}},function(e,t,n){"use strict";e.exports={useCreateElement:!0,useFiber:!1}},function(e,t,n){"use strict";var r=n(261),a=/\/?>/,i=/^<\!\-\-/,s={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return i.test(e)?e:e.replace(a," "+s.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(s.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),r(e)===n}};e.exports=s},function(e,t,n){"use strict";var r=65521;e.exports=function(e){for(var t=1,n=0,a=0,i=e.length,s=-4&i;a<s;){for(var o=Math.min(a+4096,s);a<o;a+=4)n+=(t+=e.charCodeAt(a))+(t+=e.charCodeAt(a+1))+(t+=e.charCodeAt(a+2))+(t+=e.charCodeAt(a+3));t%=r,n%=r}for(;a<i;a++)n+=t+=e.charCodeAt(a);return(t%=r)|(n%=r)<<16}},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";var r=n(7),a=(n(26),n(11)),i=n(50),s=n(147);n(6),n(9);e.exports=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=i.get(e);if(t)return(t=s(t))?a.getNodeFromInstance(t):null;"function"==typeof e.render?r("44"):r("45",Object.keys(e))}},function(e,t,n){"use strict";var r=n(146);e.exports=r.renderSubtreeIntoContainer},function(e,t,n){"use strict";var r=n(122);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";t.__esModule=!0;var r,a=n(71);(r=a)&&r.__esModule;t.default=function(e,t,n){var r=e(t,n);e.length<2&&n(r)}},function(e,t,n){"use strict";t.__esModule=!0;var r,a=n(598),i=n(72),s=n(266),o=(r=s)&&r.__esModule?r:{default:r},l=n(154),c=n(111);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getCurrentLocation,n=e.getUserConfirmation,r=e.pushLocation,s=e.replaceLocation,u=e.go,d=e.keyLength,p=void 0,h=void 0,f=[],m=[],g=[],v=function(e){var t=h&&h.action===l.POP?g.indexOf(h.key):p?g.indexOf(p.key):-1;(p=e).action===l.PUSH?g=[].concat(g.slice(0,t+1),[p.key]):p.action===l.REPLACE&&(g[t]=p.key),m.forEach(function(e){return e(p)})},y=function(e){var t,d;p&&(0,c.locationsAreEqual)(p,e)||h&&(0,c.locationsAreEqual)(h,e)||(h=e,t=e,d=function(t){if(h===e)if(h=null,t){if(e.action===l.PUSH){var n=(0,i.createPath)(p);(0,i.createPath)(e)===n&&(0,c.statesAreEqual)(p.state,e.state)&&(e.action=l.REPLACE)}e.action===l.POP?v(e):e.action===l.PUSH?!1!==r(e)&&v(e):e.action===l.REPLACE&&!1!==s(e)&&v(e)}else if(p&&e.action===l.POP){var a=g.indexOf(p.key),o=g.indexOf(e.key);-1!==a&&-1!==o&&u(a-o)}},(0,a.loopAsync)(f.length,function(e,n,r){(0,o.default)(f[e],t,function(e){return null!=e?r(e):n()})},function(e){n&&"string"==typeof e?n(e,function(e){return d(!1!==e)}):d(!1!==e)}))},b=function(){return Math.random().toString(36).substr(2,d||6)},E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b();return(0,c.createLocation)(e,t,n)};return{getCurrentLocation:t,listenBefore:function(e){return f.push(e),function(){return f=f.filter(function(t){return t!==e})}},listen:function(e){return m.push(e),function(){return m=m.filter(function(t){return t!==e})}},transitionTo:y,push:function(e){return y(E(e,l.PUSH))},replace:function(e){return y(E(e,l.REPLACE))},go:u,goBack:function(){return u(-1)},goForward:function(){return u(1)},createKey:b,createPath:i.createPath,createHref:function(e){return(0,i.createPath)(e)},createLocation:E}}},function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";t.__esModule=!0,t.go=t.replaceLocation=t.pushLocation=t.startListener=t.getUserConfirmation=t.getCurrentLocation=void 0;var r=n(111),a=n(156),i=n(301),s=n(72),o=n(268),l=o.canUseDOM&&!(0,a.supportsPopstateOnHashchange)(),c=function(e){var t=e&&e.key;return(0,r.createLocation)({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:t?(0,i.readState)(t):void 0},void 0,t)},u=t.getCurrentLocation=function(){var e=void 0;try{e=window.history.state||{}}catch(t){e={}}return c(e)},d=(t.getUserConfirmation=function(e,t){return t(window.confirm(e))},t.startListener=function(e){var t=function(t){(0,a.isExtraneousPopstateEvent)(t)||e(c(t.state))};(0,a.addEventListener)(window,"popstate",t);var n=function(){return e(u())};return l&&(0,a.addEventListener)(window,"hashchange",n),function(){(0,a.removeEventListener)(window,"popstate",t),l&&(0,a.removeEventListener)(window,"hashchange",n)}},function(e,t){var n=e.state,r=e.key;void 0!==n&&(0,i.saveState)(r,n),t({key:r},(0,s.createPath)(e))});t.pushLocation=function(e){return d(e,function(e,t){return window.history.pushState(e,null,t)})},t.replaceLocation=function(e){return d(e,function(e,t){return window.history.replaceState(e,null,t)})},t.go=function(e){e&&window.history.go(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(74);function a(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var a=0,i=t.length-1;a<t.length;i=a++){var s=t[a][0],o=t[a][1],l=t[i][0],c=t[i][1];if(e[1]*(s-l)+o*(l-e[0])+c*(e[0]-s)==0&&(s-e[0])*(l-e[0])<=0&&(o-e[1])*(c-e[1])<=0)return!n;o>e[1]!=c>e[1]&&e[0]<(l-s)*(e[1]-o)/(c-o)+s&&(r=!r)}return r}t.default=function(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=r.getCoord(e),s=r.getGeom(t),o=s.type,l=t.bbox,c=s.coordinates;if(l&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(i,l))return!1;"Polygon"===o&&(c=[c]);for(var u=!1,d=0;d<c.length&&!u;d++)if(a(i,c[d][0],n.ignoreBoundary)){for(var p=!1,h=1;h<c[d].length&&!p;)a(i,c[d][h],!n.ignoreBoundary)&&(p=!0),h++;p||(u=!0)}return u}},function(e,t){(function(t){e.exports=t}).call(this,{})},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e,r){var a,i=n(583);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=Object(i.a)(a);t.a=s}).call(this,n(51),n(595)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOnEnter=t.connectedReduxRedirect=t.connectedRouterRedirect=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(603)),i=o(n(610)),s=o(n(14));function o(e){return e&&e.__esModule?e:{default:e}}var l=(0,i.default)({locationHelperBuilder:a.default,getRouterRedirect:function(e){return e.router.replace}}),c=l.connectedRouterRedirect,u=l.connectedReduxRedirect;t.connectedRouterRedirect=c,t.connectedReduxRedirect=u;var d={allowRedirectBack:!0,authenticatingSelector:function(){return!1},redirectQueryParamName:"redirect"};t.createOnEnter=function(e){var t=r({},d,e),n=t.authenticatedSelector,i=t.authenticatingSelector,o=t.redirectPath,l=t.allowRedirectBack,c=t.redirectQueryParamName,u=void 0;"string"==typeof o?u=function(){return o}:"function"==typeof o?u=o:(0,s.default)(!1,"redirectPath must be either a string or a function");var p=void 0;return"boolean"==typeof l?p=function(){return l}:"function"==typeof l?p=l:(0,s.default)(!1,"allowRedirectBack must be either a boolean or a function"),function(e,t,r){var s=(0,a.default)({redirectQueryParamName:c}).createRedirectLoc,o=n(e.getState(),t),l=i(e.getState(),t);if(!o&&!l){var d=u(e.getState(),t);r(s(p(t,d))(t,d))}}}},function(e,t,n){"use strict";t.__esModule=!0,t.readState=t.saveState=void 0;var r,a=n(71);(r=a)&&r.__esModule;var i={QuotaExceededError:!0,QUOTA_EXCEEDED_ERR:!0},s={SecurityError:!0},o=function(e){return"@@History/"+e};t.saveState=function(e,t){if(window.sessionStorage)try{null==t?window.sessionStorage.removeItem(o(e)):window.sessionStorage.setItem(o(e),JSON.stringify(t))}catch(e){if(s[e.name])return;if(i[e.name]&&0===window.sessionStorage.length)return;throw e}},t.readState=function(e){var t=void 0;try{t=window.sessionStorage.getItem(o(e))}catch(e){if(s[e.name])return}if(t)try{return JSON.parse(t)}catch(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.routerReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,s=t.payload;if(n===a)return r({},e,{locationBeforeTransitions:s});return e};var a=t.LOCATION_CHANGE="@@router/LOCATION_CHANGE",i={locationBeforeTransitions:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.CALL_HISTORY_METHOD="@@router/CALL_HISTORY_METHOD";function a(e){return function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return{type:r,payload:{method:e,args:n}}}}var i=t.push=a("push"),s=t.replace=a("replace"),o=t.go=a("go"),l=t.goBack=a("goBack"),c=t.goForward=a("goForward");t.routerActions={push:i,replace:s,go:o,goBack:l,goForward:c}},function(e,t,n){var r,a,i,s,o,l,c=function(e,t){return function(){return e.apply(t,arguments)}};l=n(52),a=n(112),o=n(37),s=n(37).processFind,i=n(73).compileSort,e.exports=function(){function e(e,t){this.collections={},this.options=l.defaults(e,{safety:"clone"}),t&&t(this)}return e.prototype.addCollection=function(e,t,n){var a;if(a=new r(e,this.options),this[e]=a,this.collections[e]=a,null!=t)return t()},e.prototype.removeCollection=function(e,t,n){if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.getCollectionNames=function(){return l.keys(this.collections)},e}(),r=function(){function e(e,t){this._applySafety=c(this._applySafety,this),this.name=e,this.items={},this.upserts={},this.removes={},this.options=t||{}}return e.prototype.find=function(e,t){return{fetch:(n=this,function(r,a){return n._findFetch(e,t,r,a)})};var n},e.prototype.findOne=function(e,t,n,r){var a,i;return l.isFunction(t)&&(t=(a=[{},t,n])[0],n=a[1],r=a[2]),this.find(e,t).fetch((i=this,function(e){if(null!=n)return n(i._applySafety(e.length>0?e[0]:null))}),r)},e.prototype._findFetch=function(e,t,n,r){return setTimeout((a=this,function(){var r;if(r=s(l.values(a.items),e,t),null!=n)return n(a._applySafety(r))}),0);var a},e.prototype._applySafety=function(e){if(!e)return e;if(l.isArray(e))return l.map(e,this._applySafety);if("clone"===this.options.safety||!this.options.safety)return JSON.parse(JSON.stringify(e));if("freeze"===this.options.safety)return Object.freeze(e),e;throw new Error("Unsupported safety "+this.options.safety)},e.prototype.upsert=function(e,t,n,r){var a,i,s,c,u;for(i=(u=o.regularizeUpsert(e,t,n,r))[0],n=u[1],r=u[2],s=0,c=(i=JSON.parse(JSON.stringify(i))).length;s<c;s++)void 0===(a=i[s]).base&&(this.upserts[a.doc._id]?a.base=this.upserts[a.doc._id].base:a.base=this.items[a.doc._id]||null),this.items[a.doc._id]=a.doc,this.upserts[a.doc._id]=a;if(l.isArray(e)){if(n)return n(this._applySafety(l.pluck(i,"doc")))}else if(n)return n(this._applySafety(l.pluck(i,"doc")[0]))},e.prototype.remove=function(e,t,n){var r;if(!l.isObject(e))return l.has(this.items,e)?(this.removes[e]=this.items[e],delete this.items[e],delete this.upserts[e]):this.removes[e]={_id:e},null!=t?t():void 0;this.find(e).fetch((r=this,function(e){return a.each(e,function(e,t){return r.remove(e._id,function(){return t()},t)},function(){return t()})}),n)},e.prototype.cache=function(e,t,n,r,a){var s,o,c,u,d,p;for(u=0,d=e.length;u<d;u++)s=e[u],this.cacheOne(s);return o=l.object(l.pluck(e,"_id"),e),n.sort&&(c=i(n.sort)),this.find(t,n).fetch((p=this,function(t){var a,i,s;for(i=0,s=t.length;i<s;i++)if(a=t[i],!o[a._id]&&!l.has(p.upserts,a._id)){if(n.limit&&e.length===n.limit){if(n.sort&&c(a,l.last(e))>=0)continue;if(!n.sort)continue}delete p.items[a._id]}if(null!=r)return r()}),a)},e.prototype.pendingUpserts=function(e){return e(l.values(this.upserts))},e.prototype.pendingRemoves=function(e){return e(l.pluck(this.removes,"_id"))},e.prototype.resolveUpserts=function(e,t){var n,r,a,i;for(a=0,i=e.length;a<i;a++)n=(r=e[a]).doc._id,this.upserts[n]&&(l.isEqual(r.doc,this.upserts[n].doc)?delete this.upserts[n]:this.upserts[n].base=r.doc);if(null!=t)return t()},e.prototype.resolveRemove=function(e,t){if(delete this.removes[e],null!=t)return t()},e.prototype.seed=function(e,t){var n,r,a;for(l.isArray(e)||(e=[e]),r=0,a=e.length;r<a;r++)n=e[r],l.has(this.items,n._id)||l.has(this.removes,n._id)||(this.items[n._id]=n);if(null!=t)return t()},e.prototype.cacheOne=function(e,t,n){return this.cacheList([e],t,n)},e.prototype.cacheList=function(e,t){var n,r,a,i;for(a=0,i=e.length;a<i;a++)n=e[a],l.has(this.upserts,n._id)||l.has(this.removes,n._id)||(r=this.items[n._id])&&n._rev&&r._rev&&!(n._rev>r._rev)||(this.items[n._id]=n);if(null!=t)return t()},e.prototype.uncache=function(e,t,n){var r,a,i;if(r=o.compileDocumentSelector(e),a=l.filter(l.values(this.items),(i=this,function(e){return null!=i.upserts[e._id]||!r(e)})),this.items=l.object(l.pluck(a,"_id"),a),null!=t)return t()},e.prototype.uncacheList=function(e,t,n){var r,a,i;if(r=l.indexBy(e),a=l.filter(l.values(this.items),(i=this,function(e){return null!=i.upserts[e._id]||!r[e._id]})),this.items=l.object(l.pluck(a,"_id"),a),null!=t)return t()},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(157);t.default=function(e){var t=[1/0,1/0,-1/0,-1/0];return r.coordEach(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}},function(e,t,n){var r,a,i,s,o,l,c;c=n(52),i=n(112),a=n(631),l=n(37),o=n(37).processFind,s=n(73).compileSort,e.exports=function(){function e(e,t,n){var r;this.collections={};try{this.store=new a({dbVersion:1,storeName:"minimongo_"+e.namespace,keyPath:["col","doc._id"],autoIncrement:!1,onStoreReady:(r=this,function(){if(t)return t(r)}),onError:n,indexes:[{name:"col",keyPath:"col",unique:!1,multiEntry:!1},{name:"col-state",keyPath:["col","state"],unique:!1,multiEntry:!1}]})}catch(e){return void(n&&n(e))}}return e.prototype.addCollection=function(e,t,n){var a;if(a=new r(e,this.store),this[e]=a,this.collections[e]=a,t)return t()},e.prototype.removeCollection=function(e,t,n){return delete this[e],delete this.collections[e],this.store.query((r=this,function(e){var a;return(a=c.map(e,function(e){return[e.col,e.doc._id]})).length>0?r.store.removeBatch(a,function(){if(null!=t)return t()},n):null!=t?t():void 0}),{index:"col",keyRange:this.store.makeKeyRange({only:e}),onError:n});var r},e.prototype.getCollectionNames=function(){return c.keys(this.collections)},e}(),r=function(){function e(e,t){this.name=e,this.store=t}return e.prototype.find=function(e,t){return{fetch:(n=this,function(r,a){return n._findFetch(e,t,r,a)})};var n},e.prototype.findOne=function(e,t,n,r){var a;return c.isFunction(t)&&(t=(a=[{},t,n])[0],n=a[1],r=a[2]),this.find(e,t).fetch(function(e){if(null!=n)return n(e.length>0?e[0]:null)},r)},e.prototype._findFetch=function(e,t,n,r){return this.store.query(function(r){if(r=c.filter(r,function(e){return"removed"!==e.state}),null!=n)return n(o(c.pluck(r,"doc"),e,t))},{index:"col",keyRange:this.store.makeKeyRange({only:this.name}),onError:r})},e.prototype.upsert=function(e,t,n,r){var a,i,s,o;return s=l.regularizeUpsert(e,t,n,r),a=s[0],n=s[1],r=s[2],i=c.map(a,(o=this,function(e){return[o.name,e.doc._id]})),this.store.getBatch(i,function(t){return function(i){var s;return s=c.map(a,function(e,n){var r;return r=void 0!==e.base?e.base:i[n]&&i[n].doc&&"cached"===i[n].state?i[n].doc:i[n]&&i[n].doc&&"upserted"===i[n].state?i[n].base:null,{col:t.name,state:"upserted",doc:e.doc,base:r}}),t.store.putBatch(s,function(){if(n)return n(e)},r)}}(this),r)},e.prototype.remove=function(e,t,n){var r;if(!c.isObject(e))return this.store.get([this.name,e],function(r){return function(a){return null==a&&(a={col:r.name,doc:{_id:e}}),a.state="removed",r.store.put(a,function(){if(t)return t(e)},n)}}(this));this.find(e).fetch((r=this,function(e){return i.each(e,function(e,t){return r.remove(e._id,function(){return t()},t)},function(){return t()})}),n)},e.prototype.cache=function(e,t,n,r,a){var i,o,l,u;return u=this,l=function(){var i,o;return i=c.object(c.pluck(e,"_id"),e),n.sort&&(o=s(n.sort)),u.find(t,n).fetch(function(t){var s,l;if(l=[],0!==(s=c.map(t,function(e){return[u.name,e._id]})).length)return u.store.getBatch(s,function(s){var d,p,h,f,m;for(d=f=0,m=s.length;0<=m?f<m:f>m;d=0<=m?++f:--f)if(p=s[d],h=t[d],!i[h._id]&&p&&"cached"===p.state){if(n.limit&&e.length===n.limit){if(n.sort&&o(h,c.last(e))>=0)continue;if(!n.sort)continue}l.push([u.name,h._id])}return l.length>0?u.store.removeBatch(l,function(){if(null!=r)return r()},a):null!=r?r():void 0},a);null!=r&&r()},a)},0===e.length?l():(i=c.map(e,function(e){return function(t){return[e.name,t._id]}}(this)),o=[],this.store.getBatch(i,function(t){return function(n){var r,i,s,c,u;for(i=c=0,u=n.length;0<=u?c<u:c>u;i=0<=u?++c:--c)s=n[i],r=e[i],null!=s&&"cached"!==s.state||s&&r._rev&&s.doc._rev&&!(r._rev>s.doc._rev)||o.push({col:t.name,state:"cached",doc:r});return o.length>0?t.store.putBatch(o,l,a):l()}}(this),a))},e.prototype.pendingUpserts=function(e,t){return this.store.query(function(t){var n;if(n=c.map(t,function(e){return{doc:e.doc,base:e.base||null}}),null!=e)return e(n)},{index:"col-state",keyRange:this.store.makeKeyRange({only:[this.name,"upserted"]}),onError:t})},e.prototype.pendingRemoves=function(e,t){return this.store.query(function(t){if(null!=e)return e(c.pluck(c.pluck(t,"doc"),"_id"))},{index:"col-state",keyRange:this.store.makeKeyRange({only:[this.name,"removed"]}),onError:t})},e.prototype.resolveUpserts=function(e,t,n){var r,a;return r=c.map(e,(a=this,function(e){return[a.name,e.doc._id]})),this.store.getBatch(r,function(r){return function(a){var i,s,o,l,u;for(s=[],i=l=0,u=e.length;0<=u?l<u:l>u;i=0<=u?++l:--l)(o=a[i])&&"upserted"===o.state&&(c.isEqual(o.doc,e[i].doc)?(o.state="cached",s.push(o)):(o.base=e[i].doc,s.push(o)));return s.length>0?r.store.putBatch(s,function(){if(t)return t()},n):t?t():void 0}}(this),n)},e.prototype.resolveRemove=function(e,t,n){return this.store.get([this.name,e],(r=this,function(a){if(a)return"removed"===a.state?r.store.remove([r.name,e],function(){if(null!=t)return t()},n):void 0;null!=t&&t()}));var r},e.prototype.seed=function(e,t,n){var r,a,i;return c.isArray(e)||(e=[e]),r=c.map(e,(i=this,function(e){return[i.name,e._id]})),a=[],this.store.getBatch(r,function(r){return function(i){var s,o,l,c,u;for(o=c=0,u=i.length;0<=u?c<u:c>u;o=0<=u?++c:--c)l=i[o],s=e[o],null==l&&a.push({col:r.name,state:"cached",doc:s});return a.length>0?r.store.putBatch(a,function(){if(null!=t)return t()},n):null!=t?t():void 0}}(this),n)},e.prototype.cacheOne=function(e,t,n){return this.cacheList([e],t,n)},e.prototype.cacheList=function(e,t,n){var r,a,i;return r=c.map(e,(i=this,function(e){return[i.name,e._id]})),a=[],this.store.getBatch(r,function(r){return function(i){var s,o,l,c,u;for(o=c=0,u=i.length;0<=u?c<u:c>u;o=0<=u?++c:--c)l=i[o],s=e[o],l&&s._rev&&l.doc._rev&&s._rev<=l.doc._rev||(null==l&&(l={col:r.name,state:"cached",doc:s}),"cached"===l.state&&(l.doc=s,a.push(l)));return a.length>0?r.store.putBatch(a,function(){if(null!=t)return t()},n):null!=t?t():void 0}}(this),n)},e.prototype.uncache=function(e,t,n){var r,a;return r=l.compileDocumentSelector(e),this.store.query((a=this,function(e){var i;return e=c.filter(e,function(e){return"cached"===e.state&&r(e.doc)}),(i=c.map(e,function(e){return[a.name,e.doc._id]})).length>0?a.store.removeBatch(i,function(){if(null!=t)return t()},n):null!=t?t():void 0}),{index:"col",keyRange:this.store.makeKeyRange({only:this.name}),onError:n})},e.prototype.uncacheList=function(e,t,n){var r,a;return r=c.indexBy(e),n=n||function(){},this.store.query((a=this,function(e){var i;return e=c.filter(e,function(e){return"cached"===e.state&&r[e.doc._id]}),(i=c.map(e,function(e){return[a.name,e.doc._id]})).length>0?a.store.removeBatch(i,function(){if(null!=t)return t()},n):null!=t?t():void 0}),{index:"col",keyRange:this.store.makeKeyRange({only:this.name}),onError:n})},e}()},function(e,t,n){var r,a,i,s,o,l,c;c=n(52),a=n(112),l=n(37),o=n(37).processFind,i=n(73).compileSort,s=function(){},e.exports=function(){function e(e,t,n){var r,a,i,o;this.collections={};try{if(this.db=window.openDatabase("minimongo_"+e.namespace,"","Minimongo:"+e.namespace,5242880),!this.db)return n(new Error("Failed to create database"))}catch(e){return void(n&&n(e))}return a=function(e){return e.executeSql("CREATE TABLE docs (\n  col TEXT NOT NULL,\n  id TEXT NOT NULL,\n  state TEXT NOT NULL,\n  doc TEXT,\n  PRIMARY KEY (col, id));",[],s,function(e,t){return n(t)})},i=function(e){return e.executeSql("ALTER TABLE docs ADD COLUMN base TEXT;",[],s,function(e,t){return n(t)})},o=this,r=function(){return"1.0"===o.db.version?o.db.changeVersion("1.0","2.0",i,n,function(){if(t)return t(o)}):"2.0"!==o.db.version?n("Unknown db version "+o.db.version):t?t(o):void 0},this.db.version?r():this.db.changeVersion("","1.0",a,n,r),this.db}return e.prototype.addCollection=function(e,t,n){var a;if(a=new r(e,this.db),this[e]=a,this.collections[e]=a,t)return t()},e.prototype.removeCollection=function(e,t,n){return delete this[e],delete this.collections[e],this.db.transaction(function(r){return r.executeSql("DELETE FROM docs WHERE col = ?",[e],t,function(e,t){return n(t)})},n)},e.prototype.getCollectionNames=function(){return c.keys(this.collections)},e}(),r=function(){function e(e,t){this.name=e,this.db=t}return e.prototype.find=function(e,t){return{fetch:(n=this,function(r,a){return n._findFetch(e,t,r,a)})};var n},e.prototype.findOne=function(e,t,n,r){var a;return c.isFunction(t)&&(t=(a=[{},t,n])[0],n=a[1],r=a[2]),this.find(e,t).fetch(function(e){if(null!=n)return n(e.length>0?e[0]:null)},r)},e.prototype._findFetch=function(e,t,n,r){return r=r||function(){},this.db.readTransaction((a=this,function(i){return i.executeSql("SELECT * FROM docs WHERE col = ?",[a.name],function(r,a){var i,s,l,c,u;for(i=[],s=c=0,u=a.rows.length;0<=u?c<u:c>u;s=0<=u?++c:--c)"removed"!==(l=a.rows.item(s)).state&&i.push(JSON.parse(l.doc));if(null!=n)return n(o(i,e,t))},function(e,t){return r(t)})}),r);var a},e.prototype.upsert=function(e,t,n,r){var i,o,u;return o=l.regularizeUpsert(e,t,n,r),i=o[0],n=o[1],r=(r=o[2])||function(){},this.db.transaction((u=this,function(e){var n;return n=c.map(i,function(e){return e.doc._id}),t={},a.eachSeries(n,function(n,a){return e.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[u.name,n],function(n,r){var i;return e=n,r.rows.length>0&&("upserted"===(i=r.rows.item(0)).state?t[i.id]=i.base?JSON.parse(i.base):null:"cached"===i.state&&(t[i.id]=JSON.parse(i.doc))),a()},function(e,t){return r(t)})},function(){var n,a,o,l,c,d;for(d=[],l=0,c=i.length;l<c;l++)a=(o=i[l]).doc._id,n=void 0!==o.base?o.base:t[a]?t[a]:null,d.push(e.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc, base) VALUES (?, ?, ?, ?, ?)",[u.name,o.doc._id,"upserted",JSON.stringify(o.doc),JSON.stringify(n)],s,function(e,t){return r(t)}));return d})}),r,function(){if(n)return n(e)})},e.prototype.remove=function(e,t,n){var r;if(!c.isObject(e))return n=n||function(){},this.db.transaction(function(r){return function(a){return a.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,e],function(a,i){return i.rows.length>0?a.executeSql('UPDATE docs SET state="removed" WHERE col = ? AND id = ?',[r.name,e],function(){if(t)return t(e)},function(e,t){return n(t)}):a.executeSql("INSERT INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,e,"removed",JSON.stringify({_id:e})],function(){if(t)return t(e)},function(e,t){return n(t)})},function(e,t){return n(t)})}}(this),n);this.find(e).fetch((r=this,function(e){return a.each(e,function(e,t){return r.remove(e._id,function(){return t()},t)},function(){return t()})}),n)},e.prototype.cache=function(e,t,n,r,s){return s=s||function(){},this.db.transaction((o=this,function(l){return a.eachSeries(e,function(e,t){return l.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[o.name,e._id],function(n,r){var a;return 0!==r.rows.length&&"cached"!==r.rows.item(0).state||(a=r.rows.length>0?JSON.parse(r.rows.item(0).doc):null)&&e._rev&&a._rev&&!(e._rev>a._rev)?t():n.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[o.name,e._id,"cached",JSON.stringify(e)],function(){return t()},function(e,t){return s(t)})},function(e,t){return s(t)})},function(l){var u,d;if(!l)return u=c.object(c.pluck(e,"_id"),e),n.sort&&(d=i(n.sort)),o.find(t,n).fetch(function(t){return o.db.transaction(function(i){return a.eachSeries(t,function(t,r){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[o.name,t._id],function(a,i){if(!u[t._id]&&i.rows.length>0&&"cached"===i.rows.item(0).state){if(n.limit&&e.length===n.limit){if(n.sort&&d(t,c.last(e))>=0)return r();if(!n.sort)return r()}return a.executeSql("DELETE FROM docs WHERE col = ? AND id = ?",[o.name,t._id],function(){return r()},function(e,t){return s(t)})}return r()},function(e,t){return s(t)})},function(e){if(null==e)return null!=r?r():void 0;null!=s&&s(e)})},s)},s);s&&s(l)})}),s);var o},e.prototype.pendingUpserts=function(e,t){return t=t||function(){},this.db.readTransaction((n=this,function(r){return r.executeSql("SELECT * FROM docs WHERE col = ? AND state = ?",[n.name,"upserted"],function(t,n){var r,a,i,s,o;for(r=[],a=s=0,o=n.rows.length;0<=o?s<o:s>o;a=0<=o?++s:--s)i=n.rows.item(a),r.push({doc:JSON.parse(i.doc),base:i.base?JSON.parse(i.base):null});if(null!=e)return e(r)},function(e,n){return t(n)})}),t);var n},e.prototype.pendingRemoves=function(e,t){return t=t||function(){},this.db.readTransaction((n=this,function(r){return r.executeSql("SELECT * FROM docs WHERE col = ? AND state = ?",[n.name,"removed"],function(t,n){var r,a,i,s,o;for(r=[],a=s=0,o=n.rows.length;0<=o?s<o:s>o;a=0<=o?++s:--s)i=n.rows.item(a),r.push(JSON.parse(i.doc)._id);if(null!=e)return e(r)},function(e,n){return t(n)})}),t);var n},e.prototype.resolveUpserts=function(e,t,n){return n=n||function(){},this.db.transaction((r=this,function(i){return a.eachSeries(e,function(e,t){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,e.doc._id],function(a,i){return i.rows.length>0&&"upserted"===i.rows.item(0).state?c.isEqual(JSON.parse(i.rows.item(0).doc),e.doc)?(a.executeSql('UPDATE docs SET state="cached" WHERE col = ? AND id = ?',[r.name,e.doc._id],s,function(e,t){return n(t)}),t()):(a.executeSql("UPDATE docs SET base=? WHERE col = ? AND id = ?",[JSON.stringify(e.doc),r.name,e.doc._id],s,function(e,t){return n(t)}),t()):t()},function(e,t){return n(t)})},function(e){return e?n(e):t?t():void 0})}),n);var r},e.prototype.resolveRemove=function(e,t,n){return n=n||function(){},this.db.transaction((r=this,function(a){return a.executeSql('DELETE FROM docs WHERE state="removed" AND col = ? AND id = ?',[r.name,e],function(){if(t)return t(e)},function(e,t){return n(t)})}),n);var r},e.prototype.seed=function(e,t,n){return c.isArray(e)||(e=[e]),n=n||function(){},this.db.transaction((r=this,function(i){return a.eachSeries(e,function(e,t){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,e._id],function(a,i){return 0===i.rows.length?a.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,e._id,"cached",JSON.stringify(e)],function(){return t()},function(e,t){return n(t)}):t()},function(e,t){return n(t)})},function(e){if(e){if(n)return n(e)}else if(t)return t()})}),n);var r},e.prototype.cacheOne=function(e,t,n){return this.cacheList([e],t,n)},e.prototype.cacheList=function(e,t,n){return n=n||function(){},this.db.transaction((r=this,function(i){return a.eachSeries(e,function(e,t){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,e._id],function(n,a){var i;return 0!==a.rows.length&&"cached"!==a.rows.item(0).state||(i=a.rows.length>0?JSON.parse(a.rows.item(0).doc):null)&&e._rev&&i._rev&&!(e._rev>i._rev)?t():n.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,e._id,"cached",JSON.stringify(e)],function(){return t()},function(e,n){return t(n)})},function(e,n){return t(n)})},function(r){if(r){if(n)return n(r)}else if(t)return t(e)})}),n);var r},e.prototype.uncache=function(e,t,n){var r,i;return r=l.compileDocumentSelector(e),n=n||function(){},this.db.transaction((i=this,function(e){return e.executeSql("SELECT * FROM docs WHERE col = ? AND state = ?",[i.name,"cached"],function(e,s){var o,l,c,u,d,p;for(u=[],l=d=0,p=s.rows.length;0<=p?d<p:d>p;l=0<=p?++d:--d)c=s.rows.item(l),o=JSON.parse(c.doc),r(o)&&u.push(o._id);return a.eachSeries(u,function(t,r){return e.executeSql('DELETE FROM docs WHERE state="cached" AND col = ? AND id = ?',[i.name,t],function(){return r()},function(e,t){return n(t)})},function(e){if(e){if(n)return n(e)}else if(t)return t()})},function(e,t){return n(t)})}),n)},e.prototype.uncacheList=function(e,t,n){return n=n||function(){},this.db.transaction((r=this,function(i){return a.eachSeries(e,function(e,t){return i.executeSql('DELETE FROM docs WHERE state="cached" AND col = ? AND id = ?',[r.name,e],function(){return t()},function(e,t){return n(t)})},function(e){if(e){if(n)return n(e)}else if(t)return t()})}),n);var r},e}()},function(e,t,n){var r,a,i,s,o,l;l=n(52),a=n(112),o=n(37),s=n(37).processFind,i=n(73).compileSort,e.exports=function(){function e(e,t){this.collections={},e&&e.namespace&&window.localStorage&&(this.namespace=e.namespace),t&&t(this)}return e.prototype.addCollection=function(e,t,n){var a,i;if(this.namespace&&(i=this.namespace+"."+e),a=new r(e,i),this[e]=a,this.collections[e]=a,null!=t)return t()},e.prototype.removeCollection=function(e,t,n){var r,a,i,s,o,l,c,u;if(this.namespace&&window.localStorage){for(s=[],r=o=0,u=window.localStorage.length;0<=u?o<u:o>u;r=0<=u?++o:--o)s.push(window.localStorage.key(r));for(l=0,c=s.length;l<c;l++)a=s[l],i=this.namespace+"."+e,a.substring(0,i.length)===i&&window.localStorage.removeItem(a)}if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.getCollectionNames=function(){return l.keys(this.collections)},e}(),r=function(){function e(e,t){this.name=e,this.namespace=t,this.items={},this.upserts={},this.removes={},window.localStorage&&null!=t&&this.loadStorage()}return e.prototype.loadStorage=function(){var e,t,n,r,a,i,s,o,c,u;for(this.itemNamespace=this.namespace+"_",t=s=0,u=window.localStorage.length;0<=u?s<u:s>u;t=0<=u?++s:--s)(r=window.localStorage.key(t)).substring(0,this.itemNamespace.length)===this.itemNamespace&&(n=JSON.parse(window.localStorage[r]),this.items[n._id]=n);for(o=0,c=(i=window.localStorage[this.namespace+"upserts"]?JSON.parse(window.localStorage[this.namespace+"upserts"]):[]).length;o<c;o++)r=i[o],this.upserts[r]={doc:this.items[r]},e=window.localStorage[this.namespace+"upsertbase_"+r]?JSON.parse(window.localStorage[this.namespace+"upsertbase_"+r]):null,this.upserts[r].base=e;return a=window.localStorage[this.namespace+"removes"]?JSON.parse(window.localStorage[this.namespace+"removes"]):[],this.removes=l.object(l.pluck(a,"_id"),a)},e.prototype.find=function(e,t){return{fetch:(n=this,function(r,a){return n._findFetch(e,t,r,a)})};var n},e.prototype.findOne=function(e,t,n,r){var a;return l.isFunction(t)&&(t=(a=[{},t,n])[0],n=a[1],r=a[2]),this.find(e,t).fetch(function(e){if(null!=n)return n(e.length>0?e[0]:null)},r)},e.prototype._findFetch=function(e,t,n,r){if(null!=n)return n(s(l.cloneDeep(l.values(this.items)),e,t))},e.prototype.upsert=function(e,t,n,r){var a,i,s,c,u;for(i=(u=o.regularizeUpsert(e,t,n,r))[0],n=u[1],r=u[2],s=0,c=(i=JSON.parse(JSON.stringify(i))).length;s<c;s++)void 0===(a=i[s]).base&&(this.upserts[a.doc._id]?a.base=this.upserts[a.doc._id].base:a.base=this.items[a.doc._id]||null),a=l.cloneDeep(a),this._putItem(a.doc),this._putUpsert(a);if(n)return n(e)},e.prototype.remove=function(e,t,n){var r;if(!l.isObject(e))return l.has(this.items,e)?(this._putRemove(this.items[e]),this._deleteItem(e),this._deleteUpsert(e)):this._putRemove({_id:e}),null!=t?t():void 0;this.find(e).fetch((r=this,function(e){return a.each(e,function(e,t){return r.remove(e._id,function(){return t()},t)},function(){return t()})}),n)},e.prototype._putItem=function(e){if(this.items[e._id]=e,this.namespace)return window.localStorage[this.itemNamespace+e._id]=JSON.stringify(e)},e.prototype._deleteItem=function(e){if(delete this.items[e],this.namespace)return window.localStorage.removeItem(this.itemNamespace+e)},e.prototype._putUpsert=function(e){if(this.upserts[e.doc._id]=e,this.namespace)return window.localStorage[this.namespace+"upserts"]=JSON.stringify(l.keys(this.upserts)),window.localStorage[this.namespace+"upsertbase_"+e.doc._id]=JSON.stringify(e.base)},e.prototype._deleteUpsert=function(e){if(delete this.upserts[e],this.namespace)return window.localStorage[this.namespace+"upserts"]=JSON.stringify(l.keys(this.upserts))},e.prototype._putRemove=function(e){if(this.removes[e._id]=e,this.namespace)return window.localStorage[this.namespace+"removes"]=JSON.stringify(l.values(this.removes))},e.prototype._deleteRemove=function(e){if(delete this.removes[e],this.namespace)return window.localStorage[this.namespace+"removes"]=JSON.stringify(l.values(this.removes))},e.prototype.cache=function(e,t,n,r,a){var s,o,c,u,d,p;for(u=0,d=e.length;u<d;u++)s=e[u],this.cacheOne(s);return o=l.object(l.pluck(e,"_id"),e),n.sort&&(c=i(n.sort)),this.find(t,n).fetch((p=this,function(t){var a,i,s;for(i=0,s=t.length;i<s;i++)if(a=t[i],!o[a._id]&&!l.has(p.upserts,a._id)){if(n.limit&&e.length===n.limit){if(n.sort&&c(a,l.last(e))>=0)continue;if(!n.sort)continue}p._deleteItem(a._id)}if(null!=r)return r()}),a)},e.prototype.pendingUpserts=function(e){return e(l.values(this.upserts))},e.prototype.pendingRemoves=function(e){return e(l.pluck(this.removes,"_id"))},e.prototype.resolveUpserts=function(e,t){var n,r,a;for(r=0,a=e.length;r<a;r++)n=e[r],this.upserts[n.doc._id]&&(l.isEqual(n.doc,this.upserts[n.doc._id].doc)?this._deleteUpsert(n.doc._id):(this.upserts[n.doc._id].base=n.doc,this._putUpsert(this.upserts[n.doc._id])));if(null!=t)return t()},e.prototype.resolveRemove=function(e,t){if(this._deleteRemove(e),null!=t)return t()},e.prototype.seed=function(e,t){var n,r,a;for(l.isArray(e)||(e=[e]),r=0,a=e.length;r<a;r++)n=e[r],l.has(this.items,n._id)||l.has(this.removes,n._id)||this._putItem(n);if(null!=t)return t()},e.prototype.cacheOne=function(e,t,n){return this.cacheList([e],t,n)},e.prototype.cacheList=function(e,t){var n,r,a,i;for(a=0,i=e.length;a<i;a++)n=e[a],l.has(this.upserts,n._id)||l.has(this.removes,n._id)||(r=this.items[n._id])&&n._rev&&r._rev&&!(n._rev>r._rev)||this._putItem(n);if(null!=t)return t()},e.prototype.uncache=function(e,t,n){var r,a,i,s,c;for(r=o.compileDocumentSelector(e),i=0,s=(c=l.values(this.items)).length;i<s;i++)a=c[i],null==this.upserts[a._id]&&r(a)&&this._deleteItem(a._id);if(null!=t)return t()},e.prototype.uncacheList=function(e,t,n){var r,a,i;for(a=0,i=e.length;a<i;a++)r=e[a],null==this.upserts[r]&&this._deleteItem(r);if(null!=t)return t()},e}()},function(e,t,n){var r,a,i;i=n(52),a=n(37).processFind,n(37),e.exports=function(){function e(e,t){this.localDb=e,this.remoteDb=t,this.collections={}}return e.prototype.addCollection=function(e,t,n,a){var s,o;if(i.isFunction(t)&&(t=(o=[{},t,n])[0],n=o[1],o[2]),s=new r(e,this.localDb[e],this.remoteDb[e],t),this[e]=s,this.collections[e]=s,null!=n)return n()},e.prototype.removeCollection=function(e,t,n){if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.upload=function(e,t){var n,r;return n=i.values(this.collections),(r=function(e,t,n){var a;return(a=i.first(e))?a.upload(function(){return r(i.rest(e),t,n)},function(e){return n(e)}):t()})(n,e,t)},e.prototype.getCollectionNames=function(){return i.keys(this.collections)},e}(),r=function(){function e(e,t,n,r){this.name=e,this.localCol=t,this.remoteCol=n,this.options=r||{},i.defaults(this.options,{cacheFind:!0,cacheFindOne:!0,interim:!0,useLocalOnRemoteError:!0,shortcut:!1,timeout:0,sortUpserts:null})}return e.prototype.find=function(e,t){return null==t&&(t={}),{fetch:(n=this,function(r,a){return n._findFetch(e,t,r,a)})};var n},e.prototype.findOne=function(e,t,n,r){var a,s,o;return null==t&&(t={}),i.isFunction(t)&&(t=(s=[{},t,n])[0],n=s[1],r=s[2]),i.defaults(t,this.options),o=this,a=function(a){var s;return(s=i.cloneDeep(t)).interim=!1,s.cacheFind=t.cacheFindOne,e._id?s.limit=1:delete s.limit,o.find(e,s).fetch(function(e){return e.length>0?i.isEqual(a,e[0])?void 0:n(e[0]):n(null)},r)},t.interim||t.shortcut?this.localCol.findOne(e,t,function(e){if(!e||(n(i.cloneDeep(e)),!t.shortcut))return a(e)},r):a()},e.prototype._findFetch=function(e,t,n,r){var s,o,l;return i.defaults(t,this.options),l=this,o=function(s){var o,c,u,d,p;return c=i.cloneDeep(t),t.cacheFind&&delete c.fields,c.localData=s,p=null,d=!1,u=function(o){var c,u;if(p&&clearTimeout(p),!d)return t.cacheFind?(c=function(){var a;return a=function(e){if(!t.interim||!i.isEqual(s,e))return n(e)},l.localCol.find(e,t).fetch(a,r)},l.localCol.cache(o,e,t,c,r)):(u=o,l.localCol.pendingRemoves(function(c){var d;return c.length>0&&(d=i.object(i.map(c,function(e){return[e,e]})),u=i.filter(o,function(e){return!i.has(d,e._id)})),l.localCol.pendingUpserts(function(r){var o;if(r.length>0&&(o=i.object(i.map(r,function(e){return e.doc._id}),i.map(r,function(e){return e.doc._id})),u=(u=i.filter(u,function(e){return!i.has(o,e._id)})).concat(i.pluck(r,"doc")),u=a(u,e,t)),!t.interim||!i.isEqual(s,u))return n(u)},r)},r));t.cacheFind&&l.localCol.cache(o,e,t,function(){},r)},o=function(e){if(p&&clearTimeout(p),!d&&!t.interim){if(t.useLocalOnRemoteError)return n(s);if(r)return r(e)}},t.timeout&&(p=setTimeout(function(){if(p=null,d=!0,!t.interim){if(t.useLocalOnRemoteError)return l.localCol.find(e,t).fetch(n,r);if(r)return r(new Error("Remote timed out"))}},t.timeout)),l.remoteCol.find(e,c).fetch(u,o)},s=function(e){return t.interim&&n(e),o(e)},this.localCol.find(e,t).fetch(s,r)},e.prototype.upsert=function(e,t,n,r){return this.localCol.upsert(e,t,function(r){return i.isFunction(t)&&(n=t),"function"==typeof n?n(e):void 0},r)},e.prototype.remove=function(e,t,n){return this.localCol.remove(e,function(){if(null!=t)return t()},n)},e.prototype.upload=function(e,t){var n,r,a;return a=this,r=function(e,t,n){var s;return(s=i.first(e))?a.remoteCol.upsert(s.doc,s.base,function(o){return a.localCol.resolveUpserts([s],function(){return o?a.localCol.cacheOne(o,function(){return r(i.rest(e),t,n)},n):a.localCol.remove(s.doc._id,function(){return a.localCol.resolveRemove(s.doc._id,function(){return r(i.rest(e),t,n)},n)},n)},n)},function(o){return 410===o.status||403===o.status?a.localCol.remove(s.doc._id,function(){return a.localCol.resolveRemove(s.doc._id,function(){return 410===o.status?r(i.rest(e),t,n):n(o)},n)},n):n(o)}):t()},n=function(e){return function(t,r,a){var s;return(s=i.first(t))?e.remoteCol.remove(s,function(){return e.localCol.resolveRemove(s,function(){return n(i.rest(t),r,a)},a)},function(o){return 410===o.status||403===o.status?e.localCol.resolveRemove(s,function(){return 410===o.status?n(i.rest(t),r,a):a(o)},a):a(o)},a):r()}}(this),this.localCol.pendingUpserts(function(a){return function(i){return a.options.sortUpserts&&i.sort(function(e,t){return a.options.sortUpserts(e.doc,t.doc)}),r(i,function(){return a.localCol.pendingRemoves(function(r){return n(r,e,t)},t)},t)}}(this),t)},e}()},function(e,t,n){var r;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,a){"use strict";var i=[],s=n.document,o=Object.getPrototypeOf,l=i.slice,c=i.concat,u=i.push,d=i.indexOf,p={},h=p.toString,f=p.hasOwnProperty,m=f.toString,g=m.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},E={type:!0,src:!0,noModule:!0};function w(e,t,n){var r,a=(t=t||s).createElement("script");if(a.text=e,n)for(r in E)n[r]&&(a[r]=n[r]);t.head.appendChild(a).parentNode.removeChild(a)}function C(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?p[h.call(e)]||"object":typeof e}var _=function(e,t){return new _.fn.init(e,t)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function D(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!y(e)&&!b(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:"3.3.1",constructor:_,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:i.sort,splice:i.splice},_.extend=_.fn.extend=function(){var e,t,n,r,a,i,s=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[o]||{},o++),"object"==typeof s||y(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)n=s[t],s!==(r=e[t])&&(c&&r&&(_.isPlainObject(r)||(a=Array.isArray(r)))?(a?(a=!1,i=n&&Array.isArray(n)?n:[]):i=n&&_.isPlainObject(n)?n:{},s[t]=_.extend(c,i,r)):void 0!==r&&(s[t]=r));return s},_.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=o(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&m.call(n)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){w(e)},each:function(e,t){var n,r=0;if(D(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(D(Object(e))?_.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,s=!n;a<i;a++)!t(e[a],a)!==s&&r.push(e[a]);return r},map:function(e,t,n){var r,a,i=0,s=[];if(D(e))for(r=e.length;i<r;i++)null!=(a=t(e[i],i,n))&&s.push(a);else for(i in e)null!=(a=t(e[i],i,n))&&s.push(a);return c.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=i[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){p["[object "+t+"]"]=t.toLowerCase()});var R=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){var t,n,r,a,i,s,o,l,c,u,d,p,h,f,m,g,v,y,b,E="sizzle"+1*new Date,w=e.document,C=0,_=0,S=se(),D=se(),R=se(),k=function(e,t){return e===t&&(d=!0),0},T={}.hasOwnProperty,x=[],N=x.pop,O=x.push,P=x.push,I=x.slice,A=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+j+"*("+L+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+j+"*\\]",U=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",q=new RegExp(j+"+","g"),$=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),B=new RegExp("^"+j+"*,"+j+"*"),H=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),W=new RegExp(U),Y=new RegExp("^"+L+"$"),z={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ae=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{P.apply(x=I.call(w.childNodes),w.childNodes),x[w.childNodes.length].nodeType}catch(e){P={apply:x.length?function(e,t){O.apply(e,I.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ie(e,t,r,a){var i,o,c,u,d,f,v,y=t&&t.ownerDocument,C=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return r;if(!a&&((t?t.ownerDocument||t:w)!==h&&p(t),t=t||h,m)){if(11!==C&&(d=K.exec(e)))if(i=d[1]){if(9===C){if(!(c=t.getElementById(i)))return r;if(c.id===i)return r.push(c),r}else if(y&&(c=y.getElementById(i))&&b(t,c)&&c.id===i)return r.push(c),r}else{if(d[2])return P.apply(r,t.getElementsByTagName(e)),r;if((i=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!R[e+" "]&&(!g||!g.test(e))){if(1!==C)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,ne):t.setAttribute("id",u=E),o=(f=s(e)).length;o--;)f[o]="#"+u+" "+ve(f[o]);v=f.join(","),y=Q.test(e)&&me(t.parentNode)||t}if(v)try{return P.apply(r,y.querySelectorAll(v)),r}catch(e){}finally{u===E&&t.removeAttribute("id")}}}return l(e.replace($,"$1"),t,r,a)}function se(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function oe(e){return e[E]=!0,e}function le(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function ue(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function fe(e){return oe(function(t){return t=+t,oe(function(n,r){for(var a,i=e([],n.length,t),s=i.length;s--;)n[a=i[s]]&&(n[a]=!(r[a]=n[a]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ie.support={},i=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=ie.setDocument=function(e){var t,a,s=e?e.ownerDocument||e:w;return s!==h&&9===s.nodeType&&s.documentElement?(f=(h=s).documentElement,m=!i(h),w!==h&&(a=h.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",re,!1):a.attachEvent&&a.attachEvent("onunload",re)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=G.test(h.getElementsByClassName),n.getById=le(function(e){return f.appendChild(e).id=E,!h.getElementsByName||!h.getElementsByName(E).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=G.test(h.querySelectorAll))&&(le(function(e){f.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+j+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+E+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||g.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+j+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=G.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",U)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=G.test(f.compareDocumentPosition),b=t||G.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===h||e.ownerDocument===w&&b(w,e)?-1:t===h||t.ownerDocument===w&&b(w,t)?1:u?A(u,e)-A(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,s=[e],o=[t];if(!a||!i)return e===h?-1:t===h?1:a?-1:i?1:u?A(u,e)-A(u,t):0;if(a===i)return ue(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)o.unshift(n);for(;s[r]===o[r];)r++;return r?ue(s[r],o[r]):s[r]===w?-1:o[r]===w?1:0},h):h},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&p(e),t=t.replace(V,"='$1']"),n.matchesSelector&&m&&!R[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ie(t,h,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==h&&p(e),b(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==h&&p(e);var a=r.attrHandle[t.toLowerCase()],i=a&&T.call(r.attrHandle,t.toLowerCase())?a(e,t,!m):void 0;return void 0!==i?i:n.attributes||!m?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ie.escape=function(e){return(e+"").replace(te,ne)},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,r=[],a=0,i=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(k),d){for(;t=e[i++];)t===e[i]&&(a=r.push(i));for(;a--;)e.splice(r[a],1)}return u=null,e},a=ie.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},(r=ie.selectors={cacheLength:50,createPseudo:oe,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var a=ie.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(q," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,h,f,m=i!==s?"nextSibling":"previousSibling",g=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o,b=!1;if(g){if(i){for(;m;){for(p=t;p=p[m];)if(o?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(b=(h=(c=(u=(d=(p=g)[E]||(p[E]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===C&&c[1])&&c[2],p=h&&g.childNodes[h];p=++h&&p&&p[m]||(b=h=0)||f.pop();)if(1===p.nodeType&&++b&&p===t){u[e]=[C,h,b];break}}else if(y&&(b=h=(c=(u=(d=(p=t)[E]||(p[E]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===C&&c[1]),!1===b)for(;(p=++h&&p&&p[m]||(b=h=0)||f.pop())&&((o?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(y&&((u=(d=p[E]||(p[E]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]=[C,b]),p!==t)););return(b-=a)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return a[E]?a(t):a.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,n){for(var r,i=a(e,t),s=i.length;s--;)e[r=A(e,i[s])]=!(n[r]=i[s])}):function(e){return a(e,0,n)}):a}},pseudos:{not:oe(function(e){var t=[],n=[],r=o(e.replace($,"$1"));return r[E]?oe(function(e,t,n,a){for(var i,s=r(e,null,a,[]),o=e.length;o--;)(i=s[o])&&(e[o]=!(t[o]=i))}):function(e,a,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:oe(function(e){return function(t){return ie(e,t).length>0}}),contains:oe(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:oe(function(e){return Y.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:fe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,a=t.next,i=a||r,s=n&&"parentNode"===i,o=_++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,a);return!1}:function(t,n,l){var c,u,d,p=[C,o];if(l){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(u=(d=t[E]||(t[E]={}))[t.uniqueID]||(d[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[i])&&c[0]===C&&c[1]===o)return p[2]=c[2];if(u[i]=p,p[2]=e(t,n,l))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function Ee(e,t,n,r,a){for(var i,s=[],o=0,l=e.length,c=null!=t;o<l;o++)(i=e[o])&&(n&&!n(i,r,a)||(s.push(i),c&&t.push(o)));return s}function we(e,t,n,r,a,i){return r&&!r[E]&&(r=we(r)),a&&!a[E]&&(a=we(a,i)),oe(function(i,s,o,l){var c,u,d,p=[],h=[],f=s.length,m=i||function(e,t,n){for(var r=0,a=t.length;r<a;r++)ie(e,t[r],n);return n}(t||"*",o.nodeType?[o]:o,[]),g=!e||!i&&t?m:Ee(m,p,e,o,l),v=n?a||(i?e:f||r)?[]:s:g;if(n&&n(g,v,o,l),r)for(c=Ee(v,h),r(c,[],o,l),u=c.length;u--;)(d=c[u])&&(v[h[u]]=!(g[h[u]]=d));if(i){if(a||e){if(a){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);a(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=a?A(i,d):p[u])>-1&&(i[c]=!(s[c]=d))}}else v=Ee(v===s?v.splice(f,v.length):v),a?a(null,s,v,l):P.apply(s,v)})}function Ce(e){for(var t,n,a,i=e.length,s=r.relative[e[0].type],o=s||r.relative[" "],l=s?1:0,u=ye(function(e){return e===t},o,!0),d=ye(function(e){return A(t,e)>-1},o,!0),p=[function(e,n,r){var a=!s&&(r||n!==c)||((t=n).nodeType?u(e,n,r):d(e,n,r));return t=null,a}];l<i;l++)if(n=r.relative[e[l].type])p=[ye(be(p),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[E]){for(a=++l;a<i&&!r.relative[e[a].type];a++);return we(l>1&&be(p),l>1&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace($,"$1"),n,l<a&&Ce(e.slice(l,a)),a<i&&Ce(e=e.slice(a)),a<i&&ve(e))}p.push(n)}return be(p)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,s=ie.tokenize=function(e,t){var n,a,i,s,o,l,c,u=D[e+" "];if(u)return t?0:u.slice(0);for(o=e,l=[],c=r.preFilter;o;){for(s in n&&!(a=B.exec(o))||(a&&(o=o.slice(a[0].length)||o),l.push(i=[])),n=!1,(a=H.exec(o))&&(n=a.shift(),i.push({value:n,type:a[0].replace($," ")}),o=o.slice(n.length)),r.filter)!(a=z[s].exec(o))||c[s]&&!(a=c[s](a))||(n=a.shift(),i.push({value:n,type:s,matches:a}),o=o.slice(n.length));if(!n)break}return t?o.length:o?ie.error(e):D(e,l).slice(0)},o=ie.compile=function(e,t){var n,a=[],i=[],o=R[e+" "];if(!o){for(t||(t=s(e)),n=t.length;n--;)(o=Ce(t[n]))[E]?a.push(o):i.push(o);(o=R(e,function(e,t){var n=t.length>0,a=e.length>0,i=function(i,s,o,l,u){var d,f,g,v=0,y="0",b=i&&[],E=[],w=c,_=i||a&&r.find.TAG("*",u),S=C+=null==w?1:Math.random()||.1,D=_.length;for(u&&(c=s===h||s||u);y!==D&&null!=(d=_[y]);y++){if(a&&d){for(f=0,s||d.ownerDocument===h||(p(d),o=!m);g=e[f++];)if(g(d,s||h,o)){l.push(d);break}u&&(C=S)}n&&((d=!g&&d)&&v--,i&&b.push(d))}if(v+=y,n&&y!==v){for(f=0;g=t[f++];)g(b,E,s,o);if(i){if(v>0)for(;y--;)b[y]||E[y]||(E[y]=N.call(l));E=Ee(E)}P.apply(l,E),u&&!i&&E.length>0&&v+t.length>1&&ie.uniqueSort(l)}return u&&(C=S,c=w),b};return n?oe(i):i}(i,a))).selector=e}return o},l=ie.select=function(e,t,n,a){var i,l,c,u,d,p="function"==typeof e&&e,h=!a&&s(e=p.selector||e);if(n=n||[],1===h.length){if((l=h[0]=h[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(i=z.needsContext.test(e)?0:l.length;i--&&(c=l[i],!r.relative[u=c.type]);)if((d=r.find[u])&&(a=d(c.matches[0].replace(Z,ee),Q.test(l[0].type)&&me(t.parentNode)||t))){if(l.splice(i,1),!(e=a.length&&ve(l)))return P.apply(n,a),n;break}}return(p||o(e,h))(a,t,!m,n,!t||Q.test(e)&&me(t.parentNode)||t),n},n.sortStable=E.split("").sort(k).join("")===E,n.detectDuplicates=!!d,p(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(M,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ie}(n);_.find=R,_.expr=R.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=R.uniqueSort,_.text=R.getText,_.isXMLDoc=R.isXML,_.contains=R.contains,_.escapeSelector=R.escape;var k=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&_(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},x=_.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){return y(t)?_.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?_.grep(e,function(e){return e===t!==n}):"string"!=typeof t?_.grep(e,function(e){return d.call(t,e)>-1!==n}):_.filter(t,e,n)}_.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?_.find.matchesSelector(r,e)?[r]:[]:_.find.matches(e,_.grep(t,function(e){return 1===e.nodeType}))},_.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(_(e).filter(function(){for(t=0;t<r;t++)if(_.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)_.find(e,a[t],n);return r>1?_.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&x.test(e)?_(e):e||[],!1).length}});var I,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||I,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:A.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:s,!0)),O.test(r[1])&&_.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=s.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(_):_.makeArray(e,this)}).prototype=_.fn,I=_(s);var M=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(_.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,a=this.length,i=[],s="string"!=typeof e&&_(e);if(!x.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&_.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?_.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?d.call(_(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),_.merge([],e.childNodes))}},function(e,t){_.fn[e]=function(n,r){var a=_.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=_.filter(r,a)),this.length>1&&(j[e]||_.uniqueSort(a),M.test(e)&&a.reverse()),this.pushStack(a)}});var F=/[^\x20\t\r\n\f]+/g;function U(e){return e}function q(e){throw e}function $(e,t,n,r){var a;try{e&&y(a=e.promise)?a.call(e).done(t).fail(n):e&&y(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}_.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return _.each(e.match(F)||[],function(e,n){t[n]=!0}),t}(e):_.extend({},e);var t,n,r,a,i=[],s=[],o=-1,l=function(){for(a=a||e.once,r=t=!0;s.length;o=-1)for(n=s.shift();++o<i.length;)!1===i[o].apply(n[0],n[1])&&e.stopOnFalse&&(o=i.length,n=!1);e.memory||(n=!1),t=!1,a&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(o=i.length-1,s.push(n)),function t(n){_.each(n,function(n,r){y(r)?e.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==C(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return _.each(arguments,function(e,t){for(var n;(n=_.inArray(t,i,n))>-1;)i.splice(n,1),n<=o&&o--}),this},has:function(e){return e?_.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=s=[],i=n="",this},disabled:function(){return!i},lock:function(){return a=s=[],n||t||(i=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},_.extend({Deferred:function(e){var t=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return _.Deferred(function(n){_.each(t,function(t,r){var a=y(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=a&&a.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(e,r,a){var i=0;function s(e,t,r,a){return function(){var o=this,l=arguments,c=function(){var n,c;if(!(e<i)){if((n=r.apply(o,l))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?a?c.call(n,s(i,t,U,a),s(i,t,q,a)):(i++,c.call(n,s(i,t,U,a),s(i,t,q,a),s(i,t,U,t.notifyWith))):(r!==U&&(o=void 0,l=[n]),(a||t.resolveWith)(o,l))}},u=a?c:function(){try{c()}catch(n){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(n,u.stackTrace),e+1>=i&&(r!==q&&(o=void 0,l=[n]),t.rejectWith(o,l))}};e?u():(_.Deferred.getStackHook&&(u.stackTrace=_.Deferred.getStackHook()),n.setTimeout(u))}}return _.Deferred(function(n){t[0][3].add(s(0,n,y(a)?a:U,n.notifyWith)),t[1][3].add(s(0,n,y(e)?e:U)),t[2][3].add(s(0,n,y(r)?r:q))}).promise()},promise:function(e){return null!=e?_.extend(e,a):a}},i={};return _.each(t,function(e,n){var s=n[2],o=n[5];a[n[1]]=s.add,o&&s.add(function(){r=o},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(n[3].fire),i[n[0]]=function(){return i[n[0]+"With"](this===i?void 0:this,arguments),this},i[n[0]+"With"]=s.fireWith}),a.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),a=l.call(arguments),i=_.Deferred(),s=function(e){return function(n){r[e]=this,a[e]=arguments.length>1?l.call(arguments):n,--t||i.resolveWith(r,a)}};if(t<=1&&($(e,i.done(s(n)).resolve,i.reject,!t),"pending"===i.state()||y(a[n]&&a[n].then)))return i.then();for(;n--;)$(a[n],s(n),i.reject);return i.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&B.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},_.readyException=function(e){n.setTimeout(function(){throw e})};var H=_.Deferred();function V(){s.removeEventListener("DOMContentLoaded",V),n.removeEventListener("load",V),_.ready()}_.fn.ready=function(e){return H.then(e).catch(function(e){_.readyException(e)}),this},_.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||H.resolveWith(s,[_]))}}),_.ready.then=H.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?n.setTimeout(_.ready):(s.addEventListener("DOMContentLoaded",V),n.addEventListener("load",V));var W=function(e,t,n,r,a,i,s){var o=0,l=e.length,c=null==n;if("object"===C(n))for(o in a=!0,n)W(e,t,o,n[o],!0,i,s);else if(void 0!==r&&(a=!0,y(r)||(s=!0),c&&(s?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(_(e),n)})),t))for(;o<l;o++)t(e[o],n,s?r:r.call(e[o],o,t(e[o],n)));return a?e:c?t.call(e):l?t(e[0],n):i},Y=/^-ms-/,z=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function J(e){return e.replace(Y,"ms-").replace(z,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=_.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[J(t)]=n;else for(r in t)a[J(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(J):(t=J(t))in r?[t]:t.match(F)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||_.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var Q=new K,Z=new K,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}_.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),_.fn.extend({data:function(e,t){var n,r,a,i=this[0],s=i&&i.attributes;if(void 0===e){if(this.length&&(a=Z.get(i),1===i.nodeType&&!Q.get(i,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=J(r.slice(5)),ne(i,r,a[r]));Q.set(i,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){Z.set(this,e)}):W(this,function(t){var n;if(i&&void 0===t)return void 0!==(n=Z.get(i,e))?n:void 0!==(n=ne(i,e))?n:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),_.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,_.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=_.queue(e,t),r=n.length,a=n.shift(),i=_._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,function(){_.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:_.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),_.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?_.queue(this[0],e):void 0===t?this:this.each(function(){var n=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&_.dequeue(this,e)})},dequeue:function(e){return this.each(function(){_.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=_.Deferred(),i=this,s=this.length,o=function(){--r||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Q.get(i[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(o));return o(),a.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&_.contains(e.ownerDocument,e)&&"none"===_.css(e,"display")},oe=function(e,t,n,r){var a,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];for(i in a=n.apply(e,r||[]),t)e.style[i]=s[i];return a};function le(e,t,n,r){var a,i,s=20,o=r?function(){return r.cur()}:function(){return _.css(e,t,"")},l=o(),c=n&&n[3]||(_.cssNumber[t]?"":"px"),u=(_.cssNumber[t]||"px"!==c&&+l)&&ae.exec(_.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)_.style(e,t,u+c),(1-i)*(1-(i=o()/l||.5))<=0&&(s=0),u/=i;u*=2,_.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,a=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=a)),a}var ce={};function ue(e){var t,n=e.ownerDocument,r=e.nodeName,a=ce[r];return a||(t=n.body.appendChild(n.createElement(r)),a=_.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),ce[r]=a,a)}function de(e,t){for(var n,r,a=[],i=0,s=e.length;i<s;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(a[i]=Q.get(r,"display")||null,a[i]||(r.style.display="")),""===r.style.display&&se(r)&&(a[i]=ue(r))):"none"!==n&&(a[i]="none",Q.set(r,"display",n)));for(i=0;i<s;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}_.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?_(this).show():_(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?_.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var ye,be,Ee=/<|&#?\w+;/;function we(e,t,n,r,a){for(var i,s,o,l,c,u,d=t.createDocumentFragment(),p=[],h=0,f=e.length;h<f;h++)if((i=e[h])||0===i)if("object"===C(i))_.merge(p,i.nodeType?[i]:i);else if(Ee.test(i)){for(s=s||d.appendChild(t.createElement("div")),o=(he.exec(i)||["",""])[1].toLowerCase(),l=me[o]||me._default,s.innerHTML=l[1]+_.htmlPrefilter(i)+l[2],u=l[0];u--;)s=s.lastChild;_.merge(p,s.childNodes),(s=d.firstChild).textContent=""}else p.push(t.createTextNode(i));for(d.textContent="",h=0;i=p[h++];)if(r&&_.inArray(i,r)>-1)a&&a.push(i);else if(c=_.contains(i.ownerDocument,i),s=ge(d.appendChild(i),"script"),c&&ve(s),n)for(u=0;i=s[u++];)fe.test(i.type||"")&&n.push(i);return d}ye=s.createDocumentFragment().appendChild(s.createElement("div")),(be=s.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ye.appendChild(be),v.checkClone=ye.cloneNode(!0).cloneNode(!0).lastChild.checked,ye.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ye.cloneNode(!0).lastChild.defaultValue;var Ce=s.documentElement,_e=/^key/,Se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,De=/^([^.]*)(?:\.(.+)|)/;function Re(){return!0}function ke(){return!1}function Te(){try{return s.activeElement}catch(e){}}function xe(e,t,n,r,a,i){var s,o;if("object"==typeof t){for(o in"string"!=typeof n&&(r=r||n,n=void 0),t)xe(e,o,n,r,t[o],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=ke;else if(!a)return e;return 1===i&&(s=a,(a=function(e){return _().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=_.guid++)),e.each(function(){_.event.add(this,t,a,r,n)})}_.event={global:{},add:function(e,t,n,r,a){var i,s,o,l,c,u,d,p,h,f,m,g=Q.get(e);if(g)for(n.handler&&(n=(i=n).handler,a=i.selector),a&&_.find.matchesSelector(Ce,a),n.guid||(n.guid=_.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==_&&_.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(F)||[""]).length;c--;)h=m=(o=De.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),h&&(d=_.event.special[h]||{},h=(a?d.delegateType:d.bindType)||h,d=_.event.special[h]||{},u=_.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&_.expr.match.needsContext.test(a),namespace:f.join(".")},i),(p=l[h])||((p=l[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,f,s)||e.addEventListener&&e.addEventListener(h,s)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),a?p.splice(p.delegateCount++,0,u):p.push(u),_.event.global[h]=!0)},remove:function(e,t,n,r,a){var i,s,o,l,c,u,d,p,h,f,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(F)||[""]).length;c--;)if(h=m=(o=De.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),h){for(d=_.event.special[h]||{},p=l[h=(r?d.delegateType:d.bindType)||h]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=p.length;i--;)u=p[i],!a&&m!==u.origType||n&&n.guid!==u.guid||o&&!o.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(p.splice(i,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));s&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||_.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)_.event.remove(e,h+t[c],n,r,!0);_.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,s,o=_.event.fix(e),l=new Array(arguments.length),c=(Q.get(this,"events")||{})[o.type]||[],u=_.event.special[o.type]||{};for(l[0]=o,t=1;t<arguments.length;t++)l[t]=arguments[t];if(o.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,o)){for(s=_.event.handlers.call(this,o,c),t=0;(a=s[t++])&&!o.isPropagationStopped();)for(o.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(i.namespace)||(o.handleObj=i,o.data=i.data,void 0!==(r=((_.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,l))&&!1===(o.result=r)&&(o.preventDefault(),o.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,o),o.result}},handlers:function(e,t){var n,r,a,i,s,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],s={},n=0;n<l;n++)void 0===s[a=(r=t[n]).selector+" "]&&(s[a]=r.needsContext?_(a,this).index(c)>-1:_.find(a,this,null,[c]).length),s[a]&&i.push(r);i.length&&o.push({elem:c,handlers:i})}return c=this,l<t.length&&o.push({elem:c,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(_.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[_.expando]?e:new _.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Te()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Te()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Re:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Re,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Re,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Re,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Se.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},_.event.addProp),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||_.contains(this,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),_.fn.extend({on:function(e,t,n,r){return xe(this,e,t,n,r)},one:function(e,t,n,r){return xe(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,_(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){_.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")&&_(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function je(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,a,i,s,o,l,c;if(1===t.nodeType){if(Q.hasData(e)&&(i=Q.access(e),s=Q.set(t,i),c=i.events))for(a in delete s.handle,s.events={},c)for(n=0,r=c[a].length;n<r;n++)_.event.add(t,a,c[a][n]);Z.hasData(e)&&(o=Z.access(e),l=_.extend({},o),Z.set(t,l))}}function Fe(e,t,n,r){t=c.apply([],t);var a,i,s,o,l,u,d=0,p=e.length,h=p-1,f=t[0],m=y(f);if(m||p>1&&"string"==typeof f&&!v.checkClone&&Pe.test(f))return e.each(function(a){var i=e.eq(a);m&&(t[0]=f.call(this,a,i.html())),Fe(i,t,n,r)});if(p&&(i=(a=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=i),i||r)){for(o=(s=_.map(ge(a,"script"),Me)).length;d<p;d++)l=a,d!==h&&(l=_.clone(l,!0,!0),o&&_.merge(s,ge(l,"script"))),n.call(e[d],l,d);if(o)for(u=s[s.length-1].ownerDocument,_.map(s,je),d=0;d<o;d++)l=s[d],fe.test(l.type||"")&&!Q.access(l,"globalEval")&&_.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?_._evalUrl&&_._evalUrl(l.src):w(l.textContent.replace(Ie,""),u,l))}return e}function Ue(e,t,n){for(var r,a=t?_.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||_.cleanData(ge(r)),r.parentNode&&(n&&_.contains(r.ownerDocument,r)&&ve(ge(r,"script")),r.parentNode.removeChild(r));return e}_.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,a,i,s,o,l,c,u=e.cloneNode(!0),d=_.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||_.isXMLDoc(e)))for(s=ge(u),r=0,a=(i=ge(e)).length;r<a;r++)o=i[r],l=s[r],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&pe.test(o.type)?l.checked=o.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=o.defaultValue);if(t)if(n)for(i=i||ge(e),s=s||ge(u),r=0,a=i.length;r<a;r++)Le(i[r],s[r]);else Le(e,u);return(s=ge(u,"script")).length>0&&ve(s,!d&&ge(e,"script")),u},cleanData:function(e){for(var t,n,r,a=_.event.special,i=0;void 0!==(n=e[i]);i++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)a[r]?_.event.remove(n,r):_.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),_.fn.extend({detach:function(e){return Ue(this,e,!0)},remove:function(e){return Ue(this,e)},text:function(e){return W(this,function(e){return void 0===e?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Fe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return Fe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return _.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!me[(he.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(_.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,function(t){var n=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(ge(this)),n&&n.replaceChild(t,this))},e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){_.fn[e]=function(e){for(var n,r=[],a=_(e),i=a.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),_(a[s])[t](n),u.apply(r,n.get());return this.pushStack(r)}});var qe=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Be=new RegExp(ie.join("|"),"i");function He(e,t,n){var r,a,i,s,o=e.style;return(n=n||$e(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||_.contains(e.ownerDocument,e)||(s=_.style(e,t)),!v.pixelBoxStyles()&&qe.test(s)&&Be.test(t)&&(r=o.width,a=o.minWidth,i=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=r,o.minWidth=a,o.maxWidth=i)),void 0!==s?s+"":s}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ce.appendChild(c).appendChild(u);var e=n.getComputedStyle(u);r="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),a=36===t(e.width),u.style.position="absolute",i=36===u.offsetWidth||"absolute",Ce.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var r,a,i,o,l,c=s.createElement("div"),u=s.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,_.extend(v,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),i}}))}();var We=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,ze={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Je=["Webkit","Moz","ms"],Ge=s.createElement("div").style;function Ke(e){var t=_.cssProps[e];return t||(t=_.cssProps[e]=function(e){if(e in Ge)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Je.length;n--;)if((e=Je[n]+t)in Ge)return e}(e)||e),t}function Qe(e,t,n){var r=ae.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,a,i){var s="width"===t?1:0,o=0,l=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=_.css(e,n+ie[s],!0,a)),r?("content"===n&&(l-=_.css(e,"padding"+ie[s],!0,a)),"margin"!==n&&(l-=_.css(e,"border"+ie[s]+"Width",!0,a))):(l+=_.css(e,"padding"+ie[s],!0,a),"padding"!==n?l+=_.css(e,"border"+ie[s]+"Width",!0,a):o+=_.css(e,"border"+ie[s]+"Width",!0,a));return!r&&i>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-o-.5))),l}function et(e,t,n){var r=$e(e),a=He(e,t,r),i="border-box"===_.css(e,"boxSizing",!1,r),s=i;if(qe.test(a)){if(!n)return a;a="auto"}return s=s&&(v.boxSizingReliable()||a===e.style[t]),("auto"===a||!parseFloat(a)&&"inline"===_.css(e,"display",!1,r))&&(a=e["offset"+t[0].toUpperCase()+t.slice(1)],s=!0),(a=parseFloat(a)||0)+Ze(e,t,n||(i?"border":"content"),s,r,a)+"px"}function tt(e,t,n,r,a){return new tt.prototype.init(e,t,n,r,a)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=He(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,s,o=J(t),l=Ye.test(t),c=e.style;if(l||(t=Ke(o)),s=_.cssHooks[t]||_.cssHooks[o],void 0===n)return s&&"get"in s&&void 0!==(a=s.get(e,!1,r))?a:c[t];"string"===(i=typeof n)&&(a=ae.exec(n))&&a[1]&&(n=le(e,t,a),i="number"),null!=n&&n==n&&("number"===i&&(n+=a&&a[3]||(_.cssNumber[o]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var a,i,s,o=J(t);return Ye.test(t)||(t=Ke(o)),(s=_.cssHooks[t]||_.cssHooks[o])&&"get"in s&&(a=s.get(e,!0,n)),void 0===a&&(a=He(e,t,r)),"normal"===a&&t in Xe&&(a=Xe[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),_.each(["height","width"],function(e,t){_.cssHooks[t]={get:function(e,n,r){if(n)return!We.test(_.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):oe(e,ze,function(){return et(e,t,r)})},set:function(e,n,r){var a,i=$e(e),s="border-box"===_.css(e,"boxSizing",!1,i),o=r&&Ze(e,t,r,s,i);return s&&v.scrollboxSize()===i.position&&(o-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Ze(e,t,"border",!1,i)-.5)),o&&(a=ae.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=_.css(e,t)),Qe(0,n,o)}}}),_.cssHooks.marginLeft=Ve(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-oe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(e,t){_.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"==typeof n?n.split(" "):[n];r<4;r++)a[e+ie[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(_.cssHooks[e+t].set=Qe)}),_.fn.extend({css:function(e,t){return W(this,function(e,t,n){var r,a,i={},s=0;if(Array.isArray(t)){for(r=$e(e),a=t.length;s<a;s++)i[t[s]]=_.css(e,t[s],!1,r);return i}return void 0!==n?_.style(e,t,n):_.css(e,t)},e,t,arguments.length>1)}}),_.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(_.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[_.cssProps[e.prop]]&&!_.cssHooks[e.prop]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},_.fx=tt.prototype.init,_.fx.step={};var nt,rt,at=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function st(){rt&&(!1===s.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(st):n.setTimeout(st,_.fx.interval),_.fx.tick())}function ot(){return n.setTimeout(function(){nt=void 0}),nt=Date.now()}function lt(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=ie[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function ct(e,t,n){for(var r,a=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),i=0,s=a.length;i<s;i++)if(r=a[i].call(n,t,e))return r}function ut(e,t,n){var r,a,i=0,s=ut.prefilters.length,o=_.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=nt||ot(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),i=0,s=c.tweens.length;i<s;i++)c.tweens[i].run(r);return o.notifyWith(e,[c,r,n]),r<1&&s?n:(s||o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||ot(),duration:n.duration,tweens:[],createTween:function(t,n){var r=_.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)c.tweens[n].run(1);return t?(o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c,t])):o.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,r,a,i,s;for(n in e)if(a=t[r=J(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(s=_.cssHooks[r])&&"expand"in s)for(n in i=s.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(u,c.opts.specialEasing);i<s;i++)if(r=ut.prefilters[i].call(c,e,u,c.opts))return y(r.stop)&&(_._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return _.map(u,ct,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),_.fx.timer(_.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}_.Animation=_.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ae.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(F);for(var n,r=0,a=e.length;r<a;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,i,s,o,l,c,u,d="width"in t||"height"in t,p=this,h={},f=e.style,m=e.nodeType&&se(e),g=Q.get(e,"fxshow");for(r in n.queue||(null==(s=_._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,_.queue(e,"fx").length||s.empty.fire()})})),t)if(a=t[r],at.test(a)){if(delete t[r],i=i||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!g||void 0===g[r])continue;m=!0}h[r]=g&&g[r]||_.style(e,r)}if((l=!_.isEmptyObject(t))||!_.isEmptyObject(h))for(r in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=Q.get(e,"display")),"none"===(u=_.css(e,"display"))&&(c?u=c:(de([e],!0),c=e.style.display||c,u=_.css(e,"display"),de([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===_.css(e,"float")&&(l||(p.done(function(){f.display=c}),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,h)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:c}),i&&(g.hidden=!m),m&&de([e],!0),p.done(function(){for(r in m||de([e]),Q.remove(e,"fxshow"),h)_.style(e,r,h[r])})),l=ct(m?g[r]:0,r,p),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),_.speed=function(e,t,n){var r=e&&"object"==typeof e?_.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return _.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in _.fx.speeds?r.duration=_.fx.speeds[r.duration]:r.duration=_.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&_.dequeue(this,r.queue)},r},_.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=_.isEmptyObject(e),i=_.speed(t,n,r),s=function(){var t=ut(this,_.extend({},e),i);(a||Q.get(this,"finish"))&&t.stop(!0)};return s.finish=s,a||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",i=_.timers,s=Q.get(this);if(a)s[a]&&s[a].stop&&r(s[a]);else for(a in s)s[a]&&s[a].stop&&it.test(a)&&r(s[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||_.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Q.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=_.timers,s=r?r.length:0;for(n.finish=!0,_.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),_.each(["toggle","show","hide"],function(e,t){var n=_.fn[t];_.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,r,a)}}),_.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){_.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),_.timers=[],_.fx.tick=function(){var e,t=0,n=_.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||_.fx.stop(),nt=void 0},_.fx.timer=function(e){_.timers.push(e),_.fx.start()},_.fx.interval=13,_.fx.start=function(){rt||(rt=!0,st())},_.fx.stop=function(){rt=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(e,t){return e=_.fx&&_.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,r){var a=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(a)}})},function(){var e=s.createElement("input"),t=s.createElement("select").appendChild(s.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=s.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var dt,pt=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return W(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){_.removeAttr(this,e)})}}),_.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?_.prop(e,t,n):(1===i&&_.isXMLDoc(e)||(a=_.attrHooks[t.toLowerCase()]||(_.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void _.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=_.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(F);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?_.removeAttr(e,n):e.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||_.find.attr;pt[t]=function(e,t,r){var a,i,s=t.toLowerCase();return r||(i=pt[s],pt[s]=a,a=null!=n(e,t,r)?s:null,pt[s]=i),a}});var ht=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function mt(e){return(e.match(F)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(F)||[]}_.fn.extend({prop:function(e,t){return W(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[_.propFix[e]||e]})}}),_.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&_.isXMLDoc(e)||(t=_.propFix[t]||t,a=_.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this}),_.fn.extend({addClass:function(e){var t,n,r,a,i,s,o,l=0;if(y(e))return this.each(function(t){_(this).addClass(e.call(this,t,gt(this)))});if((t=vt(e)).length)for(;n=this[l++];)if(a=gt(n),r=1===n.nodeType&&" "+mt(a)+" "){for(s=0;i=t[s++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a!==(o=mt(r))&&n.setAttribute("class",o)}return this},removeClass:function(e){var t,n,r,a,i,s,o,l=0;if(y(e))return this.each(function(t){_(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;n=this[l++];)if(a=gt(n),r=1===n.nodeType&&" "+mt(a)+" "){for(s=0;i=t[s++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");a!==(o=mt(r))&&n.setAttribute("class",o)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){_(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,a,i,s;if(r)for(a=0,i=_(this),s=vt(e);t=s[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+mt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;_.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=y(e),this.each(function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,_(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=_.map(a,function(e){return null==e?"":e+""})),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=_.valHooks[a.type]||_.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(yt,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:mt(_.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,s="select-one"===e.type,o=s?null:[],l=s?i+1:a.length;for(r=i<0?l:s?i:0;r<l;r++)if(((n=a[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=_(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,r,a=e.options,i=_.makeArray(t),s=a.length;s--;)((r=a[s]).selected=_.inArray(_.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},v.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in n;var bt=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){e.stopPropagation()};_.extend(_.event,{trigger:function(e,t,r,a){var i,o,l,c,u,d,p,h,m=[r||s],g=f.call(e,"type")?e.type:e,v=f.call(e,"namespace")?e.namespace.split("."):[];if(o=h=l=r=r||s,3!==r.nodeType&&8!==r.nodeType&&!bt.test(g+_.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[_.expando]?e:new _.Event(g,"object"==typeof e&&e)).isTrigger=a?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:_.makeArray(t,[e]),p=_.event.special[g]||{},a||!p.trigger||!1!==p.trigger.apply(r,t))){if(!a&&!p.noBubble&&!b(r)){for(c=p.delegateType||g,bt.test(c+g)||(o=o.parentNode);o;o=o.parentNode)m.push(o),l=o;l===(r.ownerDocument||s)&&m.push(l.defaultView||l.parentWindow||n)}for(i=0;(o=m[i++])&&!e.isPropagationStopped();)h=o,e.type=i>1?c:p.bindType||g,(d=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&d.apply(o,t),(d=u&&o[u])&&d.apply&&G(o)&&(e.result=d.apply(o,t),!1===e.result&&e.preventDefault());return e.type=g,a||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(m.pop(),t)||!G(r)||u&&y(r[g])&&!b(r)&&((l=r[u])&&(r[u]=null),_.event.triggered=g,e.isPropagationStopped()&&h.addEventListener(g,Et),r[g](),e.isPropagationStopped()&&h.removeEventListener(g,Et),_.event.triggered=void 0,l&&(r[u]=l)),e.result}},simulate:function(e,t,n){var r=_.extend(new _.Event,n,{type:e,isSimulated:!0});_.event.trigger(r,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each(function(){_.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return _.event.trigger(e,t,n,!0)}}),v.focusin||_.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var r=this.ownerDocument||this,a=Q.access(r,t);a||r.addEventListener(e,n,!0),Q.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this,a=Q.access(r,t)-1;a?Q.access(r,t,a):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}});var wt=n.location,Ct=Date.now(),_t=/\?/;_.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+e),t};var St=/\[\]$/,Dt=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,n,r){var a;if(Array.isArray(t))_.each(t,function(t,a){n||St.test(e)?r(e,a):Tt(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,n,r)});else if(n||"object"!==C(t))r(e,t);else for(a in t)Tt(e+"["+a+"]",t[a],n,r)}_.param=function(e,t){var n,r=[],a=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,function(){a(this.name,this.value)});else for(n in e)Tt(n,e[n],t,a);return r.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&kt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=_(this).val();return null==n?null:Array.isArray(n)?_.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var xt=/%20/g,Nt=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,It=/^(?:GET|HEAD)$/,At=/^\/\//,Mt={},jt={},Lt="*/".concat("*"),Ft=s.createElement("a");function Ut(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(F)||[];if(y(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qt(e,t,n,r){var a={},i=e===jt;function s(o){var l;return a[o]=!0,_.each(e[o]||[],function(e,o){var c=o(t,n,r);return"string"!=typeof c||i||a[c]?i?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}return s(t.dataTypes[0])||!a["*"]&&s("*")}function $t(e,t){var n,r,a=_.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&_.extend(!0,e,r),e}Ft.href=wt.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,_.ajaxSettings),t):$t(_.ajaxSettings,e)},ajaxPrefilter:Ut(Mt),ajaxTransport:Ut(jt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,a,i,o,l,c,u,d,p,h,f=_.ajaxSetup({},t),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?_(m):_.event,v=_.Deferred(),y=_.Callbacks("once memory"),b=f.statusCode||{},E={},w={},C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(u){if(!o)for(o={};t=Pt.exec(i);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?i:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,E[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),D(0,t),this}};if(v.promise(S),f.url=((e||f.url||wt.href)+"").replace(At,wt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(F)||[""],null==f.crossDomain){c=s.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ft.protocol+"//"+Ft.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=_.param(f.data,f.traditional)),qt(Mt,f,t,S),u)return S;for(p in(d=_.event&&f.global)&&0==_.active++&&_.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!It.test(f.type),a=f.url.replace(Nt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(xt,"+")):(h=f.url.slice(a.length),f.data&&(f.processData||"string"==typeof f.data)&&(a+=(_t.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(a=a.replace(Ot,"$1"),h=(_t.test(a)?"&":"?")+"_="+Ct+++h),f.url=a+h),f.ifModified&&(_.lastModified[a]&&S.setRequestHeader("If-Modified-Since",_.lastModified[a]),_.etag[a]&&S.setRequestHeader("If-None-Match",_.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Lt+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(!1===f.beforeSend.call(m,S,f)||u))return S.abort();if(C="abort",y.add(f.complete),S.done(f.success),S.fail(f.error),r=qt(jt,f,t,S)){if(S.readyState=1,d&&g.trigger("ajaxSend",[S,f]),u)return S;f.async&&f.timeout>0&&(l=n.setTimeout(function(){S.abort("timeout")},f.timeout));try{u=!1,r.send(E,D)}catch(e){if(u)throw e;D(-1,e)}}else D(-1,"No Transport");function D(e,t,s,o){var c,p,h,E,w,C=t;u||(u=!0,l&&n.clearTimeout(l),r=void 0,i=o||"",S.readyState=e>0?4:0,c=e>=200&&e<300||304===e,s&&(E=function(e,t,n){for(var r,a,i,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in o)if(o[a]&&o[a].test(r)){l.unshift(a);break}if(l[0]in n)i=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}s||(s=a)}i=i||s}if(i)return i!==l[0]&&l.unshift(i),n[i]}(f,S,s)),E=function(e,t,n,r){var a,i,s,o,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(s=c[l+" "+i]||c["* "+i]))for(a in c)if((o=a.split(" "))[1]===i&&(s=c[l+" "+o[0]]||c["* "+o[0]])){!0===s?s=c[a]:!0!==c[a]&&(i=o[0],u.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(f,E,S,c),c?(f.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(_.lastModified[a]=w),(w=S.getResponseHeader("etag"))&&(_.etag[a]=w)),204===e||"HEAD"===f.type?C="nocontent":304===e?C="notmodified":(C=E.state,p=E.data,c=!(h=E.error))):(h=C,!e&&C||(C="error",e<0&&(e=0))),S.status=e,S.statusText=(t||C)+"",c?v.resolveWith(m,[p,C,S]):v.rejectWith(m,[S,C,h]),S.statusCode(b),b=void 0,d&&g.trigger(c?"ajaxSuccess":"ajaxError",[S,f,c?p:h]),y.fireWith(m,[S,C]),d&&(g.trigger("ajaxComplete",[S,f]),--_.active||_.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return _.get(e,t,n,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],function(e,t){_[t]=function(e,n,r,a){return y(n)&&(a=a||r,r=n,n=void 0),_.ajax(_.extend({url:e,type:t,dataType:a,data:n,success:r},_.isPlainObject(e)&&e))}}),_._evalUrl=function(e){return _.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},_.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){_(this).wrapInner(e.call(this,t))}):this.each(function(){var t=_(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){_(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(e){return!_.expr.pseudos.visible(e)},_.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},Ht=_.ajaxSettings.xhr();v.cors=!!Ht&&"withCredentials"in Ht,v.ajax=Ht=!!Ht,_.ajaxTransport(function(e){var t,r;if(v.cors||Ht&&!e.crossDomain)return{send:function(a,i){var s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];for(s in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)o.setRequestHeader(s,a[s]);t=function(e){return function(){t&&(t=r=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?i(0,"error"):i(o.status,o.statusText):i(Bt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=t(),r=o.onerror=o.ontimeout=t("error"),void 0!==o.onabort?o.onabort=r:o.onreadystatechange=function(){4===o.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),_.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),_.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,a){t=_("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),s.head.appendChild(t[0])},abort:function(){n&&n()}}});var Vt,Wt=[],Yt=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||_.expando+"_"+Ct++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",function(e,t,r){var a,i,s,o=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Yt,"$1"+a):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return s||_.error(a+" was not called"),s[0]},e.dataTypes[0]="json",i=n[a],n[a]=function(){s=arguments},r.always(function(){void 0===i?_(n).removeProp(a):n[a]=i,e[a]&&(e.jsonpCallback=t.jsonpCallback,Wt.push(a)),s&&y(i)&&i(s[0]),s=i=void 0}),"script"}),v.createHTMLDocument=((Vt=s.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),_.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,t.head.appendChild(r)):t=s),i=!n&&[],(a=O.exec(e))?[t.createElement(a[1])]:(a=we([e],t,i),i&&i.length&&_(i).remove(),_.merge([],a.childNodes)));var r,a,i},_.fn.load=function(e,t,n){var r,a,i,s=this,o=e.indexOf(" ");return o>-1&&(r=mt(e.slice(o)),e=e.slice(0,o)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),s.length>0&&_.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,s.html(r?_("<div>").append(_.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){_.fn[t]=function(e){return this.on(t,e)}}),_.expr.pseudos.animated=function(e){return _.grep(_.timers,function(t){return e===t.elem}).length},_.offset={setOffset:function(e,t,n){var r,a,i,s,o,l,c=_.css(e,"position"),u=_(e),d={};"static"===c&&(e.style.position="relative"),o=u.offset(),i=_.css(e,"top"),l=_.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1?(s=(r=u.position()).top,a=r.left):(s=parseFloat(i)||0,a=parseFloat(l)||0),y(t)&&(t=t.call(e,n,_.extend({},o))),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+a),"using"in t?t.using.call(e,d):u.css(d)}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){_.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===_.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===_.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=_(e).offset()).top+=_.css(e,"borderTopWidth",!0),a.left+=_.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-_.css(r,"marginTop",!0),left:t.left-a.left-_.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||Ce})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;_.fn[e]=function(r){return W(this,function(e,r,a){var i;if(b(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a},e,r,arguments.length)}}),_.each(["top","left"],function(e,t){_.cssHooks[t]=Ve(v.pixelPosition,function(e,n){if(n)return n=He(e,t),qe.test(n)?_(e).position()[t]+"px":n})}),_.each({Height:"height",Width:"width"},function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){_.fn[r]=function(a,i){var s=arguments.length&&(n||"boolean"!=typeof a),o=n||(!0===a||!0===i?"margin":"border");return W(this,function(t,n,a){var i;return b(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?_.css(t,n,o):_.style(t,n,a,o)},t,s?a:void 0,s)}})}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){_.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),_.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),_.proxy=function(e,t){var n,r,a;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=l.call(arguments,2),(a=function(){return e.apply(t||this,r.concat(l.call(arguments)))}).guid=e.guid=e.guid||_.guid++,a},_.holdReady=function(e){e?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=N,_.isFunction=y,_.isWindow=b,_.camelCase=J,_.type=C,_.now=Date.now,_.isNumeric=function(e){var t=_.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(r=function(){return _}.apply(t,[]))||(e.exports=r);var zt=n.jQuery,Xt=n.$;return _.noConflict=function(e){return n.$===_&&(n.$=Xt),e&&n.jQuery===_&&(n.jQuery=zt),_},a||(n.jQuery=n.$=_),_})},function(e,t,n){var r,a,i,s;s=n(52),i=n(634),r=n(73).compileSort,t.encodeRequest=function(e){return e=s.groupBy(e,function(e){return e._id.substr(0,2)}),s.mapValues(e,function(e){return a(e)})},t.encodeResponse=function(e,t){var n;for(n in e=s.groupBy(e,function(e){return e._id.substr(0,2)}),t)t[n],e[n]||(e[n]=[]);return s.pick(e,function(e,n){return a(e)!==t[n]})},t.decodeResponse=function(e,t,n){var a;return t=s.groupBy(t,function(e){return e._id.substr(0,2)}),a=s.extend(t,e),a=s.flatten(s.values(a)),n?a.sort(r(n)):a=s.sortBy(a,"_id"),a},a=function(e){var t,n,r,a,o;for(t=i.create(),r=0,a=(o=s.sortBy(e,"_id")).length;r<a;r++)n=o[r],t.update(n._id+":"+(n._rev||"")+"|");return t.hex().substr(0,20)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(108),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?s:o[e.$$typeof]||a}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(f){var a=h(n);a&&a!==f&&e(t,a,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var o=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!(i[v]||r&&r[v]||m&&m[v]||o&&o[v])){var y=p(n,v);try{c(t,v,y)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(51))},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,s=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,u=c&&c(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(u){var p=c(n);p&&p!==u&&e(t,p,d)}var h=s(n);o&&(h=h.concat(o(n)));for(var f=0;f<h.length;++f){var m=h[f];if(!(r[m]||a[m]||d&&d[m])){var g=l(n,m);try{i(t,m,g)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(c(n(71)),c(n(14))),i=n(111),s=n(72),o=c(n(267)),l=n(154);function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(e)?e={entries:e}:"string"==typeof e&&(e={entries:[e]});var t=function(){var e=d[p],t=(0,s.createPath)(e),n=void 0,a=void 0;e.key&&(n=e.key,a=m(n));var o=(0,s.parsePath)(t);return(0,i.createLocation)(r({},o,{state:a}),void 0,n)},n=function(e){var t=p+e;return t>=0&&t<d.length},c=(0,o.default)(r({},e,{getCurrentLocation:t,pushLocation:function(e){(p+=1)<d.length&&d.splice(p),d.push(e),f(e.key,e.state)},replaceLocation:function(e){d[p]=e,f(e.key,e.state)},go:function(e){if(e&&n(e)){p+=e;var a=t();c.transitionTo(r({},a,{action:l.POP}))}}})),u=e,d=u.entries,p=u.current;"string"==typeof d?d=[d]:Array.isArray(d)||(d=["/"]),d=d.map(function(e){return(0,i.createLocation)(e)}),null==p?p=d.length-1:p>=0&&p<d.length||(0,a.default)(!1);var h=function(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})}(d),f=function(e,t){return h[e]=t},m=function(e){return h[e]};return r({},c,{canGo:n})}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=d(n(14)),i=n(268),s=u(n(269)),o=u(n(599)),l=n(156),c=d(n(267));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.canUseDOM||(0,a.default)(!1);var t=e.forceRefresh||!(0,l.supportsHistory)()?o:s,n=t.getUserConfirmation,u=t.getCurrentLocation,d=t.pushLocation,p=t.replaceLocation,h=t.go,f=(0,c.default)(r({getUserConfirmation:n},e,{getCurrentLocation:u,pushLocation:d,replaceLocation:p,go:h})),m=0,g=void 0,v=function(e,t){1==++m&&(g=s.startListener(f.transitionTo));var n=t?f.listenBefore(e):f.listen(e);return function(){n(),0==--m&&g()}};return r({},f,{listenBefore:function(e){return v(e,!0)},listen:function(e){return v(e,!1)}})}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(c(n(71)),c(n(14))),i=n(268),s=n(156),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(600)),l=c(n(267));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return"/"===e.charAt(0)?e:"/"+e},d={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!"+e},decodePath:function(e){return"!"===e.charAt(0)?e.substring(1):e}},noslash:{encodePath:function(e){return"/"===e.charAt(0)?e.substring(1):e},decodePath:u},slash:{encodePath:u,decodePath:u}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.canUseDOM||(0,a.default)(!1);var t=e.queryKey,n=e.hashType;"string"!=typeof t&&(t="_k"),null==n&&(n="slash"),n in d||(n="slash");var c=d[n],u=o.getUserConfirmation,p=(0,l.default)(r({getUserConfirmation:u},e,{getCurrentLocation:function(){return o.getCurrentLocation(c,t)},pushLocation:function(e){return o.pushLocation(e,c,t)},replaceLocation:function(e){return o.replaceLocation(e,c,t)},go:o.go})),h=0,f=void 0,m=function(e,n){1==++h&&(f=o.startListener(p.transitionTo,c,t));var r=n?p.listenBefore(e):p.listen(e);return function(){r(),0==--h&&f()}};(0,s.supportsGoWithoutReloadUsingHash)();return r({},p,{listenBefore:function(e){return m(e,!0)},listen:function(e){return m(e,!1)},go:function(e){p.go(e)},createHref:function(e){return"#"+c.encodePath(p.createHref(e))}})}},function(e,t,n){t.MemoryDb=n(304),t.LocalStorageDb=n(308),t.IndexedDb=n(306),t.WebSQLDb=n(307),t.RemoteDb=n(632),t.HybridDb=n(309),t.ReplicatingDb=n(635),t.quickfind=n(311),t.utils=n(37)},function(e,t,n){"use strict";var r=n(110).compose;t.__esModule=!0,t.composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(1)),a=o(n(0)),i=o(n(109)),s=n(636);n(637);function o(e){return e&&e.__esModule?e:{default:e}}var l="unmounted";t.UNMOUNTED=l;var c="exited";t.EXITED=c;var u="entering";t.ENTERING=u;var d="entered";t.ENTERED=d;t.EXITING="exiting";var p=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var a,i=n.transitionGroup,s=i&&!i.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(a=c,r.appearStatus=u):a=d:a=t.unmountOnExit||t.mountOnEnter?l:c,r.state={status:a},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=r.prototype;return s.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:c}:null},s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==u&&n!==d&&(t=u):n!==u&&n!==d||(t="exiting")}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},s.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.default.findDOMNode(this);t===u?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},s.performEnter=function(e,t){var n=this,r=this.props.enter,a=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts(),s=a?i.appear:i.enter;t||r?(this.props.onEnter(e,a),this.safeSetState({status:u},function(){n.props.onEntering(e,a),n.onTransitionEnd(e,s,function(){n.safeSetState({status:d},function(){n.props.onEntered(e,a)})})})):this.safeSetState({status:d},function(){n.props.onEntered(e)})},s.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:c},function(){t.props.onExited(e)})})})):this.safeSetState({status:c},function(){t.props.onExited(e)})},s.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},s.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},s.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},s.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var i=a.default.Children.only(n);return a.default.cloneElement(i,r)},r}(a.default.Component);function h(){}p.contextTypes={transitionGroup:r.object},p.childContextTypes={transitionGroup:function(){}},p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:h,onEntering:h,onEntered:h,onExit:h,onExiting:h,onExited:h},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4;var f=(0,s.polyfill)(p);t.default=f},function(e,t){e.exports=Resumable},,function(e,t,n){e.exports=n(982)},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";var r=n(597),a=n(10);function i(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=a({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(a),i,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(n):e[t]=n,e},Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[i(t,e),"[",r,"]"].join(""):[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")};case"bracket":return function(t,n){return null===n?i(t,e):[i(t,e),"[]=",i(n,e)].join("")};default:return function(t,n){return null===n?i(t,e):[i(t,e),"=",i(n,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map(function(r){var a=e[r];if(void 0===a)return"";if(null===a)return i(r,t);if(Array.isArray(a)){var s=[];return a.slice().forEach(function(e){void 0!==e&&s.push(n(r,e,s.length))}),s.join("&")}return i(r,t)+"="+i(a,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";t.__esModule=!0;t.loopAsync=function(e,t,n){var r=0,a=!1,i=!1,s=!1,o=void 0,l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];a=!0,i?o=t:n.apply(void 0,t)};!function c(){if(!a&&(s=!0,!i)){for(i=!0;!a&&r<e&&s;)s=!1,t(r++,c,l);i=!1,a?n.apply(void 0,o):r>=e&&s&&(a=!0,n())}}()}},function(e,t,n){"use strict";t.__esModule=!0,t.replaceLocation=t.pushLocation=t.getCurrentLocation=t.go=t.getUserConfirmation=void 0;var r=n(269);Object.defineProperty(t,"getUserConfirmation",{enumerable:!0,get:function(){return r.getUserConfirmation}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return r.go}});var a=n(111),i=n(72);t.getCurrentLocation=function(){return(0,a.createLocation)(window.location)},t.pushLocation=function(e){return window.location.href=(0,i.createPath)(e),!1},t.replaceLocation=function(e){return window.location.replace((0,i.createPath)(e)),!1}},function(e,t,n){"use strict";t.__esModule=!0,t.replaceLocation=t.pushLocation=t.startListener=t.getCurrentLocation=t.go=t.getUserConfirmation=void 0;var r=n(269);Object.defineProperty(t,"getUserConfirmation",{enumerable:!0,get:function(){return r.getUserConfirmation}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return r.go}});var a,i=n(71),s=((a=i)&&a.__esModule,n(111)),o=n(156),l=n(301),c=n(72);var u=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},d=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},p=t.getCurrentLocation=function(e,t){var n=e.decodePath(u()),r=(0,c.getQueryStringValueFromPath)(n,t),a=void 0;r&&(n=(0,c.stripQueryStringValueFromPath)(n,t),a=(0,l.readState)(r));var i=(0,c.parsePath)(n);return i.state=a,(0,s.createLocation)(i,void 0,r)},h=void 0,f=(t.startListener=function(e,t,n){var r=function(){var r=u(),a=t.encodePath(r);if(r!==a)d(a);else{var i=p(t,n);if(h&&i.key&&h.key===i.key)return;h=i,e(i)}},a=u(),i=t.encodePath(a);return a!==i&&d(i),(0,o.addEventListener)(window,"hashchange",r),function(){return(0,o.removeEventListener)(window,"hashchange",r)}},function(e,t,n,r){var a=e.state,i=e.key,s=t.encodePath((0,c.createPath)(e));void 0!==a&&(s=(0,c.addQueryStringValueToPath)(s,n,i),(0,l.saveState)(i,a)),h=e,r(s)});t.pushLocation=function(e,t,n){return f(e,t,n,function(e){u()!==e&&function(e){window.location.hash=e}(e)})},t.replaceLocation=function(e,t,n){return f(e,t,n,function(e){u()!==e&&d(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.selectLocationState,o=void 0===s?i:s,l=n.adjustUrlOnReplay,c=void 0===l||l;if(void 0===o(t.getState()))throw new Error("Expected the routing state to be available either as `state.routing` or as the custom expression you can specify as `selectLocationState` in the `syncHistoryWithStore()` options. Ensure you have added the `routerReducer` to your store's reducers via `combineReducers` or whatever method you use to isolate your reducers.");var u=void 0,d=void 0,p=void 0,h=void 0,f=void 0,m=function(e){var n=o(t.getState());return n.locationBeforeTransitions||(e?u:void 0)};if(u=m(),c){var g=function(){var t=m(!0);f!==t&&u!==t&&(d=!0,f=t,e.transitionTo(r({},t,{action:"PUSH"})),d=!1)};p=t.subscribe(g),g()}var v=function(e){d||(f=e,!u&&(u=e,m())||t.dispatch({type:a.LOCATION_CHANGE,payload:e}))};h=e.listen(v),e.getCurrentLocation&&v(e.getCurrentLocation());return r({},e,{listen:function(n){var r=m(!0),a=!1,i=t.subscribe(function(){var e=m(!0);e!==r&&(r=e,a||n(r))});return e.getCurrentLocation||n(r),function(){a=!0,i()}},unsubscribe:function(){c&&p(),h()}})};var a=n(302),i=function(e){return e.routing}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return function(t){return function(n){if(n.type!==r.CALL_HISTORY_METHOD)return t(n);var a=n.payload,i=a.method,s=a.args;e[i].apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s))}}}};var r=n(303)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(604),s=(r=i)&&r.__esModule?r:{default:r};var o={redirectQueryParamName:"redirect",locationSelector:function(e){return e.location}};t.default=function(e){var t=a({},o,e),n=t.redirectQueryParamName,r=t.locationSelector;return{getRedirectQueryParam:function(e){return r(e).query[n]},createRedirectLoc:function(e){return function(t,i){var o,l,c,u=r(t),d=s.default.parse(i,!0),p=void 0;return e?(o={},l=n,c=""+u.pathname+u.search+u.hash,l in o?Object.defineProperty(o,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[l]=c,p=o):p={},p=a({},p,d.query),{pathname:d.pathname,hash:d.hash,query:p}}}}}},function(e,t,n){"use strict";var r=n(605),a=n(606);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){a.isString(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),d=["%","/","?",";","#"].concat(u),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(607);function b(e,t,n){if(e&&a.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),o=-1!==i&&i<e.indexOf("#")?"?":"#",c=e.split(o);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(o);if(b=b.trim(),!n&&1===e.split("#").length){var E=l.exec(b);if(E)return this.path=b,this.href=b,this.pathname=E[1],E[2]?(this.search=E[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=s.exec(b);if(w){var C=(w=w[0]).toLowerCase();this.protocol=C,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===b.substr(0,2);!_||w&&g[w]||(b=b.substr(2),this.slashes=!0)}if(!g[w]&&(_||w&&!v[w])){for(var S,D,R=-1,k=0;k<p.length;k++){-1!==(T=b.indexOf(p[k]))&&(-1===R||T<R)&&(R=T)}-1!==(D=-1===R?b.lastIndexOf("@"):b.lastIndexOf("@",R))&&(S=b.slice(0,D),b=b.slice(D+1),this.auth=decodeURIComponent(S)),R=-1;for(k=0;k<d.length;k++){var T;-1!==(T=b.indexOf(d[k]))&&(-1===R||T<R)&&(R=T)}-1===R&&(R=b.length),this.host=b.slice(0,R),b=b.slice(R),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var N=this.hostname.split(/\./),O=(k=0,N.length);k<O;k++){var P=N[k];if(P&&!P.match(h)){for(var I="",A=0,M=P.length;A<M;A++)P.charCodeAt(A)>127?I+="x":I+=P[A];if(!I.match(h)){var j=N.slice(0,k),L=N.slice(k+1),F=P.match(f);F&&(j.push(F[1]),L.unshift(F[2])),L.length&&(b="/"+L.join(".")+b),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+U,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[C])for(k=0,O=u.length;k<O;k++){var $=u[k];if(-1!==b.indexOf($)){var B=encodeURIComponent($);B===$&&(B=escape($)),b=b.split($).join(B)}}var H=b.indexOf("#");-1!==H&&(this.hash=b.substr(H),b=b.slice(0,H));var V=b.indexOf("?");if(-1!==V?(this.search=b.substr(V),this.query=b.substr(V+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,V)):t&&(this.search="",this.query={}),b&&(this.pathname=b),v[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),t+i+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(o=o.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(a.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),s=0;s<r.length;s++){var o=r[s];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=e[u])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var h=d[p];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),E=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=E||b||n.host&&e.pathname,C=w,_=n.pathname&&n.pathname.split("/")||[],S=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),w=w&&(""===f[0]||""===_[0])),E)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=_.shift(),(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift());return n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var D=_.slice(-1)[0],R=(n.host||e.host||_.length>1)&&("."===D||".."===D)||""===D,k=0,T=_.length;T>=0;T--)"."===(D=_[T])?_.splice(T,1):".."===D?(_.splice(T,1),k++):k&&(_.splice(T,1),k--);if(!w&&!C)for(;k--;k)_.unshift("..");!w||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),R&&"/"!==_.join("/").substr(-1)&&_.push("");var x,N=""===_[0]||_[0]&&"/"===_[0].charAt(0);S&&(n.hostname=n.host=N?"":_.length?_.shift():"",(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift()));return(w=w||n.host&&_.length)&&!N&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var a;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var o,l=2147483647,c=36,u=1,d=26,p=38,h=700,f=72,m=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-u,C=Math.floor,_=String.fromCharCode;function S(e){throw new RangeError(E[e])}function D(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function R(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+D((e=e.replace(b,".")).split("."),t).join(".")}function k(e){for(var t,n,r=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function T(e){return D(e,function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=_(e)}).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function N(e,t,n){var r=0;for(e=n?C(e/h):e>>1,e+=C(e/t);e>w*d>>1;r+=c)e=C(e/w);return C(r+(w+1)*e/(e+p))}function O(e){var t,n,r,a,i,s,o,p,h,v,y,b=[],E=e.length,w=0,_=m,D=f;for((n=e.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&S("not-basic"),b.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<E;){for(i=w,s=1,o=c;a>=E&&S("invalid-input"),((p=(y=e.charCodeAt(a++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||p>C((l-w)/s))&&S("overflow"),w+=p*s,!(p<(h=o<=D?u:o>=D+d?d:o-D));o+=c)s>C(l/(v=c-h))&&S("overflow"),s*=v;D=N(w-i,t=b.length+1,0==i),C(w/t)>l-_&&S("overflow"),_+=C(w/t),w%=t,b.splice(w++,0,_)}return T(b)}function P(e){var t,n,r,a,i,s,o,p,h,v,y,b,E,w,D,R=[];for(b=(e=k(e)).length,t=m,n=0,i=f,s=0;s<b;++s)(y=e[s])<128&&R.push(_(y));for(r=a=R.length,a&&R.push(g);r<b;){for(o=l,s=0;s<b;++s)(y=e[s])>=t&&y<o&&(o=y);for(o-t>C((l-n)/(E=r+1))&&S("overflow"),n+=(o-t)*E,t=o,s=0;s<b;++s)if((y=e[s])<t&&++n>l&&S("overflow"),y==t){for(p=n,h=c;!(p<(v=h<=i?u:h>=i+d?d:h-i));h+=c)D=p-v,w=c-v,R.push(_(x(v+D%w,0))),p=C(D/w);R.push(_(x(p,0))),i=N(n,E,r==a),n=0,++r}++n,++t}return R.join("")}o={version:"1.4.1",ucs2:{decode:k,encode:T},decode:O,encode:P,toASCII:function(e){return R(e,function(e){return y.test(e)?"xn--"+P(e):e})},toUnicode:function(e){return R(e,function(e){return v.test(e)?O(e.slice(4).toLowerCase()):e})}},void 0===(a=function(){return o}.call(t,n,t,e))||(e.exports=a)}()}).call(this,n(148)(e),n(51))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(608),t.encode=t.stringify=n(609)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var l=1e3;i&&"number"==typeof i.maxKeys&&(l=i.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var d,p,h,f,m=e[u].replace(o,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),p=m.substr(g+1)):(d=m,p=""),h=decodeURIComponent(d),f=decodeURIComponent(p),r(s,h)?a(s[h])?s[h].push(f):s[h]=[s[h],f]:s[h]=f}return s};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,o){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),function(s){var o=encodeURIComponent(r(s))+n;return a(e[s])?i(e[s],function(e){return o+encodeURIComponent(r(e))}).join(t):o+encodeURIComponent(r(e[s]))}).join(t):o?encodeURIComponent(r(o))+n+encodeURIComponent(r(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(8),i=o(n(14)),s=o(n(611));function o(e){return e&&e.__esModule?e:{default:e}}var l={authenticatingSelector:function(){return!1},allowRedirectBack:!0,FailureComponent:o(n(613)).default,redirectQueryParamName:"redirect"};t.default=function(e){var t=e.locationHelperBuilder,n=e.getRouterRedirect;return{connectedRouterRedirect:function(e){var o=r({},l,e),c=o.FailureComponent,u=o.redirectPath,d=o.authenticatedSelector,p=o.authenticatingSelector,h=o.allowRedirectBack,f=o.redirectQueryParamName,m=t({redirectQueryParamName:f}).createRedirectLoc,g=void 0;"string"==typeof u?g=function(){return u}:"function"==typeof u?g=u:(0,i.default)(!1,"redirectPath must be either a string or a function");var v=void 0;"boolean"==typeof h?v=function(){return h}:"function"==typeof h?v=h:(0,i.default)(!1,"allowRedirectBack must be either a boolean or a function");var y=(0,a.connect)(function(e,t){return{redirect:(r=n(t),function(e,t){return r(m(v(e,t))(e,t))})};var r})(c);return function(e){return(0,a.connect)(function(e,t){return{redirectPath:g(e,t),isAuthenticated:d(e,t),isAuthenticating:p(e,t)}})((0,s.default)(r({},o,{FailureComponent:y}))(e))}},connectedReduxRedirect:function(e){var n=r({},l,e),o=n.FailureComponent,c=n.redirectPath,u=n.authenticatedSelector,d=n.authenticatingSelector,p=n.allowRedirectBack,h=n.redirectAction,f=n.redirectQueryParamName,m=t({redirectQueryParamName:f}).createRedirectLoc,g=void 0;"string"==typeof c?g=function(){return c}:"function"==typeof c?g=c:(0,i.default)(!1,"redirectPath must be either a string or a function");var v=void 0;"boolean"==typeof p?v=function(){return p}:"function"==typeof p?v=p:(0,i.default)(!1,"allowRedirectBack must be either a boolean or a function");var y=(0,a.connect)(null,function(e){return{redirect:function(t,n){return e(h(m(v(t,n))(t,n)))}}})(o);return function(e){return(0,a.connect)(function(e,t){return{redirectPath:g(e,t),isAuthenticated:u(e,t),isAuthenticating:d(e,t)}})((0,s.default)(r({},n,{FailureComponent:y}))(e))}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),s=c(i),o=c(n(1)),l=c(n(612));function c(e){return e&&e.__esModule?e:{default:e}}var u={AuthenticatingComponent:function(){return null},FailureComponent:function(){return null},wrapperDisplayName:"AuthWrapper"};t.default=function(e){var t=a({},u,e),n=t.AuthenticatingComponent,c=t.FailureComponent,d=t.wrapperDisplayName;return function(e){var t,a,u=e.displayName||e.name||"Component",p=(a=t=function(t){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.Component),r(a,[{key:"render",value:function(){var t=this.props,r=t.isAuthenticated,a=t.isAuthenticating;return r?s.default.createElement(e,this.props):a?s.default.createElement(n,this.props):s.default.createElement(c,this.props)}}]),a}(),t.displayName=d+"("+u+")",t.propTypes={isAuthenticated:o.default.bool,isAuthenticating:o.default.bool},t.defaultProps={isAuthenticating:!1},a);return(0,l.default)(p,e)}}},function(e,t,n){"use strict";var r=n(108),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?s:o[e.$$typeof]||a}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(f){var a=h(n);a&&a!==f&&e(t,a,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var o=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!(i[v]||r&&r[v]||m&&m[v]||o&&o[v])){var y=p(n,v);try{c(t,v,y)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=n(1),c=(i=l)&&i.__esModule?i:{default:i};var u=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),s(t,[{key:"componentWillMount",value:function(){this.props.redirect(this.props,this.props.redirectPath)}},{key:"render",value:function(){return null}}]),t}(),r.propTypes={redirectPath:c.default.string.isRequired,redirect:c.default.func.isRequired},a);t.default=u},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,a=n;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(617),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(51))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a,i,s,o,l=1,c={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){f(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){i.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):r=function(e){setTimeout(f,0,e)}:(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),r=function(t){e.postMessage(s+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return c[l]=a,r(l),l++},p.clearImmediate=h}function h(e){delete c[e]}function f(e){if(u)setTimeout(f,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(51),n(59))},function(e,t,n){var r,a,i;
/*!
  * Bowser - a browser detector
  * https://github.com/ded/bowser
  * MIT License | (c) Dustin Diaz 2014
  */i=function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}var r,a,i,s=n(/(ipod|iphone|ipad)/i).toLowerCase(),o=!/like android/i.test(t)&&/android/i.test(t),l=n(/edge\/(\d+(\.\d+)?)/i),c=n(/version\/(\d+(\.\d+)?)/i),u=/tablet/i.test(t),d=!u&&/[^-]mobi/i.test(t);/opera|opr/i.test(t)?r={name:"Opera",opera:e,version:c||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(t)?(r={name:"Windows Phone",windowsphone:e},l?(r.msedge=e,r.version=l):(r.msie=e,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?r={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?r={name:"Microsoft Edge",msedge:e,version:l}:/chrome|crios|crmo/i.test(t)?r={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?(r={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"},c&&(r.version=c)):/sailfish/i.test(t)?r={name:"Sailfish",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?r={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(r={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(r.firefoxos=e)):/silk/i.test(t)?r={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:o?r={name:"Android",version:c}:/phantom/i.test(t)?r={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?r={name:"BlackBerry",blackberry:e,version:c||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(t)?(r={name:"WebOS",webos:e,version:c||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(r.touchpad=e)):r=/bada/i.test(t)?{name:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(t)?{name:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||c}:/safari/i.test(t)?{name:"Safari",safari:e,version:c}:{name:n(/^(.*)\/(.*) /),version:(a=/^(.*)\/(.*) /,i=t.match(a),i&&i.length>1&&i[2]||"")},!r.msedge&&/(apple)?webkit/i.test(t)?(r.name=r.name||"Webkit",r.webkit=e,!r.version&&c&&(r.version=c)):!r.opera&&/gecko\//i.test(t)&&(r.name=r.name||"Gecko",r.gecko=e,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i)),r.msedge||!o&&!r.silk?s&&(r[s]=e,r.ios=e):r.android=e;var p="";r.windowsphone?p=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):s?p=(p=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):o?p=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?p=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?p=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?p=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(p=n(/tizen[\/\s](\d+(\.\d+)*)/i)),p&&(r.osversion=p);var h=p.split(".")[0];return u||"ipad"==s||o&&(3==h||4==h&&!d)||r.silk?r.tablet=e:(d||"iphone"==s||"ipod"==s||o||r.blackberry||r.webos||r.bada)&&(r.mobile=e),r.msedge||r.msie&&r.version>=10||r.chrome&&r.version>=20||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1?r.a=e:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6?r.c=e:r.x=e,r}var n=t("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n._detect=t,n},e.exports?e.exports.browser=i():void 0===(a="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=a)},function(e,t,n){var r=n(52);EJSON={};var a={};EJSON.addType=function(e,t){if(r.has(a,e))throw new Error("Type "+e+" already present");a[e]=t};var i=[{matchJSONValue:function(e){return r.has(e,"$date")&&1===r.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return r.has(e,"$binary")&&1===r.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&r.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:EJSON._base64Encode(e)}},fromJSONValue:function(e){return EJSON._base64Decode(e.$binary)}},{matchJSONValue:function(e){return r.has(e,"$escape")&&1===r.size(e)},matchObject:function(e){return!(r.isEmpty(e)||r.size(e)>2)&&r.any(i,function(t){return t.matchJSONValue(e)})},toJSONValue:function(e){var t={};return r.each(e,function(e,n){t[n]=EJSON.toJSONValue(e)}),{$escape:t}},fromJSONValue:function(e){var t={};return r.each(e.$escape,function(e,n){t[n]=EJSON.fromJSONValue(e)}),t}},{matchJSONValue:function(e){return r.has(e,"$type")&&r.has(e,"$value")&&2===r.size(e)},matchObject:function(e){return EJSON._isCustomType(e)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(e){var t=e.$type;return(0,a[t])(e.$value)}}];EJSON._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&r.has(a,e.typeName())};var s=EJSON._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=o(e);return void 0!==t?t:(r.each(e,function(t,n){if("object"==typeof t||void 0===t){var r=o(t);r?e[n]=r:s(t)}}),e)},o=function(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.matchObject(e))return n.toJSONValue(e)}};EJSON.toJSONValue=function(e){var t=o(e);return void 0!==t?t:("object"==typeof e&&(e=EJSON.clone(e),s(e)),e)};var l=EJSON._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=c(e);return t!==e?t:(r.each(e,function(t,n){if("object"==typeof t){var r=c(t);if(t!==r)return void(e[n]=r);l(t)}}),e)},c=function(e){if("object"==typeof e&&null!==e&&r.size(e)<=2&&r.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var t=0;t<i.length;t++){var n=i[t];if(n.matchJSONValue(e))return n.fromJSONValue(e)}return e};EJSON.fromJSONValue=function(e){var t=c(e);return t===e&&"object"==typeof e?(e=EJSON.clone(e),l(e),e):t},EJSON.stringify=function(e){return JSON.stringify(EJSON.toJSONValue(e))},EJSON.parse=function(e){return EJSON.fromJSONValue(JSON.parse(e))},EJSON.isBinary=function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill},EJSON.equals=function(e,t,n){var a,i=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(!e||!t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(EJSON.isBinary(e)&&EJSON.isBinary(t)){if(e.length!==t.length)return!1;for(a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}if("function"==typeof e.equals)return e.equals(t,n);if(e instanceof Array){if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(a=0;a<e.length;a++)if(!EJSON.equals(e[a],t[a],n))return!1;return!0}if(i){var s=[];return r.each(t,function(e,t){s.push(t)}),a=0,r.all(e,function(e,r){return!(a>=s.length)&&(r===s[a]&&(!!EJSON.equals(e,t[s[a]],n)&&(a++,!0)))})&&a===s.length}return a=0,r.all(e,function(e,i){return!!r.has(t,i)&&(!!EJSON.equals(e,t[i],n)&&(a++,!0))})&&r.size(t)===a},EJSON.clone=function(e){var t;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(EJSON.isBinary(e)){t=EJSON.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}if(r.isArray(e)||r.isArguments(e)){for(t=[],n=0;n<e.length;n++)t[n]=EJSON.clone(e[n]);return t}return"function"==typeof e.clone?e.clone():(t={},r.each(e,function(e,n){t[n]=EJSON.clone(e)}),t)},e.exports=EJSON},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=n(75),i=n(74),s=r(n(621));t.default=function e(t,n,r){void 0===r&&(r={});var o=i.getGeom(t),l=i.getGeom(n);if("Polygon"===o.type&&"Polygon"===l.type){var c=s.intersection(o.coordinates,l.coordinates);if(null===c||0===c.length)return null;if(1===c.length){var u=c[0][0][0],d=c[0][0][c[0][0].length-1];return u[0]===d[0]&&u[1]===d[1]?a.polygon(c[0],r.properties):null}return a.multiPolygon(c,r.properties)}if("MultiPolygon"===o.type){for(var p=[],h=0,f=o.coordinates;h<f.length;h++){var m=f[h],g=e(i.getGeom(a.polygon(m)),l);if(g){var v=i.getGeom(g);if("Polygon"===v.type)p.push(v.coordinates);else{if("MultiPolygon"!==v.type)throw new Error("intersection is invalid");p=p.concat(v.coordinates)}}}return 0===p.length?null:1===p.length?a.polygon(p[0],r.properties):a.multiPolygon(p,r.properties)}if("MultiPolygon"===l.type)return e(l,o);throw new Error("poly1 and poly2 must be either polygons or multiPolygons")}},function(e,t,n){
/**
 * martinez v0.4.3
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
!function(e){"use strict";function t(e,t){return e>t?1:e<t?-1:0}var n=function(e,n){void 0===e&&(e=t),void 0===n&&(n=!1),this._compare=e,this._root=null,this._size=0,this._noDuplicates=!!n},r={size:{configurable:!0}};n.prototype.rotateLeft=function(e){var t=e.right;t&&(e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.left=e),e.parent=t},n.prototype.rotateRight=function(e){var t=e.left;t&&(e.left=t.right,t.right&&(t.right.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.right=e),e.parent=t},n.prototype._splay=function(e){for(;e.parent;){var t=e.parent;t.parent?t.left===e&&t.parent.left===t?(this.rotateRight(t.parent),this.rotateRight(t)):t.right===e&&t.parent.right===t?(this.rotateLeft(t.parent),this.rotateLeft(t)):t.left===e&&t.parent.right===t?(this.rotateRight(t),this.rotateLeft(t)):(this.rotateLeft(t),this.rotateRight(t)):t.left===e?this.rotateRight(t):this.rotateLeft(t)}},n.prototype.splay=function(e){for(var t,n,r,a,i;e.parent;)t=e.parent,(n=t.parent)&&n.parent?((r=n.parent).left===n?r.left=e:r.right=e,e.parent=r):(e.parent=null,this._root=e),a=e.left,i=e.right,e===t.left?(n&&(n.left===t?(t.right?(n.left=t.right,n.left.parent=n):n.left=null,t.right=n,n.parent=t):(a?(n.right=a,a.parent=n):n.right=null,e.left=n,n.parent=e)),i?(t.left=i,i.parent=t):t.left=null,e.right=t,t.parent=e):(n&&(n.right===t?(t.left?(n.right=t.left,n.right.parent=n):n.right=null,t.left=n,n.parent=t):(i?(n.left=i,i.parent=n):n.left=null,e.right=n,n.parent=e)),a?(t.right=a,a.parent=t):t.right=null,e.left=t,t.parent=e)},n.prototype.replace=function(e,t){e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.parent=e.parent)},n.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.insert=function(e,t){var n=this._root,r=null,a=this._compare;if(this._noDuplicates)for(;n;){if(r=n,0===a(n.key,e))return;n=a(n.key,e)<0?n.right:n.left}else for(;n;)r=n,n=a(n.key,e)<0?n.right:n.left;return n={key:e,data:t,left:null,right:null,parent:r},r?a(r.key,n.key)<0?r.right=n:r.left=n:this._root=n,this.splay(n),this._size++,n},n.prototype.find=function(e){for(var t=this._root,n=this._compare;t;){var r=n(t.key,e);if(r<0)t=t.right;else{if(!(r>0))return t;t=t.left}}return null},n.prototype.contains=function(e){for(var t=this._root,n=this._compare;t;){var r=n(e,t.key);if(0===r)return!0;t=r<0?t.left:t.right}return!1},n.prototype.remove=function(e){var t=this.find(e);if(!t)return!1;if(this.splay(t),t.left)if(t.right){var n=this.minNode(t.right);n.parent!==t&&(this.replace(n,n.right),n.right=t.right,n.right.parent=n),this.replace(t,n),n.left=t.left,n.left.parent=n}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},n.prototype.removeNode=function(e){if(!e)return!1;if(this.splay(e),e.left)if(e.right){var t=this.minNode(e.right);t.parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},n.prototype.erase=function(e){var t=this.find(e);if(t){this.splay(t);var n=t.left,r=t.right,a=null;n&&(n.parent=null,a=this.maxNode(n),this.splay(a),this._root=a),r&&(n?a.right=r:this._root=r,r.parent=a),this._size--}},n.prototype.pop=function(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t},n.prototype.next=function(e){var t=e;if(t)if(t.right)for(t=t.right;t&&t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)e=t,t=t.parent;return t},n.prototype.prev=function(e){var t=e;if(t)if(t.left)for(t=t.left;t&&t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)e=t,t=t.parent;return t},n.prototype.forEach=function(e){for(var t=this._root,n=[],r=!1,a=0;!r;)t?(n.push(t),t=t.left):n.length>0?(t=n.pop(),e(t,a++),t=t.right):r=!0;return this},n.prototype.range=function(e,t,n,r){for(var a=[],i=this._compare,s=this._root;0!==a.length||s;)if(s)a.push(s),s=s.left;else{if(s=a.pop(),i(s.key,t)>0)break;if(i(s.key,e)>=0&&n.call(r,s))return this;s=s.right}return this},n.prototype.keys=function(){for(var e=this._root,t=[],n=[],r=!1;!r;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),n.push(e.key),e=e.right):r=!0;return n},n.prototype.values=function(){for(var e=this._root,t=[],n=[],r=!1;!r;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),n.push(e.data),e=e.right):r=!0;return n},n.prototype.at=function(e){for(var t=this._root,n=[],r=!1,a=0;!r;)if(t)n.push(t),t=t.left;else if(n.length>0){if(t=n.pop(),a===e)return t;a++,t=t.right}else r=!0;return null},n.prototype.load=function(e,t,n){if(void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===n&&(n=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var r=e.length;return n&&function e(t,n,r,a,i){if(!(r>=a)){for(var s=t[r+a>>1],o=r-1,l=a+1;;){do{o++}while(i(t[o],s)<0);do{l--}while(i(t[l],s)>0);if(o>=l)break;var c=t[o];t[o]=t[l],t[l]=c,c=n[o],n[o]=n[l],n[l]=c}e(t,n,r,l,i),e(t,n,l+1,a,i)}}(e,t,0,r-1,this._compare),this._root=function e(t,n,r,a,i){var s=i-a;if(s>0){var o=a+Math.floor(s/2),l=n[o],c=r[o],u={key:l,data:c,parent:t};return u.left=e(u,n,r,a,o),u.right=e(u,n,r,o+1,i),u}return null}(null,e,t,0,r),this._size=r,this},n.prototype.min=function(){var e=this.minNode(this._root);return e?e.key:null},n.prototype.max=function(){var e=this.maxNode(this._root);return e?e.key:null},n.prototype.isEmpty=function(){return null===this._root},r.size.get=function(){return this._size},n.createTree=function(e,t,r,a,i){return new n(r,i).load(e,t,a)},Object.defineProperties(n.prototype,r);var a=0,i=1,s=2,o=3,l=0,c=1,u=2,d=3;function p(e,t,n){null===t?(e.inOut=!1,e.otherInOut=!0):(e.isSubject===t.isSubject?(e.inOut=!t.inOut,e.otherInOut=t.otherInOut):(e.inOut=!t.otherInOut,e.otherInOut=t.isVertical()?!t.inOut:t.inOut),t&&(e.prevInResult=!h(t,n)||t.isVertical()?t.prevInResult:t)),e.inResult=h(e,n)}function h(e,t){switch(e.type){case a:switch(t){case l:return!e.otherInOut;case c:return e.otherInOut;case u:return e.isSubject&&e.otherInOut||!e.isSubject&&!e.otherInOut;case d:return!0}break;case s:return t===l||t===c;case o:return t===u;case i:return!1}return!1}var f=function(e,t,n,r,i){this.left=t,this.point=e,this.otherEvent=n,this.isSubject=r,this.type=i||a,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0};function m(e,t){return e[0]===t[0]&&e[1]===t[1]}function g(e,t,n){return(e[0]-n[0])*(t[1]-n[1])-(t[0]-n[0])*(e[1]-n[1])}function v(e,t){var n=e.point,r=t.point;return n[0]>r[0]?1:n[0]<r[0]?-1:n[1]!==r[1]?n[1]>r[1]?1:-1:function(e,t,n,r){return e.left!==t.left?e.left?1:-1:0!==g(n,e.otherEvent.point,t.otherEvent.point)?e.isBelow(t.otherEvent.point)?-1:1:!e.isSubject&&t.isSubject?1:-1}(e,t,n)}function y(e,t,n){var r=new f(t,!1,e,e.isSubject),a=new f(t,!0,e.otherEvent,e.isSubject);return m(e.point,e.otherEvent.point)&&console.warn("what is that, a collapsed segment?",e),r.contourId=a.contourId=e.contourId,v(a,e.otherEvent)>0&&(e.otherEvent.left=!0,a.left=!1),e.otherEvent.otherEvent=a,e.otherEvent=r,n.push(a),n.push(r),n}function b(e,t){return e[0]*t[1]-e[1]*t[0]}function E(e,t){return e[0]*t[0]+e[1]*t[1]}function w(e,t,n){var r=function(e,t,n,r,a){var i=[t[0]-e[0],t[1]-e[1]],s=[r[0]-n[0],r[1]-n[1]];function o(e,t,n){return[e[0]+t*n[0],e[1]+t*n[1]]}var l=[n[0]-e[0],n[1]-e[1]],c=b(i,s),u=c*c,d=E(i,i);if(u>0){var p=b(l,s)/c;if(p<0||p>1)return null;var h=b(l,i)/c;return h<0||h>1?null:0===p||1===p?a?null:[o(e,p,i)]:0===h||1===h?a?null:[o(n,h,s)]:[o(e,p,i)]}if(c=b(l,i),(u=c*c)>0)return null;var f=E(i,l)/d,m=f+E(i,s)/d,g=Math.min(f,m),v=Math.max(f,m);return g<=1&&v>=0?1===g?a?null:[o(e,g>0?g:0,i)]:0===v?a?null:[o(e,v<1?v:1,i)]:a&&0===g&&1===v?null:[o(e,g>0?g:0,i),o(e,v<1?v:1,i)]:null}(e.point,e.otherEvent.point,t.point,t.otherEvent.point),a=r?r.length:0;if(0===a)return 0;if(1===a&&(m(e.point,t.point)||m(e.otherEvent.point,t.otherEvent.point)))return 0;if(2===a&&e.isSubject===t.isSubject)return 0;if(1===a)return m(e.point,r[0])||m(e.otherEvent.point,r[0])||y(e,r[0],n),m(t.point,r[0])||m(t.otherEvent.point,r[0])||y(t,r[0],n),1;var l=[],c=!1,u=!1;return m(e.point,t.point)?c=!0:1===v(e,t)?l.push(t,e):l.push(e,t),m(e.otherEvent.point,t.otherEvent.point)?u=!0:1===v(e.otherEvent,t.otherEvent)?l.push(t.otherEvent,e.otherEvent):l.push(e.otherEvent,t.otherEvent),c&&u||c?(t.type=i,e.type=t.inOut===e.inOut?s:o,c&&!u&&y(l[1].otherEvent,l[0].point,n),2):u?(y(l[0],l[1].point,n),3):l[0]!==l[3].otherEvent?(y(l[0],l[1].point,n),y(l[1],l[2].point,n),3):(y(l[0],l[1].point,n),y(l[3].otherEvent,l[2].point,n),3)}function C(e,t){if(e===t)return 0;if(0!==g(e.point,e.otherEvent.point,t.point)||0!==g(e.point,e.otherEvent.point,t.otherEvent.point))return m(e.point,t.point)?e.isBelow(t.otherEvent.point)?-1:1:e.point[0]===t.point[0]?e.point[1]<t.point[1]?-1:1:1===v(e,t)?t.isAbove(e.point)?-1:1:e.isBelow(t.point)?-1:1;if(e.isSubject!==t.isSubject)return e.isSubject?-1:1;var n=e.point,r=t.point;return n[0]===r[0]&&n[1]===r[1]?(n=e.otherEvent.point,r=t.otherEvent.point,n[0]===r[0]&&n[1]===r[1]?0:e.contourId>t.contourId?1:-1):1===v(e,t)?1:-1}function _(e,t,n,r){var a=e+1,i=t.length;if(a>i-1)return e-1;for(var s=t[e].point,o=t[a].point;a<i&&o[0]===s[0]&&o[1]===s[1];){if(!n[a])return a;o=t[++a].point}for(a=e-1;n[a]&&a>=r;)a--;return a}function S(e,t){var n,r,a,i=function(e){var t,n,r,a,i=[];for(n=0,r=e.length;n<r;n++)((t=e[n]).left&&t.inResult||!t.left&&t.otherEvent.inResult)&&i.push(t);for(var s=!1;!s;)for(s=!0,n=0,r=i.length;n<r;n++)n+1<r&&1===v(i[n],i[n+1])&&(a=i[n],i[n]=i[n+1],i[n+1]=a,s=!1);for(n=0,r=i.length;n<r;n++)(t=i[n]).pos=n;for(n=0,r=i.length;n<r;n++)(t=i[n]).left||(a=t.pos,t.pos=t.otherEvent.pos,t.otherEvent.pos=a);return i}(e),s={},o=[];for(n=0,r=i.length;n<r;n++)if(!s[n]){var l=[[]];i[n].isExteriorRing?t===u&&!i[n].isSubject&&o.length>1?o[o.length-1].push(l[0]):o.push(l):t!==u||i[n].isSubject||0!==o.length?0===o.length?o.push([[l]]):o[o.length-1].push(l[0]):o.push(l);var c=o.length-1,d=n,p=i[n].point;for(l[0].push(p);d>=n;)a=i[d],s[d]=!0,a.left?(a.resultInOut=!1,a.contourId=c):(a.otherEvent.resultInOut=!0,a.otherEvent.contourId=c),d=a.pos,s[d]=!0,l[0].push(i[d].point),d=_(d,i,s,n);a=i[d=-1===d?n:d],s[d]=s[a.pos]=!0,a.otherEvent.resultInOut=!0,a.otherEvent.contourId=c}return o}f.prototype.isBelow=function(e){var t=this.point,n=this.otherEvent.point;return this.left?(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])>0:(n[0]-e[0])*(t[1]-e[1])-(t[0]-e[0])*(n[1]-e[1])>0},f.prototype.isAbove=function(e){return!this.isBelow(e)},f.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},f.prototype.clone=function(){var e=new f(this.point,this.left,this.otherEvent,this.isSubject,this.type);return e.inResult=this.inResult,e.prevInResult=this.prevInResult,e.isExteriorRing=this.isExteriorRing,e.inOut=this.inOut,e.otherInOut=this.otherInOut,e};var D=k,R=k;function k(e,t){if(!(this instanceof k))return new k(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||T,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function T(e,t){return e<t?-1:e>t?1:0}k.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var a=e-1>>1,i=t[a];if(n(r,i)>=0)break;t[e]=i,e=a}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,a=t[e];e<r;){var i=1+(e<<1),s=i+1,o=t[i];if(s<this.length&&n(t[s],o)<0&&(i=s,o=t[s]),n(o,a)>=0)break;t[e]=o,e=i}t[e]=a}},D.default=R;var x=Math.max,N=Math.min,O=0;function P(e,t,n,r,a,i){var s,o,l,c,u,d;for(s=0,o=e.length-1;s<o;s++)if(l=e[s],c=e[s+1],u=new f(l,!1,void 0,t),d=new f(c,!1,u,t),u.otherEvent=d,l[0]!==c[0]||l[1]!==c[1]){u.contourId=d.contourId=n,i||(u.isExteriorRing=!1,d.isExteriorRing=!1),v(u,d)>0?d.left=!0:u.left=!0;var p=l[0],h=l[1];a[0]=N(a[0],p),a[1]=N(a[1],h),a[2]=x(a[2],p),a[3]=x(a[3],h),r.push(u),r.push(d)}}var I=[];function A(e,t,r){"number"==typeof e[0][0][0]&&(e=[e]),"number"==typeof t[0][0][0]&&(t=[t]);var a=function(e,t,n){var r=null;return e.length*t.length==0&&(n===l?r=I:n===u?r=e:n!==c&&n!==d||(r=0===e.length?t:e)),r}(e,t,r);if(a)return a===I?null:a;var i=[1/0,1/0,-1/0,-1/0],s=[1/0,1/0,-1/0,-1/0],o=function(e,t,n,r,a){var i,s,o,l,c,d,p=new D(null,v);for(o=0,l=e.length;o<l;o++)for(i=e[o],c=0,d=i.length;c<d;c++)(s=0===c)&&O++,P(i[c],!0,O,p,n,s);for(o=0,l=t.length;o<l;o++)for(i=t[o],c=0,d=i.length;c<d;c++)s=0===c,a===u&&(s=!1),s&&O++,P(i[c],!1,O,p,r,s);return p}(e,t,i,s,r);if(a=function(e,t,n,r,a){var i=null;return(n[0]>r[2]||r[0]>n[2]||n[1]>r[3]||r[1]>n[3])&&(a===l?i=I:a===u?i=e:a!==c&&a!==d||(i=e.concat(t))),i}(e,t,i,s,r))return a===I?null:a;var h=function(e,t,r,a,i,s){for(var o,c,d,h=new n(C),f=[],m=Math.min(a[2],i[2]);0!==e.length;){var g=e.pop();if(f.push(g),s===l&&g.point[0]>m||s===u&&g.point[0]>a[2])break;if(g.left){c=o=h.insert(g),d=h.minNode(),o=o!==d?h.prev(o):null,c=h.next(c);var v=o?o.key:null,y=void 0;if(p(g,v,s),c&&2===w(g,c.key,e)&&(p(g,v,s),p(g,c.key,s)),o&&2===w(o.key,g,e)){var b=o;b=b!==d?h.prev(b):null,y=b?b.key:null,p(v,y,s),p(g,v,s)}}else g=g.otherEvent,c=o=h.find(g),o&&c&&(o=o!==d?h.prev(o):null,c=h.next(c),h.remove(g),c&&o&&w(o.key,c.key,e))}return f}(o,0,0,i,s,r),f=S(h,r);return f}var M={UNION:c,DIFFERENCE:u,INTERSECTION:l,XOR:d};e.union=function(e,t){return A(e,t,c)},e.diff=function(e,t){return A(e,t,u)},e.xor=function(e,t){return A(e,t,d)},e.intersection=function(e,t){return A(e,t,l)},e.operations=M,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(623),a=n(628),i=n(270),s=n(74),o=n(75);function l(e,t){for(var n=!1,r=!1,a=e.coordinates.length,i=0;i<a&&!n&&!r;){for(var s=0;s<t.coordinates.length-1;s++){var o=!0;0!==s&&s!==t.coordinates.length-2||(o=!1),d(t.coordinates[s],t.coordinates[s+1],e.coordinates[i],o)?n=!0:r=!0}i++}return n&&r}function c(e,t){var n=a.polygonToLine(t);return r.default(e,n).features.length>0}function u(e,t){for(var n=!1,r=!1,a=e.coordinates[0].length,s=0;s<a&&n&&r;)i.default(o.point(e.coordinates[0][s]),t)?n=!0:r=!0,s++;return r&&r}function d(e,t,n,r){var a=n[0]-e[0],i=n[1]-e[1],s=t[0]-e[0],o=t[1]-e[1];return 0==a*o-i*s&&(r?Math.abs(s)>=Math.abs(o)?s>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:o>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]:Math.abs(s)>=Math.abs(o)?s>0?e[0]<n[0]&&n[0]<t[0]:t[0]<n[0]&&n[0]<e[0]:o>0?e[1]<n[1]&&n[1]<t[1]:t[1]<n[1]&&n[1]<e[1])}t.default=function(e,t){var n=s.getType(e),a=s.getType(t),i=s.getGeom(e),o=s.getGeom(t);switch(n){case"MultiPoint":switch(a){case"LineString":return l(i,o);case"Polygon":return u(i,o);default:throw new Error("feature2 "+a+" geometry not supported")}case"LineString":switch(a){case"MultiPoint":return l(o,i);case"LineString":return function(e,t){if(r.default(e,t).features.length>0)for(var n=0;n<e.coordinates.length-1;n++)for(var a=0;a<t.coordinates.length-1;a++){var i=!0;if(0!==a&&a!==t.coordinates.length-2||(i=!1),d(e.coordinates[n],e.coordinates[n+1],t.coordinates[a],i))return!0}return!1}(i,o);case"Polygon":return c(i,o);default:throw new Error("feature2 "+a+" geometry not supported")}case"Polygon":switch(a){case"MultiPoint":return u(o,i);case"LineString":return c(o,i);default:throw new Error("feature2 "+a+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(75),i=n(74),s=r(n(624)),o=n(157),l=r(n(625));function c(e,t){var n=i.getCoords(e),r=i.getCoords(t);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var s=n[0][0],o=n[0][1],l=n[1][0],c=n[1][1],u=r[0][0],d=r[0][1],p=r[1][0],h=r[1][1],f=(h-d)*(l-s)-(p-u)*(c-o),m=(p-u)*(o-d)-(h-d)*(s-u),g=(l-s)*(o-d)-(c-o)*(s-u);if(0===f)return null;var v=m/f,y=g/f;if(v>=0&&v<=1&&y>=0&&y<=1){var b=s+v*(l-s),E=o+v*(c-o);return a.point([b,E])}return null}t.default=function(e,t){var n={},r=[];if("LineString"===e.type&&(e=a.feature(e)),"LineString"===t.type&&(t=a.feature(t)),"Feature"===e.type&&"Feature"===t.type&&null!==e.geometry&&null!==t.geometry&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var u=c(e,t);return u&&r.push(u),a.featureCollection(r)}var d=l.default();return d.load(s.default(t)),o.featureEach(s.default(e),function(e){o.featureEach(d.search(e),function(t){var a=c(e,t);if(a){var s=i.getCoords(a).join(",");n[s]||(n[s]=!0,r.push(a))}})}),a.featureCollection(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75),a=n(74),i=n(157);t.default=function(e){if(!e)throw new Error("geojson is required");var t=[];return i.flattenEach(e,function(e){!function(e,t){var n=[],i=e.geometry;if(null!==i){switch(i.type){case"Polygon":n=a.getCoords(i);break;case"LineString":n=[a.getCoords(i)]}n.forEach(function(n){var a=function(e,t){var n=[];return e.reduce(function(e,a){var i,s,o,l,c,u,d=r.lineString([e,a],t);return d.bbox=(s=a,o=(i=e)[0],l=i[1],c=s[0],u=s[1],[o<c?o:c,l<u?l:u,o>c?o:c,l>u?l:u]),n.push(d),a}),n}(n,e.properties);a.forEach(function(e){e.id=t.length,t.push(e)})})}}(e,t)}),r.featureCollection(t)}},function(e,t,n){var r=n(626),a=n(75),i=n(157),s=n(305).default,o=i.featureEach,l=(i.coordEach,a.polygon,a.featureCollection);function c(e){var t=r(e);return t.insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:s(e),r.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:s(e),t.push(e)}):o(e,function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:s(e),t.push(e)}),r.prototype.load.call(this,t)},t.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:s(e),r.prototype.remove.call(this,e,t)},t.clear=function(){return r.prototype.clear.call(this)},t.search=function(e){var t=r.prototype.search.call(this,this.toBBox(e));return l(t)},t.collides=function(e){return r.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=r.prototype.all.call(this);return l(e)},t.toJSON=function(){return r.prototype.toJSON.call(this)},t.fromJSON=function(e){return r.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=s(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=s(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}e.exports=c,e.exports.default=c},function(e,t,n){"use strict";e.exports=a,e.exports.default=a;var r=n(627);function a(e,t){if(!(this instanceof a))return new a(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function s(e,t){o(e,0,e.children.length,t,e)}function o(e,t,n,r,a){a||(a=m(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var i,s=t;s<n;s++)i=e.children[s],l(a,e.leaf?r(i):i);return a}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function d(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,t,n,a,i){for(var s,o=[t,n];o.length;)(n=o.pop())-(t=o.pop())<=a||(s=t+Math.ceil((n-t)/a/2)*a,r(e,s,t,n,i),o.push(t,s,s,n))}a.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!f(e,t))return n;for(var a,i,s,o,l=[];t;){for(a=0,i=t.children.length;a<i;a++)s=t.children[a],f(e,o=t.leaf?r(s):s)&&(t.leaf?n.push(s):h(e,o)?this._all(s,n):l.push(s));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!f(e,t))return!1;for(var r,a,i,s,o=[];t;){for(r=0,a=t.children.length;r<a;r++)if(i=t.children[r],f(e,s=t.leaf?n(i):i)){if(t.leaf||h(e,s))return!0;o.push(i)}t=o.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var a=this.data;this.data=r,r=a}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(e,t){if(!e)return this;for(var n,r,a,s,o=this.data,l=this.toBBox(e),c=[],u=[];o||c.length;){if(o||(o=c.pop(),r=c[c.length-1],n=u.pop(),s=!0),o.leaf&&-1!==(a=i(e,o.children,t)))return o.children.splice(a,1),c.push(o),this._condense(c),this;s||o.leaf||!h(o,l)?r?(n++,o=r.children[n],s=!1):o=null:(c.push(o),u.push(n),n=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:c,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var a,i=n-t+1,o=this._maxEntries;if(i<=o)return s(a=m(e.slice(t,n+1)),this.toBBox),a;r||(r=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/Math.pow(o,r-1))),(a=m([])).leaf=!1,a.height=r;var l,c,u,d,p=Math.ceil(i/o),h=p*Math.ceil(Math.sqrt(o));for(g(e,t,n,h,this.compareMinX),l=t;l<=n;l+=h)for(g(e,l,u=Math.min(l+h-1,n),p,this.compareMinY),c=l;c<=u;c+=p)d=Math.min(c+p-1,u),a.children.push(this._build(e,c,d,r-1));return s(a,this.toBBox),a},_chooseSubtree:function(e,t,n,r){for(var a,i,s,o,l,c,u,p,h,f;r.push(t),!t.leaf&&r.length-1!==n;){for(u=p=1/0,a=0,i=t.children.length;a<i;a++)l=d(s=t.children[a]),h=e,f=s,(c=(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-l)<p?(p=c,u=l<u?l:u,o=s):c===p&&l<u&&(u=l,o=s);t=o||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,a=n?e:r(e),i=[],s=this._chooseSubtree(a,this.data,t,i);for(s.children.push(e),l(s,a);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(a,i,t)},_split:function(e,t){var n=e[t],r=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,r);var i=this._chooseSplitIndex(n,a,r),o=m(n.children.splice(i,n.children.length-i));o.height=n.height,o.leaf=n.leaf,s(n,this.toBBox),s(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,a,i,s,l,c,u,p,h,f,m,g,v,y;for(c=u=1/0,r=t;r<=n-t;r++)a=o(e,0,r,this.toBBox),i=o(e,r,n,this.toBBox),h=a,f=i,m=void 0,g=void 0,v=void 0,y=void 0,m=Math.max(h.minX,f.minX),g=Math.max(h.minY,f.minY),v=Math.min(h.maxX,f.maxX),y=Math.min(h.maxY,f.maxY),s=Math.max(0,v-m)*Math.max(0,y-g),l=d(a)+d(i),s<c?(c=s,p=r,u=l<u?l:u):s===c&&l<u&&(u=l,p=r);return p},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:c,a=e.leaf?this.compareMinY:u;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,a)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var a,i,s=this.toBBox,c=o(e,0,t,s),u=o(e,n-t,n,s),d=p(c)+p(u);for(a=t;a<n-t;a++)i=e.children[a],l(c,e.leaf?s(i):i),d+=p(c);for(a=n-t-1;a>=t;a--)i=e.children[a],l(u,e.leaf?s(i):i),d+=p(u);return d},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)l(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():s(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},function(e,t,n){e.exports=function(){"use strict";function e(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function t(e,t){return e<t?-1:e>t?1:0}return function(n,r,a,i,s){!function t(n,r,a,i,s){for(;i>a;){if(i-a>600){var o=i-a+1,l=r-a+1,c=Math.log(o),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(o-u)/o)*(l-o/2<0?-1:1),p=Math.max(a,Math.floor(r-l*u/o+d)),h=Math.min(i,Math.floor(r+(o-l)*u/o+d));t(n,r,p,h,s)}var f=n[r],m=a,g=i;for(e(n,a,r),s(n[i],f)>0&&e(n,a,i);m<g;){for(e(n,m,g),m++,g--;s(n[m],f)<0;)m++;for(;s(n[g],f)>0;)g--}0===s(n[a],f)?e(n,a,g):e(n,++g,i),g<=r&&(a=g+1),r<=g&&(i=g-1)}}(n,r,a||0,i||n.length-1,s||t)}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75),a=n(74);function i(e,t){void 0===t&&(t={});var n=a.getGeom(e);n.type;return o(n.coordinates,t.properties?t.properties:"Feature"===e.type?e.properties:{})}function s(e,t){void 0===t&&(t={});var n=a.getGeom(e),i=(n.type,n.coordinates),s=t.properties?t.properties:"Feature"===e.type?e.properties:{},l=[];return i.forEach(function(e){l.push(o(e,s))}),r.featureCollection(l)}function o(e,t){return e.length>1?r.multiLineString(e,t):r.lineString(e[0],t)}t.default=function(e,t){void 0===t&&(t={});var n=a.getGeom(e);switch(t.properties||"Feature"!==e.type||(t.properties=e.properties),n.type){case"Polygon":return i(n,t);case"MultiPolygon":return s(n,t);default:throw new Error("invalid poly")}},t.polygonToLine=i,t.multiPolygonToLine=s,t.coordsToLine=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(305),a=n(630),i=n(270),s=n(74);function o(e,t){return!(e[0]>t[0])&&(!(e[2]<t[2])&&(!(e[1]>t[1])&&!(e[3]<t[3])))}function l(e,t){return e[0]===t[0]&&e[1]===t[1]}t.default=function(e,t){var n=s.getType(e),c=s.getType(t),u=s.getGeom(e),d=s.getGeom(t);switch(n){case"Point":switch(c){case"MultiPoint":return function(e,t){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(l(t.coordinates[n],e.coordinates)){r=!0;break}return r}(u,d);case"LineString":return a.default(u,d,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return i.default(u,d,{ignoreBoundary:!0});default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiPoint":switch(c){case"MultiPoint":return function(e,t){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,a=0;a<t.coordinates.length;a++)l(e.coordinates[n],t.coordinates[a])&&(r=!0);if(!r)return!1}return!0}(u,d);case"LineString":return function(e,t){for(var n=!1,r=0;r<e.coordinates.length;r++){if(!a.default(e.coordinates[r],t))return!1;n||(n=a.default(e.coordinates[r],t,{ignoreEndVertices:!0}))}return n}(u,d);case"Polygon":case"MultiPolygon":return function(e,t){for(var n=!0,r=0;r<e.coordinates.length;r++){var a=i.default(e.coordinates[1],t);if(!a){n=!1;break}a=i.default(e.coordinates[1],t,{ignoreBoundary:!0})}return n&&a}(u,d);default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"LineString":return function(e,t){for(var n=0;n<e.coordinates.length;n++)if(!a.default(e.coordinates[n],t))return!1;return!0}(u,d);case"Polygon":case"MultiPolygon":return function(e,t){var n,a,s=r.default(t),l=r.default(e);if(!o(s,l))return!1;for(var c=!1,u=0;u<e.coordinates.length-1;u++){if(!i.default(e.coordinates[u],t))return!1;if(c||(c=i.default(e.coordinates[u],t,{ignoreBoundary:!0})),!c){var d=(n=e.coordinates[u],a=e.coordinates[u+1],[(n[0]+a[0])/2,(n[1]+a[1])/2]);c=i.default(d,t,{ignoreBoundary:!0})}}return c}(u,d);default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"Polygon":case"MultiPolygon":return function(e,t){var n=r.default(e);if(!o(r.default(t),n))return!1;for(var a=0;a<e.coordinates[0].length;a++)if(!i.default(e.coordinates[0][a],t))return!1;return!0}(u,d);default:throw new Error("feature2 "+c+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(74);function a(e,t,n,r){var a=n[0],i=n[1],s=e[0],o=e[1],l=t[0],c=t[1],u=l-s,d=c-o;return 0==(n[0]-s)*d-(n[1]-o)*u&&(r?"start"===r?Math.abs(u)>=Math.abs(d)?u>0?s<a&&a<=l:l<=a&&a<s:d>0?o<i&&i<=c:c<=i&&i<o:"end"===r?Math.abs(u)>=Math.abs(d)?u>0?s<=a&&a<l:l<a&&a<=s:d>0?o<=i&&i<c:c<i&&i<=o:"both"===r&&(Math.abs(u)>=Math.abs(d)?u>0?s<a&&a<l:l<a&&a<s:d>0?o<i&&i<c:c<i&&i<o):Math.abs(u)>=Math.abs(d)?u>0?s<=a&&a<=l:l<=a&&a<=s:d>0?o<=i&&i<=c:c<=i&&i<=o)}t.default=function(e,t,n){void 0===n&&(n={});for(var i=r.getCoord(e),s=r.getCoords(t),o=0;o<s.length-1;o++){var l=!1;if(n.ignoreEndVertices&&(0===o&&(l="start"),o===s.length-2&&(l="end"),0===o&&o+1===s.length-1&&(l="both")),a(s[o],s[o+1],i,l))return!0}return!1}},function(e,t,n){var r,a;
/**
 * @license IDBWrapper - A cross-browser wrapper for IndexedDB
 * Version 1.7.2
 * Copyright (c) 2011 - 2017 Jens Arps
 * http://jensarps.de/
 *
 * Licensed under the MIT license
 */
/**
 * @license IDBWrapper - A cross-browser wrapper for IndexedDB
 * Version 1.7.2
 * Copyright (c) 2011 - 2017 Jens Arps
 * http://jensarps.de/
 *
 * Licensed under the MIT license
 */
!function(i,s,o){"use strict";void 0===(a="function"==typeof(r=function(){var e=function(e){throw e},t=function(){},n={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:e,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},r=function(e,t){for(var r in void 0===t&&"function"==typeof e&&(t=e),"[object Object]"!=Object.prototype.toString.call(e)&&(e={}),n)this[r]=void 0!==e[r]?e[r]:n[r];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,t&&(this.onStoreReady=t);var a="object"==typeof window?window:self,i=this.implementationPreference.filter(function(e){return e in a});this.implementation=i[0],this.idb=a[this.implementation],this.keyRange=a.IDBKeyRange||a.webkitIDBKeyRange||a.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},a={constructor:r,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var e=this.idb.open(this.dbName,this.dbVersion),t=!1;e.onerror=function(e){if(function(e){if("error"in e.target)return"VersionError"==e.target.error.name;if("errorCode"in e.target)return 12==e.target.errorCode;return!1}(e))this.onError(new Error("The version number provided is lower than the existing one."));else{var t;if(e.target.error)t=e.target.error;else{var n="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in e.target&&(n+=" with error code "+e.target.errorCode),t=new Error(n)}this.onError(t)}}.bind(this),e.onsuccess=function(e){if(!t)if(this.db)this.onStoreReady();else if(this.db=e.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var n=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=n.objectStore(this.storeName);var r=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var n=e.name;if(!n)return t=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(e),this.hasIndex(n)){var a=this.store.index(n),i=this.indexComplies(a,e);i||(t=!0,this.onError(new Error('Cannot modify index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),r.splice(r.indexOf(n),1)}else t=!0,this.onError(new Error('Cannot create new index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),r.length&&(t=!0,this.onError(new Error('Cannot delete index(es) "'+r.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),t||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),e.onupgradeneeded=function(e){if(this.db=e.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=e.target.transaction.objectStore(this.storeName);else{var n={autoIncrement:this.autoIncrement};null!==this.keyPath&&(n.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,n)}var r=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var n=e.name;if(n||(t=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(e),this.hasIndex(n)){var a=this.store.index(n),i=this.indexComplies(a,e);i||(this.store.deleteIndex(n),this.store.createIndex(n,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})),r.splice(r.indexOf(n),1)}else this.store.createIndex(n,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})},this),r.length&&r.forEach(function(e){this.store.deleteIndex(e)},this)}.bind(this)},deleteDatabase:function(e,t){if(this.idb.deleteDatabase){this.db.close();var n=this.idb.deleteDatabase(this.dbName);n.onsuccess=e,n.onerror=t}else t(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(n,r,a,i){null!==this.keyPath&&(i=a,a=r,r=n),i||(i=e),a||(a=t);var s,o=!1,l=null,c=this.db.transaction([this.storeName],this.consts.READ_WRITE);return c.oncomplete=function(){var e=o?a:i;e(l)},c.onabort=i,c.onerror=i,null!==this.keyPath?(this._addIdPropertyIfNeeded(r),s=c.objectStore(this.storeName).put(r)):s=c.objectStore(this.storeName).put(r,n),s.onsuccess=function(e){o=!0,l=e.target.result},s.onerror=i,c},get:function(n,r,a){a||(a=e),r||(r=t);var i=!1,s=null,o=this.db.transaction([this.storeName],this.consts.READ_ONLY);o.oncomplete=function(){var e=i?r:a;e(s)},o.onabort=a,o.onerror=a;var l=o.objectStore(this.storeName).get(n);return l.onsuccess=function(e){i=!0,s=e.target.result},l.onerror=a,o},remove:function(n,r,a){a||(a=e),r||(r=t);var i=!1,s=null,o=this.db.transaction([this.storeName],this.consts.READ_WRITE);o.oncomplete=function(){var e=i?r:a;e(s)},o.onabort=a,o.onerror=a;var l=o.objectStore(this.storeName).delete(n);return l.onsuccess=function(e){i=!0,s=e.target.result},l.onerror=a,o},batch:function(n,r,a){if(a||(a=e),r||(r=t),"[object Array]"!=Object.prototype.toString.call(n))a(new Error("dataArray argument must be of type Array."));else if(0===n.length)return r(!0);var i=n.length,s=!1,o=!1,l=this.db.transaction([this.storeName],this.consts.READ_WRITE);l.oncomplete=function(){var e=o?r:a;e(o)},l.onabort=a,l.onerror=a;var c=function(){0!==--i||s||(s=!0,o=!0)};return n.forEach(function(e){var t=e.type,n=e.key,r=e.value,i=function(e){l.abort(),s||(s=!0,a(e,t,n))};if("remove"==t){var o=l.objectStore(this.storeName).delete(n);o.onsuccess=c,o.onerror=i}else if("put"==t){var u;null!==this.keyPath?(this._addIdPropertyIfNeeded(r),u=l.objectStore(this.storeName).put(r)):u=l.objectStore(this.storeName).put(r,n),u.onsuccess=c,u.onerror=i}},this),l},putBatch:function(e,t,n){var r=e.map(function(e){return{type:"put",value:e}});return this.batch(r,t,n)},upsertBatch:function(n,r,a,i){"function"==typeof r&&(i=a=r,r={}),i||(i=e),a||(a=t),r||(r={}),"[object Array]"!=Object.prototype.toString.call(n)&&i(new Error("dataArray argument must be of type Array."));var s=r.keyField||this.keyPath,o=n.length,l=!1,c=!1,u=0,d=this.db.transaction([this.storeName],this.consts.READ_WRITE);d.oncomplete=function(){c?a(n):i(!1)},d.onabort=i,d.onerror=i;var p=function(e){var t=n[u++];t[s]=e.target.result,0!==--o||l||(l=!0,c=!0)};return n.forEach(function(e){var t,n=e.key;null!==this.keyPath?(this._addIdPropertyIfNeeded(e),t=d.objectStore(this.storeName).put(e)):t=d.objectStore(this.storeName).put(e,n),t.onsuccess=p,t.onerror=function(e){d.abort(),l||(l=!0,i(e))}},this),d},removeBatch:function(e,t,n){var r=e.map(function(e){return{type:"remove",key:e}});return this.batch(r,t,n)},getBatch:function(n,r,a,i){if(a||(a=e),r||(r=t),i||(i="sparse"),"[object Array]"!=Object.prototype.toString.call(n))a(new Error("keyArray argument must be of type Array."));else if(0===n.length)return r([]);var s=[],o=n.length,l=!1,c=null,u=this.db.transaction([this.storeName],this.consts.READ_ONLY);u.oncomplete=function(){var e=l?r:a;e(c)},u.onabort=a,u.onerror=a;var d=function(e){e.target.result||"dense"==i?s.push(e.target.result):"sparse"==i&&s.length++,0===--o&&(!0,l=!0,c=s)};return n.forEach(function(e){var t=u.objectStore(this.storeName).get(e);t.onsuccess=d,t.onerror=function(e){!0,c=e,a(e),u.abort()}},this),u},getAll:function(n,r){r||(r=e),n||(n=t);var a=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=a.objectStore(this.storeName);return i.getAll?this._getAllNative(a,i,n,r):this._getAllCursor(a,i,n,r),a},_getAllNative:function(e,t,n,r){var a=!1,i=null;e.oncomplete=function(){var e=a?n:r;e(i)},e.onabort=r,e.onerror=r;var s=t.getAll();s.onsuccess=function(e){a=!0,i=e.target.result},s.onerror=r},_getAllCursor:function(e,t,n,r){var a=[],i=!1,s=null;e.oncomplete=function(){var e=i?n:r;e(s)},e.onabort=r,e.onerror=r;var o=t.openCursor();o.onsuccess=function(e){var t=e.target.result;t?(a.push(t.value),t.continue()):(i=!0,s=a)},o.onError=r},clear:function(n,r){r||(r=e),n||(n=t);var a=!1,i=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){var e=a?n:r;e(i)},s.onabort=r,s.onerror=r;var o=s.objectStore(this.storeName).clear();return o.onsuccess=function(e){a=!0,i=e.target.result},o.onerror=r,s},_addIdPropertyIfNeeded:function(e){void 0===e[this.keyPath]&&(e[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(e){return this.store.indexNames.contains(e)},normalizeIndexData:function(e){e.keyPath=e.keyPath||e.name,e.unique=!!e.unique,e.multiEntry=!!e.multiEntry},indexComplies:function(e,t){var n=["keyPath","unique","multiEntry"].every(function(n){if("multiEntry"==n&&void 0===e[n]&&!1===t[n])return!0;if("keyPath"==n&&"[object Array]"==Object.prototype.toString.call(t[n])){var r=t.keyPath,a=e.keyPath;if("string"==typeof a)return r.toString()==a;if("function"!=typeof a.contains&&"function"!=typeof a.indexOf)return!1;if(a.length!==r.length)return!1;for(var i=0,s=r.length;i<s;i++)if(!(a.contains&&a.contains(r[i])||a.indexOf(-1!==r[i])))return!1;return!0}return t[n]==e[n]});return n},iterate:function(t,n){var r="desc"==(n=s({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:e,limit:1/0,offset:0,allowItemRejection:!1},n||{})).order.toLowerCase()?"PREV":"NEXT";n.filterDuplicates&&(r+="_NO_DUPLICATE");var a=!1,i=this.db.transaction([this.storeName],this.consts[n.writeAccess?"READ_WRITE":"READ_ONLY"]),o=i.objectStore(this.storeName);n.index&&(o=o.index(n.index));var l=0;i.oncomplete=function(){a?n.onEnd?n.onEnd():t(null):n.onError(null)},i.onabort=n.onError,i.onerror=n.onError;var c=o.openCursor(n.keyRange,this.consts[r]);return c.onerror=n.onError,c.onsuccess=function(e){var r=e.target.result;if(r)if(n.offset)r.advance(n.offset),n.offset=0;else{var s=t(r.value,r,i);n.allowItemRejection&&!1===s||l++,n.autoContinue&&(l+n.offset<n.limit?r.continue():a=!0)}else a=!0},i},query:function(e,t){var n=[],r=0;return(t=t||{}).autoContinue=!0,t.writeAccess=!1,t.allowItemRejection=!!t.filter,t.onEnd=function(){e(n,r)},this.iterate(function(e){r++;var a=!t.filter||t.filter(e);return!1!==a&&n.push(e),a},t)},count:function(t,n){var r=(n=s({index:null,keyRange:null},n||{})).onError||e,a=!1,i=null,o=this.db.transaction([this.storeName],this.consts.READ_ONLY);o.oncomplete=function(){var e=a?t:r;e(i)},o.onabort=r,o.onerror=r;var l=o.objectStore(this.storeName);n.index&&(l=l.index(n.index));var c=l.count(n.keyRange);return c.onsuccess=function(e){a=!0,i=e.target.result},c.onError=r,o},makeKeyRange:function(e){var t,n=void 0!==e.lower,r=void 0!==e.upper,a=void 0!==e.only;switch(!0){case a:t=this.keyRange.only(e.only);break;case n&&r:t=this.keyRange.bound(e.lower,e.upper,e.excludeLower,e.excludeUpper);break;case n:t=this.keyRange.lowerBound(e.lower,e.excludeLower);break;case r:t=this.keyRange.upperBound(e.upper,e.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return t}},i={};function s(e,t){var n,r;for(n in t)(r=t[n])!==i[n]&&r!==e[n]&&(e[n]=r);return e}return r.prototype=a,r.version=a.version,r})?r.call(t,n,t,e):r)||(e.exports=a)}()},function(e,t,n){var r,a,i,s,o;o=n(52),n(310),n(112),s=n(37),a=n(633),i=n(311),e.exports=function(){function e(e,t,n,r){null==r&&(r=!1),this.url=e,this.client=t,this.collections={},this.httpClient=n,this.useQuickFind=r}return e.prototype.addCollection=function(e,t,n,a){var i,s,l;if(null==t&&(t={}),o.isFunction(t)&&(t=(l=[{},t,n])[0],n=l[1],l[2]),s=t.url||this.url+e,i=new r(e,s,this.client,this.httpClient,this.useQuickFind),this[e]=i,this.collections[e]=i,null!=n)return n()},e.prototype.removeCollection=function(e,t,n){if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.getCollectionNames=function(){return o.keys(this.collections)},e}(),r=function(){function e(e,t,n,r,i){this.name=e,this.url=t,this.client=n,this.httpClient=r||a,this.useQuickFind=i}return e.prototype.find=function(e,t){return null==t&&(t={}),{fetch:(n=this,function(r,a){var s;return s={},t.sort&&(s.sort=JSON.stringify(t.sort)),t.limit&&(s.limit=t.limit),t.skip&&(s.skip=t.skip),t.fields&&(s.fields=JSON.stringify(t.fields)),n.client&&(s.client=n.client),s.selector=JSON.stringify(e||{}),"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(s._=(new Date).getTime()),!n.useQuickFind||!t.localData||t.fields&&!t.fields._rev||t.limit&&!t.sort?n.httpClient("GET",n.url,s,null,r,a):n.httpClient("POST",n.url+"/quickfind",s,i.encodeRequest(t.localData),function(e){return r(i.decodeResponse(e,t.localData,t.sort))},a)})};var n},e.prototype.findOne=function(e,t,n,r){var a,i;return null==t&&(t={}),o.isFunction(t)&&(t=(i=[{},t,n])[0],n=i[1],r=i[2]),a={},t.sort&&(a.sort=JSON.stringify(t.sort)),a.limit=1,this.client&&(a.client=this.client),a.selector=JSON.stringify(e||{}),"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(a._=(new Date).getTime()),this.httpClient("GET",this.url,a,null,function(e){return e&&e.length>0?n(e[0]):n(null)},r)},e.prototype.upsert=function(e,t,n,r){var a,i,l,c;if(i=(c=s.regularizeUpsert(e,t,n,r))[0],n=c[1],r=c[2],!this.client)throw new Error("Client required to upsert");return[],a=o.compact(o.pluck(i,"base")).length>0,l={client:this.client},"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(l._=(new Date).getTime()),1===i.length?a?this.httpClient("PATCH",this.url,l,i[0],function(t){return o.isArray(e)?n([t]):n(t)},function(e){if(r)return r(e)}):this.httpClient("POST",this.url,l,i[0].doc,function(t){return o.isArray(e)?n([t]):n(t)},function(e){if(r)return r(e)}):a?this.httpClient("PATCH",this.url,l,{doc:o.pluck(i,"doc"),base:o.pluck(i,"base")},function(e){return n(e)},function(e){if(r)return r(e)}):this.httpClient("POST",this.url,l,o.pluck(i,"doc"),function(e){return n(e)},function(e){if(r)return r(e)})},e.prototype.remove=function(e,t,n){var r;if(!this.client)throw new Error("Client required to remove");return r={client:this.client},this.httpClient("DELETE",this.url+"/"+e,r,null,t,function(e){return 410===e.status?t():n(e)})},e}()},function(e,t,n){var r;r=n(310),e.exports=function(e,t,n,a,i,s){var o,l;if(o=t+"?"+r.param(n),"GET"===e)l=r.ajax(o,{dataType:"json",timeout:18e4});else if("DELETE"===e)l=r.ajax(o,{type:"DELETE",timeout:6e4});else{if("POST"!==e&&"PATCH"!==e)throw new Error("Unknown method "+e);l=r.ajax(o,{data:JSON.stringify(a),contentType:"application/json",timeout:6e4,type:e})}return l.done(function(e,t,n){return i(e||null)}),l.fail(function(e,t,n){if(s)return s(e)})}},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){"use strict";var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(271),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,a=0,i=e.length||0,s=this.blocks;a<i;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(r=this.start;a<i&&r<64;++a)s[r>>2]|=e[a]<<SHIFT[3&r++];else for(r=this.start;a<i&&r<64;++a)(n=e.charCodeAt(a))<128?s[r>>2]|=n<<SHIFT[3&r++]:n<2048?(s[r>>2]|=(192|n>>6)<<SHIFT[3&r++],s[r>>2]|=(128|63&n)<<SHIFT[3&r++]):n<55296||n>=57344?(s[r>>2]|=(224|n>>12)<<SHIFT[3&r++],s[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],s[r>>2]|=(128|63&n)<<SHIFT[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++a)),s[r>>2]|=(240|n>>18)<<SHIFT[3&r++],s[r>>2]|=(128|n>>12&63)<<SHIFT[3&r++],s[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],s[r>>2]|=(128|63&n)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=s[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,n=this.h0,r=this.h1,a=this.h2,i=this.h3,s=this.h4,o=this.blocks;for(e=16;e<80;++e)t=o[e-3]^o[e-8]^o[e-14]^o[e-16],o[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)n=(t=(r=(t=(a=(t=(i=(t=(s=(t=n<<5|n>>>27)+(r&a|~r&i)+s+1518500249+o[e]<<0)<<5|s>>>27)+(n&(r=r<<30|r>>>2)|~n&a)+i+1518500249+o[e+1]<<0)<<5|i>>>27)+(s&(n=n<<30|n>>>2)|~s&r)+a+1518500249+o[e+2]<<0)<<5|a>>>27)+(i&(s=s<<30|s>>>2)|~i&n)+r+1518500249+o[e+3]<<0)<<5|r>>>27)+(a&(i=i<<30|i>>>2)|~a&s)+n+1518500249+o[e+4]<<0,a=a<<30|a>>>2;for(;e<40;e+=5)n=(t=(r=(t=(a=(t=(i=(t=(s=(t=n<<5|n>>>27)+(r^a^i)+s+1859775393+o[e]<<0)<<5|s>>>27)+(n^(r=r<<30|r>>>2)^a)+i+1859775393+o[e+1]<<0)<<5|i>>>27)+(s^(n=n<<30|n>>>2)^r)+a+1859775393+o[e+2]<<0)<<5|a>>>27)+(i^(s=s<<30|s>>>2)^n)+r+1859775393+o[e+3]<<0)<<5|r>>>27)+(a^(i=i<<30|i>>>2)^s)+n+1859775393+o[e+4]<<0,a=a<<30|a>>>2;for(;e<60;e+=5)n=(t=(r=(t=(a=(t=(i=(t=(s=(t=n<<5|n>>>27)+(r&a|r&i|a&i)+s-1894007588+o[e]<<0)<<5|s>>>27)+(n&(r=r<<30|r>>>2)|n&a|r&a)+i-1894007588+o[e+1]<<0)<<5|i>>>27)+(s&(n=n<<30|n>>>2)|s&r|n&r)+a-1894007588+o[e+2]<<0)<<5|a>>>27)+(i&(s=s<<30|s>>>2)|i&n|s&n)+r-1894007588+o[e+3]<<0)<<5|r>>>27)+(a&(i=i<<30|i>>>2)|a&s|i&s)+n-1894007588+o[e+4]<<0,a=a<<30|a>>>2;for(;e<80;e+=5)n=(t=(r=(t=(a=(t=(i=(t=(s=(t=n<<5|n>>>27)+(r^a^i)+s-899497514+o[e]<<0)<<5|s>>>27)+(n^(r=r<<30|r>>>2)^a)+i-899497514+o[e+1]<<0)<<5|i>>>27)+(s^(n=n<<30|n>>>2)^r)+a-899497514+o[e+2]<<0)<<5|a>>>27)+(i^(s=s<<30|s>>>2)^n)+r-899497514+o[e+3]<<0)<<5|r>>>27)+(a^(i=i<<30|i>>>2)^s)+n-899497514+o[e+4]<<0,a=a<<30|a>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+r<<0,this.h2=this.h2+a<<0,this.h3=this.h3+i<<0,this.h4=this.h4+s<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,a=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(59),__webpack_require__(51))},function(e,t,n){var r,a,i,s;s=n(52),i=n(37),a=n(73).compileSort,e.exports=function(){function e(e,t){this.collections={},this.masterDb=e,this.replicaDb=t}return e.prototype.addCollection=function(e,t,n){var a;if(a=new r(e,this.masterDb[e],this.replicaDb[e]),this[e]=a,this.collections[e]=a,null!=t)return t()},e.prototype.removeCollection=function(e,t,n){if(delete this[e],delete this.collections[e],null!=t)return t()},e.prototype.getCollectionNames=function(){return s.keys(this.collections)},e}(),r=function(){function e(e,t,n){this.name=e,this.masterCol=t,this.replicaCol=n}return e.prototype.find=function(e,t){return this.masterCol.find(e,t)},e.prototype.findOne=function(e,t,n,r){return this.masterCol.findOne(e,t,n,r)},e.prototype.upsert=function(e,t,n,r){var a,o,l;return o=i.regularizeUpsert(e,t,n,r),a=o[0],n=o[1],r=o[2],this.masterCol.upsert(s.pluck(a,"doc"),s.pluck(a,"base"),(l=this,function(){return l.replicaCol.upsert(s.pluck(a,"doc"),s.pluck(a,"base"),function(t){return n(e)},r)}),r)},e.prototype.remove=function(e,t,n){return this.masterCol.remove(e,(r=this,function(){return r.replicaCol.remove(e,t,n)}),n);var r},e.prototype.cache=function(e,t,n,r,i){var o,l,c;return o=s.indexBy(e,"_id"),n.sort&&(l=a(n.sort)),this.masterCol.find(t,n).fetch((c=this,function(t){var a,u,d,p,h,f,m,g,v,y,b;for(p=s.indexBy(t,"_id"),h=[],m=0,v=e.length;m<v;m++)(d=p[(a=e[m])._id])&&(a._rev&&d._rev&&a._rev<=d._rev||s.isEqual(a,d))||h.push(a);for(f=[],g=0,y=t.length;g<y;g++){if(d=t[g],n.limit&&e.length===n.limit){if(n.sort&&l(d,s.last(e))>=0)continue;if(!n.sort)continue}o[d._id]||f.push(d._id)}return u=function(e){return f.length>0?c.masterCol.uncacheList(f,function(){return c.replicaCol.uncacheList(f,function(){return e()},i)},i):e()},b=function(){return u(function(){null!=r&&r()})},h.length>0?c.masterCol.cacheList(h,function(){return c.replicaCol.cacheList(h,function(){return b()},i)},i):b()}),i)},e.prototype.pendingUpserts=function(e,t){return this.masterCol.pendingUpserts(e,t)},e.prototype.pendingRemoves=function(e,t){return this.masterCol.pendingRemoves(e,t)},e.prototype.resolveUpserts=function(e,t,n){return this.masterCol.resolveUpserts(e,(r=this,function(){return r.replicaCol.resolveUpserts(e,t,n)}),n);var r},e.prototype.resolveRemove=function(e,t,n){return this.masterCol.resolveRemove(e,(r=this,function(){return r.replicaCol.resolveRemove(e,t,n)}),n);var r},e.prototype.seed=function(e,t,n){return this.masterCol.seed(e,(r=this,function(){return r.replicaCol.seed(e,t,n)}),n);var r},e.prototype.cacheOne=function(e,t,n){return this.masterCol.cacheOne(e,(r=this,function(){return r.replicaCol.cacheOne(e,t,n)}),n);var r},e.prototype.cacheList=function(e,t,n){return this.masterCol.cacheList(e,(r=this,function(){return r.replicaCol.cacheList(e,t,n)}),n);var r},e.prototype.uncache=function(e,t,n){return this.masterCol.uncache(e,(r=this,function(){return r.replicaCol.uncache(e,t,n)}),n);var r},e.prototype.uncacheList=function(e,t,n){return this.masterCol.uncacheList(e,(r=this,function(){return r.replicaCol.uncacheList(e,t,n)}),n);var r},e}()},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function a(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function i(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function s(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,s=null,o=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?s="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(s="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?o="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==s||null!==o){var l=e.displayName||e.name,c="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==s?"\n  "+s:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",function(){return s}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(1))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(109),s=n.n(i),o=n(8),l=n(14),c=n.n(l),u=n(29),d=n.n(u),p=n(1),h=n.n(p);n(71);function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var m=Object.create(null);function g(e){return m[e]||(m[e]=function(e){for(var t="",n=[],r=[],a=void 0,i=0,s=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)|\\\(|\\\)/g;a=s.exec(e);)a.index!==i&&(r.push(e.slice(i,a.index)),t+=f(e.slice(i,a.index))),a[1]?(t+="([^/]+)",n.push(a[1])):"**"===a[0]?(t+="(.*)",n.push("splat")):"*"===a[0]?(t+="(.*?)",n.push("splat")):"("===a[0]?t+="(?:":")"===a[0]?t+=")?":"\\("===a[0]?t+="\\(":"\\)"===a[0]&&(t+="\\)"),r.push(a[0]),i=s.lastIndex;return i!==e.length&&(r.push(e.slice(i,e.length)),t+=f(e.slice(i,e.length))),{pattern:e,regexpSource:t,paramNames:n,tokens:r}}(e)),m[e]}function v(e,t){"/"!==e.charAt(0)&&(e="/"+e);var n=g(e),r=n.regexpSource,a=n.paramNames,i=n.tokens;"/"!==e.charAt(e.length-1)&&(r+="/?"),"*"===i[i.length-1]&&(r+="$");var s=t.match(new RegExp("^"+r,"i"));if(null==s)return null;var o=s[0],l=t.substr(o.length);if(l){if("/"!==o.charAt(o.length-1))return null;l="/"+l}return{remainingPathname:l,paramNames:a,paramValues:s.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}function y(e){return g(e).paramNames}function b(e,t){t=t||{};for(var n=g(e).tokens,r=0,a="",i=0,s=[],o=void 0,l=void 0,u=0,d=n.length;u<d;++u)if("*"===(o=n[u])||"**"===o)null!=(l=Array.isArray(t.splat)?t.splat[i++]:t.splat)||r>0||c()(!1),null!=l&&(a+=encodeURI(l));else if("("===o)s[r]="",r+=1;else if(")"===o){var p=s.pop();(r-=1)?s[r-1]+=p:a+=p}else if("\\("===o)a+="(";else if("\\)"===o)a+=")";else if(":"===o.charAt(0))if(null!=(l=t[o.substring(1)])||r>0||c()(!1),null==l){if(r){s[r-1]="";for(var h=n.indexOf(o),f=n.slice(h,n.length),m=-1,v=0;v<f.length;v++)if(")"==f[v]){m=v;break}m>0||c()(!1),u=h+m-1}}else r?s[r-1]+=encodeURIComponent(l):a+=encodeURIComponent(l);else r?s[r-1]+=o:a+=o;return r<=0||c()(!1),a.replace(/\/+/g,"/")}var E=function(e,t){var n=e&&e.routes,r=t.routes,a=void 0,i=void 0,s=void 0;if(n){var o=!1;(a=n.filter(function(n){if(o)return!0;var a=-1===r.indexOf(n)||function(e,t,n){return!!e.path&&y(e.path).some(function(e){return t.params[e]!==n.params[e]})}(n,e,t);return a&&(o=!0),a})).reverse(),s=[],i=[],r.forEach(function(e){var t=-1===n.indexOf(e),r=-1!==a.indexOf(e);t||r?s.push(e):i.push(e)})}else a=[],i=[],s=r;return{leaveRoutes:a,changeRoutes:i,enterRoutes:s}};function w(e,t,n){var r=0,a=!1,i=!1,s=!1,o=void 0;function l(){a=!0,i?o=[].concat(Array.prototype.slice.call(arguments)):n.apply(this,arguments)}!function c(){if(!a&&(s=!0,!i)){for(i=!0;!a&&r<e&&s;)s=!1,t.call(this,r++,c,l);i=!1,a?n.apply(this,o):r>=e&&s&&(a=!0,n())}}()}function C(e,t,n){var r=e.length,a=[];if(0===r)return n(null,a);var i=!1,s=0;e.forEach(function(e,o){t(e,o,function(e,t){!function(e,t,o){i||(t?(i=!0,n(t)):(a[e]=o,(i=++s===r)&&n(null,a)))}(o,e,t)})})}var _=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=[],this.add=function(e){return t.hooks.push(e)},this.remove=function(e){return t.hooks=t.hooks.filter(function(t){return t!==e})},this.has=function(e){return-1!==t.hooks.indexOf(e)},this.clear=function(){return t.hooks=[]}};function S(){var e=new _,t=new _;function n(e,t,n,r){var a=e.length<n,i=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(e.apply(t,r),a)&&(0,r[r.length-1])()};return r.add(i),i}function r(e,t,n){if(e){var r=void 0;w(e,function(e,n,i){t(e,a,function(e){e||r?i(e,r):n()})},n)}else n();function a(e){r=e}}return{runEnterHooks:function(t,a,i){e.clear();var s=function(t){return t.reduce(function(t,r){return r.onEnter&&t.push(n(r.onEnter,r,3,e)),t},[])}(t);return r(s.length,function(t,n,r){s[t](a,n,function(){e.has(s[t])&&(r.apply(void 0,arguments),e.remove(s[t]))})},i)},runChangeHooks:function(e,a,i,s){t.clear();var o=function(e){return e.reduce(function(e,r){return r.onChange&&e.push(n(r.onChange,r,4,t)),e},[])}(e);return r(o.length,function(e,n,r){o[e](a,i,n,function(){t.has(o[e])&&(r.apply(void 0,arguments),t.remove(o[e]))})},s)},runLeaveHooks:function(e,t){for(var n=0,r=e.length;n<r;++n)e[n].onLeave&&e[n].onLeave.call(e[n],t)}}}var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function R(e,t){return null==t?null==e:null==e||function e(t,n){if(t==n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});if("object"===(void 0===t?"undefined":D(t))){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))if(void 0===t[r]){if(void 0!==n[r])return!1}else{if(!Object.prototype.hasOwnProperty.call(n,r))return!1;if(!e(t[r],n[r]))return!1}return!0}return String(t)===String(n)}(e,t)}function k(e,t,n,r,a){var i=e.pathname,s=e.query;return null!=n&&("/"!==i.charAt(0)&&(i="/"+i),!!(function(e,t){return"/"!==t.charAt(0)&&(t="/"+t),"/"!==e.charAt(e.length-1)&&(e+="/"),"/"!==t.charAt(t.length-1)&&(t+="/"),t===e}(i,n.pathname)||!t&&function(e,t,n){for(var r=e,a=[],i=[],s=0,o=t.length;s<o;++s){var l=t[s].path||"";if("/"===l.charAt(0)&&(r=e,a=[],i=[]),null!==r&&l){var c=v(l,r);if(c?(r=c.remainingPathname,a=[].concat(a,c.paramNames),i=[].concat(i,c.paramValues)):r=null,""===r)return a.every(function(e,t){return String(i[t])===String(n[e])})}}return!1}(i,r,a))&&R(s,n.query))}function T(e){return e&&"function"==typeof e.then}var x=function(e,t){C(e.routes,function(t,n,r){!function(e,t,n){if(t.component||t.components)n(null,t.component||t.components);else{var r=t.getComponent||t.getComponents;if(r){var a=r.call(t,e,n);T(a)&&a.then(function(e){return n(null,e)},n)}else n()}}(e,t,r)},t)},N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function O(e){return null==e||a.a.isValidElement(e)}function P(e){return O(e)||Array.isArray(e)&&e.every(O)}function I(e){var t,n,r=e.type,a=(t=r.defaultProps,n=e.props,N({},t,n));if(a.children){var i=A(a.children,a);i.length&&(a.childRoutes=i),delete a.children}return a}function A(e,t){var n=[];return a.a.Children.forEach(e,function(e){if(a.a.isValidElement(e))if(e.type.createRouteFromReactElement){var r=e.type.createRouteFromReactElement(e,t);r&&n.push(r)}else n.push(I(e))}),n}function M(e){return P(e)?e=A(e):e&&!Array.isArray(e)&&(e=[e]),e}var j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function L(e,t,n,r,a){if(e.childRoutes)return[null,e.childRoutes];if(!e.getChildRoutes)return[];var i=!0,s=void 0,o={location:t,params:F(n,r)},l=e.getChildRoutes(o,function(e,t){t=!e&&M(t),i?s=[e,t]:a(e,t)});return T(l)&&l.then(function(e){return a(null,M(e))},a),i=!1,s}function F(e,t){return function(e,t,n){return t.reduce(function(e,t,r){var a=n&&n[r];return Array.isArray(e[t])?e[t].push(a):e[t]=t in e?[e[t],a]:a,e},e)}({},e,t)}function U(e,t,n,r,a,i){var s=e.path||"";if("/"===s.charAt(0)&&(n=t.pathname,r=[],a=[]),null!==n&&s){try{var o=v(s,n);o?(n=o.remainingPathname,r=[].concat(r,o.paramNames),a=[].concat(a,o.paramValues)):n=null}catch(e){i(e)}if(""===n){var l={routes:[e],params:F(r,a)};return void function e(t,n,r,a,i){if(t.indexRoute)i(null,t.indexRoute);else if(t.getIndexRoute){var s={location:n,params:F(r,a)},o=t.getIndexRoute(s,function(e,t){i(e,!e&&M(t)[0])});T(o)&&o.then(function(e){return i(null,M(e)[0])},i)}else if(t.childRoutes||t.getChildRoutes){var l=function(t,s){if(t)i(t);else{var o=s.filter(function(e){return!e.path});w(o.length,function(t,i,s){e(o[t],n,r,a,function(e,n){if(e||n){var r=[o[t]].concat(Array.isArray(n)?n:[n]);s(e,r)}else i()})},function(e,t){i(null,t)})}},c=L(t,n,r,a,l);c&&l.apply(void 0,c)}else i()}(e,t,r,a,function(e,t){if(e)i(e);else{var n;if(Array.isArray(t))(n=l.routes).push.apply(n,t);else t&&l.routes.push(t);i(null,l)}})}}if(null!=n||e.childRoutes){var c=function(s,o){s?i(s):o?q(o,t,function(t,n){t?i(t):n?(n.routes.unshift(e),i(null,n)):i()},n,r,a):i()},u=L(e,t,r,a,c);u&&c.apply(void 0,u)}else i()}function q(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];void 0===r&&("/"!==t.pathname.charAt(0)&&(t=j({},t,{pathname:"/"+t.pathname})),r=t.pathname),w(e.length,function(n,s,o){U(e[n],t,r,a,i,function(e,t){e||t?o(e,t):s()})},n)}var $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function B(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function H(e,t){var n={},r=S(),a=r.runEnterHooks,i=r.runChangeHooks,s=r.runLeaveHooks;var o=void 0;function l(e,n){o&&o.location===e?c(o,n):q(t,e,function(t,r){t?n(t):r?c($({},r,{location:e}),n):n()})}function c(e,t){var r=E(n,e),o=r.leaveRoutes,l=r.changeRoutes,c=r.enterRoutes;function u(r,a){if(r||a)return d(r,a);x(e,function(r,a){r?t(r):t(null,null,n=$({},e,{components:a}))})}function d(e,n){e?t(e):t(null,n)}s(o,n),o.filter(function(e){return-1===c.indexOf(e)}).forEach(y),i(l,n,e,function(t,n){if(t||n)return d(t,n);a(c,e,u)})}var u=1;function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.__id__||t&&(e.__id__=u++)}var p=Object.create(null);function h(e){return e.map(function(e){return p[d(e)]}).filter(function(e){return e})}function f(e,r){q(t,e,function(t,a){if(null!=a){o=$({},a,{location:e});for(var i=h(E(n,o).leaveRoutes),s=void 0,l=0,c=i.length;null==s&&l<c;++l)s=i[l](e);r(s)}else r()})}function m(){if(n.routes){for(var e=h(n.routes),t=void 0,r=0,a=e.length;"string"!=typeof t&&r<a;++r)t=e[r]();return t}}var g=void 0,v=void 0;function y(e){var t=d(e);t&&(delete p[t],B(p)||(g&&(g(),g=null),v&&(v(),v=null)))}return{isActive:function(t,r){return k(t=e.createLocation(t),r,n.location,n.routes,n.params)},match:l,listenBeforeLeavingRoute:function(t,n){var r=!B(p),a=d(t,!0);return p[a]=n,r&&(g=e.listenBefore(f),e.listenBeforeUnload&&(v=e.listenBeforeUnload(m))),function(){y(t)}},listen:function(t){function r(r){n.location===r?t(null,n):l(r,function(n,r,a){n?t(n):r?e.replace(r):a&&t(null,a)})}var a=e.listen(r);return n.location?t(null,n):r(e.getCurrentLocation()),a}}}function V(e,t,n){if(e[t])return new Error("<"+n+'> should not have a "'+t+'" prop')}Object(p.shape)({listen:p.func.isRequired,push:p.func.isRequired,replace:p.func.isRequired,go:p.func.isRequired,goBack:p.func.isRequired,goForward:p.func.isRequired});var W=Object(p.oneOfType)([p.func,p.string]),Y=Object(p.oneOfType)([W,p.object]),z=Object(p.oneOfType)([p.object,p.element]),X=Object(p.oneOfType)([z,Object(p.arrayOf)(z)]);var J=function(e,t){var n={};return e.path?(y(e.path).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}),n):n},G=h.a.shape({subscribe:h.a.func.isRequired,eventIndex:h.a.number.isRequired});function K(e){return"@@contextSubscriber/"+e}function Q(e){var t,n,r=K(e),a=r+"/lastRenderedEventIndex",i=r+"/handleContextUpdate",s=r+"/unsubscribe";return(n={contextTypes:(t={},t[r]=G,t),getInitialState:function(){var e;return this.context[r]?((e={})[a]=this.context[r].eventIndex,e):{}},componentDidMount:function(){this.context[r]&&(this[s]=this.context[r].subscribe(this[i]))},componentWillReceiveProps:function(){var e;this.context[r]&&this.setState(((e={})[a]=this.context[r].eventIndex,e))},componentWillUnmount:function(){this[s]&&(this[s](),this[s]=null)}})[i]=function(e){var t;e!==this.state[a]&&this.setState(((t={})[a]=e,t))},n}var Z,ee,te,ne,re,ae,ie,se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le=d()({displayName:"RouterContext",mixins:[(Z="router",ne=K(Z),re=ne+"/listeners",ae=ne+"/eventIndex",ie=ne+"/subscribe",(te={childContextTypes:(ee={},ee[ne]=G.isRequired,ee),getChildContext:function(){var e;return(e={})[ne]={eventIndex:this[ae],subscribe:this[ie]},e},componentWillMount:function(){this[re]=[],this[ae]=0},componentWillReceiveProps:function(){this[ae]++},componentDidUpdate:function(){var e=this;this[re].forEach(function(t){return t(e[ae])})}})[ie]=function(e){var t=this;return this[re].push(e),function(){t[re]=t[re].filter(function(t){return t!==e})}},te)],propTypes:{router:p.object.isRequired,location:p.object.isRequired,routes:p.array.isRequired,params:p.object.isRequired,components:p.array.isRequired,createElement:p.func.isRequired},getDefaultProps:function(){return{createElement:a.a.createElement}},childContextTypes:{router:p.object.isRequired},getChildContext:function(){return{router:this.props.router}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var e=this,t=this.props,n=t.location,r=t.routes,i=t.params,s=t.components,o=t.router,l=null;return s&&(l=s.reduceRight(function(t,a,s){if(null==a)return t;var l=r[s],c=J(l,i),u={location:n,params:i,route:l,router:o,routeParams:c,routes:r};if(P(t))u.children=t;else if(t)for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(u[d]=t[d]);if("object"===(void 0===a?"undefined":oe(a))){var p={};for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(p[h]=e.createElement(a[h],se({key:h},u)));return p}return e.createElement(a,u)},l)),null===l||!1===l||a.a.isValidElement(l)||c()(!1),l}}),ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ue(e,t,n){return de(ce({},e,{setRouteLeaveHook:t.listenBeforeLeavingRoute,isActive:t.isActive}),n)}function de(e,t){var n=t.location,r=t.params,a=t.routes;return e.location=n,e.params=r,e.routes=a,e}var pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var he={history:p.object,children:X,routes:X,render:p.func,createElement:p.func,onError:p.func,onUpdate:p.func,matchContext:p.object},fe=d()({displayName:"Router",propTypes:he,getDefaultProps:function(){return{render:function(e){return a.a.createElement(le,e)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},createRouterObject:function(e){var t=this.props.matchContext;return t?t.router:ue(this.props.history,this.transitionManager,e)},createTransitionManager:function(){var e=this.props.matchContext;if(e)return e.transitionManager;var t=this.props.history,n=this.props,r=n.routes,a=n.children;return t.getCurrentLocation||c()(!1),H(t,M(r||a))},componentWillMount:function(){var e=this;this.transitionManager=this.createTransitionManager(),this.router=this.createRouterObject(this.state),this._unlisten=this.transitionManager.listen(function(t,n){t?e.handleError(t):(de(e.router,n),e.setState(n,e.props.onUpdate))})},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function(){var e=this.state,t=e.location,n=e.routes,r=e.params,a=e.components,i=this.props,s=i.createElement,o=i.render,l=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(i,["createElement","render"]);return null==t?null:(Object.keys(he).forEach(function(e){return delete l[e]}),o(pe({},l,{router:this.router,location:t,routes:n,params:r,components:a,createElement:s})))}}),me=Object(p.shape)({push:p.func.isRequired,replace:p.func.isRequired,go:p.func.isRequired,goBack:p.func.isRequired,goForward:p.func.isRequired,setRouteLeaveHook:p.func.isRequired,isActive:p.func.isRequired}),ge=(Object(p.shape)({pathname:p.string.isRequired,search:p.string.isRequired,state:p.object,action:p.string.isRequired,key:p.string}),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});function ve(e,t){return"function"==typeof e?e(t.location):e}var ye=d()({displayName:"Link",mixins:[Q("router")],contextTypes:{router:me},propTypes:{to:Object(p.oneOfType)([p.string,p.object,p.func]),activeStyle:p.object,activeClassName:p.string,onlyActiveOnIndex:p.bool.isRequired,onClick:p.func,target:p.string},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(e){if(this.props.onClick&&this.props.onClick(e),!e.defaultPrevented){var t=this.context.router;t||c()(!1),!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)&&function(e){return 0===e.button}(e)&&(this.props.target||(e.preventDefault(),t.push(ve(this.props.to,t))))}},render:function(){var e=this.props,t=e.to,n=e.activeClassName,r=e.activeStyle,i=e.onlyActiveOnIndex,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","activeClassName","activeStyle","onlyActiveOnIndex"]),o=this.context.router;if(o){if(!t)return a.a.createElement("a",s);var l=ve(t,o);s.href=o.createHref(l),(n||null!=r&&!function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(r))&&o.isActive(l,i)&&(n&&(s.className?s.className+=" "+n:s.className=n),r&&(s.style=ge({},s.style,r)))}return a.a.createElement("a",ge({},s,{onClick:this.handleClick}))}}),be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};d()({displayName:"IndexLink",render:function(){return a.a.createElement(ye,be({},this.props,{onlyActiveOnIndex:!0}))}}),n(585),Object.assign;var Ee=d()({displayName:"Redirect",statics:{createRouteFromReactElement:function(e){var t=I(e);return t.from&&(t.path=t.from),t.onEnter=function(e,n){var r=e.location,a=e.params,i=void 0;if("/"===t.to.charAt(0))i=b(t.to,a);else if(t.to){var s=e.routes.indexOf(t);i=b(Ee.getRoutePattern(e.routes,s-1).replace(/\/*$/,"/")+t.to,a)}else i=r.pathname;n({pathname:i,query:t.query||r.query,state:t.state||r.state})},t},getRoutePattern:function(e,t){for(var n="",r=t;r>=0;r--){var a=e[r].path||"";if(n=a.replace(/\/*$/,"/")+n,0===a.indexOf("/"))break}return"/"+n}},propTypes:{path:p.string,from:p.string,to:p.string.isRequired,query:p.object,state:p.object,onEnter:V,children:V},render:function(){c()(!1)}}),we=Ee,Ce=d()({displayName:"IndexRedirect",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=we.createRouteFromReactElement(e))}},propTypes:{to:p.string.isRequired,query:p.object,state:p.object,onEnter:V,children:V},render:function(){c()(!1)}}),_e=d()({displayName:"IndexRoute",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=I(e))}},propTypes:{path:V,component:W,components:Y,getComponent:p.func,getComponents:p.func},render:function(){c()(!1)}}),Se=d()({displayName:"Route",statics:{createRouteFromReactElement:I},propTypes:{path:p.string,component:W,components:Y,getComponent:p.func,getComponents:p.func},render:function(){c()(!1)}}),De=(n(154),n(173)),Re=n.n(De),ke=n(174),Te=n.n(ke);n(586);Object.assign;Object.assign;var xe=n(587),Ne=n.n(xe),Oe=!("undefined"==typeof window||!window.document||!window.document.createElement);function Pe(e){var t=void 0;return Oe&&(t=function(e){return function(t){return Re()(Te()(e))(t)}}(e)()),t}var Ie=Pe(Ne.a),Ae=n(588),Me=(Pe(n.n(Ae).a),n(5)),je=n(300);const Le="SET_CONFIG",Fe="USER_LOGGED_IN",Ue="USER_LOGGED_OUT",qe="ADD_ALL_COLLECTIONS",$e="MARK_COLLECTION_FOR_DELETE_FROM_ALL_COLLECTIONS",Be="DELETE_COLLECTION_FROM_ALL_COLLECTIONS",He="UPDATE_ACTIVE_COLLECTION",Ve="UPDATE_PAGES_IN_ACTIVE_COLLECTION",We="UPDATE_TEAMS_IN_ACTIVE_COLLECTION",Ye="EMPTY_ACTIVE_COLLECTION",ze="UPDATE_WORKING_ON",Xe="EMPTY_WORKING_ON",Je="UPDATE_ACTIVE_USER",Ge="ADD_ALL_USERS",Ke="REMOVE_USER_FROM_ALL_USERS",Qe="UPDATE_ALL_TEAMS",Ze="UPDATE_ALL_TEAM_IDS_AND_NAMES",et="UPDATE_ACTIVE_TEAM",tt="UPDATE_ACTIVE_TEAM_MEMBERS",nt="UPDATE_ALL_DATASETS",rt="UPDATE_ACTIVE_DATASET",at="EMPTY_ACTIVE_DATASET",it="UPDATE_ACTIVE_DATASET_REVIEW_STATE",st="UPDATE_ACTIVE_DATASET_COLLECTION_ID",ot="UPDATE_ALL_RECIPES",lt="UPDATE_ALL_JOBS",ct="UPDATE_ACTIVE_JOB",ut="ADD_NEW_JOB",dt="UPDATE_ACTIVE_INSTANCE",pt="UPDATE_ACTIVE_VERSION_REVIEW_STATE",ht="EMPTY_ACTIVE_INSTANCE",ft="UPDATE_ACTIVE_VERSION",mt="EMPTY_ACTIVE_VERSION",gt="ADD_NOTIFICATION",vt="REMOVE_NOTIFICATION",yt="TOGGLE_NOTIFICATION_VISIBILITY",bt="ADD_PREVIEW_COLLECTION",Et="REMOVE_PREVIEW_COLLECTION",wt="UPDATE_PREVIEW_SELECTED_PAGE",Ct="REMOVE_PREVIEW_SELECTED_PAGE";function _t(e){return{type:qe,collections:e}}function St(e){return{type:Be,collectionID:e}}function Dt(e){return{type:He,collection:e}}function Rt(e){return{type:Ve,collection:e}}function kt(e){return{type:We,teams:e}}function Tt(){return{type:Ye,collection:null}}function xt(e,t){return{type:ze,workingOn:{id:e,name:t}}}function Nt(e){return{type:Ge,users:e}}function Ot(e){return{type:rt,dataset:e}}function Pt(e,t){return{type:it,lastEditedBy:e,reviewState:t}}function It(e){return{type:ot,allRecipes:e}}function At(e){return{type:ft,version:e}}function Mt(e,t){return{type:pt,lastEditedBy:e,reviewState:t}}function jt(e){return{type:Qe,allTeams:e}}function Lt(e){return{type:et,activeTeam:e}}function Ft(e){return{type:tt,members:e}}function Ut(){return{type:et,activeTeam:{}}}function qt(e){return{type:yt,notificationID:e}}function $t(e){return{type:wt,selectedPage:e}}var Bt=n(18),Ht=n.n(Bt);function Vt(){const e={credentials:"include",method:"POST",body:JSON.stringify({})};return fetch("/zebedee/ping",e).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e).catch(e=>(console.error(e),Promise.reject(e)))}class Wt{static getAll(){const e=document.cookie.split(";"),t={};return e.forEach(e=>{const n=e.split("=");t[n[0].trim()]=n[1]}),t}static add(e,t,n,r){return e&&"string"==typeof e?t?(n||(n="/"),r||(r=location.hostname),void(document.cookie=`${e}=${t};path=${n};domain=${r}`)):(console.error("cookie.add() requires a cookie value as an argument"),!1):(console.error("cookie.add() requires a cookie name (type=string) as an argument"),!1)}static get(e){if(!e||"string"!=typeof e)return console.error("cookie.get() requires a cookie name (type=string) as an argument"),!1;const t=this.getAll()[e];return t||!1}static remove(e){return e&&"string"==typeof e?this.get(e)?(document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",console.log(`Removed cookie: '${e}'`),!0):(console.error(`Unable to find '${e}' cookie`),!1):(console.error("cookie.get() requires a cookie name (type=string) as an argument"),!1)}}function Yt(e){this.name="HTTP_ERR",this.message=e?e.message:"",this.response=e||{},this.stack=(new Error).stack}Yt.prototype=Object.create(Error.prototype),Yt.prototype.constructor=Yt;var zt=n(589),Xt=n.n(zt);var Jt=new class{constructor(){this.database=null,this.DbIsInitialised=!1,this.buffer=[],this.initialise()}initialise(){const e=Xt.a.IndexedDb;this.database=new e({namespace:"florence"},()=>{this.database.addCollection("logs",()=>{this.getLatest().then(e=>{new Date(e.timestamp).toDateString()===(new Date).toDateString()?this.DbIsInitialised=!0:this.removeAll().then(()=>{this.DbIsInitialised=!0})}),this.buffer.length&&this.buffer.forEach(e=>{this.database.logs.upsert(e)})})},()=>{console.log("Error creating indexedDB")})}storageUsed(){return navigator.webkitTemporaryStorage.queryUsageAndQuota((e,t)=>({used:e,available:t}))}add(e){return e.storageID=Ht()(),this.DbIsInitialised?(this.database.logs.upsert(e),e.storageID):(this.buffer.push(e),e.storageID)}get(e){return e?new Promise((t,n)=>{this.database.logs.findOne({storageID:e},{},e=>{t(e)},e=>{n(e)})}):(console.warn("A key must be given when trying to access stored data"),Promise.reject())}getAll(e,t,n){return new Promise((r,a)=>{const i={};n&&(i.timestamp={$lte:n}),this.database.logs.find(i,{sort:[["timestamp","desc"]],skip:e,limit:t}).fetch(e=>{r(e)},e=>{a(),console.error("Error fetching all logs from local DB",e)})})}getLatest(){return new Promise((e,t)=>{this.database.logs.find({},{sort:["timestamp"],limit:1}).fetch(t=>{e(t[0])},e=>{t(),console.error("Error fetching all logs from local DB",e)})})}remove(e){return new Promise((t,n)=>{this.database.logs.remove(e,()=>{t()},()=>{n()})})}length(){return new Promise((e,t)=>{const n=window.indexedDB.open("IDBWrapper-minimongo_florence",1);n.onsuccess=(()=>{const r=n.result.transaction(["minimongo_florence"],"readonly").objectStore("minimongo_florence").count();r.onsuccess=(()=>{e(r.result)}),r.onerror=(()=>{t()})})})}removeAll(){return new Promise((e,t)=>{this.getAll().then(t=>{let n=0;t.forEach(r=>{this.database.logs.remove(r._id,()=>{this.database.logs.resolveRemove(r._id,()=>{++n===t.length&&e()})})})},()=>{t()})})}};var Gt=new class{constructor(){this.socket=null,this.openDelay=1,this.buffer=new Map,this.messageCounter=0,this.open()}open(){const e=location.protocol.replace(/^http/,"ws");this.socket=new WebSocket(`${e}${location.host}/florence/websocket`),console.info("Trying to open websocket..."),this.socket.onopen=(()=>{console.info("Websocket has been opened"),this.openDelay=1,this.buffer.forEach(e=>{this.socket.send(e)}),Zt.event("Websocket opened")}),this.socket.onerror=(e=>{Zt.event("Websocket error",Zt.error(),Zt.data({...e}))}),this.socket.onclose=(()=>{console.info("Websocket has been closed"),this.openDelay*=2,this.openDelay>=1e4&&(this.openDelay=1e4),setTimeout(()=>{this.open()},this.openDelay)}),this.socket.onmessage=(e=>{"ack"===(e=JSON.parse(e.data)).type&&this.buffer.delete(parseInt(e.payload))})}send(e){this.messageCounter++,e=`${this.messageCounter}:${e}`,this.buffer.size>=50?console.warn("Websocket buffer has reached it's limit, so message will not be sent to server. Message: \n",e):(this.buffer.set(this.messageCounter,e),1===this.socket.readyState&&this.socket.send(e))}};function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Qt=new Date(Date.now()).toISOString();class Zt{static initialise(){this.event("App initialised"),Ie.listen(e=>{Zt.event("Route change",Zt.data({...e}))})}static getAll(e,t,n){return Jt.getAll(e,t,n)}static length(){return Jt.length()}static removeAll(){return Jt.removeAll()}}Kt(Zt,"event",(e,...t)=>{const n={event:e,created_at:new Date(Date.now()).toISOString(),namespace:"florence",client_loaded_at:Qt,severity:3};return t&&t.map(e=>{e.attach(n)}),Jt.add(n),Gt.send(`log:${JSON.stringify(n)}`),n}),Kt(Zt,"http",(e,t,n,r,a,i)=>new en(e,t,n,r,a,i)),Kt(Zt,"data",e=>new tn(e)),Kt(Zt,"fatal",e=>new nn(e)),Kt(Zt,"error",e=>new rn(e)),Kt(Zt,"warn",e=>new an(e)),Kt(Zt,"info",()=>new sn);class en{constructor(e,t,n,r,a,i){Kt(this,"attach",e=>{const t=Date.parse(this.endedAt)-Date.parse(this.startedAt),n=new URL(this.url);return e.trace_id=this.requestID,e.http={method:this.method,path:n.pathname||void 0,query:n.search||void 0,scheme:n.protocol||void 0,host:n.hostname||void 0,port:n.port?parseInt(n.port):void 0,status_code:this.statusCode,started_at:this.startedAt,ended_at:this.endedAt,duration:t||void 0},e}),this.requestID=e,this.method=t,this.url=n,this.statusCode=a,this.startedAt=r,this.endedAt=i}}class tn{constructor(e){Kt(this,"attach",e=>(e.data=this.dataEvent,e)),this.dataEvent=e}}class nn{constructor(e){Kt(this,"attach",e=>(e.severity=0,e.error=this.error?on(this.error):void 0,e)),this.error=e}}class rn{constructor(e){Kt(this,"attach",e=>(e.severity=1,e.error=this.error?on(this.error):void 0,e)),this.error=e}}class an{constructor(e){Kt(this,"attach",e=>(e.severity=2,e.error=this.error?on(this.error):void 0,e)),this.error=e}}class sn{constructor(){Kt(this,"attach",e=>(e.severity=3,e))}}function on(e){let t=void 0;if(e.stack)try{t=e.stack.split("\n").map(e=>({line:e.trim()}))}catch(n){console.error(n),t=e.stack}return{message:e.message,stack_trace:t}}var ln=n(110);function cn(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"==typeof a?a(n,r,e):t(a)}}}}var un=cn();un.withExtraArgument=cn;var dn=un,pn=n(590);let hn="";const fn={config:{enableDatasetImport:!1},user:{isAuthenticated:!1,email:"",userType:"",isAdmin:!1},global:{workingOn:null},rootPath:"/florence",teams:{active:{},all:[],allIDsAndNames:[],users:[]},users:{active:{},all:[]},datasets:{all:[],jobs:[],activeInstance:{},recipes:[],activeJob:{}},collections:{all:[],active:null,toDelete:{}},notifications:[],preview:{selectedPage:null}};const mn=Ie,gn=Object(Me.routerMiddleware)(mn),vn=Object(pn.composeWithDevTools)(Object(ln.applyMiddleware)(dn,gn,()=>e=>t=>{if(t.type===Me.LOCATION_CHANGE){const n={...t,payload:{...t.payload,previousPathname:hn}};return hn=t.payload.pathname,e(n)}return e(t)})),yn=Object(ln.createStore)(Object(ln.combineReducers)({state:function(e=fn,t){switch(t.type){case Le:return{...e,config:{enableDatasetImport:t.config.enableDatasetImport}};case"USER_LOGGED_IN":return Object.assign({},e,{user:Object.assign({},e.user,{isAuthenticated:!0,email:t.email,userType:t.userType,isAdmin:t.isAdmin})});case"USER_LOGGED_OUT":return Object.assign({},e,{user:Object.assign({},e.user,{isAuthenticated:!1})});case qe:return{...e,collections:{...e.collections,all:t.collections}};case $e:{let n={...e.collections.toDelete};return n[t.collectionID]=null,{...e,collections:{...e.collections,toDelete:n}}}case Be:{const n={...e.collections.toDelete};delete n[t.collectionID];const r=e.collections.all.filter(e=>e.id!==t.collectionID);return{...e,collections:{...e.collections,all:r,toDelete:n}}}case He:return{...e,collections:{...e.collections,active:{id:t.collection.id,name:t.collection.name,publishDate:t.collection.publishDate,status:{...t.collection.status},type:t.collection.type,isForcedManualType:t.collection.isForcedManualType,canBeApproved:t.collection.canBeApproved,canBeDeleted:t.collection.canBeDeleted}}};case Ve:return{...e,collections:{...e.collections,active:{...e.collections.active,inProgress:t.collection.inProgress,complete:t.collection.complete,reviewed:t.collection.reviewed,deletes:t.collection.deletes,canBeApproved:t.collection.canBeApproved,canBeDeleted:t.collection.canBeDeleted}}};case We:return{...e,collections:{...e.collections,active:{...e.collections.active,teams:t.teams}}};case Ye:return{...e,collections:{...e.collections,active:null}};case ze:return{...e,global:{...e.global,workingOn:{...t.workingOn}}};case Xe:return{...e,global:{...e.global,workingOn:null}};case Je:return{...e,users:{...e.users,active:{email:t.user.email,hasTemporaryPassword:t.user.hasTemporaryPassword,name:t.user.name,role:t.user.role}}};case Ge:return{...e,users:{...e.users,all:[...t.users]}};case Ke:return{...e,users:{...e.users,all:e.users.all.filter(e=>e.email!==t.userID)}};case"UPDATE_ALL_TEAMS":return Object.assign({},e,{teams:Object.assign({},e.teams,{all:t.allTeams})});case Ze:return{...e,teams:{...e.teams,allIDsAndNames:t.allTeamIDsAndNames}};case"UPDATE_ACTIVE_TEAM":return Object.assign({},e,{teams:Object.assign({},e.teams,{active:t.activeTeam})});case"UPDATE_ACTIVE_TEAM_MEMBERS":return Object.assign({},e,{teams:Object.assign({},e.teams,{active:Object.assign({},e.teams.active,{members:t.members})})});case dt:return Object.assign({},e,{datasets:{...e.datasets,activeInstance:t.instance}});case ht:return Object.assign({},e,{datasets:{...e.datasets,activeInstance:null}});case ft:return Object.assign({},e,{datasets:{...e.datasets,activeVersion:{...e.datasets.activeVersion,...t.version}}});case pt:return Object.assign({},e,{datasets:{...e.datasets,activeVersion:{...e.datasets.activeVersion,lastEditedBy:t.lastEditedBy,reviewState:t.reviewState}}});case mt:return Object.assign({},e,{datasets:{...e.datasets,activeVersion:null}});case ct:return Object.assign({},e,{datasets:{...e.datasets,activeJob:t.job}});case at:return Object.assign({},e,{datasets:{...e.datasets,activeDataset:null}});case rt:return Object.assign({},e,{datasets:{...e.datasets,activeDataset:{...e.datasets.activeDataset,...t.dataset}}});case it:return Object.assign({},e,{datasets:{...e.datasets,activeDataset:{...e.datasets.activeDataset,lastEditedBy:t.lastEditedBy,reviewState:t.reviewState}}});case st:return Object.assign({},e,{datasets:{...e.datasets,activeDataset:{...e.datasets.activeDataset,collection_id:t.collectionID}}});case"UPDATE_ALL_DATASETS":return Object.assign({},e,{datasets:Object.assign({},e.datasets,{all:t.allDatasets})});case"UPDATE_ALL_RECIPES":return Object.assign({},e,{datasets:{...e.datasets,recipes:t.allRecipes}});case"UPDATE_ALL_JOBS":return Object.assign({},e,{datasets:Object.assign({},e.datasets,{jobs:t.allJobs})});case"ADD_NEW_JOB":return Object.assign({},e,{datasets:Object.assign({},e.datasets,{jobs:[...e.datasets.jobs,t.job]})});case"ADD_NOTIFICATION":return Object.assign({},e,{notifications:[...e.notifications,t.notification]});case"REMOVE_NOTIFICATION":return Object.assign({},e,{notifications:e.notifications.filter(e=>e.id!==t.notificationID)});case"TOGGLE_NOTIFICATION_VISIBILITY":return Object.assign({},e,{notifications:e.notifications.map(e=>e.id!==t.notificationID?e:(e.isVisible=!e.isVisible,e))});case bt:return{...e,preview:{...e.preview,...t.preview}};case Et:return{...e,preview:{selectedPage:null}};case wt:return{...e,preview:{...e.preview,selectedPage:t.selectedPage}};case Ct:return{...e,preview:{...e.preview,selectedPage:null}}}return e},routing:Me.routerReducer}),vn),bn=Object(Me.syncHistoryWithStore)(mn,yn);class En{static add(e){if(!e)return void console.warn("Couldn't show notification - no notification data supplied");const t={type:e.type||"neutral",message:e.message||"",id:Ht()(),buttons:e.buttons||[],isVisible:!1,isDismissable:null==e.isDismissable||e.isDismissable};if(e.autoDismiss&&e.autoDismiss>0){const n=window.setTimeout(()=>{window.clearTimeout(n),this.remove(t.id)},e.autoDismiss)}t.isDismissable&&t.buttons.push({text:"Close",onClick:function(){En.remove(t.id)}}),Zt.event("Notification shown",Zt.data({type:t.type,message:t.message})),yn.dispatch(function(e){return{type:gt,notification:e}}(t));const n=window.setTimeout(()=>{yn.dispatch(qt(t.id)),window.clearTimeout(n)},50);return t.id}static remove(e){yn.dispatch(qt(e));const t=window.setTimeout(()=>{yn.dispatch(function(e){return{type:vt,notificationID:e}}(e)),window.clearTimeout(t)},50)}}function wn(e,t,n=!0,r=(()=>{}),a,i){const s=50;let o=s;const l=5;let c=0;return new Promise(function(d,p){!function t(n,a,d,p,h){const f=Ht()();const m=window.location.origin+d;const g={method:e,credentials:"include",headers:{"Content-Type":"application/json","Request-ID":f,"internal-token":"FD0108EA-825D-411C-9B1D-41EF7727F465"}};"POST"!==e&&"PUT"!==e||(g.body=JSON.stringify(h||{}));const v=new Date(Date.now()).toISOString();Zt.event("Request sent",Zt.http(f,e,m,v));fetch(d,g).then(t=>{const r=new Date(Date.now()).toISOString();if(Zt.event("Response received",Zt.http(f,e,m,v,t.status,r)),t.status>=500)throw new Yt(t);if(401===t.status){if(i)return void a({status:t.status,message:t.statusText});const e={type:"neutral",message:"Your session has expired so you've been redirected to the login screen",isDismissable:!0,autoDismiss:2e4};return _n.logOut(),En.add(e),void a({status:t.status,message:t.statusText})}if(!t.ok)return void t.text().then(e=>{a({status:t.status,message:t.statusText,body:u(e)})});if(204===t.status)return void n({status:t.status,message:t.statusText});let s=!1,o=!1;try{s=t.headers.get("content-type").match(/application\/json/),o=t.headers.get("content-type").match(/text\/plain/)}catch(e){return console.error("Error trying to parse content-type header",e),Zt.event("Error trying to parse content-type header",Zt.error(e),Zt.data({header_content_type:t.headers.get("content-type")})),t.status>=200?void n():void a({status:"RUNTIME_ERROR",message:"Error trying to parse response's content-type header"})}s||"POST"===e||"PUT"===e||Zt.event("Received request response for method that didn't have the 'application/json' header",Zt.warn(),Zt.data({method:e})),o?(async()=>{try{const r=await t.text();n(r)}catch(r){if(console.error("Error trying to parse request body as text: ",r),Zt.event("Error trying to parse request body as text",Zt.error(r)),"POST"===e||"PUT"===e)return void n();a({status:t.status,message:"Text response body couldn't be parsed"})}})():(async()=>{try{const r=await t.json();n(r)}catch(r){if("POST"===e||"PUT"===e)return void n();console.error("Error trying to parse request body as JSON: ",r),Zt.event("Error trying to parse request body as JSON",Zt.error(r)),a({status:t.status,message:"JSON response body couldn't be parsed"})}})()}).catch((i={message:"No error message given"})=>{const u=new Date(Date.now()).toISOString();Zt.event("Request failed",Zt.http(f,e,m,v,void 0,u),Zt.error(i)),p?c<l?(setTimeout(function(){t(n,a,d,p,h)},o),o*=2,r(++c)):(i instanceof TypeError?a({status:"FETCH_ERR",error:i}):a(i instanceof Yt?{status:"RESPONSE_ERR",error:i}:{status:"UNEXPECTED_ERR",error:i}),c=0,o=s):i instanceof TypeError?a({status:"FETCH_ERR",error:i}):a(i instanceof Yt?{status:"RESPONSE_ERR",error:i}:{status:"UNEXPECTED_ERR",error:i})})}(d,p,t,n,a)});function u(e){if(!e)return null;try{return JSON.parse(e)}catch(t){return console.warn(`Error parsing request body as JSON, returned body as ${typeof e}`),e}}}class Cn{static delete(e,t,n){return wn("DELETE",e,t,void 0,void 0,n)}static get(e,t,n){return wn("GET",e,t,void 0,void 0,n)}static post(e,t,n,r){return wn("POST",e,n,void 0,t,r)}static put(e,t,n,r){return wn("PUT",e,n,void 0,t,r)}static head(e,t,n){return wn("HEAD",e,n,t)}}class _n{static get(e){return Cn.get(`/zebedee/users?email=${e}`)}static getAll(){return Cn.get("/zebedee/users")}static create(e){return Cn.post("/zebedee/users",e)}static remove(e){return Cn.delete(`/zebedee/users?email=" + ${e}`)}static setPassword(e){return Cn.post("/zebedee/password",e)}static setPermissions(e){return Cn.post("/zebedee/permission",e)}static getPermissions(e){return Cn.get(`/zebedee/permission?email=${e}`,!0,!0)}static getOldUserType(e){return e.admin?"PUBLISHING_SUPPORT":e.editor&&!e.dataVisPublisher?"PUBLISHING_SUPPORT":e.editor&&e.dataVisPublisher?"DATA_VISUALISATION":e.admin||e.editor||e.dataVisPublisher?void 0:"VIEWER"}static getUserRole(e,t){let n="";return t&&(n="EDITOR"),e&&(n="ADMIN"),t||e||(n="VIEWER"),n}static setUserState(e){const t=e.email,n=this.getUserRole(e.admin,e.editor),r=!!e.admin;yn.dispatch(function(e,t,n){return{type:Fe,email:e,userType:t,isAdmin:n}}(t,n,r)),localStorage.setItem("loggedInAs",t),localStorage.setItem("userType",this.getOldUserType(e))}static logOut(){Wt.remove("access_token")?(Wt.get("collection")&&Wt.remove("collection"),localStorage.removeItem("loggedInAs"),localStorage.removeItem("userType"),yn.dispatch({type:Ue}),yn.dispatch((void 0)())):console.warn("Error trying to remove 'access_token' cookie")}static updatePassword(e){return Cn.post("/zebedee/password",e,void 0,!0)}}const Sn={type:h.a.oneOf(["neutral","warning","positive"]).isRequired,message:h.a.oneOfType([h.a.string,h.a.element]).isRequired,id:h.a.string.isRequired,buttons:h.a.arrayOf(h.a.shape({onClick:h.a.func.isRequired,text:h.a.string.isRequired})),isVisible:h.a.bool};class Dn extends r.Component{constructor(e){super(e)}render(){return a.a.createElement("li",{className:`notifications__item ${this.props.isVisible?"visible":""} ${"warning"===this.props.type?"notifications__item--warning":""} ${"positive"===this.props.type?"notifications__item--positive":""}`},this.props.message,this.props.buttons.map((e,t)=>a.a.createElement("button",{key:t,className:"notifications__button",onClick:e.onClick},e.text)))}}Dn.propTypes=Sn,Dn.defaultProps={isVisible:!1,buttons:[]};var Rn=Dn;function kn(){return(kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Tn={notifications:h.a.arrayOf(h.a.object)};class xn extends r.Component{render(){return a.a.createElement("ul",{className:"notifications"},this.props.notifications.map(e=>a.a.createElement(Rn,kn({},e,{key:e.id}))))}}xn.propTypes=Tn;var Nn=xn;const On={children:h.a.node,dispatch:h.a.func.isRequired,notifications:h.a.arrayOf(h.a.object)};class Pn extends r.Component{constructor(e){super(e),this.state={isCheckingAuthentication:!1}}componentWillMount(){Zt.initialise(),window.setInterval(()=>{Vt()},1e4),this.setState({isCheckingAuthentication:!0}),new Promise(function(e,t){Wt.get("access_token")?Vt().then(t=>{t.hasSession?e(!0):e(!1)}).catch(e=>{t(e)}):e(!1)}).then(e=>{if(e){const e=localStorage.getItem("loggedInAs");return e?void _n.getPermissions(e).then(e=>{_n.setUserState(e),this.setState({isCheckingAuthentication:!1})}).catch(e=>{this.setState({isCheckingAuthentication:!1}),En.add({type:"warning",message:"Unable to start Florence due to an error getting your account's permissions. Please try refreshing Florence.",autoDismiss:8e3,isDismissable:!0}),Zt.event("Error getting a user's permissions on startup",Zt.error(e)),console.error("Error getting a user's permissions on startup",e)}):void console.warn("Unable to find item 'loggedInAs' from local storage")}this.setState({isCheckingAuthentication:!1})})}render(){return a.a.createElement("div",null,this.state.isCheckingAuthentication?a.a.createElement("div",{className:"grid grid--align-center grid--align-self-center grid--full-height"},a.a.createElement("div",{className:"loader loader--large loader--dark"})):this.props.children,a.a.createElement(Nn,{notifications:this.props.notifications}))}}Pn.propTypes=On;var In=Object(o.connect)(function(e){return{notifications:e.state.notifications}})(Pn);class An{static sanitise(e){const t=e.replace(/[^a-z0-9]/gi,"_").toLowerCase();return encodeURIComponent(t)}static slug(e){return e.startsWith("/")?e.replace("/","").replace(/\//g,"-"):e.replace(/\//g,"-")}static resolve(e,t){if("string"!=typeof e)return console.error("Unable to parse relative URL path because non-string type given"),Zt.event("Unable to parse relative URL path because non-string type given",Zt.data({type:typeof e})),location.pathname;try{if("/"===e)return"/florence";if("/"===e[0]&&(e="/florence"+e),"/florence"===location.pathname&&(e="/florence/"+e),0===e.indexOf("../")){const n=new URL(e,location.href+"/");return n.pathname.replace(/\/+$/,"")+(t?"":n.search)}const n=new URL(e,location.href);return n.pathname+(t?"":n.search)}catch(t){console.error("Error trying to parse relative URL:\n",t);const n={type:"warning",message:`There was an unexpected error trying to resolve the path '${e}' ... ¯\\_(ツ)_/¯`};return En.add(n),void Zt.event("Error trying to parse relative URL",Zt.error(t))}}}class Mn{static isAuthenticated(e){return e.isAuthenticated}static isViewer(e){return"VIEWER"==e.userType}static isAdminOrEditor(e){return"ADMIN"==e.userType||"EDITOR"==e.userType}static isAdmin(e){return"ADMIN"===e.userType}static canViewCollectionsDetails(e){return"ADMIN"==e.userType||"EDITOR"==e.userType}}const jn={id:h.a.string,label:h.a.string,contents:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,name:h.a.string.isRequired,disabled:h.a.bool})).isRequired,name:h.a.string,selectedOption:h.a.string,defaultOption:h.a.string,onChange:h.a.func,error:h.a.string,disabled:h.a.bool};class Ln extends r.Component{constructor(e){super(e),this.state={isFocused:!1},this.handleFocus=this.handleFocus.bind(this)}handleFocus(){this.state.isFocused?this.setState({isFocused:!1}):this.setState({isFocused:!0})}render(){return a.a.createElement("div",{className:"form__input"+(this.props.error?" form__input--error":"")},a.a.createElement("label",{className:"form__label",htmlFor:this.props.id},this.props.label),this.props.error&&a.a.createElement("div",{className:"error-msg"},this.props.error),a.a.createElement("div",{className:"select-wrap "+(this.state.isFocused?"select-wrap--focus":"")+(this.props.error?"select-wrap--error":"")+(this.props.disabled?"select-wrap--disabled":"")},a.a.createElement("select",{className:"select",id:this.props.id,name:this.props.name||this.props.id,disabled:this.props.disabled,onChange:this.props.onChange,onFocus:this.handleFocus,onBlur:this.handleFocus,value:this.props.selectedOption},a.a.createElement("option",{value:"default-option"},this.props.defaultOption||"Select an option"),this.props.contents.map((e,t)=>a.a.createElement("option",{disabled:e.disabled,key:t,value:e.id},e.name)))))}}Ln.propTypes=jn,Ln.defaultProps={disabled:!1};var Fn=Ln;const Un={dispatch:h.a.func.isRequired,preview:h.a.object.isRequired,rootPath:h.a.string.isRequired,workingOn:h.a.object.isRequired};class qn extends r.Component{constructor(e){super(e),this.handleSelectChange=this.handleSelectChange.bind(this)}mapPagesToSelect(e){if(e)try{return e.map(e=>({id:e.uri,name:this.createPageTitle(e)}))}catch(e){console.error("Error mapping pages to select",e)}}createPageTitle(e){return e.description.title&&e.description.edition?`${e.description.title}: ${e.description.edition}`:!e.description.title&&e.description.edition?`[no title available]: ${e.description.edition}`:e.description.title&&!e.description.edition?e.description.title:""}handleSelectChange(e){const t=e.target.value;if("default-option"===t)return;const n=t;this.props.dispatch($t(n)),this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections/${this.props.workingOn.id}/preview?url=${n}`))}render(){return a.a.createElement("div",{className:"global-nav__preview-select"},a.a.createElement(Fn,{id:"preview-select",contents:this.mapPagesToSelect(this.props.preview.pages)||[],onChange:this.handleSelectChange,defaultOption:this.props.preview.pages?"Select an option":"Loading pages...",selectedOption:this.props.preview.selectedPage||""}))}}qn.propTypes=Un;var $n=Object(o.connect)(function(e){return{preview:e.state.preview,rootPath:e.state.rootPath,workingOn:e.state.global.workingOn||{}}})(qn);const Bn={config:h.a.shape({enableDatasetImport:h.a.bool}),user:h.a.object.isRequired,workingOn:h.a.shape({id:h.a.string.isRequired,name:h.a.string}),rootPath:h.a.string.isRequired,location:h.a.object.isRequired,dispatch:h.a.func.isRequired};class Hn extends r.Component{constructor(e){super(e),this.handleLogoutClick=this.handleLogoutClick.bind(this)}handleLogoutClick(){_n.logOut()}renderWorkingOnItem(){if(!(this.props.workingOn||{}).id)return;const e=this.props.location.pathname;return e.indexOf("/datasets")>=0||e.indexOf("/preview")>=0?a.a.createElement("li",{className:"global-nav__item global-nav__item--working-on"},a.a.createElement(ye,{to:An.resolve(`/collections/${this.props.workingOn.id}`),className:"global-nav__link selected"},"Working on: ",this.props.workingOn.name||a.a.createElement("div",{className:"margin-left--1 inline-block"},a.a.createElement("div",{className:"loader loader--inline loader--small"})))):void 0}renderNavItems(){if(!Mn.isAuthenticated(this.props.user))return a.a.createElement("li",{className:"global-nav__item"},a.a.createElement(ye,{to:`${this.props.rootPath}/login`,activeClassName:"selected",className:"global-nav__link"},"Login"));const e=this.props.rootPath;return a.a.createElement("span",null,this.renderWorkingOnItem(),a.a.createElement("li",{className:"global-nav__item"},a.a.createElement(ye,{to:`${e}/collections`,activeClassName:"selected",className:"global-nav__link"},"Collections")),Mn.isAdminOrEditor(this.props.user)?a.a.createElement("span",null,this.props.config.enableDatasetImport&&a.a.createElement("li",{className:"global-nav__item"},a.a.createElement(ye,{to:An.resolve("/uploads/data"),activeClassName:"selected",className:"global-nav__link"},"Datasets")),a.a.createElement("li",{className:"global-nav__item"},a.a.createElement("a",{className:"global-nav__link",href:"/florence/publishing-queue"},"Publishing queue")),a.a.createElement("li",{className:"global-nav__item"},a.a.createElement("a",{className:"global-nav__link",href:"/florence/reports"},"Reports")),a.a.createElement("li",{className:"global-nav__item"},a.a.createElement(ye,{to:`${e}/users`,activeClassName:"selected",className:"global-nav__link"},"Users and access")),a.a.createElement("li",{className:"global-nav__item"},a.a.createElement(ye,{to:`${e}/teams`,activeClassName:"selected",className:"global-nav__link"},"Teams"))):"",a.a.createElement("li",{className:"global-nav__item"},a.a.createElement(ye,{to:An.resolve("/login"),onClick:this.handleLogoutClick,className:"global-nav__link"},"Logout")))}render(){const e=new RegExp(`${this.props.rootPath}/collections/[\\w|-]*/preview`,"g").test(this.props.location.pathname);return a.a.createElement("ul",{className:"global-nav__list"},e&&a.a.createElement($n,null),this.renderNavItems())}}Hn.propTypes=Bn;var Vn=Object(o.connect)(function(e){return{user:e.state.user,rootPath:e.state.rootPath,workingOn:e.state.global?e.state.global.workingOn:null,config:e.state.config}})(Hn);const Wn={children:h.a.node.isRequired,params:h.a.object.isRequired,location:h.a.object.isRequired};class Yn extends r.Component{render(){return a.a.createElement("div",null,a.a.createElement(Vn,{location:this.props.location}),this.props.children)}}Yn.propTypes=Wn;const zn={id:h.a.string.isRequired,name:h.a.string,label:h.a.string,type:h.a.string,onChange:h.a.func,onBlur:h.a.func,error:h.a.string,disabled:h.a.bool,isFocused:h.a.bool,inline:h.a.bool,accept:h.a.string,value:h.a.string,min:h.a.string,max:h.a.string,allowAutoComplete:h.a.bool,placeholder:h.a.string};class Xn extends r.Component{constructor(e){super(e),this.state={type:this.props.type,displayShowHide:"password"===this.props.type},this.showHide=this.showHide.bind(this),this.moveCaretToEnd=this.moveCaretToEnd.bind(this)}showHide(e){e.preventDefault(),e.stopPropagation(),this.setState({type:"text"===this.state.type?"password":"text"})}moveCaretToEnd(e){const t=e.target.value;e.target.value="",e.target.value=t}render(){return a.a.createElement("div",{className:"form__input"+(this.props.error?" form__input--error":"")+(this.props.inline?" form__input--flush":"")},!this.props.inline&&a.a.createElement("label",{className:"form__label",htmlFor:this.props.id},this.props.label),this.props.error?a.a.createElement("div",{id:`input-error-${this.props.id}`,className:"error-msg"},this.props.error):"","textarea"!==this.props.type?a.a.createElement("input",{id:this.props.id,type:this.state.type,className:"input"+(this.state.displayShowHide?" input--show-hide":""),name:this.props.name||this.props.id,disabled:this.props.disabled,onChange:this.props.onChange,onBlur:this.props.onBlur,autoFocus:this.props.isFocused,onFocus:this.moveCaretToEnd,placeholder:this.props.inline?this.props.label:this.props.placeholder,accept:this.props.accept,value:this.props.value,min:this.props.min,max:this.props.max,autoComplete:!this.props.allowAutoComplete&&"new-password"}):a.a.createElement("textarea",{id:this.props.id,className:"input input__textarea",name:this.props.name||this.props.id,disabled:this.props.disabled,onChange:this.props.onChange,onBlur:this.props.onBlur,autoFocus:this.props.isFocused,placeholder:this.props.inline?this.props.label:"",value:this.props.value}),this.state.displayShowHide?a.a.createElement("span",{className:"btn btn--password",onClick:this.showHide,onKeyPress:this.showHide,tabIndex:"0",role:"button"},"text"===this.state.type?"Hide":"Show"):"")}}function Jn(){return(Jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Xn.propTypes=zn,Xn.defaultProps={type:"text",disabled:!1,isFocused:!1};const Gn={formData:h.a.shape({inputs:h.a.arrayOf(h.a.shape({id:h.a.string,label:h.a.string,type:h.a.string,onChange:h.a.func,error:h.a.string})),onSubmit:h.a.func,isSubmitting:h.a.bool})};class Kn extends r.Component{constructor(e){super(e)}render(){const e=this.props.formData.inputs,t=this.props.formData.isSubmitting;return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-3"},a.a.createElement("h1",{className:"text-center"},"Login"),a.a.createElement("form",{className:"form",onSubmit:this.props.formData.onSubmit},e.map((e,n)=>a.a.createElement(Xn,Jn({key:n},e,{disabled:t,allowAutoComplete:!0}))),a.a.createElement("button",{type:"submit",className:"btn btn--primary margin-top--1",disabled:t},"Log in"),t?a.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):"")))}}Kn.propTypes=Gn;const Qn={children:h.a.node,sizeClass:h.a.string};class Zn extends r.Component{constructor(e){super(e)}componentWillMount(){document.querySelector("body").style.overflow="hidden"}componentWillUnmount(){document.querySelector("body").style.overflow="initial"}render(){return a.a.createElement("div",{className:"modal__overlay"},a.a.createElement("div",{className:"modal__inner "+this.props.sizeClass},this.props.children))}}function er(){return(er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Zn.propTypes=Qn,Zn.defaultProps={sizeClass:"grid__col-3"};const tr={formData:h.a.shape({inputs:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,value:h.a.string,label:h.a.string.isRequired,type:h.a.string,onChange:h.a.func,error:h.a.string})),onSubmit:h.a.func.isRequired,onCancel:h.a.func.isRequired,isSubmitting:h.a.bool}).isRequired};class nr extends r.Component{constructor(e){super(e)}render(){const e=this.props.formData.inputs||[],t=this.props.formData.isSubmitting||!1;return a.a.createElement("div",null,a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,"Change password")),a.a.createElement("form",{onSubmit:this.props.formData.onSubmit},a.a.createElement("div",{className:"modal__body"},e.map((e,n)=>a.a.createElement(Xn,er({key:n},e,{disabled:t})))),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{className:"btn btn--positive",type:"submit",onClick:this.props.formData.onSubmit,disabled:t},"Update password"),a.a.createElement("button",{className:"btn margin-left--1",type:"button",onClick:this.props.formData.onCancel,disabled:t},"Cancel"),t?a.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):"")))}}nr.propTypes=tr;const rr={shownNotification:"SHOWN_NOTIFICATION",shownWarning:"SHOWN_WARNING",changedRoute:"CHANGED_ROUTE",appInitialised:"APP_INITIALISED",requestSent:"REQUEST_SENT",requestReceived:"REQUEST_RECEIVED",requestFailed:"REQUEST_FAILED",passwordChangeSuccess:"PASSWORD_CHANGE_SUCCESS",passwordChangeError:"PASSWORD_CHANGE_ERROR",editedTeamMembers:"EDITED_TEAM_MEMBERS",pingSent:"PING_SENT",pingReceived:"PING_RECEIVED",pingFailed:"PING_FAILED",socketBufferFull:"SOCKET_BUFFER_FULL",socketOpen:"SOCKET_OPEN",socketError:"SOCKET_ERROR",unexpectedRuntimeError:"UNEXPECTED_RUNTIME_ERROR",runtimeWarning:"RUNTIME_WARNING"},ar=Ht()(),ir=[rr.pingSent,rr.pingReceived,rr.socketBufferFull];class sr{static initialise(){this.add(rr.appInitialised),Ie.listen(e=>{sr.add(rr.changedRoute,{...e})})}static add(e,t){const n=new Date,r={type:e,location:location.href,instanceID:ar,created:n.toISOString(),timestamp:n.getTime(),payload:t||null};Jt.add(r),ir.includes(e)||Gt.send(`log:${JSON.stringify(r)}`)}static getAll(e,t,n){return Jt.getAll(e,t,n)}static length(){return Jt.length()}static removeAll(){return Jt.removeAll()}}const or={FETCH_ERR:"Florence is unavailable",RESPONSE_ERR:"Florence is experiencing difficulties",UNEXPECTED_ERR:"Something has gone seriously wrong. Please restart Florence"};function lr(e){return e?e.match(/.+\s.+\s.+\s.+/)?e.length<=15?{isValid:!1,error:"Passwords must contain at least 15 characters"}:{isValid:!0,error:""}:{isValid:!1,error:"Passwords must contain four words, separated by spaces"}:{isValid:!1,error:"Passwords must contain four words and be at least 15 characters"}}const cr={email:h.a.string.isRequired,currentPassword:h.a.string.isRequired,handleSuccess:h.a.func.isRequired,handleCancel:h.a.func.isRequired};class ur extends r.Component{constructor(e){super(e),this.state={isSubmitting:!1,newPassword:{value:"",errorMsg:""}},this.handleInputChange=this.handleInputChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleInputChange(e){const t=e.target.id,n=e.target.value;switch(t){case"new-password":this.setState({newPassword:{value:n,errorMsg:""}})}}handleSubmit(e){e.preventDefault();const t=lr(this.state.newPassword.value);if(!t.isValid)return void this.setState(e=>({newPassword:{...e.newPassword,errorMsg:t.error}}));const n={password:this.state.newPassword.value,email:this.props.email,oldPassword:this.props.currentPassword};this.setState({isSubmitting:!0}),_n.updatePassword(n).then(()=>{this.props.handleSuccess(this.state.newPassword.value);const e={email:this.props.email};sr.add(rr.passwordChangeSuccess,e);En.add({type:"positive",isDismissable:!0,autoDismiss:15e3,message:"Password successfully changed"})}).catch(e=>{const t={type:"warning",isDismissable:!0,autoDismiss:15e3};switch(e.status){case 404:t.message="The user you are changing the password for was not recognised",En.add(t),this.setState({isSubmitting:!1});break;case 401:t.message="You are not authorised to update this password",En.add(t),this.setState({isSubmitting:!1});break;case"UNEXPECTED_ERR":console.error(or.UNEXPECTED_ERR),t.message=or.UNEXPECTED_ERR,En.add(t),this.setState({isSubmitting:!1});break;case"RESPONSE_ERR":console.error(or.RESPONSE_ERR),t.message=or.RESPONSE_ERR,En.add(t),this.setState({isSubmitting:!1});break;case"FETCH_ERR":console.error(or.FETCH_ERR),t.message=or.FETCH_ERR,En.add(t),this.setState({isSubmitting:!1})}})}render(){const e={inputs:[{id:"new-password",label:"New password",type:"password",onChange:this.handleInputChange,error:this.state.newPassword.errorMsg}],onSubmit:this.handleSubmit,onCancel:this.props.handleCancel,isSubmitting:this.state.isSubmitting};return a.a.createElement(nr,{formData:e})}}ur.propTypes=cr;const dr={dispatch:h.a.func.isRequired,isAuthenticated:h.a.bool.isRequired,rootPath:h.a.string.isRequired,location:h.a.object};class pr extends r.Component{constructor(e){super(e),this.state={email:{value:"",errorMsg:""},password:{value:"",errorMsg:""},requestPasswordChange:!1,isSubmitting:!1},this.handleSubmit=this.handleSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handlePasswordChangeCancel=this.handlePasswordChangeCancel.bind(this),this.handlePasswordChangeSuccess=this.handlePasswordChangeSuccess.bind(this)}componentWillMount(){this.props.isAuthenticated&&this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections`))}postLoginCredentials(e){return Cn.post("/zebedee/login",e,!0,!0)}handleLogin(e){this.postLoginCredentials(e).then(e=>{Wt.add("access_token",e),_n.getPermissions(this.state.email.value).then(e=>{_n.setUserState(e),function(e){const t=yn.getState().state.rootPath;e?e.startsWith(`${t}/teams`)||e.startsWith(`${t}/datasets`)||e.startsWith(`${t}/collections`)||e.startsWith(`${t}/users`)?Ie.push(e):e!==`${t}/publishing-queue`&&e!==`${t}/reports`&&e!==`${t}/workspace`?Ie.push(`${t}/collections`):window.location.href=e:Ie.push(`${t}/collections`)}(this.props.location.query.redirect)}).catch(e=>{this.setState({isSubmitting:!1}),En.add({type:"warning",message:"Unable to login due to an error getting your account's permissions. Please refresh and try again.",autoDismiss:8e3,isDismissable:!0}),Zt.event("Error getting a user's permissions on login",Zt.error(e)),console.error("Error getting a user's permissions on login",e)})}).catch(e=>{if(e){const t={type:"warning",isDismissable:!0,autoDismiss:15e3};switch(e.status){case 404:{const e=Object.assign({},this.state.email,{errorMsg:"Email address not recognised"});this.setState({email:e,isSubmitting:!1});break}case 401:{const e=Object.assign({},this.state.email,{errorMsg:"Incorrect password"});this.setState({password:e,isSubmitting:!1});break}case 417:this.setState({requestPasswordChange:!0});break;case"UNEXPECTED_ERR":console.error(or.UNEXPECTED_ERR),t.message=or.UNEXPECTED_ERR,En.add(t);break;case"RESPONSE_ERR":console.error(or.RESPONSE_ERR),t.message=or.RESPONSE_ERR,En.add(t);break;case"FETCH_ERR":console.error(or.FETCH_ERR),t.message=or.FETCH_ERR,En.add(t)}}this.setState({isSubmitting:!1})})}handleSubmit(e){e.preventDefault();const t={email:this.state.email.value,password:this.state.password.value};this.setState({isSubmitting:!0}),this.handleLogin(t)}handleInputChange(e){const t=e.target.id,n=e.target.value;switch(t){case"email":this.setState({email:{value:n,errorMsg:""}});break;case"password":this.setState({password:{value:n,errorMsg:""}})}}handlePasswordChangeSuccess(e){const t={email:this.state.email.value,password:e};this.handleLogin(t)}handlePasswordChangeCancel(e){e.preventDefault(),this.setState({requestPasswordChange:!1})}render(){const e={inputs:[{id:"email",label:"Email",type:"email",onChange:this.handleInputChange,error:this.state.email.errorMsg},{id:"password",label:"Password",type:"password",onChange:this.handleInputChange,error:this.state.password.errorMsg}],onSubmit:this.handleSubmit,isSubmitting:this.state.isSubmitting};return a.a.createElement("div",null,a.a.createElement(Kn,{formData:e}),this.state.requestPasswordChange?a.a.createElement(Zn,{sizeClass:"grid__col-3"},a.a.createElement(ur,{handleCancel:this.handlePasswordChangeCancel,handleSuccess:this.handlePasswordChangeSuccess,currentPassword:this.state.password.value,email:this.state.email.value})):"")}}pr.propTypes=dr;var hr=Object(o.connect)(function(e){return{isAuthenticated:e.state.user.isAuthenticated,rootPath:e.state.rootPath}})(pr),fr=n(79),mr=n.n(fr);class gr{static get(e){return Cn.get(`/zebedee/collectionDetails/${e}`)}static getAll(){return Cn.get("/zebedee/collections").then(e=>e)}static create(e){return Cn.post("/zebedee/collection",e).then(e=>e)}static approve(e){return Cn.post(`/zebedee/approve/${e}`)}static delete(e){return Cn.delete(`/zebedee/collection/${e}`)}static update(e,t){return t.id=e,Cn.put(`/zebedee/collection/${e}`,t)}static deletePageIncludingDatasetImport(e,t){return Cn.delete(`/zebedee/page/${e}?uri=${t}`)}static deletePage(e,t){return Cn.delete(`/zebedee/content/${e}?uri=${t}`)}static cancelDelete(e,t){return Cn.delete(`/zebedee/DeleteContent/${e}?uri=${t}`)}static addDataset(e,t){return Cn.put(`/zebedee/collections/${e}/datasets/${t}`,{state:"InProgress"},!0).then(e=>e)}static setDatasetStatusToComplete(e,t){return Cn.put(`/zebedee/collections/${e}/datasets/${t}`,{state:"Complete"},!0).then(e=>e)}static setDatasetStatusToReviewed(e,t){return Cn.put(`/zebedee/collections/${e}/datasets/${t}`,{state:"Reviewed"},!0).then(e=>e)}static removeDataset(e,t){console.log(`/zebedee/collections/${e}/datasets/${t}`)}static addDatasetVersion(e,t,n,r){return Cn.put(`/zebedee/collections/${e}/datasets/${t}/editions/${n}/versions/${r}`,{state:"InProgress"},!0).then(e=>e)}static setDatasetVersionStatusToComplete(e,t,n,r){return Cn.put(`/zebedee/collections/${e}/datasets/${t}/editions/${n}/versions/${r}`,{state:"Complete"},!0)}static setDatasetVersionStatusToReviewed(e,t,n,r){return Cn.put(`/zebedee/collections/${e}/datasets/${t}/editions/${n}/versions/${r}`,{state:"Reviewed"},!0)}static removeDatasetVersion(e,t,n,r){console.log(`/zebedee/collections/${e}/datasets/${t}/editions/${n}/versions/${r}`)}static async checkContentIsInCollection(e){return Cn.get(`/zebedee/checkcollectionsforuri?uri=${e}`)}static getInProgressContent(e){return Cn.get(`/zebedee/collectionDetails/${e}`).then(e=>e.inProgress)}}class vr{static getAll(){return Cn.get("/zebedee/teams").then(e=>e.teams)}static get(e){return Cn.get(`/zebedee/teams/${e}`).then(e=>e)}static add(e){return Cn.post(`/zebedee/teams/${e}`).then(e=>e)}static remove(e){return Cn.delete(`/zebedee/teams/${e}`).then(e=>e)}static addMember(e,t){return Cn.post(`/zebedee/teams/${e}?email=${t}`).then(e=>e)}static removeMember(e,t){return Cn.delete(`/zebedee/teams/${e}?email=${t}`).then(e=>e)}}const yr={item:h.a.shape({id:h.a.string.isRequired,name:h.a.string.isRequired}).isRequired,onRemoveItem:h.a.func.isRequired};class br extends r.Component{constructor(e){super(e),this.handleRemoveClick=this.handleRemoveClick.bind(this)}handleRemoveClick(){this.props.onRemoveItem(this.props.item)}render(){return a.a.createElement("span",{className:"selected-item-list__item"},this.props.item.name,a.a.createElement("button",{className:"selected-item-list__remove",type:"button",onClick:this.handleRemoveClick},"×"))}}br.propTypes=yr;const Er={items:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,name:h.a.string.isRequired})).isRequired,onRemoveItem:h.a.func.isRequired};class wr extends r.Component{constructor(e){super(e)}render(){return a.a.createElement("div",{className:"selected-item-list"},this.props.items.map((e,t)=>a.a.createElement(br,{key:t,item:e,onRemoveItem:this.props.onRemoveItem})))}}wr.propTypes=Er;const Cr={id:h.a.string.isRequired,value:h.a.string.isRequired,label:h.a.string.isRequired,group:h.a.string.isRequired,onChange:h.a.func,checked:h.a.bool,inline:h.a.bool,disabled:h.a.bool,subLabel:h.a.string};class _r extends r.Component{constructor(e){super(e),this.state={focused:!1,checked:e.checked},this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleChange=this.handleChange.bind(this)}handleChange(e){const t=e.target.checked,n=this.props.id,r=this.props.value,a=this.props.onChange;a&&a({id:n,checked:t,value:r})}handleFocus(){this.setState({focused:!0})}handleBlur(){this.setState({focused:!1})}render(){return a.a.createElement("div",{className:"radio"+(this.props.inline?" radio--inline":"")},a.a.createElement("input",{className:"radio__input"+(this.props.checked?" selected":"")+(this.state.focused?" focused":""),type:"radio",name:this.props.group,checked:this.props.checked,value:this.props.value,id:this.props.id,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,disabled:this.props.disabled}),a.a.createElement("label",{className:"radio__label"+(this.props.checked?" radio__label--selected":"")+(this.state.focused?" radio__label--focused":"")+(this.props.disabled?" radio__label--disabled":""),htmlFor:this.props.id},this.props.label," ",this.props.subLabel?a.a.createElement("br",null):null," ",this.props.subLabel?this.props.subLabel:null))}}function Sr(){return(Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}_r.propTypes=Cr;const Dr={radioData:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,value:h.a.string.isRequired,label:h.a.string.isRequired})).isRequired,legend:h.a.string,groupName:h.a.string.isRequired,onChange:h.a.func,selectedValue:h.a.string,inline:h.a.bool,disabled:h.a.bool};class Rr extends r.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange&&this.props.onChange(e)}render(){const e=this.props.radioData,t=this.props.groupName,n=this.props.selectedValue;return a.a.createElement("fieldset",{className:"fieldset"},this.props.legend?a.a.createElement("legend",{className:"fieldset__legend"},this.props.legend):"",e.map((e,r)=>a.a.createElement(_r,Sr({inline:this.props.inline,key:r},e,{group:t,onChange:this.handleChange,checked:n===e.value,disabled:this.props.disabled}))))}}Rr.propTypes=Dr;const kr={id:h.a.any.isRequired,columns:h.a.arrayOf(h.a.shape({heading:h.a.string.isRequired,width:h.a.string.isRequired})).isRequired,columnValues:h.a.arrayOf(h.a.oneOfType([h.a.string,h.a.element])),handleClick:h.a.func.isRequired,isSelected:h.a.bool,returnValue:h.a.object.isRequired,status:h.a.shape({neutral:h.a.bool,warning:h.a.bool,success:h.a.bool,message:h.a.string})};class Tr extends r.Component{constructor(e){super(e),this.bindClick=this.bindClick.bind(this)}bindClick(){this.props.handleClick(this.props.returnValue)}renderColumns(){const e=this.props.status||{},t=[];for(let n=0;n<this.props.columns.length;n++){const r=0===n;t.push(a.a.createElement("div",{key:`${this.props.id}-col-${n}`,className:`grid__col-${this.props.columns[n].width}`},this.props.columnValues[n],e.message&&r?a.a.createElement("strong",null,e.message):""))}return t}render(){const e=this.props.status||{};return a.a.createElement("li",{id:this.props.id,className:`selectable-box__item ${this.props.isSelected?" selected":""} ${e.neutral?" neutral":""} ${e.warning?" warning":""}`,onClick:this.bindClick},a.a.createElement("div",{className:"grid"},this.renderColumns()))}}function xr(){return(xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Tr.propTypes=kr;const Nr={columns:h.a.arrayOf(h.a.shape({heading:h.a.string.isRequired,width:h.a.string.isRequired})).isRequired,rows:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,columnValues:h.a.arrayOf(h.a.oneOfType([h.a.string,h.a.element])),returnValue:h.a.object.isRequired})).isRequired,activeRowID:h.a.string,handleItemClick:h.a.func.isRequired,isUpdating:h.a.bool.isRequired};class Or extends r.Component{constructor(e){super(e),this.bindItemClick=this.bindItemClick.bind(this)}bindItemClick(e){this.props.handleItemClick(e)}renderList(){return a.a.createElement("ul",{className:"selectable-box__list"},this.props.rows.map(e=>a.a.createElement(Tr,xr({columns:this.props.columns,key:e.id},e,{isSelected:this.props.activeRowID===e.id,handleClick:this.bindItemClick}))))}renderHeadings(){return a.a.createElement("div",{className:"grid"},this.props.columns.map((e,t)=>{const n=this.props.columns.length===t+1;return a.a.createElement("h2",{key:`selectable-box__heading-${t}`,className:`selectable-box__heading grid__col-${e.width} grid__cell`},e.heading,this.props.isUpdating&&n?a.a.createElement("span",{className:"selectable-box__status pull-right loader"}):"")}))}render(){return a.a.createElement("div",{className:"selectable-box"},this.renderHeadings(),this.renderList())}}Or.propTypes=Nr;class Pr{static getUpcoming(e,t,n){const r=[];e&&r.push("page="+e),t&&r.push("query="+t),n&&r.push("size="+n);const a="/releasecalendar/data?view=upcoming&"+r.join("&");return Cn.get(a)}}var Ir=n(41),Ar=n.n(Ir);class Mr{static getNow(){return new Date(Date.now())}static addYear(e=0,t){let n;t||(t=this.getNow());try{(n=new Date(t)).setFullYear(t.getFullYear()+e)}catch(r){n=t,Zt.event("Error adding year(s) to the date",Zt.error(r),Zt.data({extra_years:e,date:t})),console.error("Error adding "+e+"year(s) to the date "+t,r)}return n}static format(e,t){return e||(e=this.getNow()),Ar()(e,t)}}const jr={onClose:h.a.func.isRequired,onSubmit:h.a.func.isRequired},Lr=[{width:"9",heading:"Name"},{width:"3",heading:"Publish date"}];class Fr extends r.Component{constructor(e){super(e),this.state={isFetchingReleases:!1,isFetchingExtraReleases:!1,isFetchingSearchedReleases:!1,tableData:[],currentPage:0,numberOfPages:0,numberOfReleases:0,releasesPerPage:10,searchSubmitDelay:300,searchQuery:"",selectedRelease:""},this.searchTimeout=null,this.loadMoreReleases=this.loadMoreReleases.bind(this),this.handleSearch=this.handleSearch.bind(this),this.handleReleaseSelect=this.handleReleaseSelect.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.shouldSubmitBeDisabled=this.shouldSubmitBeDisabled.bind(this)}componentWillMount(){this.setState({isFetchingReleases:!0}),Pr.getUpcoming(null,null,this.state.releasesPerPage).then(e=>{const t=this.mapReleasesToTableRows(e.result.results);this.setState({isFetchingReleases:!1,numberOfReleases:e.result.numberOfResults,numberOfPages:e.result.paginator?e.result.paginator.numberOfPages:1,currentPage:1,tableData:t})}).catch(e=>{if("FETCH_ERR"===e.status){const e={type:"warning",message:"There was a network error whilst getting upcoming releases, please check your connection and try again",isDismissable:!0};En.add(e)}else{const e={type:"warning",message:"An unexpected error occured whilst trying to get upcoming releases",isDismissable:!0};En.add(e)}this.setState({isFetchingReleases:!1}),Zt.event("Error fetching upcoming releases for 'scheduled by release' functionality",Zt.error(e)),console.error("Error fetching upcoming releases for 'scheduled by release' functionality",e)})}mapReleasesToTableRows(e){return e.filter(e=>!e.description.published&&!e.description.cancelled).map(e=>{const t=e.description.title.replace(/<\/?[^>]+(>|$)/g,"");return{id:e.uri,columnValues:[t,Mr.format(e.description.releaseDate,"dddd, dd/mm/yyyy h:MMTT")],returnValue:{uri:e.uri,releaseDate:e.description.releaseDate,title:t,isProvisional:!e.description.finalised}}})}handleSearch(e){const t=e.target.value;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchReleases(t)},this.state.searchSubmitDelay)}searchReleases(e){this.setState({isFetchingSearchedReleases:!0,searchQuery:e}),Pr.getUpcoming(null,e,this.state.releasesPerPage).then(t=>{const n=this.mapReleasesToTableRows(t.result.results);this.setState({isFetchingSearchedReleases:!1,numberOfReleases:t.result.numberOfResults||0,numberOfPages:t.result.paginator?t.result.paginator.numberOfPages:1,currentPage:1,searchQuery:e,tableData:n})}).catch(e=>{if("FETCH_ERR"===e.status){const e={type:"warning",message:"There was a network error whilst getting upcoming releases, please check your connection and try again",isDismissable:!0};En.add(e)}else{const e={type:"warning",message:"An unexpected error occured whilst trying to get upcoming releases",isDismissable:!0};En.add(e)}this.setState({isFetchingSearchedReleases:!1}),Zt.event("Error fetching queried releases for 'schedule by release' functionality",Zt.error(e)),console.error("Error fetching queried releases for 'schedule by release' functionality",e)})}loadMoreReleases(){this.setState({isFetchingExtraReleases:!0}),Pr.getUpcoming(this.state.currentPage+1,this.state.searchQuery,this.state.releasesPerPage).then(e=>{this.setState(t=>({isFetchingExtraReleases:!1,currentPage:t.currentPage+1,tableData:[...t.tableData,...this.mapReleasesToTableRows(e.result.results)]}))}).catch(e=>{if("FETCH_ERR"===e.status){const e={type:"warning",message:"There was a network error whilst getting more upcoming releases, please check your connection and try again",isDismissable:!0};En.add(e)}else{const e={type:"warning",message:"An unexpected error occured whilst trying to get more upcoming releases",isDismissable:!0};En.add(e)}this.setState({isFetchingExtraReleases:!1}),Zt.event("Error fetching extra upcoming releases for 'scheduled by release' functionality",Zt.error(e)),console.error("Error fetching extra upcoming releases for 'scheduled by release' functionality",e)})}renderQueryText(){return this.state.isFetchingSearchedReleases?a.a.createElement("p",{className:"margin-bottom--1"},"Getting releases matching the term '",a.a.createElement("span",{className:"font-weight--600"},this.state.searchQuery),"'"):0===this.state.numberOfReleases?a.a.createElement("p",{className:"margin-bottom--1"},"No releases matching the term '",a.a.createElement("span",{className:"font-weight--600"},this.state.searchQuery),"'"):a.a.createElement("p",{className:"margin-bottom--1"},"Showing ",a.a.createElement("span",{className:"font-weight--600"},this.state.numberOfReleases)," release",this.state.numberOfReleases>1&&"s"," matching the term '",a.a.createElement("span",{className:"font-weight--600"},this.state.searchQuery),"'")}async handleReleaseSelect(e){if(this.setState({selectedRelease:e}),this.state.selectedRelease.uri===e.uri)return;const t=await this.checkReleaseIsInCollection(e);if(t){const n=this.state.tableData.map(n=>n.id!==e.uri?n:(n.status={},n.status.neutral=!0,n.status.message=`This release is already used in collection: "${t}"`,n));this.setState({tableData:n})}}checkReleaseIsInCollection(e){return gr.checkContentIsInCollection(e.uri).then(e=>204===e.status?null:"string"==typeof e?e:void 0)}shouldSubmitBeDisabled(){return!(!this.state.tableData.find(e=>this.state.selectedRelease.uri===e.id&&e.status)&&this.state.selectedRelease)}handleSubmit(){this.props.onSubmit(this.state.selectedRelease)}render(){return a.a.createElement("div",{className:"grid"},a.a.createElement("div",{className:"modal__header grid"},a.a.createElement("div",{className:"grid__col-8"},a.a.createElement("h1",{className:"modal__title margin-top--2"},"Select a calendar entry")),a.a.createElement("div",{className:"grid__col-4"},a.a.createElement(Xn,{id:"search-releases",disabled:this.state.isFetchingReleases,onChange:this.handleSearch,label:"Search by release name"}))),a.a.createElement("div",{className:"modal__body grid__col-12"},this.state.isFetchingSearchedReleases&&!this.state.searchQuery&&a.a.createElement("p",{className:"margin-bottom--1"},"Getting all releases..."),this.state.searchQuery&&this.renderQueryText(),a.a.createElement(Or,{activeRowID:this.state.selectedRelease.uri,columns:Lr,isUpdating:this.state.isFetchingReleases||this.state.isFetchingSearchedReleases,handleItemClick:this.handleReleaseSelect,rows:this.state.tableData}),!this.state.isFetchingReleases&&a.a.createElement("div",{className:"grid grid--justify-space-between margin-top--1"},a.a.createElement("div",null,this.state.numberOfPages!==this.state.currentPage&&a.a.createElement("button",{className:"btn btn--primary",type:"button",onClick:this.loadMoreReleases,disabled:this.state.isFetchingExtraReleases},"Show more releases"),this.state.isFetchingExtraReleases&&a.a.createElement("div",{className:"margin-left--1 inline-block"},a.a.createElement("div",{className:"loader loader--dark"}))),a.a.createElement("div",null,this.state.tableData.length>0?a.a.createElement("p",null,"Showing releases 1 to ",this.state.tableData.length," of ",this.state.numberOfReleases):a.a.createElement("p",null,"No upcoming releases to show")))),a.a.createElement("div",{className:"modal__footer grid__col-12"},a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn--positive margin-right--1",type:"button",disabled:this.shouldSubmitBeDisabled(),onClick:this.handleSubmit},"Submit"),a.a.createElement("button",{className:"btn",type:"button",onClick:this.props.onClose},"Close"))))}}Fr.propTypes=jr;var Ur=Fr;const qr={newCollectionDetails:h.a.shape({name:h.a.object.isRequired,type:h.a.string.isRequired,publishDate:h.a.object.isRequired,publishTime:h.a.object.isRequired,pendingDeletes:h.a.array.isRequired,teams:h.a.array.isRequired,release:h.a.object.isRequired,scheduleType:h.a.string.isRequired}).isRequired,handleCollectionNameChange:h.a.func.isRequired,handleTeamSelection:h.a.func.isRequired,handleRemoveTeam:h.a.func.isRequired,handleCollectionTypeChange:h.a.func.isRequired,showScheduleOptions:h.a.bool.isRequired,showCustomScheduleOptions:h.a.bool.isRequired,handleSelectRelease:h.a.func.isRequired,handleCloseRelease:h.a.func.isRequired,hasTeams:h.a.bool.isRequired,allTeams:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,name:h.a.string.isRequired})),handleScheduleTypeChange:h.a.func.isRequired,handlePublishTimeChange:h.a.func.isRequired,handlePublishDateChange:h.a.func.isRequired,handleAddRelease:h.a.func.isRequired,showScheduleByRelease:h.a.bool.isRequired,onSubmit:h.a.func.isRequired,isSubmitting:h.a.bool.isRequired};class $r extends r.Component{constructor(e){super(e)}renderScheduleOptions(){return a.a.createElement("div",null,a.a.createElement(Rr,{groupName:"schedule-type",radioData:[{id:"custom-radio",value:"custom-schedule",label:"Custom schedule"},{id:"calendar-radio",value:"calender-entry-schedule",label:"Calendar entry schedule"}],selectedValue:this.props.newCollectionDetails.scheduleType,onChange:this.props.handleScheduleTypeChange,legend:"Schedule type",inline:!0}),this.props.showCustomScheduleOptions?a.a.createElement("div",null,a.a.createElement(Xn,{id:"publish-date",label:"Publish date",type:"date",onChange:this.props.handlePublishDateChange,error:this.props.newCollectionDetails.publishDate.errorMsg,value:this.props.newCollectionDetails.publishDate.value,min:Mr.format(Mr.getNow(),"yyyy-mm-dd"),max:Mr.format(Mr.addYear(10),"yyyy-mm-dd")}),a.a.createElement(Xn,{id:"publish-time",label:"Publish time",type:"time",value:this.props.newCollectionDetails.publishTime.value,onChange:this.props.handlePublishTimeChange,error:this.props.newCollectionDetails.publishTime.errorMsg})):a.a.createElement("div",null,a.a.createElement("div",{className:"margin-bottom--1"},this.props.newCollectionDetails.release?a.a.createElement("div",null,a.a.createElement("p",null,"Selected release: "),a.a.createElement("p",{className:"font-weight--600 colour--night-shadz"},this.props.newCollectionDetails.release.errorMsg),a.a.createElement("p",{className:"font-weight--600"},this.props.newCollectionDetails.release.isProvisional&&"[Not finalised] ",this.props.newCollectionDetails.release.title)):a.a.createElement("p",null,"No release selected")),a.a.createElement("button",{type:"button",onClick:this.props.handleAddRelease,className:"btn btn--primary margin-bottom--2 "},"Select ",this.props.newCollectionDetails.release.uri&&"different ","a calendar entry")))}render(){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.props.onSubmit},a.a.createElement(Xn,{id:"collection-name",label:"Collection name",type:"text",error:this.props.newCollectionDetails.name.errorMsg,value:this.props.newCollectionDetails.name.value,onChange:this.props.handleCollectionNameChange}),a.a.createElement(Fn,{id:"collection-teams",label:"Select a team(s) that can view this collection",contents:this.props.hasTeams?this.props.allTeams:[],defaultOption:this.props.hasTeams?"Select an option":"Loading teams...",selectedOption:"default-option",onChange:this.props.handleTeamSelection}),this.props.newCollectionDetails.teams?a.a.createElement(wr,{items:this.props.newCollectionDetails.teams,onRemoveItem:this.props.handleRemoveTeam}):"",a.a.createElement(Rr,{groupName:"release-type",radioData:[{id:"scheduled-radio",value:"scheduled",label:"Scheduled publish"},{id:"manual-radio",value:"manual",label:"Manual publish"}],selectedValue:this.props.newCollectionDetails.type,onChange:this.props.handleCollectionTypeChange,legend:"Publish type",inline:!0}),this.props.showScheduleOptions?this.renderScheduleOptions():"",a.a.createElement("button",{type:"submit",className:"btn btn--positive margin-top--1",disabled:this.props.isSubmitting},"Create collection"),this.props.isSubmitting?a.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):""),this.props.showScheduleByRelease&&a.a.createElement(Zn,{sizeClass:"grid__col-8"},a.a.createElement(Ur,{onClose:this.props.handleCloseRelease,onSubmit:this.props.handleSelectRelease})))}}$r.propTypes=qr;var Br=$r;class Hr{static name(e){return!e||e.match(/^\s*$/)?{isValid:!1,errorMsg:"Collections must be given a name"}:{isValid:!0,errorMsg:""}}static date(e){return e?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Scheduled collections must be given a publish date"}}static time(e){return e?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Scheduled collections must be given a publish time"}}static release(e){return e.uri?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Must select a release"}}static type(e){return e?"manual"!==e&&"scheduled"!==e?{isValid:!1,errorMsg:"Collections must have a publish type"}:{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Collections must have a publish type"}}}const Vr={user:h.a.shape({userType:h.a.string.isRequired}).isRequired,onSuccess:h.a.func.isRequired,allTeams:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,name:h.a.string.isRequired})),dispatch:h.a.func.isRequired};class Wr extends r.Component{constructor(e){super(e),this.state={newCollectionDetails:{name:{value:"",errorMsg:""},type:"scheduled",publishDate:{value:"",errorMsg:""},publishTime:{value:"09:30",errorMsg:""},pendingDeletes:[],teams:[],release:{date:"",title:"",uri:"",isProvisional:null,errorMsg:""},scheduleType:"custom-schedule"},isGettingTeams:!0,isSubmitting:!1,showScheduleByRelease:!1,updatedAllTeams:null},this.blankNewCollectionDetails=this.state.newCollectionDetails,this.handleCollectionNameChange=this.handleCollectionNameChange.bind(this),this.handleTeamSelection=this.handleTeamSelection.bind(this),this.handleRemoveTeam=this.handleRemoveTeam.bind(this),this.handleCollectionTypeChange=this.handleCollectionTypeChange.bind(this),this.handleScheduleTypeChange=this.handleScheduleTypeChange.bind(this),this.handlePublishDateChange=this.handlePublishDateChange.bind(this),this.handlePublishTimeChange=this.handlePublishTimeChange.bind(this),this.handleAddRelease=this.handleAddRelease.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleCloseRelease=this.handleCloseRelease.bind(this),this.handleSelectRelease=this.handleSelectRelease.bind(this)}componentWillMount(){this.getAllTeams()}getAllTeams(){vr.getAll().then(e=>{if(0===e.length){const e={type:"warning",message:"Failed to get teams. You should be able to add teams after creating the collection or you can try refreshing",isDismissable:!0};return En.add(e),void this.setState({isGettingTeams:!1})}const t=e.map(e=>({id:e.id.toString(),name:e.name}));this.setState({isGettingTeams:!1}),this.props.dispatch(function(e){return{type:Ze,allTeamIDsAndNames:e}}(t)),this.props.dispatch(jt(e))}).catch(e=>{switch(e.status){case 401:break;case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get teams. You can still create the collection without teams, or refresh",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get teams. You can still create the collection without teams, or refresh",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get teams. Try refresh the page",isDismissable:!0};En.add(e);break}}console.error("Error fetching all teams:\n",e)})}handleCollectionNameChange(e){const t={value:e.target.value,errorMsg:""},n={...this.state.newCollectionDetails,name:t};this.setState({newCollectionDetails:n})}handleTeamSelection(e){if(!e.target.value)return;const t=e.target.value;for(let e=0;e<this.state.newCollectionDetails.teams.length;e++)if(this.state.newCollectionDetails.teams[e].id===t)return;const n=this.props.allTeams.find(e=>e.id===t),r=(this.state.updatedAllTeams||this.props.allTeams||[]).map(e=>e.id==t?{...e,disabled:!0}:e),a=[...this.state.newCollectionDetails.teams,n],i={...this.state.newCollectionDetails,teams:a};this.setState({newCollectionDetails:i,updatedAllTeams:r})}handleRemoveTeam(e){const t=this.state.newCollectionDetails.teams.filter(t=>t.id!==e.id),n=this.state.updatedAllTeams.map(t=>t.id===e.id?{...t,disabled:!1}:t),r={...this.state.newCollectionDetails,teams:t};this.setState({newCollectionDetails:r,updatedAllTeams:n})}handleCollectionTypeChange(e){const t={...this.state.newCollectionDetails,type:e.value,release:{uri:"",date:"",title:"",errorMsg:""}};this.setState({newCollectionDetails:t})}handleScheduleTypeChange(e){const t={...this.state.newCollectionDetails,scheduleType:e.value};this.setState({newCollectionDetails:t})}handlePublishDateChange(e){const t={value:e.target.value,errorMsg:""},n={...this.state.newCollectionDetails,publishDate:t};this.setState({newCollectionDetails:n})}handlePublishTimeChange(e){const t={value:e.target.value,errorMsg:""},n={...this.state.newCollectionDetails,publishTime:t};this.setState({newCollectionDetails:n})}handleAddRelease(e){e.preventDefault(),this.setState({showScheduleByRelease:!0})}handleSelectRelease(e){this.setState(t=>({newCollectionDetails:{...t.newCollectionDetails,release:{uri:e.uri,title:e.title,date:e.releaseDate,isProvisional:e.isProvisional,errorMsg:""}},showScheduleByRelease:!1}))}handleCloseRelease(){this.setState({showScheduleByRelease:!1})}makePublishDate(){if("scheduled"!==this.state.newCollectionDetails.type)return null;if("calender-entry-schedule"===this.state.newCollectionDetails.scheduleType)return this.state.releaseDateISO;const e=this.state.newCollectionDetails.publishDate.value,t=this.state.newCollectionDetails.publishTime.value;return new Date(e+" "+t).toISOString()}mapStateToPostBody(){try{return{name:this.state.newCollectionDetails.name.value,type:this.state.newCollectionDetails.type,publishDate:this.makePublishDate(),teams:this.state.newCollectionDetails.teams.map(e=>e.name),collectionOwner:this.props.user.userType,releaseUri:"calender-entry-schedule"===this.state.newCollectionDetails.scheduleType?this.state.newCollectionDetails.release.uri:null}}catch(e){Zt.event("Error mapping new collection state to POST body",Zt.error(e)),console.error("Error mapping new collection state to POST body"+e)}}handleSubmit(e){e.preventDefault(),this.setState({isSubmitting:!0});let t=!1,n=this.state.newCollectionDetails;const r=Hr.name(this.state.newCollectionDetails.name.value);if(!r.isValid){const e={value:this.state.newCollectionDetails.name.value,errorMsg:r.errorMsg};n={...n,name:e},t=!0}if("scheduled"===this.state.newCollectionDetails.type&&"custom-schedule"===this.state.newCollectionDetails.scheduleType){const e=Hr.date(this.state.newCollectionDetails.publishDate.value);if(!e.isValid){const r={value:this.state.newCollectionDetails.publishDate.value,errorMsg:e.errorMsg};n={...n,publishDate:r},t=!0}}if("scheduled"===this.state.newCollectionDetails.type&&"custom-schedule"===this.state.newCollectionDetails.scheduleType){const e=Hr.time(this.state.newCollectionDetails.publishTime.value);if(!e.isValid){const r={value:this.state.newCollectionDetails.publishTime.value,errorMsg:e.errorMsg};n={...n,publishTime:r},this.setState({newCollectionDetails:n,isSubmitting:!1}),t=!0}}if("scheduled"===this.state.newCollectionDetails.type&&"calender-entry-schedule"===this.state.newCollectionDetails.scheduleType){const e=this.state.newCollectionDetails.release,r=Hr.release(e);if(!r.isValid){const a={...e,errorMsg:r.errorMsg};n={...n,release:a},this.setState({newCollectionDetails:n,isSubmitting:!1}),t=!0}}t?this.setState({newCollectionDetails:n,isSubmitting:!1}):gr.create(this.mapStateToPostBody()).then(e=>{this.setState({newCollectionDetails:this.blankNewCollectionDetails,isSubmitting:!1,updatedAllTeams:null}),this.props.onSuccess(e)}).catch(e=>{switch(this.setState({isSubmitting:!1}),e.status){case 401:break;case 400:{const e={type:"warning",message:"There was an error creating the collection. Please check inputs and try again.",isDismissable:!0};En.add(e);break}case 409:this.handle409SubmitStatus(e);break;default:{const e={type:"warning",message:"An unexpected error has occured whilst creating collection",isDismissable:!0};En.add(e);break}}console.error(e)})}handle409SubmitStatus(e){if(e.body.message.includes("A collection with this name already exists")){Zt.event("error creating collection: collection name already exists",Zt.error(e),Zt.data({collection_name:this.state.newCollectionDetails.name.value}));const t={value:this.state.newCollectionDetails.name.value,errorMsg:"A collection with this name already exists"},n={...this.state.newCollectionDetails,name:t};this.setState({newCollectionDetails:n,isSubmitting:!1})}else if(e.body.message.includes("Cannot use this release")){Zt.event("error creating collection: release is in another collection",Zt.error(e),Zt.data({collection_name:this.state.newCollectionDetails.name.value,release_name:this.state.newCollectionDetails.release.name,release_url:this.state.newCollectionDetails.release.uri}));const t={...this.state.newCollectionDetails.release,errorMsg:"Release is already in use in another collection"},n={...this.state.newCollectionDetails,release:t};this.setState({newCollectionDetails:n,isSubmitting:!1})}else;}render(){return a.a.createElement("div",null,a.a.createElement(Br,{newCollectionDetails:this.state.newCollectionDetails,handleCollectionNameChange:this.handleCollectionNameChange,handleTeamSelection:this.handleTeamSelection,handleRemoveTeam:this.handleRemoveTeam,handleCollectionTypeChange:this.handleCollectionTypeChange,showScheduleOptions:"scheduled"===this.state.newCollectionDetails.type,showCustomScheduleOptions:"custom-schedule"===this.state.newCollectionDetails.scheduleType,handleSelectRelease:this.handleSelectRelease,handleCloseRelease:this.handleCloseRelease,hasTeams:!this.state.isGettingTeams,allTeams:this.state.updatedAllTeams||this.props.allTeams||[],handleScheduleTypeChange:this.handleScheduleTypeChange,handlePublishTimeChange:this.handlePublishTimeChange,handlePublishDateChange:this.handlePublishDateChange,handleAddRelease:this.handleAddRelease,showScheduleByRelease:this.state.showScheduleByRelease,onSubmit:this.handleSubmit,isSubmitting:this.state.isSubmitting}))}}Wr.propTypes=Vr;var Yr=Object(o.connect)(function(e){return{allTeams:e.state.teams.allIDsAndNames}})(Wr);const zr={type:h.a.string,title:h.a.oneOfType([h.a.string,h.a.element]).isRequired,isActive:h.a.bool};class Xr extends r.Component{constructor(e){super(e)}render(){return a.a.createElement("div",{className:"page page--"+this.props.type+(this.props.isActive?" active":"")},this.props.title)}}Xr.propTypes=zr;var Jr=Xr;const Gr={lastEdit:h.a.shape({email:h.a.string,date:h.a.string}),uri:h.a.string.isRequired,title:h.a.string.isRequired,edition:h.a.string,version:h.a.string,type:h.a.string},Kr=h.a.shape({uri:h.a.string.isRequired,type:h.a.string.isRequired,description:h.a.shape({title:h.a.string.isRequired,edition:h.a.string,language:h.a.string}),children:h.a.arrayOf(h.a.object),deleteMarker:h.a.bool.isRequired,contentPath:h.a.string.isRequired}),Qr={id:h.a.string.isRequired,activePageURI:h.a.string,name:h.a.string,enableDatasetImport:h.a.bool,onClose:h.a.func.isRequired,onPageClick:h.a.func.isRequired,onEditPageClick:h.a.func.isRequired,onDeletePageClick:h.a.func.isRequired,onCancelPageDeleteClick:h.a.func.isRequired,onDeleteCollectionClick:h.a.func.isRequired,onApproveCollectionClick:h.a.func.isRequired,isLoadingNameAndDate:h.a.bool,isLoadingDetails:h.a.bool,isCancellingDelete:h.a.shape({value:h.a.bool.isRequired,uri:h.a.string.isRequired}),isApprovingCollection:h.a.bool,canBeDeleted:h.a.bool,canBeApproved:h.a.bool,inProgress:h.a.arrayOf(h.a.shape(Gr)),complete:h.a.arrayOf(h.a.shape(Gr)),reviewed:h.a.arrayOf(h.a.shape(Gr)),deletes:h.a.arrayOf(h.a.shape({user:h.a.string.isRequired,root:Kr,totalDeletes:h.a.number.isRequired})),status:h.a.shape({neutral:h.a.bool,warning:h.a.bool}),type:h.a.string,publishDate:h.a.string,dispatch:h.a.func.isRequired};class Zr extends r.Component{constructor(e){super(e),this.handleRestoreContentClick=this.handleRestoreContentClick.bind(this),this.handleCollectionDeleteClick=this.handleCollectionDeleteClick.bind(this),this.handleCollectionApproveClick=this.handleCollectionApproveClick.bind(this)}handleCollectionDeleteClick(){this.props.onDeleteCollectionClick(this.props.id)}handleCollectionApproveClick(){this.props.onApproveCollectionClick(this.props.id)}renderLastEditText(e){try{if(!e||!e.date&&!e.email)return"Last edit: information not available";if(!e.date||"string"!=typeof e.date)return`Last edit: ${e.email} (date not available)`;const t=Mr.format(new Date(e.date),"ddd d mmm yyyy - HH:MM:ss");return e.email&&"string"==typeof e.email?`Last edit: ${e.email} (${t})`:`Last edit: email not available (${t})`}catch(t){return Zt.event("Error parsing date for collection details 'page last edit' function",Zt.error(t),Zt.data({...e})),console.error("Error parsing date for collection details 'page last edit' function. Last edit data: ",e),e.email?`Last edit: ${e.email} (date not available)`:"Error showing 'last edit' details"}}renderPageItem(e,t){const n=e.uri,r=n&&this.props.activePageURI===n;return a.a.createElement("li",{key:n,onClick:()=>{this.props.onPageClick(n)},"data-page-state":t,className:"list__item list__item--expandable"+(r?" active":"")},a.a.createElement("div",{className:"expandable-item__header"},a.a.createElement(Jr,{type:e.type,title:e.title+(e.edition?": "+e.edition:"")+(e.version?" (version "+e.version+")":""),isActive:r})),a.a.createElement("div",{className:"expandable-item__contents"},a.a.createElement("div",{className:"margin-bottom--1 margin-left--2"},a.a.createElement("p",null,this.renderLastEditText(e.lastEdit))),a.a.createElement("button",{className:"btn btn--primary",onClick:()=>{this.props.onEditPageClick(e,t)},type:"button"},"complete"===t?"Review":"Edit"),a.a.createElement("button",{className:"btn btn--warning btn--margin-left",onClick:()=>{this.props.onDeletePageClick(e,t)},type:"button",disabled:"dataset_details"===e.type||"dataset_version"===e.type},"Delete")))}renderPagesList(e){return a.a.createElement("ul",{className:"list list--neutral margin-bottom--1"},e)}renderInProgress(){if(!this.props.inProgress)return a.a.createElement("p",{className:"margin-bottom--2"},"Error rendering in progress pages");if(0===this.props.inProgress.length)return a.a.createElement("p",{className:"margin-bottom--2"},"No pages in progress");const e=this.props.inProgress.map(e=>this.renderPageItem(e,"inProgress"));return this.renderPagesList(e)}renderWaitingReview(){if(!this.props.complete)return a.a.createElement("p",{className:"margin-bottom--2"},"Error rendering pages awaiting review");if(0===this.props.complete.length)return a.a.createElement("p",{className:"margin-bottom--2"},"No pages awaiting review");const e=this.props.complete.map(e=>this.renderPageItem(e,"complete"));return this.renderPagesList(e)}renderReviewed(){if(!this.props.reviewed)return a.a.createElement("p",{className:"margin-bottom--2"},"Error rendering reviewed pages");if(0===this.props.reviewed.length)return a.a.createElement("p",{className:"margin-bottom--2"},"No reviewed pages");const e=this.props.reviewed.map(e=>this.renderPageItem(e,"reviewed"));return this.renderPagesList(e)}renderDeletetedPageChildItem(e){let t=e.description.title+(e.description.edition?": "+e.description.edition:"");return a.a.createElement("li",{key:e.uri,className:"margin-bottom--1"},a.a.createElement(Jr,{type:e.type,title:a.a.createElement("p",null,t,a.a.createElement("br",null),a.a.createElement("a",{href:e.uri,target:"_blank"},e.uri))}))}renderDeletetedPageItem(e){const t=!!this.props.isCancellingDelete&&(this.props.isCancellingDelete.value&&this.props.isCancellingDelete.uri===e.root.uri);return a.a.createElement("li",{key:e.root.uri,"data-page-state":"deletes",onClick:()=>{this.props.onPageClick(e.root.uri)},className:"list__item list__item--expandable"+(this.props.activePageURI===e.root.uri?" active":"")},a.a.createElement("div",{className:"expandable-item__header"},a.a.createElement(Jr,{type:e.root.type,title:e.root.description.title+(e.root.description.edition?": "+e.root.description.edition:""),isActive:this.props.activePageURI===e.root.uri})),a.a.createElement("div",{className:"expandable-item__contents"},a.a.createElement("div",{className:"margin-left--2 margin-bottom--1"},t&&a.a.createElement("p",{className:"font-weight--600"},"Cancelling delete in progress"),a.a.createElement("p",null,"Deleted by: ",e.user),a.a.createElement("p",null,"Path: ",a.a.createElement("a",{href:e.root.uri,target:"_blank"},e.root.uri)),a.a.createElement("p",{className:"margin-bottom--1"},"Total deletes: ",e.totalDeletes),a.a.createElement("button",{disabled:t,type:"button",className:"btn btn--warning",onClick:()=>{this.props.onCancelPageDeleteClick(e.root.uri)}},"Cancel delete"),e.root.children&&e.root.children.length>0&&a.a.createElement("div",null,a.a.createElement("h4",{className:"margin-top--1 margin-bottom--1"},"Sub-pages included in this delete:"),a.a.createElement("ul",{className:"list--neutral"},e.root.children.map(e=>this.renderDeletetedPageChildItem(e)))))))}renderDeleted(){return this.props.deletes.map(e=>this.renderDeletetedPageItem(e))}statePageCount(e){return this.props[e]&&0!==this.props[e].length?this.props[e].length.toString():"0"}renderPluralisedPageText(e){return this.props[e]&&1===this.props[e].length?"page":"pages"}renderPageStateHeading(e){switch(e){case"inProgress":return this.statePageCount(e)+" "+this.renderPluralisedPageText(e)+" in progress";case"complete":return this.statePageCount(e)+" "+this.renderPluralisedPageText(e)+" awaiting review";case"reviewed":return this.statePageCount(e)+" reviewed "+this.renderPluralisedPageText(e);case"deletes":if(!this.props.deletes||0===this.props.deletes.length)return;return this.statePageCount(e)+" "+(this.props.deletes.length>1?"deletes":"delete")}}renderCollectionState(){if(this.props.status)return this.props.status.neutral?a.a.createElement("div",{className:"drawer__banner drawer__banner--dark drawer__banner--large"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8"},"Preparing collection for the publishing queue"))):this.props.status.warning?a.a.createElement("div",{className:"drawer__banner drawer__banner--dark drawer__banner--large"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8"},"Error whilst preparing this collection for the publishing queue"))):void 0}renderCollectionPageActions(){if(!this.props.status||!this.props.status.neutral&&!this.props.status.warning)return a.a.createElement("div",{className:"drawer__banner"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 grid--align-start margin-top--1 margin-bottom--1"},a.a.createElement("div",null,a.a.createElement("a",{href:An.resolve("/workspace")+"?collection="+this.props.id,className:"btn btn--primary"+(this.props.isLoadingNameAndDate?" btn--disabled":"")},"Create/edit page"),this.props.enableDatasetImport&&a.a.createElement(ye,{id:"import-dataset-link",to:`${location.pathname}/datasets`,className:"btn btn--primary btn--margin-left"},"Create/edit CMD dataset page"),a.a.createElement("button",{disabled:this.props.isLoadingNameAndDate,className:"btn btn--margin-left",onClick:this.handleRestoreContentClick},"Restore page")))))}handleRestoreContentClick(){this.props.dispatch(Object(Me.push)(`${location.pathname}/restore-content`))}renderCollectionActions(){if(!(this.props.isLoadingNameAndDate||this.props.status&&(this.props.status.neutral||this.props.status.warning)))return this.props.canBeDeleted?a.a.createElement("button",{className:"btn btn--warning btn--margin-right",disabled:this.props.isLoadingDetails,onClick:this.handleCollectionDeleteClick,type:"button",id:"delete-collection"},"Delete"):this.props.canBeApproved?a.a.createElement("button",{className:"btn btn--positive btn--margin-right",disabled:this.props.isLoadingDetails||this.props.isApprovingCollection,onClick:this.handleCollectionApproveClick,type:"button",id:"approve-collection"},"Approve"):void 0}renderPublishDate(){if(this.props.type)return"manual"===this.props.type?a.a.createElement("p",null,"Manual publish"):"scheduled"===this.props.type&&this.props.publishDate?a.a.createElement("p",null,"Publish date: ",Mr.format(this.props.publishDate,"dddd, d mmmm yyyy h:MMTT")):"scheduled"!==this.props.type||this.props.publishDate?void 0:a.a.createElement("p",null,"Publish date: no publish date available")}render(){return a.a.createElement("div",{className:"drawer__container"},a.a.createElement("div",{className:"drawer__heading"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8"},a.a.createElement("div",{className:"grid grid--justify-space-between grid--align-end margin-top--3 margin-bottom--2"},a.a.createElement("div",null,a.a.createElement("h2",null,this.props.isLoadingNameAndDate?"Loading...":this.props.name),this.props.isLoadingNameAndDate?a.a.createElement("p",null,"Loading..."):this.renderPublishDate()),!this.props.isLoadingNameAndDate&&a.a.createElement(ye,{to:`${location.pathname}/edit`,className:"colour--cadet-blue font-size--16"},"Edit"))))),this.renderCollectionState(),this.renderCollectionPageActions(),a.a.createElement("div",{className:"drawer__body"},a.a.createElement("div",{className:"grid grid--justify-space-around"},this.props.isLoadingDetails?a.a.createElement("div",{className:"grid grid--align-center margin-top--4"},a.a.createElement("div",{className:"loader loader--large loader--dark"})):a.a.createElement("div",{className:"grid__col-8 margin-top--2"},a.a.createElement("h3",{className:"margin-bottom--1"},this.renderPageStateHeading("inProgress")),this.renderInProgress(),a.a.createElement("h3",{className:"margin-bottom--1"},this.renderPageStateHeading("complete")),this.renderWaitingReview(),a.a.createElement("h3",{className:"margin-bottom--1"},this.renderPageStateHeading("reviewed")),this.renderReviewed(),this.props.deletes&&this.props.deletes.length>0&&a.a.createElement("div",null,a.a.createElement("h3",{className:"margin-bottom--1"},this.renderPageStateHeading("deletes")),this.renderDeleted())))),a.a.createElement("div",{className:"drawer__footer"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},a.a.createElement("div",null,this.renderCollectionActions(),a.a.createElement("button",{className:"btn",onClick:this.props.onClose,type:"button"},"Close"),this.props.isApprovingCollection&&a.a.createElement("div",{className:"inline-block margin-left--1"},a.a.createElement("div",{className:"loader loader--inline"})))))))}}Zr.propTypes=Qr;var ea=Object(o.connect)()(Zr);const ta={id:h.a.any.isRequired,selectableBox:h.a.shape({firstColumn:h.a.string.isRequired,secondColumn:h.a.string.isRequired}),status:h.a.shape({neutral:h.a.bool.isRequired,warning:h.a.bool.isRequired,message:h.a.string.isRequired}),handleClick:h.a.func.isRequired,isSelected:h.a.bool};class na extends r.Component{constructor(e){super(e),this.bindClick=this.bindClick.bind(this)}bindClick(){this.props.handleClick(this.props)}render(){return a.a.createElement("li",{id:this.props.id,className:`selectable-box__item ${this.props.isSelected?" selected":""} ${this.props.status.neutral?" neutral":""} ${this.props.status.warning?" warning":""}`,onClick:this.bindClick},a.a.createElement("div",{className:"grid"},a.a.createElement("div",{className:"grid__col-6"},this.props.selectableBox.firstColumn,this.props.status.message?` [${this.props.status.message}]`:""),a.a.createElement("div",{className:"grid__col-6"},this.props.selectableBox.secondColumn)))}}function ra(){return(ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}na.propTypes=ta;const aa={headings:h.a.array.isRequired,items:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,selectableBox:h.a.shape({firstColumn:h.a.string.isRequired,secondColumn:h.a.string.isRequired})})).isRequired,activeItemID:h.a.string,handleItemClick:h.a.func.isRequired,isUpdating:h.a.bool};class ia extends r.Component{constructor(e){super(e),this.bindItemClick=this.bindItemClick.bind(this)}bindItemClick(e){this.props.handleItemClick(e)}renderList(){return a.a.createElement("ul",{id:"selectable-box",className:"selectable-box__list"},this.props.items.map((e,t)=>a.a.createElement(na,ra({key:t},e,{isSelected:this.props.activeItemID&&e.id===this.props.activeItemID,handleClick:this.bindItemClick}))))}render(){return a.a.createElement("div",{className:"selectable-box"},a.a.createElement("div",{className:"grid"},a.a.createElement("h2",{className:"selectable-box__heading grid__col-6"},this.props.headings[0]),a.a.createElement("h2",{className:"selectable-box__heading grid__col-6 grid__cell"},this.props.headings[1],this.props.isUpdating&&a.a.createElement("span",{className:"selectable-box__status pull-right loader"}))),this.renderList())}}ia.propTypes=aa;const sa={isVisible:h.a.bool,isAnimatable:h.a.bool,handleTransitionEnd:h.a.func,children:h.a.node};class oa extends r.Component{constructor(e){super(e),this.state={hasFinishedAnimation:!1},this.handleTransitionEnd=this.handleTransitionEnd.bind(this)}handleTransitionEnd(){this.props.handleTransitionEnd(),this.setState({hasFinishedAnimation:!0})}addAnimationClasses(){const e=[];return this.props.isAnimatable&&e.push("animatable"),this.props.isVisible&&e.push("visible"),this.state.hasFinishedAnimation&&e.push("animation-finished"),e.join(" ")}render(){return a.a.createElement("div",{className:`drawer ${this.addAnimationClasses()}`,onTransitionEnd:this.handleTransitionEnd},this.props.children)}}oa.propTypes=sa,oa.defaultProps={handleTransitionEnd:()=>{}};var la=oa;const ca={originalName:h.a.string,name:h.a.string,nameErrorMsg:h.a.string,onCancel:h.a.func.isRequired,onNameChange:h.a.func.isRequired,onRemoveTeam:h.a.func.isRequired,onTeamSelect:h.a.func.isRequired,onPublishTypeChange:h.a.func.isRequired,onPublishDateChange:h.a.func.isRequired,onPublishTimeChange:h.a.func.isRequired,onSave:h.a.func.isRequired,publishDate:h.a.string,publishDateErrorMsg:h.a.string,publishTime:h.a.string,publishTimeErrorMsg:h.a.string,teams:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,name:h.a.string.isRequired})),allTeams:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,name:h.a.string.isRequired})),publishType:h.a.string.isRequired,originalPublishType:h.a.string.isRequired,originalPublishDate:h.a.string.isRequired,isFetchingAllTeams:h.a.bool,isSavingEdits:h.a.bool};class ua extends r.Component{constructor(e){super(e),this.publishTypeRadioButtons=[{id:"edit-type-schedule",value:"scheduled",label:"Scheduled"},{id:"edit-type-manual",value:"manual",label:"Manual"}],this.minimumPublishDate=Ar()(Mr.getNow(),"yyyy-mm-dd"),this.maximumPublishDate=Ar()(Mr.addYear(10),"yyyy-mm-dd"),this.handleTeamSelection=this.handleTeamSelection.bind(this),this.handleTeamRemove=this.handleTeamRemove.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.handlePublishTypeChange=this.handlePublishTypeChange.bind(this),this.handlePublishDateChange=this.handlePublishDateChange.bind(this),this.handlePublishTimeChange=this.handlePublishTimeChange.bind(this),this.handleSave=this.handleSave.bind(this)}handleTeamSelection(e){this.props.onTeamSelect(e.target.value)}handleTeamRemove(e){this.props.onRemoveTeam(e.id)}handleNameChange(e){this.props.onNameChange(e.target.value)}handlePublishTypeChange(e){this.props.onPublishTypeChange(e.value)}handlePublishDateChange(e){this.props.onPublishDateChange(e.target.value)}handlePublishTimeChange(e){this.props.onPublishTimeChange(e.target.value)}handleSave(e){e.preventDefault(),this.props.onSave()}renderPublishDate(){if(this.props.originalPublishType)return"manual"===this.props.originalPublishType?a.a.createElement("p",null,"Manual publish"):"scheduled"===this.props.originalPublishType&&this.props.originalPublishDate?a.a.createElement("p",null,"Publish date: ",this.props.originalPublishDate):"scheduled"!==this.props.originalPublishType||this.props.originalPublishDate?void 0:a.a.createElement("p",null,"Publish date: no publish date available")}render(){return a.a.createElement("div",{className:"drawer__container"},a.a.createElement("div",{className:"drawer__heading"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8"},a.a.createElement("div",{className:"grid grid--justify-space-between grid--align-end margin-top--3 margin-bottom--2"},a.a.createElement("div",null,a.a.createElement("h2",null,this.props.originalName),this.renderPublishDate()),a.a.createElement("p",{id:"editing-text"},"Editing collection..."))))),a.a.createElement("div",{className:"drawer__body"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("form",{className:"form grid__col-8 margin-top--1",onSubmit:this.handleSave},a.a.createElement(Xn,{id:"collection-edit-name",label:"Name",value:this.props.name,error:this.props.nameErrorMsg,onChange:this.handleNameChange}),a.a.createElement(Fn,{id:"collection-edit-teams",label:"Select a team(s) that can view this collection",contents:this.props.allTeams,defaultOption:this.props.isFetchingAllTeams?"Loading teams...":"Select an option",selectedOption:"default-option",onChange:this.handleTeamSelection}),a.a.createElement(wr,{disabled:this.props.isSavingEdits,items:this.props.teams,onRemoveItem:this.handleTeamRemove}),a.a.createElement(Rr,{groupName:"collection-edit-type",radioData:this.publishTypeRadioButtons,selectedValue:this.props.publishType,onChange:this.handlePublishTypeChange,legend:"Publish type",inline:!0}),"scheduled"===this.props.publishType&&a.a.createElement("span",null,a.a.createElement(Xn,{type:"date",id:"edit-publish-date",label:"Publish date",error:this.props.publishDateErrorMsg,value:this.props.publishDate,min:this.minimumPublishDate,max:this.maximumPublishDate,onChange:this.handlePublishDateChange}),a.a.createElement(Xn,{type:"time",id:"edit-publish-time",label:"Publish time",error:this.props.publishTimeErrorMsg,value:this.props.publishTime,onChange:this.handlePublishTimeChange})),a.a.createElement("input",{type:"submit",hidden:!0})))),a.a.createElement("div",{className:"drawer__footer"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},a.a.createElement("div",null,a.a.createElement("button",{disabled:this.props.isSavingEdits,className:"btn btn--positive",type:"button",onClick:this.handleSave},"Save and return"),a.a.createElement("button",{disabled:this.props.isSavingEdits,className:"btn btn--margin-left",type:"button",onClick:this.props.onCancel},"Cancel"),this.props.isSavingEdits&&a.a.createElement("div",{className:"inline-block"},a.a.createElement("div",{className:"form__loader loader"})))))))}}ua.propTypes=ca;var da=ua;class pa{static collectionResponseToState(e){try{const t=this.publishState(e);return{id:e.id,name:e.name,publishDate:e.publishDate,status:{neutral:t.inProgress,warning:t.thrownError,success:t.completed,message:t.message},type:e.type,isForcedManualType:this.isForcedManualType(e),release:e.releaseUri,selectableBox:{firstColumn:e.name,secondColumn:this.publishDate(e)},canBeApproved:!1,canBeDeleted:!1,inProgress:e.inProgress,complete:e.complete,reviewed:e.reviewed,datasets:e.datasets,datasetVersions:e.datasetVersions,teams:e.teamsDetails?e.teamsDetails.map(e=>({id:e.id.toString(),name:e.name})):[],deletes:e.pendingDeletes}}catch(e){const t={type:"warning",message:"Error whilst mapping list of collections to screen",isDismissable:!0,autoDismiss:3e3};return En.add(t),console.error("Error mapping collections to component state: ",e),Zt.event("Error mapping collections to component state",Zt.error(e)),!1}}static pagesToCollectionState(e){try{const t=this.collectionCanBeApproved(e),n=this.collectionCanBeDeleted(e),r=e=>e?e.map(e=>{let t={};try{t={lastEdit:{email:e.events&&e.events.length>0?e.events[0].email:"",date:e.events&&e.events.length>0?e.events[0].date:""},title:e.description.title,edition:e.description.edition||"",uri:e.uri,type:e.type}}catch(e){Zt.event("Error mapping a page to Florence's state",Zt.error(e)),console.error("Error mapping a page to Florence's state",e)}return t}):(Zt.event("Collections pages array (e.g. inProgress) wasn't set, had to hardcode a default value of null",Zt.warn()),null),a={...e,canBeApproved:t,canBeDeleted:n,inProgress:r(e.inProgress),complete:r(e.complete),reviewed:r(e.reviewed)},i=this.datasetsToCollectionState(a);return{...i,canBeDeleted:this.collectionCanBeDeleted(i),canBeApproved:this.collectionCanBeApproved(i)}}catch(e){return Zt.event("Error mapping collection GET response to Florence's state",Zt.error(e)),console.error("Error mapping collection GET response to Florence's state",e),null}}static datasetsToCollectionState(e){try{const t=e=>({title:e.title,edition:e.edition,version:e.version,datasetID:e.id,id:`${e.id}/editions/${e.edition}/versions/${e.version}`,type:"dataset_version",uri:`/datasets/${e.id}/editions/${e.edition}/versions/${e.version}`,lastEditedBy:e.lastEditedBy}),n=e=>({title:e.title,type:"dataset_details",id:e.id,uri:`/datasets/${e.id}`,lastEditedBy:e.lastEditedBy}),r=()=>{let r=e.inProgress||[],a=e.complete||[],i=e.reviewed||[];return e.datasetVersions&&e.datasetVersions.forEach(e=>{"InProgress"===e.state&&r.push(t(e)),"Complete"===e.state&&a.push(t(e)),"Reviewed"===e.state&&i.push(t(e))}),e.datasets&&e.datasets.forEach(e=>{"InProgress"===e.state&&r.push(n(e)),"Complete"===e.state&&a.push(n(e)),"Reviewed"===e.state&&i.push(n(e))}),{inProgress:r,complete:a,reviewed:i}};return{...e,...r()}}catch(e){return Zt.event("Error mapping collection datasets response to Florence's state",Zt.error(e)),console.error("Error mapping collection datasets response to Florence's state",e),null}}static isForcedManualType(e){return!(!e.publishDate||"manual"!==e.type)}static publishState(e){const t={inProgress:!1,thrownError:!1,completed:!1,notStarted:!1,message:""};try{switch(e.approvalStatus){case void 0:break;case"NOT_STARTED":t.notStarted=!0;break;case"IN_PROGRESS":t.inProgress=!0,t.message="preparing publish";break;case"COMPLETE":t.completed=!0;break;case"ERROR":t.thrownError=!0,t.message="error whilst preparing publish"}return t}catch(e){return console.error(e),null}}static publishDate(e){return e.publishDate&&"manual"===e.type?Mr.format(e.publishDate,"ddd, dd/mm/yyyy h:MMTT")+" [rolled back]":e.publishDate?Mr.format(e.publishDate,"ddd, dd/mm/yyyy h:MMTT"):e.publishDate?void 0:"[manual collection]"}static collectionCanBeApproved(e){return!!(e.inProgress&&e.complete&&e.reviewed&&e.deletes)&&(e.reviewed.length>=1&&0===e.inProgress.length&&0===e.complete.length||e.deletes.length>=1&&0===e.inProgress.length&&0===e.complete.length)}static collectionCanBeDeleted(e){return!!(e.inProgress&&e.complete&&e.reviewed&&e.deletes)&&(0===e.reviewed.length&&0===e.inProgress.length&&0===e.complete.length&&0===e.deletes.length)}static pagesExcludingPendingDeletedPages(e,t){if(e)return t&&0!==t.length?e.filter(e=>!t.includes(e.uri)):e}}function ha(){return(ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const fa={name:h.a.string.isRequired,id:h.a.string.isRequired,dispatch:h.a.func.isRequired,teams:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,name:h.a.string.isRequired})),publishType:h.a.string.isRequired,publishDate:h.a.string,activeCollection:h.a.object,collections:h.a.array};class ma extends r.Component{constructor(e){super(e),this.state={isSavingEdits:!1,isFetchingAllTeams:!1,name:{value:e.name,errorMsg:""},allTeams:[],updatedTeamsList:null,addedTeams:new Map,removedTeams:new Map,publishType:e.publishType,publishDate:{value:"",errorMsg:""},publishTime:{value:"09:30",errorMsg:""}},this.handleCancel=this.handleCancel.bind(this),this.handleSave=this.handleSave.bind(this),this.handlePublishTypeChange=this.handlePublishTypeChange.bind(this),this.handlePublishDateChange=this.handlePublishDateChange.bind(this),this.handlePublishTimeChange=this.handlePublishTimeChange.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.handleAddTeam=this.handleAddTeam.bind(this),this.handleRemoveTeam=this.handleRemoveTeam.bind(this)}componentWillMount(){"scheduled"===this.props.publishType&&this.props.publishDate&&this.setState({publishDate:{value:Mr.format(this.props.publishDate,"yyyy-mm-dd"),errorMsg:""},publishTime:{value:Mr.format(this.props.publishDate,"hh:MM"),errorMsg:""}}),this.setState({isFetchingAllTeams:!0}),vr.getAll().then(e=>{const t=e.map(e=>{let t=!1;return this.props.teams&&this.props.teams.length>0&&(t=this.props.teams.some(t=>e.id==t.id)),{id:e.id.toString(),name:e.name,disabled:t}});this.setState({isFetchingAllTeams:!1,allTeams:t}),this.props.dispatch(jt(e))}).catch(e=>{if(this.setState({isFetchingAllTeams:!1}),Zt.event("Error fetching or mapping all teams",Zt.error(e)),console.error("Error fetching or mapping all teams",e),"FETCH_ERR"===e.status){const e={type:"warning",message:"A network error occurred whilst getting the list of all teams, please check your connection and refresh Florence",autoDismiss:5e3,isDismissable:!0};return void En.add(e)}En.add({type:"warning",message:"An unexpected error occured getting the list all teams, if you need to  edit the teams please try refreshing Florence",autoDismiss:5e3,isDismissable:!0})})}handleNameChange(e){this.setState({name:{value:e,errorMsg:""}})}handleAddTeam(e){const t=this.state.updatedTeamsList||this.props.teams||[];if(!e)return;if(t.some(t=>t.id===e))return;const n=this.state.allTeams.find(t=>t.id===e);if(!n){const t={type:"warning",message:`Unable to add the team '${e}' to this collection because an unexpected error occured`,autoDismiss:4e3,isDismissable:!0};return En.add(t),void console.error(`Unable to find team ID '${e}' in teams array in Redux`)}this.setState(r=>{const a={...r},i=[...t,n],s=r.allTeams.map(e=>({...e,disabled:e.id==n.id||e.disabled}));return a.removedTeams.delete(e)?{updatedTeamsList:i,removedTeams:a.removedTeams,allTeams:s}:{updatedTeamsList:i,addedTeams:a.addedTeams.set(e),allTeams:s}})}handleRemoveTeam(e){const t=this.state.updatedTeamsList||this.props.teams||[];this.setState(n=>{const r={...n},a=t.filter(t=>t.id!==e),i=n.allTeams.map(t=>({...t,disabled:t.id!=e&&t.disabled}));return r.addedTeams.delete(e)?{updatedTeamsList:a,addedTeams:r.addedTeams,allTeams:i}:{updatedTeamsList:a,removedTeams:r.removedTeams.set(e),allTeams:i}})}handlePublishTypeChange(e){if("manual"!==e&&"scheduled"!==e)return Zt.event("Attempt to select a publish type that isn't recognised",Zt.warn(),Zt.data({publish_type:e})),void console.warn("Attempt to select a publish type that isn't recognised: ",e);this.setState({publishType:e})}handlePublishDateChange(e){this.setState({publishDate:{value:e,errorMsg:""}})}handlePublishTimeChange(e){this.setState({publishTime:{value:e,errorMsg:""}})}handleCancel(){this.props.dispatch(Object(Me.push)(An.resolve("../")))}handleSave(){let e=!1;const t=Hr.name(this.state.name.value);if(t.isValid||(this.setState(e=>({name:{...e.name,errorMsg:t.errorMsg}})),e=!0),"scheduled"===this.state.publishType){const t=Hr.date(this.state.publishDate.value);t.isValid||(this.setState({publishDate:{value:"",errorMsg:t.errorMsg}}),e=!0)}if("scheduled"===this.state.publishType){const t=Hr.time(this.state.publishTime.value);t.isValid||(this.setState({publishTime:{value:"",errorMsg:t.errorMsg}}),e=!0)}e||(this.setState({isSavingEdits:!0}),gr.update(this.props.id,this.mapEditsToAPIRequestBody({...this.state})).then(e=>{const t={...this.props.activeCollection,name:e.name,publishDate:e.publishDate,type:e.type,teams:this.state.updatedTeamsList||this.props.teams},n=this.props.collections.map(e=>e.id!==this.props.id?e:pa.collectionResponseToState(t));this.props.dispatch(Dt(t)),this.props.dispatch(Rt(t)),this.props.dispatch(kt(t.teams)),this.props.dispatch(_t(n)),this.props.dispatch(Object(Me.push)(An.resolve("../")))}).catch(e=>{switch(this.setState({isSavingEdits:!1}),e.status){case 400:{const e={type:"warning",message:"The values you provided couldn't be saved. Please check for any possible errors and try again.",isDismissable:!0,autoDismiss:4e3};En.add(e);break}case 401:break;case 403:{const e={type:"neutral",message:`You don't have permission to edit the collection '${this.props.name}'`,isDismissable:!0,autoDismiss:4e3};En.add(e),this.props.dispatch(Object(Me.push)(An.resolve("/collections")));break}case 404:{const e={type:"neutral",message:`Collection '${this.props.name}' no longer exists, so you've been redirected to the main collections screen`,isDismissable:!0,autoDismiss:4e3};En.add(e),this.props.dispatch(Object(Me.push)(An.resolve("/collections")));break}case 409:Zt.event("Attempt to rename collection to existing collection name",Zt.error(e),Zt.data({current_name:this.props.name,new_name:this.state.name.value})),this.setState(e=>({name:{value:e.name.value,errorMsg:"A collection with this name already exists"}}));break;default:{const e={type:"warning",message:`An unexpected error occured whilst saving the edits to collection '${this.props.name}'`,isDismissable:!0,autoDismiss:4e3};En.add(e);break}}Zt.event("Error saving collection details",Zt.error(e),Zt.data({collection_id:this.props.id})),console.error("Error saving collection details update",e)}))}teamsHaveChanged(e){return e.addedTeams.size>0||e.removedTeams.size>0}publishDateHasChanged(e){if("manual"===e.publishType)return!1;try{if(new Date(e.publishDate.value+" "+e.publishTime.value).toISOString()!==this.props.publishDate)return!0}catch(e){return Zt.event("Error creating new publish date from string",Zt.error(e)),console.error("Error creating new publish date from string: "+e),!1}return!1}mapEditsToAPIRequestBody(e){let t={};return e.name.value!==this.props.name&&(t.name=e.name.value),this.teamsHaveChanged(e)&&(t.teams=e.updatedTeamsList.map(e=>e.name)),e.publishType!==this.props.publishType&&(t.type=e.publishType),this.publishDateHasChanged(e)&&(t.publishDate="scheduled"===e.publishType?new Date(e.publishDate.value+" "+e.publishTime.value).toISOString():""),t}render(){return a.a.createElement(da,ha({},this.props,{onCancel:this.handleCancel,onSave:this.handleSave,onNameChange:this.handleNameChange,onTeamSelect:this.handleAddTeam,onRemoveTeam:this.handleRemoveTeam,onPublishTypeChange:this.handlePublishTypeChange,onPublishDateChange:this.handlePublishDateChange,onPublishTimeChange:this.handlePublishTimeChange,originalName:this.props.name,name:this.state.name.value,nameErrorMsg:this.state.name.errorMsg,originalPublishType:this.props.publishType,publishType:this.state.publishType,originalPublishDate:Ar()(this.props.publishDate,"dddd, d mmmm yyyy h:MMTT"),publishDate:this.state.publishDate.value,publishDateErrorMsg:this.state.publishDate.errorMsg,publishTime:this.state.publishTime.value,publishTimeErrorMsg:this.state.publishTime.errorMsg,teams:this.state.updatedTeamsList||this.props.teams||[],allTeams:this.state.isFetchingAllTeams?[]:this.state.allTeams,isFetchingAllTeams:this.state.isFetchingAllTeams,isSavingEdits:this.state.isSavingEdits}))}}ma.propTypes=fa;var ga=Object(o.connect)(function(e){return{teams:e.state.collections.active?e.state.collections.active.teams:void 0,publishType:e.state.collections.active?e.state.collections.active.type:void 0,publishDate:e.state.collections.active?e.state.collections.active.publishDate:void 0,activeCollection:e.state.collections.active,collections:e.state.collections.all}})(ma);function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ya{static getAll(){return Cn.get("/dataset/datasets").then(e=>e)}static getInstance(e){return Cn.get(`/dataset/instances/${e}`).then(e=>e)}static getEdition(e,t){return Cn.get(`/dataset/datasets/${e}/editions/${t}`).then(e=>e)}static getEditions(e){return Cn.get(`/dataset/datasets/${e}/editions`).then(e=>e)}static getVersion(e,t,n){return Cn.get(`/dataset/datasets/${e}/editions/${t}/versions/${n}`).then(e=>e)}static getVersions(e,t){return Cn.get(`/dataset/datasets/${e}/editions/${t}/versions`).then(e=>e)}static getLatestVersion(e){const t=`/dataset/datasets/${e}`;return new Promise(async(e,n)=>{const r=await Cn.get(t).catch(e=>n(e));if(!r||!r.current||!r.current.links.latest_version)return void e();const a=An.resolve(r.current.links.latest_version.href);e(await Cn.get(`/dataset${a}`).catch(e=>n(e)))})}static getVersionDimensions(e,t,n){return Cn.get(`/dataset/datasets/${e}/editions/${t}/versions/${n}/dimensions`).then(e=>e)}static updateInstanceDimensions(e,t){const n={dimensions:t};return Cn.put(`/instances/${e}`,n)}static updateDimensionLabelAndDescription(e,t,n,r){const a={label:n,description:r};return Cn.put(`/instances/${e}/dimensions/${t}`,a,!0).then(e=>e)}static updateVersionMetadata(e,t,n,r){return"object"!=typeof r?Promise.reject({status:400}):Cn.put(`/dataset/datasets/${e}/editions/${t}/versions/${n}`,r,!0).then(e=>e)}static updateInstanceEdition(e,t){const n={edition:t};return Cn.put(`/dataset/instances/${e}`,n,!0).then(e=>e)}static confirmEditionAndCreateVersion(e,t,n){let r={edition:t,state:"edition-confirmed"};return n&&"object"==typeof n&&(r={...r,...n}),Cn.put(`/dataset/instances/${e}`,r,!0)}static updateDatasetMetadata(e,t){return Cn.put(`/dataset/datasets/${e}`,t,!0).then(e=>e)}static getAllInstances(){return Cn.get("/dataset/instances").then(e=>e)}static getCompletedInstancesForDataset(e){return Cn.get(`/dataset/instances?dataset=${e}&state=completed`).then(e=>e)}static getCompletedInstances(){return Cn.get("/dataset/instances?state=completed").then(e=>e)}static getNewVersionsAndCompletedInstances(){return Cn.get("/dataset/instances?state=completed,edition-confirmed,associated").then(e=>e)}}va(ya,"get",e=>Cn.get(`/dataset/datasets/${e}`).then(e=>e)),va(ya,"getLatestVersionForEditions",async(e,t)=>new Promise(async(n,r)=>{const a=t.map(t=>Cn.get(`/dataset/datasets/${e}/editions/${t.id}/versions/${t.latestVersion}`).then(e=>e).catch(e=>{r(e)}));n(await Promise.all(a).then(e=>e).catch(e=>{console.error(e),r(e)}))})),va(ya,"getLatestVersionURL",async e=>{const t=`/dataset/datasets/${e}`;return Cn.get(t).then(e=>{const t=e.next||e.current||e;return new URL(t.links.latest_version.href).pathname}).catch(e=>e)});class ba{static getActiveCollection(e){switch(e.status){case 401:break;case 404:{const e={type:"neutral",message:"Collection couldn't be found so you've been redirected to the collections screen",autoDismiss:5e3};En.add(e);break}case 403:{const e={type:"neutral",message:"You don't have permissions to access this collection so you've been redirect to the collections screen",autoDismiss:5e3};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There was a network error whilst getting this collection, please check your connection and refresh the page",autoDismiss:5e3};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error occurred",autoDismiss:5e3};En.add(e);break}}}static deleteCollection(e){switch(e.status){case 401:break;case 400:{const e={type:"warning",message:"Couldn't delete collection. There may be a file left in progress or awaiting review.",isDismissable:!0};En.add(e);break}case 404:{const e={type:"warning",message:"Couldn't delete collection. It may have already been deleted.",isDismissable:!0};En.add(e);break}case 403:{const e={type:"neutral",message:"You don't have permission to delete collections",autoDismiss:5e3,isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"Couldn't delete collection due to a network error, please check your connection and try again.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"Couldn't delete collection due to an unexpected error",isDismissable:!0};En.add(e);break}}}static approveCollection(e){switch(e.status){case 401:break;case 403:{const e={type:"neutral",message:"You don't have permission to approve this collection",autoDismiss:5e3,isDismissable:!0};En.add(e);break}case 404:{const e={type:"warning",message:"Couldn't approve this collection. It may have already been approved or have been deleted",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"Couldn't approve this collection due to a network error, please check your connection and try again",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"Couldn't approve this collection due to an unexpected error",isDismissable:!0};En.add(e);break}}}static deletePage(e,t,n){switch(e.status){case 401:break;case 404:{const e={type:"warning",message:`Couldn't delete the page '${t}' because it doesn't exist in the collection '${n}'`,isDismissable:!0};En.add(e);break}case 403:{const e={type:"neutral",message:`You don't have permission to delete the page '${t}' from this collection`,autoDismiss:5e3,isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:`Couldn't delete the page '${t}' from this collection due to a network error, please check your connection and try again.`,isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:`Couldn't delete the page '${t}' from this collection due to an unexpected error`,isDismissable:!0};En.add(e);break}}}static cancelPageDelete(e,t,n){switch(e.status){case 401:break;case 403:{const e={type:"neutral",message:`You don't have permission to cancel the delete '${t}'`,autoDismiss:5e3,isDismissable:!0};En.add(e);break}case 404:{const e={type:"warning",message:`Couldn't cancel delete of page '${t}' because it doesn't exist in the collection '${n}'`,isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:`Couldn't cancel delete of page '${t}' due to a network error, please check your connection and try again.`,isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:`Couldn't cancel delete of page '${t}' due to an unexpected error`,isDismissable:!0};En.add(e);break}}}}class Ea{static getAllDeleted(){return Cn.get("/zebedee/deletedContent")}static restoreDeleted(e,t){return Cn.post(`/zebedee/deletedcontent/${e}?collectionid=${t}`)}}const wa={activeCollection:h.a.object.isRequired,onClose:h.a.func.isRequired,onMultiFileSuccess:h.a.func.isRequired,onSingleFileSuccess:h.a.func.isRequired};class Ca extends r.Component{constructor(e){super(e),this.state={isGettingDeletedContent:!1,isRestoringDeletingContent:!1,allDeletedContent:[],filteredDeletedContent:[],activeItem:{}},this.handleItemClick=this.handleItemClick.bind(this),this.handleDoneClick=this.handleDoneClick.bind(this),this.handleSearch=this.handleSearch.bind(this),this.handleMultipleRestoredPages=this.handleMultipleRestoredPages.bind(this)}componentWillMount(){this.getAllDeletedContent()}mapDeletedContentToState(e){try{return{id:e.id.toString(),pageTitle:e.pageTitle,columnValues:[a.a.createElement("span",{key:`${e.id}-col-val-1`},e.pageTitle,a.a.createElement("br",null),e.uri),e.deletedFiles.length.toString(),e.eventDate],returnValue:{id:e.id.toString(),uri:e.uri,title:e.pageTitle,type:e.type,isMultiDelete:e.deletedFiles.length>1}}}catch(t){Zt.event("Error mapping deleted content",Zt.error(t),Zt.data({deleted_content_id:e.id,deleted_content_page_title:e.pageTitle})),console.error(`Error mapping deleted content (id: ${e.id}, title: ${e.pageTitle})to state. ${t}`)}}getAllDeletedContent(){this.setState({isGettingDeletedContent:!0}),Ea.getAllDeleted().then(e=>{const t=e.map(e=>this.mapDeletedContentToState(e));this.setState({isGettingDeletedContent:!1,allDeletedContent:t||[]})}).catch(e=>{switch(this.setState({isGettingDeletes:!1}),e.status){case 401:break;case 404:{const e={type:"warning",message:"No API route available to get deleted content.",autoDismiss:5e3};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get deleted content.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get deleted content.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get deleted content.",isDismissable:!0};En.add(e);break}}console.error("Error fetching all collections:\n",e)})}handleItemClick(e){this.setState({activeItem:e})}handleDoneClick(){this.setState({isRestoringDeletingContent:!0}),Ea.restoreDeleted(this.state.activeItem.id,this.props.activeCollection.id).then(()=>{this.state.activeItem.isMultiDelete?this.handleMultipleRestoredPages(this.props.activeCollection.id):(this.props.onSingleFileSuccess(this.state.activeItem),this.setState({isRestoringDeletingContent:!1}))}).catch(e=>{switch(e.status){case 401:break;case 400:{const e={type:"warning",message:"Deleted content not found",autoDismiss:5e3};En.add(e);break}case 404:{const e={type:"warning",message:`The collection "${this.props.activeCollection.name}" you are trying to restore deleted content into was not found. It may have been deleted`,autoDismiss:5e3};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to restore deleted content.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to restore deleted content.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to restore deleted content.",isDismissable:!0};En.add(e);break}}this.setState({isRestoringDeletingContent:!1}),console.error("Error restoring deleted content:\n",e)})}handleMultipleRestoredPages(e){gr.getInProgressContent(e).then(e=>{this.props.onMultiFileSuccess(e),this.setState({isRestoringDeletingContent:!1})}).catch(e=>{this.props.onSingleFileSuccess(this.state.activeItem),console.error("Error fetching inProgress pages from collection details end point",e);const t={type:"warning",message:"We were unable to get all deletes, but they will have been restored. Refresh the page to see the full list of restored deletes",autoDismiss:5e3};En.add(t),this.setState({isRestoringDeletingContent:!1})})}handleSearch(e){const t=e.target.value.toLowerCase(),n=this.state.allDeletedContent.filter(e=>-1!==e.pageTitle.toLowerCase().search(t));this.setState({filteredDeletedContent:n,activeItem:{}})}render(){return a.a.createElement("div",{className:"grid"},a.a.createElement("div",{className:"modal__header grid"},a.a.createElement("div",{className:"grid__col-8"},a.a.createElement("h1",{className:"modal__title margin-top--2"},"Select a deletion to restore")),a.a.createElement("div",{className:"grid__col-4"},a.a.createElement(Xn,{id:"search-deleted-content",onChange:this.handleSearch,label:"Search by page title"}))),a.a.createElement("div",{className:"modal__body grid__col-12"},a.a.createElement(Or,{isUpdating:this.state.isGettingDeletedContent,rows:this.state.filteredDeletedContent.length?this.state.filteredDeletedContent:this.state.allDeletedContent,columns:[{heading:"Deleted page and URI",width:"6"},{heading:"No. of deleted pages",width:"3"},{heading:"Date of delete",width:"3"}],handleItemClick:this.handleItemClick,activeRowID:this.state.activeItem.id})),a.a.createElement("div",{className:"grid__col-12"},a.a.createElement("div",{className:"add-remove__footer"},a.a.createElement("button",{className:"btn margin-right--1",onClick:this.props.onClose},"Close"),a.a.createElement("button",{className:"btn btn--primary",onClick:this.handleDoneClick,disabled:!this.state.activeItem.id||this.state.isRestoringDeletingContent},"Done"),this.state.isRestoringDeletingContent?a.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):"")))}}Ca.propTypes=wa;var _a=Object(o.connect)(function(e){return{activeCollection:e.state.collections.active}})(Ca);function Sa(){return(Sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Da={dispatch:h.a.func.isRequired,rootPath:h.a.string.isRequired,enableDatasetImport:h.a.bool,user:h.a.object.isRequired,collectionID:h.a.string,collections:h.a.array,activeCollection:h.a.shape({approvalStatus:h.a.string,collectionOwner:h.a.string,isEncrypted:h.a.bool,timeseriesImportFiles:h.a.array,inProgress:h.a.arrayOf(h.a.shape(Gr)),complete:h.a.arrayOf(h.a.shape(Gr)),reviewed:h.a.arrayOf(h.a.shape(Gr)),deletes:h.a.arrayOf(h.a.shape({user:h.a.string.isRequired,root:Kr,totalDeletes:h.a.number.isRequired})),id:h.a.string.isRequired,name:h.a.string.isRequired,type:h.a.string.isRequired,teams:h.a.array}),activePageURI:h.a.string,routes:h.a.arrayOf(h.a.object).isRequired};class Ra extends r.Component{constructor(e){super(e),this.state={isFetchingCollectionDetails:!1,isEditingCollection:!1,isRestoringContent:!1,isApprovingCollection:!1,isCancellingDelete:{value:!1,uri:""},pendingDeletedPages:[],drawerIsAnimatable:!1,drawerIsVisible:!1},this.handleDrawerTransitionEnd=this.handleDrawerTransitionEnd.bind(this),this.handleDrawerCloseClick=this.handleDrawerCloseClick.bind(this),this.handleCollectionDeleteClick=this.handleCollectionDeleteClick.bind(this),this.handleCollectionApproveClick=this.handleCollectionApproveClick.bind(this),this.handleCollectionPageClick=this.handleCollectionPageClick.bind(this),this.handleCollectionPageEditClick=this.handleCollectionPageEditClick.bind(this),this.handleCollectionPageDeleteClick=this.handleCollectionPageDeleteClick.bind(this),this.handleCancelPageDeleteClick=this.handleCancelPageDeleteClick.bind(this),this.handleRestoreDeletedContentClose=this.handleRestoreDeletedContentClose.bind(this),this.handleRestoreMultiDeletedContentSuccess=this.handleRestoreMultiDeletedContentSuccess.bind(this),this.handleRestoreSingleDeletedContentSuccess=this.handleRestoreSingleDeletedContentSuccess.bind(this)}componentWillMount(){Mn.canViewCollectionsDetails(this.props.user)?this.props.collectionID&&(this.fetchActiveCollection(this.props.collectionID),this.setState({drawerIsVisible:!0})):this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections`))}componentWillReceiveProps(e){if("edit"===e.routes[e.routes.length-1].path&&this.setState({isEditingCollection:!0}),"edit"===this.props.routes[this.props.routes.length-1].path&&"edit"!==e.routes[e.routes.length-1].path&&this.setState({isEditingCollection:!1}),"restore-content"===e.routes[e.routes.length-1].path&&this.setState({isRestoringContent:!0}),"restore-content"===this.props.routes[this.props.routes.length-1].path&&"restore-content"!==e.routes[e.routes.length-1].path&&this.setState({isRestoringContent:!1}),!this.props.collectionID&&e.collectionID){const t=this.props.collections.find(t=>t.id===e.collectionID);this.updateActiveCollectionGlobally(t),this.setState({drawerIsAnimatable:!0,drawerIsVisible:!0}),this.fetchActiveCollection(e.collectionID)}if(this.props.collectionID&&!e.collectionID&&this.setState({drawerIsAnimatable:!0,drawerIsVisible:!1}),this.props.collectionID&&e.collectionID&&this.props.collectionID!==e.collectionID){const t=this.props.collections.find(t=>t.id===e.collectionID);this.updateActiveCollectionGlobally(t),this.fetchActiveCollection(e.collectionID)}}shouldComponentUpdate(){return!!this.props.collectionID}fetchActiveCollection(e){this.setState({isFetchingCollectionDetails:!0}),gr.get(e).then(e=>{if("COMPLETE"===e.approvalStatus)return void(location.pathname=this.props.rootPath+"/publishing-queue");if(!this.props.collectionID||this.props.collectionID!==e.id)return;const t=pa.collectionResponseToState(e),n=pa.pagesToCollectionState(t);this.props.activeCollection&&!mr()(this.props.activeCollection)||this.props.dispatch(Dt(t)),this.props.dispatch(Rt(n)),this.props.dispatch(kt(t.teams)),this.setState({isFetchingCollectionDetails:!1})}).catch(t=>{console.error(`Fetching collection ${e}: `,t),ba.getActiveCollection(t),404!==t.status&&403!==t.status?this.setState({isFetchingCollectionDetails:!1}):this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections`))})}updateActiveCollectionGlobally(e){this.props.dispatch(Dt(e)),this.props.dispatch(xt(e.id,e.name)),Wt.add("collection",e.id,null)}handleCollectionDeleteClick(e){this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections`)),gr.delete(e).then(async()=>{this.props.dispatch(function(e){return{type:$e,collectionID:e}}(e));const t={type:"positive",message:"Collection deleted",autoDismiss:4e3,isDismissable:!0};En.add(t)}).catch(t=>{console.error(`Error deleting collection '${e}'`,t),ba.deleteCollection(t)})}handleCollectionApproveClick(){const e=this.props.activeCollection,t=this.props.collectionID;if(!pa.collectionCanBeApproved(e)){const t={type:"neutral",message:`Unable to approve collection '${e.name}', please check that there are no pages in progress or awaiting review`,isDismissable:!0,autoDismiss:4e3};return En.add(t),!1}const n=this.props.collections.map(e=>e.id!==t?e:{...e,status:{...e.status,neutral:!0}});this.props.dispatch(_t(n)),this.setState({isApprovingCollection:!0}),gr.approve(t).then(()=>{this.setState({isApprovingCollection:!1}),this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections`))}).catch(e=>{this.setState({isApprovingCollection:!1}),console.error("Error approving collection",e),ba.approveCollection(e)})}handleCancelPageDeleteClick(e){if(!e)return void En.add({type:"warning",message:"Couldn't delete because of an unexpected error: unable to get URI of delete to cancel",autoDismiss:5e3,isDismissable:!0});this.setState({isCancellingDelete:{value:!0,uri:e}});const t=this.props.activeCollection.id;gr.cancelDelete(this.props.collectionID,e).then(()=>{if(this.props.collectionID!==t)return;this.setState({isCancellingDelete:{value:!1,uri:""}});const n={...this.props.activeCollection,deletes:this.props.activeCollection.deletes.filter(t=>t.root.uri!==e)};n.canBeApproved=pa.collectionCanBeApproved(n),n.canBeDeleted=pa.collectionCanBeDeleted(n),this.props.dispatch(Rt(n))}).catch(t=>{this.setState({isCancellingDelete:{value:!1,uri:""}}),ba.cancelPageDelete(t,e,this.props.collectionID),console.error(`Error removing pending delete of page '${e}' from collection '${this.props.collectionID}'`,t)})}handleDrawerTransitionEnd(){this.setState({drawerIsAnimatable:!1}),this.state.drawerIsVisible||(this.props.dispatch(Tt()),this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections`)))}handleCollectionPageClick(e){if(e===this.props.activePageURI)return;let t=location.pathname+"#"+e;return this.props.activePageURI&&(t=`${this.props.rootPath}/collections/${this.props.collectionID}#${e}`),this.props.dispatch(Object(Me.push)(t)),t}async handleCollectionPageEditClick(e,t){if("dataset_details"===e.type){const n=await ya.getLatestVersionURL(e.id);let r=An.resolve(`/collections/${this.props.activeCollection.id}${n}`);const a=this.props.activeCollection[t].find(t=>"dataset_details"===t.type&&t.uri===e.uri).lastEditedBy;return this.props.dispatch(Pt(a,t)),this.props.dispatch(Object(Me.push)(r)),r}if("dataset_version"===e.type){const n=An.resolve(`/collections/${this.props.activeCollection.id}/datasets/${e.datasetID}/editions/${e.edition}/versions/${e.version}`),r=this.props.activeCollection[t].find(t=>"dataset_version"===t.type&&t.uri===e.uri).lastEditedBy;return this.props.dispatch(Mt(r,t)),this.props.dispatch(Object(Me.push)(n)),n}const n=`${this.props.rootPath}/workspace?collection=${this.props.collectionID}&uri=${e.uri}`;return window.location=n,n}handleCollectionPageDeleteUndo(e,t,n){this.setState(e=>({pendingDeletedPages:[...e.pendingDeletedPages].filter(e=>e!==t)}));const r=`${this.props.rootPath}/collections/${this.props.activeCollection.id}#${t}`;return this.props.dispatch(Object(Me.push)(r)),window.clearTimeout(e),En.remove(n),r}handleCollectionPageDeleteClick(e,t){const n=this.props.collectionID;this.setState(t=>({pendingDeletedPages:[...t.pendingDeletedPages,e.uri]}));const r=location.pathname.replace(`#${e.uri}`,"");this.props.dispatch(Object(Me.push)(r));const a=()=>"dataset_details"===e.type?gr.removeDataset(n,e.uri):"dataset_version"===e.type?gr.removeDatasetVersion(n,e.uri,e.edition,e.version):this.props.enableDatasetImport?gr.deletePageIncludingDatasetImport(n,e.uri):gr.deletePage(n,e.uri),i=()=>{a().then(()=>{const n=this.props.activeCollection[t].filter(t=>t.uri!==e.uri),r={...this.props.activeCollection,[t]:n},a=this.state.pendingDeletedPages.filter(t=>t!==e.uri);this.setState({pendingDeletedPages:a}),r.canBeApproved=pa.collectionCanBeApproved(r),r.canBeDeleted=pa.collectionCanBeDeleted(r),this.props.dispatch(Rt(r)),window.clearTimeout(s)}).catch(t=>{const n=this.state.pendingDeletedPages.filter(t=>t!==e.uri);this.setState({pendingDeletedPages:n}),window.clearTimeout(s),ba.deletePage(t,e.title,this.props.collectionID),console.error("Error deleting page from a collection: ",t)})},s=setTimeout(i,6e3),o={buttons:[{text:"Undo",onClick:()=>{this.handleCollectionPageDeleteUndo(s,e.uri,l)}},{text:"OK",onClick:()=>{i(),En.remove(l)}}],type:"neutral",isDismissable:!1,autoDismiss:6e3,message:`Deleted page '${e.title}' from collection '${this.props.activeCollection.name}'`},l=En.add(o);return r}handleDrawerCloseClick(){this.setState({drawerIsAnimatable:!0,drawerIsVisible:!1})}handleRestoreDeletedContentClose(){this.props.dispatch(Object(Me.push)(An.resolve("../")))}handleRestoreMultiDeletedContentSuccess(e){const t=e.map(e=>({uri:e.uri,title:e.description.title,type:e.type})),n={...this.props.activeCollection,inProgress:[...t]};this.props.dispatch(Rt(n)),this.handleRestoreDeletedContentClose()}handleRestoreSingleDeletedContentSuccess(e){const t={uri:e.uri,title:e.title,type:e.type},n={...this.props.activeCollection,inProgress:[...this.props.activeCollection.inProgress,t]};this.props.dispatch(Rt(n)),this.handleRestoreDeletedContentClose()}renderLoadingCollectionDetails(){return a.a.createElement(ea,{id:this.props.collectionID,isLoadingNameAndDate:!0,isLoadingDetails:!0,onClose:this.handleDrawerCloseClick,onPageClick:this.handleCollectionPageClick,onEditPageClick:this.handleCollectionPageEditClick,onDeletePageClick:this.handleCollectionPageDeleteClick,onDeleteCollectionClick:this.handleCollectionDeleteClick,onApproveCollectionClick:this.handleCollectionApproveClick,onCancelPageDeleteClick:this.handleCancelPageDeleteClick})}renderCollectionDetails(){return a.a.createElement(ea,Sa({},this.props.activeCollection,{enableDatasetImport:this.props.enableDatasetImport,activePageURI:this.props.activePageURI,inProgress:pa.pagesExcludingPendingDeletedPages(this.props.activeCollection.inProgress,this.state.pendingDeletedPages),complete:pa.pagesExcludingPendingDeletedPages(this.props.activeCollection.complete,this.state.pendingDeletedPages),reviewed:pa.pagesExcludingPendingDeletedPages(this.props.activeCollection.reviewed,this.state.pendingDeletedPages),onClose:this.handleDrawerCloseClick,onPageClick:this.handleCollectionPageClick,onEditPageClick:this.handleCollectionPageEditClick,onDeletePageClick:this.handleCollectionPageDeleteClick,onDeleteCollectionClick:this.handleCollectionDeleteClick,onApproveCollectionClick:this.handleCollectionApproveClick,onCancelPageDeleteClick:this.handleCancelPageDeleteClick,isLoadingNameAndDate:!1,isLoadingDetails:this.state.isFetchingCollectionDetails,isCancellingDelete:this.state.isCancellingDelete,isApprovingCollection:this.state.isApprovingCollection}))}renderEditCollection(){return a.a.createElement(ga,{name:this.props.activeCollection.name,id:this.props.activeCollection.id})}render(){return a.a.createElement("div",null,a.a.createElement(la,{isVisible:this.state.drawerIsVisible,isAnimatable:this.state.drawerIsAnimatable,handleTransitionEnd:this.handleDrawerTransitionEnd},this.props.collectionID&&!this.props.activeCollection&&this.renderLoadingCollectionDetails(),this.props.activeCollection&&!this.state.isEditingCollection&&this.renderCollectionDetails(),this.props.activeCollection&&this.state.isEditingCollection&&this.renderEditCollection()),this.state.isRestoringContent&&this.props.activeCollection&&a.a.createElement(Zn,{sizeClass:"grid__col-8"},a.a.createElement(_a,{onClose:this.handleRestoreDeletedContentClose,onMultiFileSuccess:this.handleRestoreMultiDeletedContentSuccess,onSingleFileSuccess:this.handleRestoreSingleDeletedContentSuccess,activeCollectionId:this.props.activeCollection.id})))}}Ra.propTypes=Da;var ka=Object(o.connect)(function(e){return{user:e.state.user,collections:e.state.collections.all,activeCollection:e.state.collections.active,rootPath:e.state.rootPath,activePageURI:e.routing.locationBeforeTransitions.hash.replace("#",""),enableDatasetImport:e.state.config.enableDatasetImport}})(Ra);const Ta={dispatch:h.a.func.isRequired,rootPath:h.a.string.isRequired,params:h.a.shape({collectionID:h.a.string}).isRequired,user:h.a.shape({userType:h.a.string.isRequired}).isRequired,collections:h.a.array,activeCollection:h.a.shape({inProgress:h.a.arrayOf(h.a.shape(Gr)),id:h.a.string.isRequired}),collectionsToDelete:h.a.object.isRequired,routes:h.a.arrayOf(h.a.object).isRequired};class xa extends r.Component{constructor(e){super(e),this.state={isFetchingCollections:!1},this.handleCollectionSelection=this.handleCollectionSelection.bind(this),this.handleCollectionCreateSuccess=this.handleCollectionCreateSuccess.bind(this),this.isViewer="VIEWER"===this.props.user.userType}componentWillMount(){return this.fetchCollections()}componentWillReceiveProps(e){mr()(e.collectionsToDelete)||this.state.isFetchingCollections||this.removeCollectionFromState(e.collectionsToDelete)}componentWillUnmount(){this.props.activeCollection&&this.props.dispatch(Tt())}fetchCollections(){return this.setState({isFetchingCollections:!0}),gr.getAll().then(e=>{const t=e.filter(e=>"COMPLETE"!==e.approvalStatus).map(e=>pa.collectionResponseToState(e));this.props.dispatch(_t(t)),this.setState({isFetchingCollections:!1})}).catch(e=>{switch(this.setState({isFetchingCollections:!1}),e.status){case 401:break;case 404:{const e={type:"warning",message:"No API route available to get collections.",autoDismiss:5e3};En.add(e),this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections`));break}case 403:{const e={type:"warning",message:"You don't have permissions to view collections",autoDismiss:5e3};En.add(e),this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections`));break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get collections. You may only be able to see previously loaded information and won't be able to edit any team members",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get collections. You may only be able to see previously loaded information and won't be able to edit any team members",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get collections. You may only be able to see previously loaded information and not be able to edit any team members",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get collections. You may only be able to see previously loaded information and won't be able to edit any team members",isDismissable:!0};En.add(e);break}}console.error("Error fetching all collections:\n",e)})}removeCollectionFromState(e){for(const t in e){if(!e.hasOwnProperty(t))return;this.props.dispatch(St(t))}}handleCollectionCreateSuccess(e){const t=pa.collectionResponseToState(e);let n=[...this.props.collections,t];n.sort((e,t)=>{const n=e.id.toLowerCase(),r=t.id.toLowerCase();return n<r?-1:n>r?1:0}),this.props.dispatch(_t(n)),this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections/${t.id}`)),this.fetchCollections(),document.getElementById(t.id).scrollIntoView()}handleCollectionSelection(e){if(this.isViewer)return Wt.add("collection",e.id,null),this.props.dispatch(xt(e.id,e.name)),void this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections/${e.id}/preview`));this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/collections/${e.id}`))}render(){return a.a.createElement("div",null,a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:this.isViewer?"grid__col-8":"grid__col-4"},a.a.createElement("h1",{className:"text-center"},"Select a collection"),a.a.createElement(ia,{items:this.props.collections,activeItemID:this.props.params.collectionID,isUpdating:this.state.isFetchingCollections,headings:["Name","Publish date"],handleItemClick:this.handleCollectionSelection})),!this.isViewer&&a.a.createElement("div",{className:"grid__col-4"},a.a.createElement("h1",{className:"text-center"},"Create a collection"),a.a.createElement(Yr,{user:this.props.user,onSuccess:this.handleCollectionCreateSuccess}))),a.a.createElement(ka,{collectionID:this.props.params.collectionID,routes:this.props.routes}))}}xa.propTypes=Ta;var Na=Object(o.connect)(function(e){return{user:e.state.user,collections:e.state.collections.all,activeCollection:e.state.collections.active,collectionsToDelete:e.state.collections.toDelete,rootPath:e.state.rootPath}})(xa);const Oa={name:h.a.string.isRequired,id:h.a.any.isRequired,handleClick:h.a.func.isRequired,isSelected:h.a.bool};class Pa extends r.Component{constructor(e){super(e),this.bindClick=this.bindClick.bind(this)}bindClick(){this.props.handleClick(this.props)}render(){return a.a.createElement("li",{id:this.props.id,className:`selectable-box__item ${this.props.isSelected?"selected":""}`,onClick:this.bindClick},this.props.name)}}function Ia(){return(Ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Pa.propTypes=Oa;const Aa={heading:h.a.string.isRequired,items:h.a.arrayOf(h.a.object),activeItem:h.a.object,handleItemClick:h.a.func.isRequired,isUpdating:h.a.bool};class Ma extends r.Component{constructor(e){super(e),this.bindItemClick=this.bindItemClick.bind(this)}bindItemClick(e){this.props.handleItemClick(e)}renderList(){return a.a.createElement("ul",{className:"selectable-box__list"},this.props.items.map((e,t)=>a.a.createElement(Pa,Ia({key:t},e,{isSelected:this.props.activeItem&&e.id===this.props.activeItem.id,handleClick:this.bindItemClick}))))}render(){return a.a.createElement("div",{className:"selectable-box"},a.a.createElement("h2",{className:"selectable-box__heading"},this.props.heading,this.props.isUpdating&&a.a.createElement("span",{className:"selectable-box__status loader"})),this.props.items.length>0?this.renderList():a.a.createElement("p",{className:"margin-top--1 margin-right--1 margin-bottom--1 margin-left--1"},"No items to display"))}}Ma.propTypes=Aa;const ja={onCreateSuccess:h.a.func.isRequired};class La extends r.Component{constructor(e){super(e),this.state={input:{value:"",error:""},isAwaitingResponse:!1},this.handleSubmit=this.handleSubmit.bind(this),this.handleFormBlur=this.handleFormBlur.bind(this),this.handleFormInput=this.handleFormInput.bind(this)}handleSubmit(e){if(e.preventDefault(),!this.validateTeamName())return;const t=this.state.input.value.trim();this.setState({isAwaitingResponse:!0,input:{...this.state.input,value:t}}),vr.add(t).then(()=>{const e=Object.assign({},this.state.input,{value:"",error:""});this.setState({input:e,isAwaitingResponse:!1}),this.props.onCreateSuccess(),Zt.event("successfully created team",Zt.data({team:t}))}).catch(e=>{switch(Zt.event("Error creating team",Zt.data({status_code:e.status,team:t}),Zt.error(e)),this.setState({isAwaitingResponse:!1}),e.status){case 401:break;case 403:{const e=Object.assign({},this.state.input,{error:"You don't have permission to create a team"});this.setState({input:e});break}case 409:{const e=Object.assign({},this.state.input,{error:`Team '${t}' already exists`});this.setState({input:e});break}default:{Zt.event("Unhandled error creating team",Zt.data({status_code:e.status,team:t}),Zt.error(e));const n=Object.assign({},this.state.input,{error:"An unexpected error has occured"});this.setState({input:n});const r={type:"warning",message:`An unexpected error has occured whilst creating team '${t}'`,isDismissable:!0};En.add(r);break}}})}handleFormBlur(e){const t={...this.state.input,value:e.target.value.trim()};this.setState({input:t})}handleFormInput(e){const t=Object.assign({},this.state.input,{value:e.target.value,error:""});this.setState({input:t})}validateTeamName(){const e=this.state.input.value,t=e=>{const t=Object.assign({},this.state.input,{error:e});this.setState({input:t})};return e.length?/\S/.test(e)?!(e.length>=255)||(t("Team name must be less than 255 characters"),!1):(t("Team name must have a least 1 character that isn't whitespace"),!1):(t("Team name can't be left empty"),!1)}render(){return a.a.createElement("form",{className:`form ${this.state.input.error?" form__input--error":""}`,onSubmit:this.handleSubmit,name:"create-new-team"},a.a.createElement("div",{className:"form__input"},a.a.createElement("label",{className:"form__label",htmlFor:"team-name"},"Team name"),this.state.input.error&&a.a.createElement("div",{className:"error-msg"},this.state.input.error),a.a.createElement("input",{type:"text",id:"team-name",className:"input",disabled:this.state.isAwaitingResponse,value:this.state.input.value,onChange:this.handleFormInput,onBlur:this.handleFormBlur})),a.a.createElement("button",{className:"btn btn--positive",disabled:this.state.isAwaitingResponse},"Create"),this.state.isAwaitingResponse&&a.a.createElement("div",{className:"form__loader loader loader--dark"}))}}La.propTypes=ja;var Fa=La;const Ua={id:h.a.number.isRequired,name:h.a.string.isRequired,members:h.a.arrayOf(h.a.string),userIsAdmin:h.a.bool.isRequired,onEditMembers:h.a.func.isRequired,onCancel:h.a.func.isRequired,onDelete:h.a.func.isRequired,isShowingLoader:h.a.bool,isReadOnly:h.a.bool};class qa extends r.Component{constructor(e){super(e)}renderMembers(){const e=this.props.members,t=a.a.createElement("div",null,a.a.createElement("h3",{className:"margin-bottom--1"},"Members:"),a.a.createElement("ul",{className:"list list--neutral"},e.map((e,t)=>a.a.createElement("li",{className:"list__item",key:t},e))));return e.length>0?t:a.a.createElement("p",null,"This team has no members")}render(){return a.a.createElement("div",{className:"drawer__container"},a.a.createElement("div",{className:"drawer__heading"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--3 margin-bottom--2"},a.a.createElement("h2",{id:"team-name"},this.props.name)))),this.props.isReadOnly&&a.a.createElement("div",{className:"drawer__banner drawer__banner--dark"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},a.a.createElement("div",null,a.a.createElement("h3",null,"Read only"),a.a.createElement("p",null,"The list of teams if still being fetched so you can't edit or delete a team"))))),this.props.userIsAdmin&&a.a.createElement("div",{className:"drawer__banner"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},a.a.createElement("div",null,a.a.createElement("button",{onClick:this.props.onEditMembers,disabled:this.props.isReadOnly,className:"btn btn--primary"},"Add / remove members"))))),a.a.createElement("div",{className:"drawer__body"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--1"},this.props.isShowingLoader&&a.a.createElement("div",{className:"grid grid--align-center margin-top--4"},a.a.createElement("div",{className:"loader loader--large loader--dark"})),this.props.members&&this.renderMembers()))),a.a.createElement("div",{className:"drawer__footer"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},a.a.createElement("div",null,this.props.userIsAdmin&&a.a.createElement("button",{className:"btn btn--warning btn--margin-right",disabled:this.props.isReadOnly,onClick:this.props.onDelete},"Delete team"),a.a.createElement("button",{className:"btn",onClick:this.props.onCancel},"Close"))))))}}qa.propTypes=Ua;var $a=qa;const Ba={email:h.a.string.isRequired,isDisabled:h.a.bool,onClick:h.a.func.isRequired,action:h.a.oneOf(["add","remove"]).isRequired};class Ha extends r.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.onClick({email:this.props.email,action:this.props.action})}render(){return a.a.createElement("li",{className:"add-remove__item"},a.a.createElement("span",{className:`add-remove__item-title ${this.props.isDisabled?"disabled":""}`},this.props.email),a.a.createElement("button",{onClick:this.handleClick,className:`btn ${"add"===this.props.action?"btn--positive":""}`,disabled:this.props.isDisabled,"data-email":this.props.email,"data-action":this.props.action},"add"===this.props.action?"Add":"Remove"))}}Ha.propTypes=Ba;var Va=Ha;const Wa={name:h.a.string.isRequired,members:h.a.arrayOf(h.a.string),users:h.a.arrayOf(h.a.object),disabledUsers:h.a.array.isRequired,updatingAllUsers:h.a.bool.isRequired,updatingMembers:h.a.bool.isRequired,showingLoaders:h.a.bool,onUsersSearch:h.a.func,onMembersChange:h.a.func.isRequired,onDone:h.a.func.isRequired,searchTerm:h.a.string};class Ya extends r.Component{constructor(e){super(e)}shouldComponentUpdate(e){return!this.props.updatingAllUsers||!e.updatingAllUsers}renderUsers(){return this.props.users.length>0?a.a.createElement("ul",{className:"list list--neutral"},this.props.users.map((e,t)=>a.a.createElement(Va,{key:t,action:"add",onClick:this.props.onMembersChange,email:e.email,isDisabled:-1!==this.props.disabledUsers.indexOf(e.email)}))):a.a.createElement("p",{className:"add-remove__text"},this.props.searchTerm.length>0?a.a.createElement("span",null,'No users match the term "',a.a.createElement("strong",null,this.props.searchTerm),'"'):"No users to display")}renderMembers(){return this.props.members.length>0?a.a.createElement("ul",{className:"list list--neutral"},this.props.members.map((e,t)=>a.a.createElement(Va,{key:t,action:"remove",onClick:this.props.onMembersChange,email:e,isDisabled:-1!==this.props.disabledUsers.indexOf(e)}))):a.a.createElement("p",{className:"add-remove__text"},"This team has no members")}render(){return a.a.createElement("div",{className:"grid add-remove"},a.a.createElement("div",{className:"grid__col-12"},a.a.createElement("h1",{className:"add-remove__heading"},"Edit team: ",this.props.name)),a.a.createElement("div",{className:"grid__col-6"},a.a.createElement("div",{className:"add-remove__col"},a.a.createElement("div",{className:"grid add-remove__col-heading"},a.a.createElement("h2",{className:"grid__col-6"},"All users"),a.a.createElement("div",{className:"grid__col-6 add-remove__search"},a.a.createElement(Xn,{id:"users-search",label:"Search for an email address",inline:!0,onChange:this.props.onUsersSearch}))),a.a.createElement("div",{className:"add-remove__body "},!this.props.updatingAllUsers&&this.renderUsers(),this.props.showingLoaders&&a.a.createElement("div",{className:"add-remove__loader loader loader--dark"})))),a.a.createElement("div",{className:"grid__col-6"},a.a.createElement("div",{className:"add-remove__col add-remove__col--border-left"},a.a.createElement("h2",{className:"add-remove__col-heading"},"Team members"),a.a.createElement("div",{className:"add-remove__body"},!this.props.updatingAllUsers&&this.renderMembers(),this.props.showingLoaders&&a.a.createElement("div",{className:"add-remove__loader loader loader--dark"})))),a.a.createElement("div",{className:"grid__col-12"},a.a.createElement("div",{className:"add-remove__footer"},a.a.createElement("button",{className:"btn btn--primary",onClick:this.props.onDone,disabled:this.props.disabledUsers.size>0},"Done"))))}}Ya.propTypes=Wa;var za=Ya;const Xa={name:h.a.string.isRequired,users:h.a.arrayOf(h.a.object),members:h.a.arrayOf(h.a.string),isUpdatingMembers:h.a.bool.isRequired,dispatch:h.a.func.isRequired};class Ja extends r.Component{constructor(e){super(e),this.state={editedUsers:null,updatingAllUsers:!1,parentPath:location.pathname.split("/edit")[0],disabledUsers:[],searchTerm:""},this.handleUsersSearch=this.handleUsersSearch.bind(this),this.handleMembersChange=this.handleMembersChange.bind(this),this.handleDone=this.handleDone.bind(this)}componentWillMount(){this.setState({updatingAllUsers:!0}),_n.getAll().then(e=>{const t=e.filter(e=>this.props.members.indexOf(e.email)<0);this.props.dispatch(Nt(e)),this.setState({editedUsers:t,updatingAllUsers:!1})})}componentWillReceiveProps(e){e.users!==this.props.users&&this.setState({editedUsers:e.users})}handleUsersSearch(e){const t=e.target.value.toLowerCase(),n=this.props.users.filter(e=>{const n=this.props.members.some(t=>t===e.email);return-1!==e.email.toLowerCase().search(t)&&!n});this.setState({editedUsers:n,searchTerm:t})}sortUsers(e){return e.sort((e,t)=>e.email<t.email?-1:e.email>t.email?1:0)}sortMembers(e){return e.sort((e,t)=>e<t?-1:e>t?1:0)}handleMembersChange(e){Zt.event("Updateing user in team",Zt.data({action:e.action,team:this.props.name,user:e.email}));const t=[...this.state.disabledUsers,e.email];switch(this.setState({disabledUsers:t}),e.action){case"remove":vr.removeMember(this.props.name,e.email).then(()=>{const t=this.props.members.filter(t=>t!==e.email),n=[...this.state.editedUsers,{email:e.email}],r=[...this.state.disabledUsers];r.splice(r.indexOf(e.email),1),this.setState({editedUsers:this.sortUsers(n),disabledUsers:r}),Zt.event("successfully removed user from team",Zt.data({team:this.props.name,user:e.email})),this.props.dispatch(Ft(this.sortMembers(t)))}).catch(t=>{Zt.event("Error removing user",Zt.data({status_code:t.status,team:this.props.name,user:e.email}),Zt.error(t));const n=[...this.state.disabledUsers];switch(n.splice(n.indexOf(e.email),1),this.setState({disabledUsers:n}),t.status){case 401:break;case 404:{const e={type:"warning",message:`The team '${this.props.name}' doesn't exist - another user may have deleted it`,isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const t={type:"warning",message:`An error occurred whilst trying to remove '${e.email}' from team '${this.props.name}'`,isDismissable:!0};En.add(t);break}case"FETCH_ERR":{const t={type:"warning",message:`A network error occurred whilst trying to remove '${e.email}' from team '${this.props.name}'`,isDismissable:!0};En.add(t);break}case"UNEXPECTED_ERR":{const t={type:"warning",message:`An unexpected error occurred whilst trying to remove '${e.email}' from team '${this.props.name}'`,isDismissable:!0};En.add(t);break}default:{Zt.event("Unhandled error removing user",Zt.data({status_code:t.status,team:this.props.name,user:e.email}),Zt.error(t));const n={type:"warning",message:`An unexpected error occurred whilst trying to remove '${e.email}' from team '${this.props.name}'`,isDismissable:!0};En.add(n);break}}});break;case"add":vr.addMember(this.props.name,e.email).then(()=>{const t=[...this.props.members,e.email],n=this.state.editedUsers.filter(t=>t.email!==e.email),r=[...this.state.disabledUsers];r.splice(r.indexOf(e.email),1),this.setState({editedUsers:this.sortUsers(n),disabledUsers:r}),Zt.event("successfully added user to team",Zt.data({team:this.props.name,user:e.email})),this.props.dispatch(Ft(this.sortMembers(t)))}).catch(t=>{Zt.event("Error adding user",Zt.data({status_code:t.status,team:this.props.name,user:e.email}),Zt.error(t));const n=[...this.state.disabledUsers];switch(n.splice(n.indexOf(e.email),1),this.setState({disabledUsers:n}),t.status){case 401:break;case 404:{const e={type:"warning",message:`The team '${this.props.name}' doesn't exist - another user may have deleted it`,isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const t={type:"warning",message:`An error occurred whilst trying to add '${e.email}' to team '${this.props.name}'`,isDismissable:!0};En.add(t);break}case"FETCH_ERR":{const t={type:"warning",message:`A network error occurred whilst trying to add '${e.email}' to team '${this.props.name}'`,isDismissable:!0};En.add(t);break}case"UNEXPECTED_ERR":{const t={type:"warning",message:`An unexpected error occurred whilst trying to add '${e.email}' to team '${this.props.name}'`,isDismissable:!0};En.add(t);break}default:{Zt.event("Unhandled error creating user",Zt.data({status_code:t.status,team:this.props.name,user:e.email}),Zt.error(t));const n={type:"warning",message:`An unexpected error occurred whilst trying to add '${e.email}' to team '${this.props.name}'`,isDismissable:!0};En.add(n);break}}})}}handleDone(){this.props.dispatch(Object(Me.push)(this.state.parentPath))}render(){return a.a.createElement(za,{name:this.props.name,users:this.state.editedUsers,members:this.props.members,onUsersSearch:this.handleUsersSearch,onMembersChange:this.handleMembersChange,onDone:this.handleDone,updatingAllUsers:this.state.updatingAllUsers,updatingMembers:this.props.isUpdatingMembers,showingLoaders:this.state.updatingAllUsers||this.props.isUpdatingMembers,disabledUsers:this.state.disabledUsers,searchTerm:this.state.searchTerm})}}Ja.propTypes=Xa;var Ga=Object(o.connect)(function(e){return{name:e.state.teams.active.name,members:e.state.teams.active.members,rootPath:e.state.rootPath,users:e.state.users.all}})(Ja);const Ka={input:h.a.shape({value:h.a.string,error:h.a.string}),name:h.a.string.isRequired,isPosting:h.a.bool,onCancel:h.a.func.isRequired,onFormSubmit:h.a.func.isRequired,onFormInput:h.a.func.isRequired};class Qa extends r.Component{constructor(e){super(e)}render(){return a.a.createElement("form",{className:"form",onSubmit:this.props.onFormSubmit},a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,"Delete team: ",this.props.name)),a.a.createElement("div",{className:"modal__body"},a.a.createElement("div",{className:"form__input"},a.a.createElement(Xn,{type:"text",label:"Confirm the name of the team you'd like to delete",id:"team-name",error:this.props.input.error,onChange:this.props.onFormInput,isFocused:!0}))),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{disabled:this.props.isPosting,className:"btn btn--warning btn--margin-right"},"Delete"),a.a.createElement("button",{type:"button",disabled:this.props.isPosting,className:"btn",onClick:this.props.onCancel},"Cancel"),this.props.isPosting&&a.a.createElement("div",{className:"loader"})))}}Qa.propTypes=Ka;var Za=Qa;const ei={name:h.a.string.isRequired,teams:h.a.arrayOf(h.a.shape({id:h.a.number,name:h.a.string.isRequired,members:h.a.arrayOf(h.a.string),path:h.a.string})),dispatch:h.a.func.isRequired,onDeleteSuccess:h.a.func.isRequired,pathname:h.a.string.isRequired};class ti extends r.Component{constructor(e){super(e),this.state={formIsPosting:!1,input:{value:"",error:""},parentPath:this.props.pathname.substr(0,this.props.pathname.lastIndexOf("/delete"))},this.handleCancel=this.handleCancel.bind(this),this.handleFormInput=this.handleFormInput.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}handleCancel(){this.props.dispatch(Object(Me.push)(this.state.parentPath))}handleFormInput(e){const t=Object.assign({},this.state.input,{value:e.target.value,error:""});this.setState({input:t})}handleFormSubmit(e){if(e.preventDefault(),this.state.input.value===this.props.name)this.setState({formIsPosting:!0}),vr.remove(this.props.name).then(()=>{const e=this.props.teams.filter(e=>e.name!==this.props.name);this.props.dispatch(jt(e)),this.props.onDeleteSuccess(),Zt.event("successfully deleted team",Zt.data({team:this.props.name}))}).catch(e=>{switch(Zt.event("Error deleting team",Zt.data({status_code:e.status,team:this.props.name}),Zt.error(e)),this.setState({formIsPosting:!1}),e.status){case 401:break;case 404:{const e={type:"warning",message:`The team '${this.props.name}' doesn't exist - another user may have deleted it`,isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:`An error occurred whilst trying to delete team '${this.props.name}'`,isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:`A network error occurred whilst trying to delete team '${this.props.name}'`,isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":default:{const e={type:"warning",message:`An unexpected error occurred whilst trying to delete team '${this.props.name}'`,isDismissable:!0};En.add(e);break}}});else{Zt.event("error deleting team. The team name provided doesn't match the one user is trying to delete",Zt.data({"user-inputted-value":this.state.input.value,team:this.props.name}));const e=Object.assign({},this.state.input,{error:"The team name you've provided doesn't match the one you're trying to delete"});this.setState({input:e})}}render(){return a.a.createElement(Za,{name:this.props.name,onCancel:this.handleCancel,onFormInput:this.handleFormInput,onFormSubmit:this.handleFormSubmit,input:this.state.input,isDisabled:this.state.formIsPosting})}}ti.propTypes=ei;var ni=Object(o.connect)(function(e){return{name:e.state.teams.active.name,teams:e.state.teams.all,pathname:e.routing.locationBeforeTransitions.pathname}})(ti);function ri(){return(ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const ai={dispatch:h.a.func.isRequired,allTeams:h.a.arrayOf(h.a.object).isRequired,activeTeam:h.a.object,rootPath:h.a.string.isRequired,routes:h.a.arrayOf(h.a.object).isRequired,userIsAdmin:h.a.bool.isRequired,params:h.a.object.isRequired};class ii extends r.Component{constructor(e){super(e),this.state={isUpdatingAllTeams:!1,isUpdatingTeamMembers:!1,drawerIsAnimatable:!1,clearActiveTeam:!1,isEditingTeam:!1,isDeletingTeam:!1},this.handleTeamClick=this.handleTeamClick.bind(this),this.handleMembersEditClick=this.handleMembersEditClick.bind(this),this.handleDrawerTransitionEnd=this.handleDrawerTransitionEnd.bind(this),this.handleDrawerCancelClick=this.handleDrawerCancelClick.bind(this),this.handleTeamDeleteClick=this.handleTeamDeleteClick.bind(this),this.handleTeamDeleteSuccess=this.handleTeamDeleteSuccess.bind(this),this.handleTeamCreateSuccess=this.handleTeamCreateSuccess.bind(this)}componentWillMount(){this.fetchTeams()}componentWillReceiveProps(e){const t=e.allTeams.find(t=>t.path===e.params.team);if(t&&e.activeTeam.id!==t.id)return this.fetchMembers(t.name),this.props.params.team||this.setState({drawerIsAnimatable:!0}),void this.props.dispatch(Lt(t));!e.params.team&&e.activeTeam&&e.activeTeam.id&&this.setState({drawerIsAnimatable:!0,clearActiveTeam:!0}),"edit"===e.routes[e.routes.length-1].path&&this.setState({isEditingTeam:!0}),"delete"===e.routes[e.routes.length-1].path&&this.setState({isDeletingTeam:!0})}shouldComponentUpdate(e,t){return this.state.drawerIsAnimatable!==t.drawerIsAnimatable||(!("edit"!==e.routes[e.routes.length-1].path||!t.isEditingTeam)||(!("delete"!==e.routes[e.routes.length-1].path||!t.isDeletingTeam)||!!e.allTeams&&(!t.isUpdatingAllTeams||0!==e.allTeams.length)))}componentWillUnmount(){this.props.dispatch(Ut())}handleDrawerTransitionEnd(){this.setState({drawerIsAnimatable:!1}),this.state.clearActiveTeam&&(this.setState({clearActiveTeam:!1}),this.props.dispatch(Ut()))}handleMembersEditClick(){this.props.dispatch(Object(Me.push)(`${location.pathname}/edit`))}handleDrawerCancelClick(){this.props.dispatch(Object(Me.push)(An.resolve("../")))}handleTeamDeleteClick(){this.props.dispatch(Object(Me.push)(`${location.pathname}/delete`))}handleTeamDeleteSuccess(){this.props.dispatch(Object(Me.push)(An.resolve("../../")));const e={type:"positive",message:`Team '${this.props.activeTeam.name}' successfully deleted`,isDismissable:!0,autoDismiss:15e3};En.add(e),this.fetchTeams()}handleTeamCreateSuccess(){this.fetchTeams()}fetchTeams(){this.setState({isUpdatingAllTeams:!0}),vr.getAll().then(e=>{const t=e.map(e=>{const t=An.sanitise(e.name+"_"+e.id);return Object.assign({},e,{path:t})}),n=this.props.params.team;if(this.props.dispatch(jt(t)),this.setState({isUpdatingAllTeams:!1}),n){const e=t.find(e=>e.path===n);if(e&&e!==this.props.activeTeam)return void this.props.dispatch(Lt(e));if(!e){const e={message:`Team '${n}' is not recognised so you've been redirected to the teams screen`,type:"neutral",autoDismiss:15e3,isDismissable:!0};En.add(e),this.props.dispatch(Object(Me.push)(An.resolve("../")))}}}).catch(e=>{switch(Zt.event("Error fetching teams",Zt.data({status_code:e.status}),Zt.error(e)),e.status){case 401:break;case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get teams. You may only be able to see previously loaded information but won't be able to edit any team members",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get teams. You may only be able to see previously loaded information but won't be able to edit any team members",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get teams. You may only be able to see previously loaded information and not be able to edit any team members",isDismissable:!0};En.add(e);break}default:{Zt.event("Unhandled error fetching teams",Zt.data({status_code:e.status}),Zt.error(e));const t={type:"warning",message:"There's been an error fetching the teams. You may only be able to see previously loaded information.",isDismissable:!0};En.add(t);break}}})}fetchMembers(e){this.setState({isUpdatingTeamMembers:!0}),vr.get(e).then(t=>{e===this.props.activeTeam.name&&(this.props.dispatch(Ft(t.members)),this.setState({isUpdatingTeamMembers:!1}))}).catch(t=>{switch(Zt.event("Error fetching members of team",Zt.data({status_code:t.status,team:e}),Zt.error(t)),t.status){case 404:{const t={type:"warning",message:`Couldn't find members for the team: '${e}'. This team may have been deleted.`,isDismissable:!0};En.add(t);break}case"RESPONSE_ERR":{const t={type:"warning",message:`An error's occurred whilst trying to get the members for the team '${e}'`,isDismissable:!0};En.add(t);break}case"UNEXPECTED_ERR":{const t={type:"warning",message:`An unexpected error's occurred whilst trying to get the members for the team '${e}'`,isDismissable:!0};En.add(t);break}case"FETCH_ERR":{const t={type:"warning",message:`There's been a network error whilst trying to get the members for the team '${e}'`,isDismissable:!0};En.add(t);break}default:{Zt.event("Unhandled error fetching team",Zt.data({status_code:t.status,team:e}),Zt.error(t));const n={type:"warning",message:"There's been an error fetching the members of team '${teamName}'",isDismissable:!0};En.add(n);break}}})}handleTeamClick(e){if(e.isSelected)return;const t=An.sanitise(e.name+"_"+e.id);this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/teams/${t}`))}renderDrawer(){return a.a.createElement(la,{isVisible:!(!this.props.activeTeam||!this.props.activeTeam.id||this.state.clearActiveTeam),isAnimatable:this.state.drawerIsAnimatable,handleTransitionEnd:this.handleDrawerTransitionEnd},this.props.activeTeam&&this.props.activeTeam.id?a.a.createElement($a,ri({},this.props.activeTeam,{userIsAdmin:this.props.userIsAdmin,onCancel:this.handleDrawerCancelClick,onDelete:this.handleTeamDeleteClick,onEditMembers:this.handleMembersEditClick,isShowingLoader:this.state.isUpdatingTeamMembers,isReadOnly:this.state.isUpdatingAllTeams})):"")}render(){return a.a.createElement("div",null,a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-4"},a.a.createElement("h1",{className:"text-center"},"Select a team"),a.a.createElement(Ma,{items:this.props.allTeams,activeItem:this.props.activeTeam,isUpdating:this.state.isUpdatingAllTeams,heading:"Name",handleItemClick:this.handleTeamClick})),a.a.createElement("div",{className:"grid__col-4"},a.a.createElement("h1",{className:"text-center"},"Create a team"),a.a.createElement(Fa,{onCreateSuccess:this.handleTeamCreateSuccess}))),this.renderDrawer(),"edit"===this.props.routes[this.props.routes.length-1].path&&this.props.activeTeam&&this.props.activeTeam.id?a.a.createElement(Zn,{sizeClass:"grid__col-8"},a.a.createElement(Ga,{isUpdatingMembers:this.state.isUpdatingTeamMembers})):"","delete"===this.props.routes[this.props.routes.length-1].path&&this.props.activeTeam&&this.props.activeTeam.id?a.a.createElement(Zn,{sizeClass:"grid__col-3"},a.a.createElement(ni,{name:this.props.activeTeam.name,onDeleteSuccess:this.handleTeamDeleteSuccess})):"")}}ii.propTypes=ai;var si=Object(o.connect)(function(e){return{activeTeam:e.state.teams.active,allTeams:e.state.teams.all,userIsAdmin:e.state.user.isAdmin,rootPath:e.state.rootPath}})(ii);const oi={title:h.a.string.isRequired,id:h.a.string.isRequired,url:h.a.string.isRequired,details:h.a.arrayOf(h.a.string)};class li extends r.Component{constructor(e){super(e)}render(){const e=this.props.details||[];return a.a.createElement("li",{className:"simple-select-list__item"},a.a.createElement(ye,{to:this.props.url},a.a.createElement("h2",null,this.props.title)),e.map((e,t)=>a.a.createElement("p",{key:`detail-${t}`},e)))}}function ci(){return(ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}li.propTypes=oi;const ui={rows:h.a.arrayOf(h.a.shape({title:h.a.string.isRequired,id:h.a.string.isRequired,url:h.a.string.isRequired,details:h.a.arrayOf(h.a.string)})).isRequired,showLoadingState:h.a.bool};class di extends r.Component{constructor(e){super(e)}render(){const e=this.props.showLoadingState,t=this.props.rows.length;return a.a.createElement("ul",{className:"list list--neutral simple-select-list"},t?this.props.rows.map(e=>a.a.createElement(li,ci({key:e.id},e))):null,e&&a.a.createElement("span",{className:"margin-top--1 loader loader--dark"}),t||e?"":a.a.createElement("p",null,"Nothing to show"))}}function pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}di.propTypes=ui;const hi={dispatch:h.a.func.isRequired,location:h.a.shape({pathname:h.a.string.isRequired}).isRequired};class fi extends r.Component{constructor(e){super(e),pi(this,"handleBackButton",()=>{const e=An.resolve("../");this.props.dispatch(Object(Me.push)(e))}),pi(this,"handleSearchInput",e=>{const t=e.target.value.toLowerCase(),n=this.state.datasets.filter(e=>-1!==e.title.toLowerCase().search(t));this.setState({filteredDatasets:n,searchTerm:t})}),pi(this,"mapDatasetsToState",e=>{try{return e.map(e=>({title:(e=e.current||e.next||e).title,id:e.id,url:this.props.location.pathname+"/"+e.id}))}catch(e){sr.add(rr.unexpectedRuntimeError,{message:`Error mapping datasets to to state. \n ${e}`});const t={type:"warning",message:"An unexpected error occurred when trying to get datasets, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error mapping datasets to state:\n",e)}}),this.state={isFetchingDatasets:!1,datasets:[],filteredDatasets:[],searchTerm:""}}componentWillMount(){return this.getAllDatasets()}getAllDatasets(){return this.setState({isFetchingDatasets:!0}),ya.getAll().then(e=>{this.setState({isFetchingDatasets:!1,datasets:this.mapDatasetsToState(e.items)})}).catch(e=>{switch(e.status){case 403:{const e={type:"neutral",message:"You do not permission to view submitted datasets.",isDismissable:!0};En.add(e);break}case 404:{const e={type:"warning",message:"No API route available to get all submitted datasets",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get the submitted datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get the submitted datasets.",isDismissable:!0};En.add(e);break}}console.error("Error getting datasets:\n",e),this.setState({isFetchingDatasets:!1})})}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-9"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Select a dataset"),a.a.createElement(Xn,{id:"search-datasets",placeholder:"Search by name or ID",onChange:this.handleSearchInput}),a.a.createElement(di,{rows:this.state.filteredDatasets.length?this.state.filteredDatasets:this.state.datasets,showLoadingState:this.state.isFetchingDatasets})))}}fi.propTypes=hi;var mi=fi;function gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const vi={params:h.a.shape({datasetID:h.a.string.isRequired}).isRequired,location:h.a.shape({pathname:h.a.string.isRequired}).isRequired,dispatch:h.a.func.isRequired};class yi extends r.Component{constructor(e){super(e),gi(this,"createListOfEditions",async e=>{const t=await this.getEditions(e)||[],n=await this.mapVersionReleaseDatesToEditions(e,t);this.setState({editions:[...this.state.editions,...n],isFetchingEditionsAndVersions:!1})}),gi(this,"getDataset",e=>(this.setState({isFetchingDataset:!0}),ya.get(e).then(e=>(this.setState({isFetchingDataset:!1}),this.mapDatasetToState(e))).catch(t=>{switch(t.status){case 404:{const e={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}}console.error(`Error getting dataset (${e}):\n`,t),this.setState({isFetchingDataset:!1})}))),gi(this,"mapDatasetToState",e=>{try{return{title:(e.current||e.next||e).title}}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting dataset details to state:\n",e)}}),gi(this,"getEditions",e=>(this.setState({isFetchingEditions:!0}),ya.getEditions(e).then(e=>(this.setState({isFetchingEditions:!1}),this.mapDatasetEditionsToView(e.items))).catch(t=>{switch(t.status){case 404:{const e={type:"warning",message:"No API route available for a list of editions.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get a list of editions.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to get a list of editions.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of editions.",isDismissable:!0};En.add(e);break}}console.error(`Error getting dataset (${e}):\n`,t),this.setState({isFetchingEditions:!1})}))),gi(this,"mapDatasetEditionsToView",e=>{try{return e.map(e=>{const t=e.current||e.next||e;return{title:this.state.dataset.title,id:t.edition,url:this.props.location.pathname+"/editions/"+t.edition,details:["Edition: "+t.edition,"Release date: loading..."],latestVersion:t.links.latest_version.id}})}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get edition details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting mapping editions to state:\n",e)}}),gi(this,"mapVersionReleaseDatesToEditions",async(e,t)=>{const n=await this.getLatestVersionForAllEditions(e,t).then(e=>e);if(!n){return t.map(e=>(e.details[1]="Release date: error retreiving release date",e))}return t.map(e=>(n.find(t=>{t.edition===e.id&&(e.details[1]=`Release date: ${Mr.format(t.release_date,"dd mmmm yyyy")}`)}),e))}),gi(this,"getLatestVersionForAllEditions",(e,t)=>ya.getLatestVersionForEditions(e,t).then(e=>e).catch(e=>{console.error("Error getting latest versions",e)})),gi(this,"handleBackButton",()=>{const e=An.resolve("../");this.props.dispatch(Object(Me.push)(e))}),this.state={isFetchingDataset:!1,dataset:{},isFetchingEditions:!1,editions:[{title:"Create new edition",id:"create-new-edition",url:this.props.location.pathname+"/editions"}],isFetchingEditionsAndVersions:!1}}async componentWillMount(){this.setState({isFetchingEditionsAndVersions:!0});const e=this.props.params.datasetID,t=await this.getDataset(e);this.setState({dataset:this.mapDatasetToState(t)}),this.createListOfEditions(e)}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-9"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Select an Edition"),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),a.a.createElement(di,{rows:this.state.editions,showLoadingState:this.state.isFetchingEditionsAndVersions})))}}yi.propTypes=vi;var bi=Object(o.connect)()(yi);function Ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wi={params:h.a.shape({datasetID:h.a.string.isRequired,editionID:h.a.string.isRequired}).isRequired,location:h.a.shape({pathname:h.a.string.isRequired}).isRequired,dispatch:h.a.func.isRequired};class Ci extends r.Component{constructor(e){super(e),Ei(this,"getDataset",e=>(this.setState({isFetchingDataset:!0}),ya.get(e).then(e=>(this.setState({isFetchingDataset:!1,dataset:this.mapDatasetToState(e)}),this.mapDatasetToState(e))).catch(t=>{switch(t.status){case 404:{const e={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}}console.error(`Error getting dataset (${e}):\n`,t),this.setState({isFetchingDataset:!1})}))),Ei(this,"mapDatasetToState",e=>{try{return{title:(e.current||e.next||e).title}}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting dataset details to state:\n",e)}}),Ei(this,"getEdition",(e,t)=>(this.setState({isFetchingEdition:!0}),ya.getEdition(e,t).then(e=>(this.setState({isFetchingEdition:!1,edition:this.mapDatasetEditionToState(e)}),this.mapDatasetEditionToState(e))).catch(e=>{console.error(e),this.setState({isFetchingEdition:!1})}))),Ei(this,"mapDatasetEditionToState",e=>{try{return{title:(e.current||e.next||e).edition}}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get edition details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting mapping edition to state:\n",e)}}),Ei(this,"getAllVersions",(e,t)=>(this.setState({isFetchingVersions:!0}),ya.getVersions(e,t).then(e=>(this.setState({isFetchingVersions:!1,versions:[...this.state.versions,...this.mapDatasetVersionsToState(e.items)]}),this.mapDatasetVersionsToState(e.items))).catch(e=>{console.error(e),this.setState({isFetchingVersions:!1})}))),Ei(this,"mapDatasetVersionsToState",e=>{try{const t=e.map(e=>{const t="published"===e.state?"(published)":null;return{id:e.id,title:`Version: ${e.version} ${t||""}`,url:this.props.location.pathname+"/versions/"+e.version,version:e.version,details:[`Release date: ${e.release_date?Mr.format(e.release_date,"dd mmmm yyyy"):"Not yet set"}`]}});return t.sort(this.sortByVersionNumber),t.reverse()}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get versions, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting mapping versions to state:\n",e)}}),Ei(this,"sortByVersionNumber",(e,t)=>e.version-t.version),Ei(this,"handleBackButton",()=>{const e=An.resolve("../../");this.props.dispatch(Object(Me.push)(e))}),this.state={isFetchingDataset:!1,dataset:{},isFetchingEdition:!1,edition:{},isFetchingVersions:!1,versions:[{title:"Create new version",id:"create-new-version",url:this.props.location.pathname+"/instances"}]}}async componentWillMount(){const e=this.props.params.datasetID,t=this.props.params.editionID;this.getAllVersions(e,t),this.getDataset(e),this.getEdition(e,t)}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-9"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Select a version"),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Edition"),": ",this.state.edition.title?this.state.edition.title:"loading..."),a.a.createElement(di,{rows:this.state.versions,showLoadingState:this.state.isFetchingVersions})))}}Ci.propTypes=wi;var _i=Ci;function Si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Di={field:h.a.shape({simpleListHeading:h.a.string.isRequired,simpleListDescription:h.a.string}),handleEditClick:h.a.func.isRequired,handleDeleteClick:h.a.func.isRequired,disabled:h.a.bool.isRequired};class Ri extends r.Component{constructor(e){super(e),Si(this,"handleEditClick",()=>{this.props.handleEditClick(this.props.field)}),Si(this,"handleDeleteClick",()=>{this.props.handleDeleteClick(this.props.field)})}render(){return a.a.createElement("li",{className:"simple-select-list__item grid"},a.a.createElement("div",{className:"grid__col-lg-10"},a.a.createElement("p",{className:"font-weight--600"},this.props.field.simpleListHeading),a.a.createElement("p",null,this.props.field.simpleListDescription)),a.a.createElement("div",{className:"grid__col-lg-2"},a.a.createElement("p",{className:"text-right"},a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleEditClick,disabled:this.props.disabled},"Edit")," |",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleDeleteClick,disabled:this.props.disabled},"Delete"))))}}function ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ri.propTypes=Di;const Ti={fields:h.a.arrayOf(h.a.shape({simpleListHeading:h.a.string.isRequired,simpleListDescription:h.a.string})).isRequired,editingStateFieldName:h.a.string.isRequired,addText:h.a.string,showLoadingState:h.a.bool,handleAddClick:h.a.func.isRequired,handleEditClick:h.a.func.isRequired,handleDeleteClick:h.a.func.isRequired,disableActions:h.a.bool};class xi extends r.Component{constructor(e){super(e),ki(this,"handleAddClick",()=>{this.props.handleAddClick(this.props.editingStateFieldName)}),ki(this,"handleEditClick",e=>{this.props.handleEditClick(e,this.props.editingStateFieldName)}),ki(this,"handleDeleteClick",e=>{this.props.handleDeleteClick(e,this.props.editingStateFieldName)})}render(){return a.a.createElement("div",null,this.props.fields.length?a.a.createElement("ul",{className:"list list--neutral simple-select-list"},this.props.fields.map((e,t)=>a.a.createElement(Ri,{key:`${this.editingStateFieldName}-${t}`,field:e,handleEditClick:this.handleEditClick,handleDeleteClick:this.handleDeleteClick,disabled:this.props.disableActions}))):null,a.a.createElement("button",{type:"button",className:"btn btn--link "+(this.props.fields.length?"margin-top--1":""),onClick:this.handleAddClick,disabled:this.props.disableActions},this.props.addText?this.props.addText:"Add a new item"))}}xi.propTypes=Ti;const Ni={disabled:h.a.bool,reviewState:h.a.string,userEmail:h.a.string.isRequired,lastEditedBy:h.a.string,onSubmit:h.a.func,onApprove:h.a.func,notInCollectionYet:h.a.bool};class Oi extends r.Component{constructor(e){super(e)}renderSubmit(){return a.a.createElement("button",{id:"submit-for-review",type:"button",onClick:this.props.onSubmit,disabled:this.props.disabled,className:"btn btn--positive margin-right--1"},"Save and submit for review")}renderApprove(){return a.a.createElement("button",{id:"mark-as-reviewed",type:"button",onClick:this.props.onApprove,disabled:this.props.disabled,className:"btn btn--positive margin-right--1"},"Save and submit for approval")}render(){return"reviewed"===this.props.reviewState?a.a.createElement("span",null):this.props.notInCollectionYet||"inProgress"===this.props.reviewState?this.renderSubmit():this.props.userEmail===this.props.lastEditedBy&&"complete"===this.props.reviewState?this.renderSubmit():this.props.userEmail!==this.props.lastEditedBy&&"complete"===this.props.reviewState?this.renderApprove():a.a.createElement("span",null)}}Oi.propTypes=Ni;var Pi=Oi;const Ii={metadata:h.a.shape({title:h.a.string,summary:h.a.string,keywords:h.a.string,nationalStatistic:h.a.bool,licence:h.a.string,contactName:h.a.string,contactEmail:h.a.string,contactTelephone:h.a.string,relatedDatasets:h.a.array,relatedPublications:h.a.array,relatedMethodologies:h.a.array,releaseFrequency:h.a.string,edition:h.a.string,version:h.a.number,releaseDate:h.a.shape({value:h.a.string,error:h.a.string}),nextReleaseDate:h.a.string,unitOfMeasure:h.a.string,notices:h.a.array,dimensions:h.a.array,qmi:h.a.string,latestChanges:h.a.array,usageNotes:h.a.array}).isRequired,handleBackButton:h.a.func.isRequired,handleDateInputChange:h.a.func.isRequired,handleStringInputChange:h.a.func.isRequired,handleDimensionNameChange:h.a.func.isRequired,handleDimensionDescriptionChange:h.a.func.isRequired,handleNationalStaticticChange:h.a.func.isRequired,handleSimpleEditableListAdd:h.a.func.isRequired,handleSimpleEditableListDelete:h.a.func.isRequired,handleSimpleEditableListEdit:h.a.func.isRequired,handleSave:h.a.func.isRequired,versionIsPublished:h.a.bool.isRequired,datasetCollectionState:h.a.string,userEmail:h.a.string.isRequired,lastEditedBy:h.a.string.isRequired,handleSubmitForReviewClick:h.a.func.isRequired,handleMarkAsReviewedClick:h.a.func.isRequired,disableForm:h.a.bool.isRequired,isSaving:h.a.bool};class Ai extends r.Component{render(){return a.a.createElement("div",{className:"grid__col-6 margin-bottom--4"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.props.handleBackButton},"Back")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Edit metadata"),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.props.metadata.title?this.props.metadata.title:"loading..."),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Edition"),": ",this.props.metadata.edition?this.props.metadata.edition:"loading..."),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Version"),": ",this.props.metadata.version?this.props.metadata.version:"loading..."),a.a.createElement("h2",null,"Title"),a.a.createElement(Xn,{id:"title",value:this.props.metadata.title,onChange:this.props.handleStringInputChange,disabled:this.props.disableForm}),a.a.createElement("h2",null,"Release dates"),a.a.createElement(Xn,{id:"release-date",name:"releaseDate",label:"Release date",type:"date",onChange:this.props.handleDateInputChange,value:this.props.metadata.releaseDate.value&&Mr.format(this.props.metadata.releaseDate.value,"yyyy-mm-dd"),disabled:this.props.disableForm||this.props.versionIsPublished,error:this.props.metadata.releaseDate.error}),a.a.createElement(Xn,{id:"next-release",name:"nextReleaseDate",label:"Next release date",onChange:this.props.handleStringInputChange,value:this.props.metadata.nextReleaseDate,disabled:this.props.disableForm}),a.a.createElement(Xn,{id:"release-frequency",name:"releaseFrequency",label:"Release frequency",onChange:this.props.handleStringInputChange,value:this.props.metadata.releaseFrequency,disabled:this.props.disableForm}),a.a.createElement("h2",null,"Notices"),a.a.createElement("p",{className:"margin-bottom--1"},"Add an alert, correction, change summary or usage note."),a.a.createElement(xi,{addText:"Add a new notice",fields:this.props.metadata.notices,editingStateFieldName:"notices",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm}),a.a.createElement("h2",{className:"margin-top--1"},"About"),a.a.createElement(Xn,{id:"summary",label:"Summary",type:"textarea",value:this.props.metadata.summary,onChange:this.props.handleStringInputChange,disabled:this.props.disableForm}),a.a.createElement(Xn,{id:"unit-of-measure",name:"unitOfMeasure",label:"Unit of measure",type:"input",value:this.props.metadata.unitOfMeasure,onChange:this.props.handleStringInputChange,disabled:this.props.disableForm}),a.a.createElement("h2",null,"Dimensions"),this.props.metadata.dimensions.map(e=>a.a.createElement("div",{key:`dimension-${e.id}`},a.a.createElement(Xn,{id:`dimension-title-${e.id}`,label:"Title",value:e.label?e.label:e.name,onChange:this.props.handleDimensionNameChange,disabled:this.props.disableForm||this.props.versionIsPublished}),a.a.createElement(Xn,{id:`dimension-description-${e.id}`,label:"Description",type:"textarea",value:e.description,onChange:this.props.handleDimensionDescriptionChange,disabled:this.props.disableForm||this.props.versionIsPublished}))),a.a.createElement("h2",null,"Meta"),a.a.createElement(Xn,{id:"keywords",label:"Keywords",value:this.props.metadata.keywords,onChange:this.props.handleStringInputChange,disabled:this.props.disableForm}),a.a.createElement(Xn,{id:"licence",label:"Licence",onChange:this.props.handleStringInputChange,value:this.props.metadata.licence,disabled:this.props.disableForm}),a.a.createElement("h3",null,"Usage notes"),a.a.createElement("div",{className:"margin-bottom--1"},a.a.createElement(xi,{addText:"Add a usage note",fields:this.props.metadata.usageNotes,editingStateFieldName:"usageNotes",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm})),a.a.createElement(Rr,{groupName:"national-statistic",radioData:[{id:"national-statistic-yes",value:"true",label:"Yes"},{id:"national-statistic-no",value:"false",label:"No"}],selectedValue:this.props.metadata.nationalStatistic?this.props.metadata.nationalStatistic.toString():"false",onChange:this.props.handleNationalStaticticChange,inline:!0,legend:"National Statistic",disabled:this.props.disableForm}),a.a.createElement("h2",null,"Contact details"),a.a.createElement(Xn,{id:"contact-name",name:"contactName",label:"Contact name",onChange:this.props.handleStringInputChange,value:this.props.metadata.contactName,disabled:this.props.disableForm}),a.a.createElement(Xn,{id:"contact-email",name:"contactEmail",label:"Contact email",onChange:this.props.handleStringInputChange,value:this.props.metadata.contactEmail,disabled:this.props.disableForm}),a.a.createElement(Xn,{id:"contact-telephone",name:"contactTelephone",label:"Contact telephone",onChange:this.props.handleStringInputChange,value:this.props.metadata.contactTelephone,disabled:this.props.disableForm}),a.a.createElement("h2",null,"Related links"),a.a.createElement("h3",null,"Datasts"),a.a.createElement(xi,{addText:"Add a dataset",fields:this.props.metadata.relatedDatasets,editingStateFieldName:"relatedDatasets",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm}),a.a.createElement("h3",{className:"margin-top--1"},"Bulletins, articles and compendia"),a.a.createElement(xi,{addText:"Add a publication",fields:this.props.metadata.relatedPublications,editingStateFieldName:"relatedPublications",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm}),a.a.createElement("h3",{className:"margin-top--1"},"Quality and methodology information"),a.a.createElement(Xn,{id:"qmi",label:"QMI URL",onChange:this.props.handleStringInputChange,value:this.props.metadata.qmi,disabled:this.props.disableForm}),a.a.createElement("h3",null,"Methodologies"),a.a.createElement(xi,{addText:"Add a methodology",fields:this.props.metadata.relatedMethodologies,editingStateFieldName:"relatedMethodologies",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm}),a.a.createElement("h2",{className:"margin-top--1"},"What's changed"),a.a.createElement(xi,{addText:"Add a change",fields:this.props.metadata.latestChanges,editingStateFieldName:"latestChanges",handleAddClick:this.props.handleSimpleEditableListAdd,handleEditClick:this.props.handleSimpleEditableListEdit,handleDeleteClick:this.props.handleSimpleEditableListDelete,disableActions:this.props.disableForm||this.props.versionIsPublished}),a.a.createElement("div",{className:"margin-top--2"},a.a.createElement("button",{type:"button",className:"btn btn--primary margin-right--1",onClick:this.props.handleSave,disabled:this.props.disableForm},"Save"),a.a.createElement(Pi,{disabled:this.props.disableForm,reviewState:this.props.datasetCollectionState,userEmail:this.props.userEmail,lastEditedBy:this.props.lastEditedBy,onSubmit:this.props.handleSubmitForReviewClick,onApprove:this.props.handleMarkAsReviewedClick}),a.a.createElement(ye,{to:`${window.location.pathname}/preview`},"Preview"),this.props.isSaving&&a.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"})))}}Ai.propTypes=Ii;var Mi=Object(o.connect)(function(e){return{userEmail:e.state.user.email}})(Ai);function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Li={location:h.a.shape({pathname:h.a.string.isRequired}),params:h.a.shape({collectionID:h.a.string.isRequired,datasetID:h.a.string.isRequired,editionID:h.a.string.isRequired,versionID:h.a.string.isRequired,metadataField:h.a.string,metadataItemID:h.a.string}),children:h.a.element,dispatch:h.a.func.isRequired};class Fi extends r.Component{constructor(e){super(e),ji(this,"getDataset",e=>{this.setState({isGettingDatasetMetadata:!0}),ya.get(e).then(e=>{const t=this.mapDatasetToState(e);"associated"===t.state&&t.collection!==this.props.params.collectionID&&(this.setState({disableScreen:!0}),En.add({type:"neutral",message:"This dataset is in another collection.",isDismissable:!0})),t.collection&&this.getAndUpdateReviewStateData(),this.setState({metadata:t.metadata,isGettingDatasetMetadata:!1,datasetIsInCollection:t.collection,datasetState:t.state})})}),ji(this,"mapDatasetToState",e=>{try{const t=e.next||e.current||e,n={title:t.title,summary:t.description,keywords:t.keywords?t.keywords.join().replace(",",", "):"",nationalStatistic:t.national_statistic,licence:t.license||"",relatedDatasets:t.related_datasets?this.mapRelatedContentToState(t.related_datasets):[],relatedPublications:t.publications?this.mapRelatedContentToState(t.publications):[],relatedMethodologies:t.methodologies?this.mapRelatedContentToState(t.methodologies):[],releaseFrequency:t.release_frequency||"",unitOfMeasure:t.unit_of_measure||"",nextReleaseDate:t.next_release,qmi:t.qmi?t.qmi.href:""};return t.contacts&&(n.contactName=t.contacts[0].name?t.contacts[0].name:"",n.contactEmail=t.contacts[0].email?t.contacts[0].email:"",n.contactTelephone=t.contacts[0].telephone?t.contacts[0].telephone:""),{metadata:{...this.state.metadata,...n},collection:t.collection_id||!1,state:t.state}}catch(t){sr.add(rr.unexpectedRuntimeError,{message:`Error mapping dataset '${e.id}' to to state. \n ${t}`}),En.add({type:"warning",message:`An unexpected error occurred when trying to get dataset '${e.id}'. Try refreshing the page`,isDismissable:!0}),console.error(`Error mapping dataset '${e.id}' to to state. \n ${t}`)}}),ji(this,"mapRelatedContentToState",e=>{try{return e.map((e,t)=>({id:t,description:e.description,href:e.href,title:e.title,simpleListHeading:e.title,simpleListDescription:e.description}))}catch(e){throw sr.add(rr.unexpectedRuntimeError,{message:`Error mapping related links to state \n ${e}`}),new Error(`Error mapping related links to state \n ${e}`)}}),ji(this,"getVersion",(e,t,n)=>{this.setState({isGettingVersionMetadata:!0}),ya.getVersion(e,t,n).then(e=>{const t=this.mapVersionToState(e);this.setState({metadata:t.metadata,isGettingVersionMetadata:!1,versionIsInCollection:t.collection,instanceID:t.instanceID,versionIsPublished:t.versionIsPublished})})}),ji(this,"mapVersionToState",e=>{try{const t={edition:e.edition,version:e.version,releaseDate:{value:e.release_date||"",error:""},notices:e.alerts?this.mapNoticesToState(e.alerts):[],dimensions:e.dimensions||[],usageNotes:e.usage_notes?this.mapUsageNotesToState(e.usage_notes):[],latestChanges:e.latest_changes?this.mapLatestChangesToState(e.latest_changes):[]};return{metadata:{...this.state.metadata,...t},collection:e.collection_id||!1,instanceID:e.id,versionIsPublished:"published"===e.state}}catch(t){sr.add(rr.unexpectedRuntimeError,{message:`Error mapping version '${e.version||e.id}' to to state. \n ${t}`}),En.add({type:"warning",message:`An unexpected error occurred when trying to get version '${e.version||e.id}'. Try refreshing the page`,isDismissable:!0}),console.error(`Error mapping dataset '${e.version||e.id}' to to state. \n ${t}`)}}),ji(this,"mapNoticesToState",e=>{try{return e.map((e,t)=>({id:t,type:e.type,date:e.date,description:e.description,simpleListHeading:`${e.type} (${Mr.format(e.date,"dd mmmm yyyy")})`,simpleListDescription:e.description}))}catch(e){throw sr.add(rr.unexpectedRuntimeError,{message:`Error mapping notices to state \n ${e}`}),new Error(`Error mapping notices to state \n ${e}`)}}),ji(this,"mapUsageNotesToState",e=>{try{return e.map((e,t)=>({id:t,title:e.title,note:e.note,simpleListHeading:e.title,simpleListDescription:e.note}))}catch(e){throw sr.add(rr.unexpectedRuntimeError,{message:`Error mapping usage notes to state \n ${e}`}),new Error(`Error mapping usage notes to state \n ${e}`)}}),ji(this,"mapLatestChangesToState",e=>{try{return e.map((e,t)=>({id:t,title:e.title,description:e.description,simpleListHeading:e.title,simpleListDescription:e.description}))}catch(e){throw sr.add(rr.unexpectedRuntimeError,{message:`Error mapping latest changes to state \n ${e}`}),new Error(`Error mapping latest changes to state \n ${e}`)}}),ji(this,"getAndUpdateReviewStateData",()=>{this.setState({isGettingCollectionData:!0}),gr.get(this.props.params.collectionID).then(e=>{if(e.datasets.length){const t=this.mapDatasetCollectionStateToState(e.datasets);this.setState({isGettingCollectionData:!1,lastEditedBy:t.lastEditedBy,datasetCollectionState:t.reviewState})}this.setState({isGettingCollectionData:!1})})}),ji(this,"mapDatasetCollectionStateToState",e=>{try{const t=e.find(e=>e.id===this.props.params.datasetID);return{lastEditedBy:t.lastEditedBy,reviewState:t.state.charAt(0).toLowerCase()+t.state.slice(1)}}catch(e){sr.add(rr.unexpectedRuntimeError,{message:`Error mapping version collection state to to state. \n ${e}`}),En.add({type:"warning",message:"An unexpected error occurred when trying to get information about this versions collection state'. Try refreshing the page",isDismissable:!0}),console.error(`Error mapping version collection state to to state. \n ${e}`)}}),ji(this,"handleStringInputChange",e=>{const t=e.target.name,n=e.target.value,r={...this.state.metadata,[t]:n};this.setState({metadata:r,datasetMetadataHasChanges:this.datasetMetadataHasChanges(t),versionMetadataHasChanges:this.versionMetadataHasChanges(t)})}),ji(this,"handleDateInputChange",e=>{const t=e.target.name,n=e.target.value,r=new Date(n).toISOString(),a={...this.state.metadata,[t]:{value:r,error:""}};this.setState({metadata:a,datasetMetadataHasChanges:this.datasetMetadataHasChanges(t),versionMetadataHasChanges:this.versionMetadataHasChanges(t)})}),ji(this,"handleNationalStaticticChange",e=>{const t="true"===e.value,n={...this.state.metadata,nationalStatistic:t};this.setState({metadata:n,datasetMetadataHasChanges:!0})}),ji(this,"handleDimensionNameChange",e=>{const t=e.target.value,n=e.target.name.substring(16),r=this.state.metadata.dimensions.map(e=>(e.id===n&&(e.label=t),e)),a={...this.state.metadata,dimensions:r};this.setState({metadata:a,dimensionsUpdated:!0})}),ji(this,"handleDimensionDescriptionChange",e=>{const t=e.target.value,n=e.target.name.substring(22),r=this.state.metadata.dimensions.map(e=>(e.id===n&&(e.description=t),e)),a={...this.state.metadata,dimensions:r};this.setState({metadata:a,dimensionsUpdated:!0})}),ji(this,"handleSimpleEditableListAdd",e=>{this.props.dispatch(Object(Me.push)(`${this.props.location.pathname}/edit/${e}/${this.state.metadata[e].length}`))}),ji(this,"handleSimpleEditableListEdit",(e,t)=>{this.props.dispatch(Object(Me.push)(`${this.props.location.pathname}/edit/${t}/${e.id}`))}),ji(this,"handleSimpleEditableListDelete",(e,t)=>{const n=this.state.metadata[t].filter(t=>t.id!==e.id),r={...this.state.metadata,[t]:n};this.setState({metadata:r})}),ji(this,"handleSimpleEditableListEditSuccess",(e,t)=>{let n;n=null===e.id?this.addMetadataField(e,t):this.updateMetadataField(e,t),this.setState({metadata:n,datasetMetadataHasChanges:this.datasetMetadataHasChanges(t),versionMetadataHasChanges:this.versionMetadataHasChanges(t)}),this.props.dispatch(Object(Me.push)(An.resolve("../../../")))}),ji(this,"addMetadataField",(e,t)=>{const n=[...this.state.metadata[t]];e.id=n.length,n.push(e);const r=this.mapMetadataFieldToState(n,t);return{...this.state.metadata,[t]:r}}),ji(this,"updateMetadataField",(e,t)=>{const n=this.state.metadata[t].map(t=>t.id===e.id?e:t),r=this.mapMetadataFieldToState(n,t);return{...this.state.metadata,[t]:r}}),ji(this,"mapMetadataFieldToState",(e,t)=>{switch(t){case"notices":return this.mapNoticesToState(e);case"relatedDatasets":case"relatedPublications":case"relatedMethodologies":return this.mapRelatedContentToState(e);case"usageNotes":return this.mapUsageNotesToState(e);case"latestChanges":return this.mapLatestChangesToState(e);default:sr.add(rr.unexpectedRuntimeError,{message:`Error mapping metadata field to state. Unknown field name '${t}'`}),En.add({type:"warning",message:"An when adding metadata item, changes or additions won't be save. Refresh the page and try again",isDismissable:!0}),console.error(`Error mapping metadata field to state. Unknown field name '${t}'`)}}),ji(this,"handleSimpleEditableListEditCancel",()=>{this.props.dispatch(Object(Me.push)(An.resolve("../../../")))}),ji(this,"datasetMetadataHasChanges",e=>"title"===e||"summary"===e||"keywords"===e||"nationalStatistic"===e||"licence"===e||"contactName"===e||"contactEmail"===e||"contactTelephone"===e||"relatedDatasets"===e||"relatedPublication"===e||"relatedMethodologies"===e||"releaseFrequency"===e||"unitOfMeasure"===e||"qmi"===e||"nextReleaseDate"===e),ji(this,"versionMetadataHasChanges",e=>"releaseDate"===e||"notices"===e||"usageNotes"===e||"latestChanges"===e),ji(this,"handleBackButton",()=>{const e=An.resolve("../../");this.props.dispatch(Object(Me.push)(e))}),ji(this,"handleSave",async(e,t)=>{if(!this.state.metadata.releaseDate.value){const e={value:"",error:"You must set a release date"};console.log(e);const t={...this.state.metadata,releaseDate:e};return this.setState({metadata:t}),void window.scrollTo(0,0)}this.setState({isSaving:!0});const n=this.props.params.collectionID,r=this.props.params.datasetID,a=this.props.params.editionID,i=this.props.params.versionID,s=this.state.instanceID,o=this.state.datasetIsInCollection,l=this.state.versionIsInCollection,c=this.state.dimensionsUpdated,u=this.state.versionIsPublished,d=this.state.datasetState,p=!(e&&t||o&&"associated"===d||o===n),h=!(e&&t||l),f=this.state.datasetMetadataHasChanges,m=this.state.versionMetadataHasChanges,g=this.mapDatasetToPutBody(),v=this.mapVersionToPutBody();let y=!1;if(f&&(y=await this.saveDatasetChanges(r,g)),y)return this.setState({isSaving:!1}),void this.handleOnSaveError("There was a problem saving your changes to this dataset");let b=!1;if(m&&(b=await this.saveVersionChanges(r,a,i,v)),b)return this.setState({isSaving:!1}),void this.handleOnSaveError("There was a problem saving your changes to this version");if(c){if(await this.saveDimensionChanges(s,this.state.metadata.dimensions))return this.setState({isSaving:!1}),void this.handleOnSaveError("There was a problem saving your changes to this dataset")}let E=!1;if(p&&(E=await this.addDatasetToCollection(n,r),this.setState({datasetIsInCollection:n,datasetCollectionState:"inProgress"})),E)return this.setState({isSaving:!1}),void this.handleOnSaveError("There was a problem adding this dataset to your collection");let w=!1;if(h&&(w=await this.addVersionToCollection(n,r,a,i),this.setState({versionIsInCollection:n})),w)return this.setState({isSaving:!1}),void this.handleOnSaveError("There was a problem adding this version to your collection");if(e){const e=await this.submitDatasetForReview(n,r);let t=!1;if(u||(t=await this.submitVersionForReview(n,r,a,i)),e||t)return this.setState({isSaving:!1}),void this.handleOnSaveError("There was a problem saving your changes to this dataset")}if(t){const e=await this.markDatasetAsReviewed(n,r);let t=!1;if(u||(t=await this.markVersionAsReviewed(n,r,a,i)),e||t)return this.setState({isSaving:!1}),void this.handleOnSaveError("There was a problem saving your changes to this dataset")}this.setState({isSaving:!1}),En.add({type:"positive",message:`${this.state.metadata.title} saved!`,isDismissable:!0})}),ji(this,"handleSaveClick",()=>{this.handleSave(!1,!1)}),ji(this,"handleSubmitForReviewClick",()=>{this.handleSave(!0,!1)}),ji(this,"handleMarkAsReviewedClick",()=>{this.handleSave(!1,!0)}),ji(this,"handleOnSaveError",e=>{En.add({type:"warning",message:`${e}. You can try again by pressing save.`,isDismissable:!0})}),ji(this,"mapDatasetToPutBody",()=>({id:this.props.params.datasetID,title:this.state.metadata.title,description:this.state.metadata.summary,keywords:this.state.metadata.keywords?this.state.metadata.keywords.split(", "):[],national_statistic:this.state.metadata.nationalStatistic,license:this.state.metadata.licence,related_datasets:this.state.metadata.relatedDatasets,publications:this.state.metadata.relatedPublications,methodologies:this.state.metadata.relatedMethodologies,qmi:{href:this.state.metadata.qmi},release_frequency:this.state.metadata.releaseFrequency,contacts:[{name:this.state.metadata.contactName,email:this.state.metadata.contactEmail,telephone:this.state.metadata.contactTelephone}],next_release:this.state.metadata.nextReleaseDate,unit_of_measure:this.state.metadata.unitOfMeasure})),ji(this,"mapVersionToPutBody",()=>({release_date:this.state.metadata.releaseDate.value,alerts:this.state.metadata.notices,usage_notes:this.state.metadata.usageNotes,lastest_changes:this.state.metadata.latestChanges})),ji(this,"addDatasetToCollection",(e,t)=>gr.addDataset(e,t).catch(e=>(sr.add(rr.requestFailed,{message:`Error adding dataset '${t}' to collection '${this.props.params.collectionID}'. Error: ${JSON.stringify(e)}`}),console.error(`Error adding dataset '${t}' to collection '${this.props.params.collectionID}'`,e),e))),ji(this,"addVersionToCollection",(e,t,n,r)=>gr.addDatasetVersion(e,t,n,r).catch(e=>(sr.add(rr.requestFailed,{message:`Error adding version '${t}/editions/${n}/versions/${r}' to collection '${this.props.params.collectionID}'. Error: ${JSON.stringify(e)}`}),console.error(`Error adding version '${t}/editions/${n}/versions/${r}' to collection '${this.props.params.collectionID}'`,e),e))),ji(this,"saveDatasetChanges",(e,t)=>ya.updateDatasetMetadata(e,t).catch(t=>(sr.add(rr.requestFailed,{message:`Error saving dataset '${e}' changes to dataset API. Error: ${JSON.stringify(t)}`}),console.error(`Error saving dataset '${e}' changes to dataset API '${this.props.params.collectionID}'`,t),t))),ji(this,"saveVersionChanges",(e,t,n,r)=>ya.updateVersionMetadata(e,t,n,r).catch(r=>(sr.add(rr.requestFailed,{message:`Error saving version '${e}/editions/${t}/versions/${n}' changes to dataset API. Error: ${JSON.stringify(r)}`}),console.error(`Error saving version '${e}/editions/${t}/versions/${n}' changes to dataset API '${this.props.params.collectionID}'`,r),r))),ji(this,"saveDimensionChanges",(e,t)=>ya.updateInstanceDimensions(e,t).catch(t=>(sr.add(rr.requestFailed,{message:`Error saving dimensions on instance '${e}' to dataset API. Error: ${JSON.stringify(t)}`}),console.error(`Error saving dimensions on instance '${e}' to dataset API '${this.props.params.collectionID}'`,t),t))),ji(this,"submitDatasetForReview",(e,t)=>gr.setDatasetStatusToComplete(e,t).catch(e=>(sr.add(rr.requestFailed,{message:`Error submitting dataset '${t}' for review. Error: ${JSON.stringify(e)}`}),console.error(`Error submitting dataset '${t}' for review. Error:`,e),e))),ji(this,"markDatasetAsReviewed",(e,t)=>gr.setDatasetStatusToReviewed(e,t).catch(e=>(sr.add(rr.requestFailed,{message:`Error marking dataset '${t}' as reviewed. Error: ${JSON.stringify(e)}`}),console.error(`Error marking dataset '${t}' as reviewed. Error:`,e),e))),ji(this,"submitVersionForReview",(e,t,n,r)=>gr.setDatasetVersionStatusToComplete(e,t,n,r).catch(e=>(sr.add(rr.requestFailed,{message:`Error marking dataset '${t}/editions/${n}/versions/${r}' as reviewed. Error: ${JSON.stringify(e)}`}),console.error(`Error marking dataset '${t}/editions/${n}/versions/${r}' as reviewed. Error:`,e),e))),ji(this,"markVersionAsReviewed",(e,t,n,r)=>gr.setDatasetVersionStatusToReviewed(e,t,n,r).catch(e=>(sr.add(rr.requestFailed,{message:`Error marking dataset '${t}/editions/${n}/versions/${r}' as reviewed. Error: ${JSON.stringify(e)}`}),console.error(`Error marking dataset '${t}/editions/${n}/versions/${r}' as reviewed. Error:`,e),e))),ji(this,"renderModal",()=>{return a.a.Children.map(this.props.children,e=>a.a.cloneElement(e,{data:this.state.metadata[this.props.params.metadataField][this.props.params.metadataItemID],handleSuccessClick:this.handleSimpleEditableListEditSuccess,handleCancelClick:this.handleSimpleEditableListEditCancel}))}),this.state={disableScreen:!1,isGettingDatasetMetadata:!1,isGettingVersionMetadata:!1,isGettingCollectionData:!1,isSaving:!1,datasetIsInCollection:!1,versionIsInCollection:!1,versionIsPublished:!1,datasetState:"",datasetCollectionState:"",lastEditedBy:"",instanceID:"",dimensionsUpdated:!1,datasetMetadataHasChanges:!1,versionMetadataHasChanges:!1,metadata:{title:"",summary:"",keywords:"",nationalStatistic:!1,licence:"",contactName:"",contactEmail:"",contactTelephone:"",relatedDatasets:[],relatedPublications:[],relatedMethodologies:[],releaseFrequency:"",edition:"",version:0,releaseDate:{value:"",error:""},nextReleaseDate:"",unitOfMeasure:"",notices:[],dimensions:[],usageNotes:[],latestChanges:[],qmi:""}}}componentWillMount(){const e=this.props.params.datasetID,t=this.props.params.editionID,n=this.props.params.versionID;this.getDataset(e),this.getVersion(e,t,n)}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement(Mi,{metadata:this.state.metadata,handleBackButton:this.handleBackButton,handleDateInputChange:this.handleDateInputChange,handleStringInputChange:this.handleStringInputChange,handleDimensionNameChange:this.handleDimensionNameChange,handleDimensionDescriptionChange:this.handleDimensionDescriptionChange,handleNationalStaticticChange:this.handleNationalStaticticChange,handleSimpleEditableListAdd:this.handleSimpleEditableListAdd,handleSimpleEditableListDelete:this.handleSimpleEditableListDelete,handleSimpleEditableListEdit:this.handleSimpleEditableListEdit,handleSave:this.handleSaveClick,isSaving:this.state.isSaving,versionIsPublished:this.state.versionIsPublished,lastEditedBy:this.state.lastEditedBy,disableForm:this.state.disableScreen||this.state.isSaving||this.state.isGettingDatasetMetadata||this.state.isGettingVersionMetadata||this.state.isGettingCollectionData,datasetCollectionState:this.state.datasetCollectionState,handleSubmitForReviewClick:this.handleSubmitForReviewClick,handleMarkAsReviewedClick:this.handleMarkAsReviewedClick}),this.props.params.metadataField&&this.props.params.metadataItemID?this.renderModal():null)}}Fi.propTypes=Li;var Ui=Fi;function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $i={params:h.a.shape({datasetID:h.a.string.isRequired,editionID:h.a.string.isRequired}),dispatch:h.a.func.isRequired};class Bi extends r.Component{constructor(e){super(e),qi(this,"getDataset",e=>(this.setState({isFetchingDataset:!0}),ya.get(e).then(e=>(this.setState({isFetchingDataset:!1,dataset:this.mapDatasetToState(e)}),this.mapDatasetToState(e))).catch(t=>{switch(t.status){case 404:{const e={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}}console.error(`Error getting dataset (${e}):\n`,t),this.setState({isFetchingDataset:!1})}))),qi(this,"mapDatasetToState",e=>{try{return{title:(e.current||e.next||e).title}}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting dataset details to state:\n",e)}}),qi(this,"getEdition",(e,t)=>(this.setState({isFetchingEdition:!0}),ya.getEdition(e,t).then(e=>(this.setState({isFetchingEdition:!1,edition:this.mapDatasetEditionToState(e)}),this.mapDatasetEditionToState(e))).catch(e=>{console.error(e),this.setState({isFetchingEdition:!1})}))),qi(this,"mapDatasetEditionToState",e=>{try{return{title:(e.current||e.next||e).edition}}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get edition details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting mapping edition to state:\n",e)}}),qi(this,"getInstances",e=>(this.setState({isFetchingInstances:!0}),ya.getCompletedInstancesForDataset(e).then(e=>{this.setState({isFetchingInstances:!1,instances:this.mapInstancesToState(e.items)})}).catch(e=>{console.error(e),this.setState({isFetchingEdition:!1})}))),qi(this,"mapInstancesToState",e=>{try{return e.map((t,n)=>{const r=n+1===e.length?"(latest)":null;return{id:t.id,value:t.id,label:`New data ${r||""}`,subLabel:`Upload date: ${Mr.format(t.last_updated,"h:MMtt dd mmmm yyyy")}`}}).reverse()}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get instances. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting mapping instances to state:\n",e)}}),qi(this,"handleSelectedInstanceChange",e=>{const t=e.value;this.setState({selectedInstance:t})}),qi(this,"handleCreateClick",()=>{this.setState({isSaving:!0}),ya.confirmEditionAndCreateVersion(this.state.selectedInstance,this.props.params.editionID).then(e=>{this.setState({isSaving:!1});const t=e.version,n=`${An.resolve("../")}/versions/${t}`;this.props.dispatch(Object(Me.push)(n))}).catch(e=>{switch(console.error("Error create version:\n",e),this.setState({isSaving:!1}),e.status){case 401:break;case 400:{const e={type:"warning",message:"Unable to create version due to invalid values being submitted. Please check your updates for any issues and try again",isDismissable:!0,autoDismiss:1e4};En.add(e);break}case 403:{const e={type:"neutral",message:"Unable to create version because you do not have the correct permissions",isDismissable:!0,autoDismiss:1e4};En.add(e);break}case 404:{const e={type:"warning",message:"Unable to create version because this version couldn't be found",isDismissable:!0,autoDismiss:1e4};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"Unable to create version due to a network issue. Please check your internet connection and try again",isDismissable:!0,autoDismiss:1e4};En.add(e);break}default:{const e={type:"warning",message:"Unable to create version due to an unexpected error",isDismissable:!0,autoDismiss:1e4};En.add(e);break}}})}),qi(this,"handleBackButton",()=>{this.props.dispatch(Object(Me.goBack)())}),this.state={isFetchingDataset:!1,dataset:{},isFetchingEdition:!1,edition:{},isFetchingInstances:!1,instances:[],selectedInstance:null,isSaving:!1}}componentWillMount(){const e=this.props.params.datasetID,t=this.props.params.editionID;this.getDataset(e),this.getEdition(e,t),this.getInstances(e)}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-9"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Attach new data"),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Edition"),": ",this.state.edition.title?this.state.edition.title:"loading..."),this.state.instances.length?a.a.createElement(Rr,{groupName:"create-versions-instances",radioData:this.state.instances,selectedValue:this.state.selectedInstance,onChange:this.handleSelectedInstanceChange,legend:"New data",disabled:this.state.isSaving||this.state.isFetchingInstances}):a.a.createElement("p",{className:"margin-bottom--1"},"No instances avialable for this edition"),a.a.createElement("div",{className:"grid__col-2"},a.a.createElement("button",{type:"button",className:"btn btn--positive",disabled:!this.state.selectedInstance,onClick:this.handleCreateClick},"Create version"))))}}Bi.propTypes=$i;var Hi=Bi;class Vi{static getAll(){return Cn.get("/recipes",!0).then(e=>e)}static get(e){return Cn.get(`/recipes/${e}`,!0).then(e=>e)}}function Wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Yi={params:h.a.shape({datasetID:h.a.string.isRequired}),dispatch:h.a.func.isRequired,location:h.a.shape({pathname:h.a.string.isRequired})};class zi extends r.Component{constructor(e){super(e),Wi(this,"componentWillMount",()=>{const e=this.props.params.datasetID;this.getListOfEditions(),this.getDataset(e)}),Wi(this,"getDataset",e=>(this.setState({isFetchingDataset:!0}),ya.get(e).then(e=>(this.setState({isFetchingDataset:!1,dataset:this.mapDatasetToState(e)}),this.mapDatasetToState(e))).catch(t=>{switch(t.status){case 404:{const e={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}}console.error(`Error getting dataset (${e}):\n`,t),this.setState({isFetchingDataset:!1})}))),Wi(this,"mapDatasetToState",e=>{try{return{title:(e.current||e.next||e).title}}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error mapping dataset details to state:\n",e)}}),Wi(this,"getListOfEditions",()=>(this.setState({isFetchingEditions:!0}),Vi.getAll().then(e=>(this.setState({isFetchingEditions:!1,editions:this.mapEditionsToState(e.items)}),this.mapEditionsToState(e.items))).catch(e=>{switch(e.status){case 404:{const e={type:"warning",message:"No API route available for a list of datasets. You should still be able to use this page, or you can refresh.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get a list of datasets.",isDismissable:!0};En.add(e);break}}console.error("Error getting editions from recipe API:\n",e),this.setState({isFetchingEditions:!1})}))),Wi(this,"mapEditionsToState",e=>{try{const t=e.find(e=>e.output_instances[0].dataset_id===this.props.params.datasetID);return this.filterEditionsListFromRecipe(t)}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get editions. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting dataset details to state:\n",e)}}),Wi(this,"filterEditionsListFromRecipe",e=>{try{return e.output_instances[0].editions.map(e=>({id:e,name:e}))}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get editions. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting dataset details to state:\n",e)}}),Wi(this,"handleEditionSelection",e=>{const t=e.target.value;this.setState({selectedEdition:t})}),Wi(this,"handleCreateClick",()=>{this.props.dispatch(Object(Me.push)(`${this.props.location.pathname}/${this.state.selectedEdition}/instances`))}),Wi(this,"handleBackButton",()=>{const e=An.resolve("../");this.props.dispatch(Object(Me.push)(e))}),this.state={isFetchingDataset:!1,dataset:{},isFetchingEditions:!1,editions:[],selectedEdition:null}}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-9"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Create new edition"),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),a.a.createElement("div",{className:"grid__col-3"},a.a.createElement(Fn,{id:"editions",label:"Select an edition",contents:this.state.editions?this.state.editions:[],defaultOption:this.state.editions?"Select an option":"Loading editions...",selectedOption:this.state.selectedOption,onChange:this.handleEditionSelection}),a.a.createElement("button",{type:"button",className:"btn btn--positive",disabled:!this.state.selectedEdition,onClick:this.handleCreateClick},"Create edition"))))}}zi.propTypes=Yi;var Xi=zi;function Ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Gi={onCreateSuccess:h.a.func.isRequired};class Ki extends r.Component{constructor(e){super(e),Ji(this,"handleInputChange",e=>{const t=e.target.id,n={value:e.target.value,error:""},r={...this.state.newUser,[t]:n};this.setState({newUser:r})}),Ji(this,"handleUserTypeChange",e=>{const t=e.value,n={...this.state.newUser,type:t};this.setState({newUser:n})}),Ji(this,"handleSubmit",async e=>{e.preventDefault();const t=this.state.newUser;if(t.username.value.length)if(t.email.value.length)if(t.password.value.length){if(this.setState({isSubmitting:!0}),await this.createNewUser(this.state.newUser))return this.setState({newUser:this.blankNewUserDetails,isSubmitting:!1}),void this.props.onCreateSuccess({name:t.username.value,email:t.email.value});this.setState({isSubmitting:!1})}else{const e={...t.password,error:"You must enter a password"},n={...t,password:e};this.setState({newUser:n})}else{const e={...t.email,error:"You must enter a email"},n={...t,email:e};this.setState({newUser:n})}else{const e={...t.username,error:"You must enter a username"},n={...t,username:e};this.setState({newUser:n})}}),Ji(this,"createNewUser",async e=>{const t=this.mapUserDetailsPostBody(e),n=this.mapUserPasswordPostBody(e),r=this.mapUserPermissionPostBody(e);if(!(await this.postNewUserDetails(t)).error){if(!(await this.postNewUserPassword(n)).error)return!(await this.postNewUserPermissions(r)).error||void this.deleteErroredNewUser(e.email.value);this.deleteErroredNewUser(e.email.value)}}),Ji(this,"mapUserDetailsPostBody",e=>({name:e.username.value,email:e.email.value})),Ji(this,"mapUserPasswordPostBody",e=>({email:e.email.value,password:e.password.value})),Ji(this,"mapUserPermissionPostBody",e=>({email:e.email.value,admin:"admin"===e.type,editor:"publisher"===e.type})),Ji(this,"postNewUserDetails",e=>_n.create(e).then(e=>({response:e,error:null})).catch(t=>{switch(t.status){case 403:{const e={type:"warning",message:"You don't have permission to create users.",autoDismiss:5e3};En.add(e);break}case 404:{const e={type:"warning",message:"No API route available to create users.",autoDismiss:5e3};En.add(e);break}case 409:{const t={type:"warning",message:`User "${e.name}" already exists.`,autoDismiss:5e3};En.add(t);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to create a user.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to create a user.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to create a user.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to create a user.",isDismissable:!0};En.add(e);break}}return console.error("Error posting new user details:\n",t),{response:null,error:t}})),Ji(this,"postNewUserPassword",e=>_n.setPassword(e).then(e=>({response:e,error:null})).catch(e=>{switch(e.status){case 403:{const e={type:"warning",message:"You don't have permission to set users' password.",autoDismiss:5e3};En.add(e);break}case 404:{const e={type:"warning",message:"No API route available to set users' password.",autoDismiss:5e3};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to set users' password.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to set users' password.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to set users' password.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to set users' password.",isDismissable:!0};En.add(e);break}}return console.error("Error posting new user password:\n",e),{response:null,error:e}})),Ji(this,"postNewUserPermissions",e=>_n.setPermissions(e).then(e=>({response:e,error:null})).catch(e=>{switch(e.status){case 403:{const e={type:"warning",message:"You don't have permission to set users' permission.",autoDismiss:5e3};En.add(e);break}case 404:{const e={type:"warning",message:"No API route available to set users' permission.",autoDismiss:5e3};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to set users' permission.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to set users' permission.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to set users' permission.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to set users' permission.",isDismissable:!0};En.add(e);break}}return console.error("Error posting new user permissions:\n",e),{response:null,error:e}})),Ji(this,"deleteErroredNewUser",e=>{_n.remove(e).then(e=>({response:e,error:null})).catch(e=>(En.add({type:"warning",message:"An error has occurred, the user has been created but will not work",isDismissable:!0}),console.error("Error deleting errored user:\n",e),{response:null,error:e}))}),Ji(this,"render",()=>a.a.createElement("div",null,a.a.createElement("h1",null,"Create a user"),a.a.createElement("form",{name:"create-new-user",onSubmit:this.handleSubmit},a.a.createElement(Xn,{id:"username",label:"Username",type:"text",onChange:this.handleInputChange,value:this.state.newUser.username.value,error:this.state.newUser.username.error}),a.a.createElement(Xn,{id:"email",label:"Email",type:"email",onChange:this.handleInputChange,value:this.state.newUser.email.value,error:this.state.newUser.email.error}),a.a.createElement(Xn,{id:"password",label:"Password",type:"password",onChange:this.handleInputChange,value:this.state.newUser.password.value,error:this.state.newUser.password.error}),a.a.createElement(Rr,{radioData:[{id:"admin",value:"admin",label:"Admin"},{id:"publisher",value:"publisher",label:"Publisher"},{id:"viewer",value:"viewer",label:"Viewer"}],groupName:"user-type",legend:"User type",onChange:this.handleUserTypeChange,selectedValue:this.state.newUser.type,inline:!0}),a.a.createElement("button",{type:"submit",className:"btn btn--positive margin-top--1",disabled:this.state.isSubmitting},"Create user"),this.state.isSubmitting?a.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}):""))),this.state={newUser:{username:{value:"",error:""},email:{value:"",error:""},password:{value:"",error:""},type:"viewer"},isSubmitting:!1},this.blankNewUserDetails=this.state.newUser}}Ki.propTypes=Gi;var Qi=Ki;const Zi={rootPath:h.a.string.isRequired,dispatch:h.a.func.isRequired,children:h.a.element,params:h.a.shape({userID:h.a.string}).isRequired,loggedInUser:h.a.object,users:h.a.arrayOf(h.a.shape({})).isRequired};class es extends r.Component{constructor(e){super(e),this.state={isFetchingUsers:!1},this.handleUserSelection=this.handleUserSelection.bind(this),this.handleUserCreateSuccess=this.handleUserCreateSuccess.bind(this),this.isAdmin=Mn.isAdmin(this.props.loggedInUser)}componentWillMount(){return this.isAdmin||this.props.params.userID||this.props.dispatch(Object(Me.replace)(`${this.props.rootPath}/users/${this.props.loggedInUser.email}`)),this.getAllUsers()}getAllUsers(){return this.setState({isFetchingUsers:!0}),_n.getAll().then(e=>{const t=e.map(e=>this.mapUserToState(e));this.props.dispatch(Nt(t)),this.setState({isFetchingUsers:!1})}).catch(e=>{switch(this.setState({isFetchingUsers:!1}),e){case 404:{const e={type:"warning",message:"No API route available to get users.",autoDismiss:5e3};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get users. You may only be able to see previously loaded information.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get users. You may only be able to see previously loaded information.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get users. You may only be able to see previously loaded information.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get users. You may only be able to see previously loaded information.",isDismissable:!0};En.add(e);break}}console.error("Error getting all users:\n",e)})}mapUserToState(e){try{const t=e.email,n=[e.name,e.email],r={id:e.email};return{...e,id:t,columnValues:n,returnValue:r}}catch(e){const t={type:"warning",message:"Error mapping users to state",isDismissable:!0,autoDismiss:3e3};return En.add(t),console.error("Error mapping users to state: ",e),Zt.event(`Error mapping users to state:\n${JSON.stringify(e)}`,Zt.error(e)),!1}}handleUserSelection(e){this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/users/${e.id}`))}handleUserCreateSuccess(e){this.props.dispatch(Object(Me.push)(`${this.props.rootPath}/users/${e.email}`)),this.getAllUsers()}render(){return a.a.createElement("div",null,a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-4"},a.a.createElement("h1",null,"Select a user"),a.a.createElement(Or,{columns:[{heading:"User",width:"6"},{heading:"Email",width:"6"}],rows:this.props.users,isUpdating:this.state.isFetchingUsers,handleItemClick:this.handleUserSelection,activeRowID:this.props.params.userID})),a.a.createElement("div",{className:"grid__col-4"},this.isAdmin&&a.a.createElement(Qi,{onCreateSuccess:this.handleUserCreateSuccess}))),this.props.children)}}es.propTypes=Zi;var ts=Object(o.connect)(function(e){return{rootPath:e.state.rootPath,users:e.state.users.all,loggedInUser:e.state.user}})(es),ns=n(591),rs=n.n(ns);const as={isVisible:h.a.bool,onClose:h.a.func.isRequired,onChangePassword:h.a.func,name:h.a.string,email:h.a.string,isLoading:h.a.bool,hasTemporaryPassword:h.a.bool,role:h.a.oneOf(["ADMIN","EDITOR","VIEWER"]),errorFetchingUserDetails:h.a.bool,errorFetchingUserPermissions:h.a.bool,showChangePassword:h.a.bool,showFooter:h.a.bool};class is extends r.Component{constructor(e){super(e)}renderRole(){return"ADMIN"===this.props.role?a.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," is an ",a.a.createElement("strong",null,"admin")):"EDITOR"===this.props.role?a.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," is a ",a.a.createElement("strong",null,"publisher")):"VIEWER"===this.props.role?a.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," is a ",a.a.createElement("strong",null,"viewer")):this.props.role?(Zt.event(`Attempt to render an unknown user role for '${this.props.email}': '${this.props.role}'`,Zt.warn()),a.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," is a ",a.a.createElement("strong",null,this.props.role)," (unrecognised user type)")):(Zt.event(`Attempt to render role for user '${this.props.email}' but none passed in as prop`,Zt.warn()),a.a.createElement("p",{id:"user-role",className:"margin-bottom--1"},this.props.name," has no permissions"))}render(){return a.a.createElement("div",{className:"drawer__container"},a.a.createElement("div",{className:"drawer__heading"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--3 margin-bottom--2"},a.a.createElement("h2",{id:"user-name"},this.props.isLoading?"Loading user...":this.props.name||"[No name available]"),a.a.createElement("p",{id:"user-email"},this.props.email)))),this.props.showChangePassword&&a.a.createElement("div",{className:"drawer__banner"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 grid--align-start margin-top--1 margin-bottom--1"},a.a.createElement(ye,{className:"btn btn--primary",to:`${location.pathname}/change-password`},"Change password")))),a.a.createElement("div",{className:"drawer__body"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--1"},this.props.isLoading?a.a.createElement("div",{className:"grid grid--align-center margin-top--4"},a.a.createElement("div",{className:"loader loader--large loader--dark"})):a.a.createElement("div",null,this.props.errorFetchingUserDetails&&a.a.createElement("p",{className:"margin-bottom--1"},"Unable to show user's details"),this.props.errorFetchingUserPermissions&&a.a.createElement("p",{className:"margin-bottom--1"},"Unable to show user's permissions"),this.props.role&&this.renderRole(),this.props.hasTemporaryPassword&&a.a.createElement("p",{id:"user-temporary-password",className:"margin-bottom--1"},"Has a temporary password"))))),this.props.showFooter&&a.a.createElement("div",{className:"drawer__footer"},a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-8 margin-top--1 margin-bottom--1"},a.a.createElement("div",null,a.a.createElement(ye,{id:"user-delete",className:"btn btn--warning",to:`${location.pathname}/confirm-delete`},"Delete"),a.a.createElement("button",{id:"user-close",className:"btn margin-left--1",onClick:this.props.onClose},"Close"))))))}}is.propTypes=as;var ss=is;function os(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ls={dispatch:h.a.func.isRequired,params:h.a.shape({userID:h.a.string.isRequired}).isRequired,activeUser:h.a.shape({email:h.a.string,name:h.a.string,hasTemporaryPassword:h.a.bool,role:h.a.string}),loggedInUser:h.a.shape({email:h.a.string.isRequired,isAdmin:h.a.bool.isRequired}).isRequired,children:h.a.element,previousPathname:h.a.string,rootPath:h.a.string.isRequired,arrivedByRedirect:h.a.bool};class cs extends r.Component{constructor(e){super(e),os(this,"handleTransitionEntered",()=>{this.setState({isVisible:!0})}),os(this,"handleTransitionExit",()=>{this.setState({isVisible:!1,isAnimatable:!0})}),os(this,"handleTransitionExited",()=>{this.props.dispatch(Object(Me.push)(An.resolve("../")))}),os(this,"handleClose",()=>{this.setState({mountTransition:!1})}),this.state={mountTransition:!0,isVisible:!1,isAnimatable:e.previousPathname===`${e.rootPath}/users`&&!e.arrivedByRedirect,isFetchingUser:!1,isDeletingUser:!1,isChangingPassword:!1,errorFetchingUserDetails:!1,errorFetchingUserPermissions:!1}}componentWillMount(){this.updateStateWithUser()}componentDidUpdate(e){e.params.userID!==this.props.params.userID&&this.updateStateWithUser()}async updateStateWithUser(){this.setState({isFetchingUser:!0});const e=this.props.params.userID,t=await Promise.all([this.getUserDetails(e),this.getUserPermissions(e)]);if(this.setState({isFetchingUser:!1}),!t[0].error&&!t[1].error&&t[0].response&&t[1].response||(this.setState({errorFetchingUserDetails:!(!t[0].error&&t[0].response),errorFetchingUserPermissions:!(!t[1].error&&t[1].response)}),this.handleGetUserError(t[0].error,t[1].error,e)),!t[0].response&&!t[1].response)return;const n=this.mapUserResponsesToState(t[0].response,t[1].response);this.props.dispatch({type:Je,user:n})}getUserDetails(e){return new Promise(async(t,n)=>{_n.get(e).then(e=>{t({response:e,error:null})}).catch(e=>n(e))}).catch(t=>(console.error(`Error getting user '${e}'`,t),Zt.event(`Error getting user '${e}'`,Zt.error(t)),{response:null,error:t}))}getUserPermissions(e){return new Promise(async(t,n)=>{_n.getPermissions(e).then(e=>{e.email||n({status:404}),t({response:e,error:null})}).catch(e=>n(e))}).catch(t=>(console.error(`Error getting permissions for '${e}'`,t),Zt.event(`Error getting permissions for '${e}'`,Zt.error(t)),{response:null,error:t}))}mapUserResponsesToState(e,t){return{name:e?e.name:"",email:e?e.email||t.email:"",role:t?_n.getUserRole(t.admin,t.editor):"",hasTemporaryPassword:!!e&&e.temporaryPassword}}handleGetUserError(e,t){const n=e&&t,r=!!n&&e.status===t.status;let a={type:"warning",isDismissable:!0,message:""};if(n&&r){switch(e.status){case 401:break;case 403:a.message="Unable to get user's details because you don't have permission";break;case 404:a.message="Unable to get user's details because the user doesn't exist anymore, so you have been redirected to the users screen",this.props.dispatch(Object(Me.push)(An.resolve("../")));break;case"FETCH_ERR":a.message="Unable to get user's details due to a network error, please check your connection and try again";break;default:a.message="Unable to get user's details due to an unexpected error"}En.add(a)}else{if(n&&!r)return a.message="Unable to get user's details due to an unexpected error",void En.add(a);if(n)a.message="An error occured trying to get the user's details",En.add(a);else{switch(e?e.status:t.status){case 401:break;case 403:a.message="Unable to get all of the user's details because you don't have permission";break;case 404:a.message="Unable to get all of the user's details because the user doesn't exist anymore, so you have been redirected to the users screen",this.props.dispatch(Object(Me.push)(An.resolve("../")));break;case"FETCH_ERR":a.message="Unable to get all of the user's details due to a network error, please check your connection and try again";break;default:a.message="Unable to get all of the user's details due to an unexpected error"}En.add(a)}}}render(){return a.a.createElement("div",null,a.a.createElement(rs.a,{in:this.state.mountTransition,appear:!0,timeout:{enter:0},onEntered:this.handleTransitionEntered,onExit:this.handleTransitionExit,onExited:this.handleTransitionExited,addEndListener:(e,t)=>{e.addEventListener("transitionend",t,!1)}},a.a.createElement(la,{isVisible:this.state.isVisible,isAnimatable:this.state.isAnimatable},a.a.createElement(ss,{key:this.props.params.userID,name:this.props.activeUser.name,email:this.props.params.userID,onClose:this.handleClose,isLoading:this.state.isFetchingUser,isDeleting:this.state.isDeletingUser,showChangePassword:this.props.loggedInUser.isAdmin||this.props.params.userID===this.props.loggedInUser.email,hasTemporaryPassword:this.props.activeUser.hasTemporaryPassword,role:this.props.activeUser.role,errorFetchingUserDetails:this.state.errorFetchingUserDetails,errorFetchingUserPermissions:this.state.errorFetchingUserPermissions,showFooter:Mn.isAdmin(this.props.loggedInUser)}))),this.props.children)}}cs.propTypes=ls;var us=Object(o.connect)(function(e){return{activeUser:e.state.users.active,loggedInUser:e.state.user,arrivedByRedirect:"REPLACE"===e.routing.locationBeforeTransitions.action,previousPathname:e.routing.locationBeforeTransitions.previousPathname,rootPath:e.state.rootPath}})(cs);const ds={values:h.a.arrayOf(h.a.shape({title:h.a.string.isRequired,date:h.a.string,id:h.a.string.isRequired,instances:h.a.arrayOf(h.a.shape({date:h.a.string,edition:h.a.string.isRequired,version:h.a.oneOfType([h.a.string.isRequired,h.a.number.isRequired]),status:h.a.string}))}))};class ps extends r.Component{constructor(e){super(e)}renderDatasetInstances(e){return e.map((e,t)=>{if(void 0!==e)return a.a.createElement("div",{key:t,className:"grid simple-table__row"},a.a.createElement("div",{className:"grid__col-2"},a.a.createElement("span",null,a.a.createElement(ye,{to:e.url},"View"))),a.a.createElement("div",{className:"grid__col-3"},e.status),a.a.createElement("div",{className:"grid__col-3"},Ar()(e.date,"dd/mm/yy HH:MM")),a.a.createElement("div",{className:"grid__col-2"},e.edition),a.a.createElement("div",{className:"grid__col-1"},e.version))})}render(){return a.a.createElement("div",{className:"selectable-table"},a.a.createElement("div",{className:"selectable-table__heading"},"Title"),this.props.values.map((e,t)=>a.a.createElement("details",{key:t,className:"selectable-table__details"},a.a.createElement("summary",{className:"selectable-table__summary"},a.a.createElement("div",{className:"grid"},a.a.createElement("div",{className:"grid__col-10"},a.a.createElement("strong",null,e.title)))),a.a.createElement("div",null,a.a.createElement(ye,{className:"inline-block margin-bottom--1",to:e.datasetURL}," Edit dataset details"),e.instances.length>0&&a.a.createElement("div",null,a.a.createElement("div",{className:"grid simple-table__heading"},a.a.createElement("div",{className:"grid__col-2"}),a.a.createElement("div",{className:"grid__col-3"},"Status"),a.a.createElement("div",{className:"grid__col-3"},"Date last modified"),a.a.createElement("div",{className:"grid__col-2"},"Edition"),a.a.createElement("div",{className:"grid__col-1"},"Version")),this.renderDatasetInstances(e.instances))))))}}ps.propTypes=ds;const hs={dispatch:h.a.func.isRequired,rootPath:h.a.string.isRequired,collectionID:h.a.string.isRequired};class fs extends r.Component{constructor(e){super(e),this.state={tableValues:[],collections:[],isFetchingDatasets:!1},this.mapResponseToTableData=this.mapResponseToTableData.bind(this),this.handleInstanceURL=this.handleInstanceURL.bind(this)}componentWillMount(){this.setState({isFetchingDatasets:!0});const e=[ya.getNewVersionsAndCompletedInstances(),ya.getAll(),gr.getAll()];Promise.all(e).then(e=>{this.setState({isFetchingDatasets:!1,collections:e[2],tableValues:this.mapResponseToTableData(e[1].items,e[0].items,e[2],this.props.collectionID)}),this.props.dispatch(function(e){return{type:nt,allDatasets:e}}(e[1].items))}).catch(e=>{switch(e.status){case 403:{const e={type:"neutral",message:"You do not permission to view submitted datasets.",isDismissable:!0};En.add(e);break}case 404:{const e={type:"warning",message:"No API route available to get all submitted datasets",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get the submitted datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get the submitted datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to get the submitted datasets.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get the submitted datasets.",isDismissable:!0};En.add(e);break}}this.setState({isFetchingData:!1})}),Vi.getAll().then(e=>{this.props.dispatch(It(e.items))}).catch(e=>{En.add({type:"warning",message:"An unexpected error occurred when trying to get dataset recipes, so some functionality in Florence may not work as expected.",isDismissable:!0}),console.error("Error getting dataset recipes:\n",e)})}handleInstanceStatusMessage(e,t,n){if("completed"===e||"edition-confirmed"===e)return"New";if("associated"===e){const e=n.find(e=>e.id===t);return e?"In collection: "+e.name:"In an unrecognised collection"}}mapResponseToTableData(e,t,n,r){try{return e.map(e=>{e=e.current||e.next||e;const a=[];t.forEach(t=>{const i=t.links.dataset.id;i===e.id&&a.push({date:t.last_updated,isInstance:!(t.edition&&t.version),edition:t.edition||"-",version:t.version||"-",url:this.handleInstanceURL(t.state,r,i,t.id,t.edition,t.version),status:this.handleInstanceStatusMessage(t.state,t.collection_id,n)})});const i=r?`?collection=${r}`:"";return{title:e.title||e.id,id:e.id,instances:a,datasetURL:An.resolve(`datasets/${e.id}/metadata`)+i}})}catch(e){const t={type:"warning",message:"Error trying to map the datasets data to the table structure. Please refresh the page."};return En.add(t),console.error("Error mapping dataset API responses to view",e),[]}}handleInstanceURL(e,t,n,r,a,i){let s="";return s="completed"===e?An.resolve(`datasets/${n}/instances/${r}/metadata`):An.resolve(`datasets/${n}/editions/${a}/versions/${i}/metadata`),t&&(s=s+"?collection="+t),s}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-9"},a.a.createElement("ul",{className:"list list--neutral"},a.a.createElement("li",{className:"list__item grid grid--justify-space-between"},a.a.createElement("h1",null,"Select a dataset"))),a.a.createElement(ps,{values:this.state.tableValues})))}}fs.propTypes=hs;var ms=Object(o.connect)(function(e){return{rootPath:e.state.rootPath,collectionID:e.routing.locationBeforeTransitions.query.collection}})(fs);class gs{static create(e){const t={recipe:e};return Cn.post("/import/jobs",t,!0).then(e=>e)}static addFile(e,t,n){const r={alias_name:t,url:n};return Cn.put(`/import/jobs/${e}/files`,r,!0).then(e=>e)}static updateStatus(e,t){return e?Cn.put(`/import/jobs/${e}`,{state:t},!0).then(e=>e):(console.warn("No job ID given to update status for. Request cancelled"),Promise.reject())}static getAll(){return Cn.get("/import/jobs",!0).then(e=>e)}static getCompleted(){return Cn.get("/import/jobs?state=completed",!0).then(e=>e)}static get(e){return Cn.get(`/import/jobs/${e}`,!0).then(e=>e)}static getDimensions(e){return Cn.get(`/dataset/instances/${e}`,!0).then(e=>e.dimensions)}}const vs={title:h.a.string.isRequired,content:h.a.string.isRequired,marginBottom:h.a.string};class ys extends r.Component{constructor(e){super(e)}render(){return a.a.createElement("details",{className:this.props.marginBottom},a.a.createElement("summary",null,a.a.createElement("span",{className:"summary"},this.props.title)),a.a.createElement("div",{className:"panel"},a.a.createElement("p",null,this.props.content)))}}ys.propTypes=vs,ys.defaultProps={marginBottom:"margin-bottom--1"};const bs={dataset:h.a.shape({id:h.a.string.isRequired,alias:h.a.string.isRequired}),onNewVersionClick:h.a.func.isRequired,isLoading:h.a.bool};class Es extends r.Component{constructor(e){super(e)}shouldComponentUpdate(e){return e.isLoading!==this.props.isLoading}render(){return a.a.createElement("li",{className:"list__item list__item--separated grid grid--justify-space-between",key:this.props.dataset.id},this.props.dataset.alias,a.a.createElement("div",null,this.props.isLoading&&a.a.createElement("span",{className:"loader loader--dark"}),a.a.createElement("button",{className:"btn btn--primary","data-recipe-id":this.props.dataset.id,onClick:this.props.onNewVersionClick,disabled:this.props.isLoading},"Upload new version")))}}Es.propTypes=bs;var ws=Es;const Cs={datasets:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,alias:h.a.string.isRequired})),jobs:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,recipe:h.a.string.isRequired}))};class _s extends r.Component{constructor(e){super(e)}render(){return a.a.createElement("div",null,this.props.jobs.length>0?a.a.createElement("div",null,a.a.createElement("h3",{className:"text-right"},"Status"),a.a.createElement("ul",{className:"list list--neutral"},this.props.jobs.map(e=>{const t=this.props.datasets.find(t=>t.id===e.recipe);return t?a.a.createElement("li",{className:"list__item list__item--separated grid grid--justify-space-between",key:e.id},a.a.createElement(ye,{to:`${location.pathname}/${e.id}`},t.alias),a.a.createElement("span",null,e.state)):(console.warn(`Attempt to render job for an unrecognised recipe ID: "${e.recipe}"`),"")}))):a.a.createElement("p",null,"No dataset uploads in progress"))}}_s.propTypes=Cs;var Ss=_s;const Ds={dispatch:h.a.func.isRequired,recipes:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,alias:h.a.string})),jobs:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,recipe:h.a.string.isRequired}))};class Rs extends r.Component{constructor(e){super(e),this.state={isFetchingData:!1,disabledDataset:""},this.handleNewVersionClick=this.handleNewVersionClick.bind(this)}componentWillMount(){this.setState({isFetchingData:!0});const e=Vi.getAll(),t=gs.getAll();Promise.all([e,t]).then(e=>{this.props.dispatch(It(e[0].items)),this.props.dispatch(function(e){return{type:lt,allJobs:e}}(e[1])),this.setState({isFetchingData:!1})}).catch(e=>{switch(e.status){case 403:{const e={type:"warning",message:"You do not permission to view all datasets.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get all datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get all datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to get all datasets.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get all datasets.",isDismissable:!0};En.add(e);break}}this.setState({isFetchingData:!1})})}shouldComponentUpdate(e,t){return!(e.recipes.length>0&&!e.jobs&&!t.isFetchingData)}handleNewVersionClick(e){const t=e.target.getAttribute("data-recipe-id");this.setState({disabledDataset:t}),gs.create(t).then(e=>{this.props.dispatch(function(e){return{type:ut,job:e}}(e)),this.props.dispatch(Object(Me.push)(`${location.pathname}/${e.id}`))}).catch(e=>{switch(this.setState({disabledDataset:""}),e.status){case 403:{const e={type:"warning",message:"You do not have permission to upload a new version of this dataset.",isDismissable:!0};En.add(e);break}case 404:{const e={type:"warning",message:"This dataset was not recognised.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to create a new version of this dataset.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to create a new version of this dataset. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to create a new version of this dataset.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to create a new version of this dataset.",isDismissable:!0};En.add(e);break}}console.error("Error creating new import job: ",e)})}render(){return a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-5"},a.a.createElement("h1",null,"Upload a dataset"),this.state.isFetchingData&&a.a.createElement("div",{className:"grid--align-self-start"},a.a.createElement("div",{className:"loader loader--dark"})),this.props.recipes.length>0&&a.a.createElement("ul",{className:"list list--neutral"},this.props.recipes.map(e=>a.a.createElement(ws,{key:e.id,dataset:e,onNewVersionClick:this.handleNewVersionClick,isLoading:e.id===this.state.disabledDataset})))),a.a.createElement("div",{className:"grid__col-5 margin-top--5"},a.a.createElement("h2",{className:"margin-bottom--1"},"In progress"),a.a.createElement("div",{className:"margin-bottom--2"},this.state.isFetchingData&&a.a.createElement("div",{className:"grid--align-self-start"},a.a.createElement("div",{className:"loader loader--dark"})),!this.state.isFetchingData&&a.a.createElement(Ss,{jobs:this.props.jobs,datasets:this.props.recipes}))))}}Rs.propTypes=Ds;var ks=Object(o.connect)(function(e){return{recipes:e.state.datasets.recipes,jobs:e.state.datasets.jobs}})(Rs),Ts=n(592),xs=n.n(Ts);const Ns={label:h.a.string,id:h.a.string.isRequired,url:h.a.string,error:h.a.string,extension:h.a.string,accept:h.a.string,progress:h.a.number,onRetry:h.a.func};class Os extends r.Component{constructor(e){super(e),this.handleOnRetry=this.handleOnRetry.bind(this)}handleOnRetry(e){e.preventDefault(),this.props.onRetry(this.props.label)}renderInput(){return a.a.createElement("div",null,a.a.createElement("h2",null,this.props.label),"number"==typeof this.props.progress?a.a.createElement("div",{className:"margin-bottom--1"},a.a.createElement("p",null,this.props.label),a.a.createElement("p",null,"Progress: ",(this.props.progress>0?this.props.progress:1)+"%"),a.a.createElement("div",{className:"progress"},a.a.createElement("div",{className:"progress__bar"+(this.props.error?" progress__bar--error":""),style:{width:(this.props.progress>0?this.props.progress:1)+"%"}})),this.props.error&&a.a.createElement("div",null,a.a.createElement("div",{className:"progress__error"},this.props.error),a.a.createElement("a",{onClick:this.handleOnRetry,href:""},"Retry"))):a.a.createElement(Xn,{id:this.props.id,name:this.props.label,type:"file",accept:this.props.accept,error:this.props.error}))}renderLink(){return a.a.createElement("div",{className:"margin-bottom--2"},a.a.createElement("h2",{className:"margin-bottom--1"},this.props.label),a.a.createElement("a",{href:this.props.url,target:"_blank",rel:"noopener noreferrer"},this.props.url))}render(){return a.a.createElement("div",{className:"grid"},this.props.url&&!this.props.error?this.renderLink():"",!this.props.url&&a.a.createElement("div",{className:"grid__col-6 margin-bottom--1"},this.renderInput()))}}Os.propTypes=Ns;var Ps=Os;const Is={dispatch:h.a.func.isRequired,recipes:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,alias:h.a.string.isRequired})),jobs:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,recipe:h.a.string.isRequired})),params:h.a.shape({jobID:h.a.string}).isRequired};class As extends r.Component{constructor(e){super(e),this.state={isFetchingDataset:!1,activeDataset:null},this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleRetryClick=this.handleRetryClick.bind(this)}componentWillMount(){if(this.props.recipes&&0!==this.props.recipes.length){const e=this.props.jobs.find(e=>e.id===this.props.params.jobID),t=this.props.recipes.find(t=>t.id===e.recipe),n=this.mapAPIResponsesToState({recipe:t,job:e});if(!n){const e={type:"neutral",message:"This dataset was not recognised, so you've been redirected to the main screen",isDismissable:!0};return En.add(e),void this.props.dispatch(Object(Me.push)(An.resolve("../")))}this.setState({activeDataset:n})}else{this.setState({isFetchingDataset:!0});const e={};gs.get(this.props.params.jobID).then(t=>(e.job=t,Vi.get(t.recipe))).then(t=>{e.recipe=t;const n=this.mapAPIResponsesToState({recipe:e.recipe,job:e.job});this.setState({activeDataset:n,isFetchingDataset:!1})}).catch(e=>{switch(this.setState({isFetchingDataset:!1}),e.status){case 404:{const e={type:"neutral",message:`The job '${this.props.params.jobID}' was not recognised, so you've been redirected to the dataset upload screen.`,isDismissable:!0};En.add(e),this.props.dispatch(Object(Me.push)(An.resolve("../")));break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get this job.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get this job. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to get this job.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get this job.",isDismissable:!0};En.add(e);break}}console.error("Error getting job and recipe data: ",e)})}}componentDidMount(){this.state.activeDataset&&this.bindInputs()}componentDidUpdate(){this.state.activeDataset&&("completed"!==this.state.activeDataset.status||this.state.activeDataset.dimensions||gs.getDimensions(this.state.activeDataset.instanceID).then(e=>{const t={...this.state.activeDataset,dimensions:[]};e.map(e=>{t.dimensions.push(e.name)}),this.setState({activeDataset:t})}),this.bindInputs())}bindInputs(){document.querySelectorAll('input[type="file"]').forEach(e=>{const t=new xs.a({target:"/upload",chunkSize:5242880,query:{aliasName:""},forceChunkSize:!0,simultaneousUploads:1});t.assignBrowse(e),t.assignDrop(e),t.on("fileAdded",e=>{const n=e.container.name;t.opts.query.aliasName=n,t.upload();const r=this.state.activeDataset.files.map(e=>(e.alias_name===n&&(e.progress=0,e.error=null),e)),a={...this.state.activeDataset,files:r};this.setState({activeDataset:a})}),t.on("fileProgress",e=>{const t=Math.round(Number(100*e.progress())),n=this.state.activeDataset.files.map(n=>(n.alias_name===e.resumableObj.opts.query.aliasName&&(n.progress=t),n)),r={...this.state.activeDataset,files:n};this.setState({activeDataset:r})}),t.on("fileError",e=>{const t=this.state.activeDataset.files.map(t=>(t.alias_name===e.resumableObj.opts.query.aliasName&&(t.error="An error occurred whilst uploading this file."),t)),n={...this.state.activeDataset,files:t};console.error("Error uploading file to server"),this.setState({activeDataset:n})}),t.on("fileSuccess",e=>{const t=e.resumableObj.opts.query.aliasName;Cn.get(`/upload/${e.uniqueIdentifier}`).then(e=>{const n=this.state.activeDataset.files.map(n=>(n.alias_name===t&&(n.progress=null,n.url=e.url),n)),r={...this.state.activeDataset,files:n};this.setState({activeDataset:r}),this.addUploadedFileToJob(t,e.url)}).catch(e=>{const n=this.state.activeDataset.files.map(e=>(e.alias_name===t&&(e.error="An error occurred whilst uploading this file"),e)),r={...this.state.activeDataset,files:n};console.error("Error fetching uploaded file's URL: ",e),this.setState({activeDataset:r})})})})}mapAPIResponsesToState(e){const t=e.recipe,n=e.job,r=new Map;n.files.forEach(e=>{e.url&&r.set(e.alias_name,e.url)});const a=t.files.map(e=>({alias_name:e.description,url:r.get(e.description)})),i=t.output_instances.map((e,n)=>{return t.output_instances[n].editions}),s=t.output_instances.editions_override;return{recipeID:t.id,jobID:n.id,alias:t.alias,format:t.format,status:n.state,instanceID:n.links.instances?n.links.instances[0].id:"",files:a,editionsList:i,editionOverride:s}}addUploadedFileToJob(e,t){gs.addFile(this.state.activeDataset.jobID,e,t).then().catch(e=>{switch(e.status){case 400:{const e={type:"warning",message:"There was an error when trying to add this file to your job. Please fix any errors and attempt to re-upload it.",isDismissable:!0};En.add(e);break}case 404:{const e={type:"neutral",message:"This job was not recognised, another user may have deleted it.",isDismissable:!0};En.add(e);break}case 413:{const e={type:"warning",message:"An error occurred because this file was too big.",isDismissable:!0};En.add(e);break}case 415:{const e={type:"warning",message:"An error occurred because this file-type is not supported.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to upload this file.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to upload this file. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to upload this file.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to upload this file.",isDismissable:!0};En.add(e);break}}console.error(`Error adding file to job "${this.state.activeDataset.jobID}": `,e)})}handleFormSubmit(e){e.preventDefault();let t=[];for(var n=0;n<this.state.activeDataset.files.length;n++){const e=this.state.activeDataset.files[n];e.url||t.push(e.alias_name)}if(t.length>0){const e=this.state.activeDataset.files.map(e=>(t.indexOf(e.alias_name)>=0&&(e.error="You must upload this file before submitting to publishing"),e)),n={...this.state.activeDataset,files:e};this.setState({activeDataset:n})}else this.props.dispatch(Object(Me.push)(`${location.pathname}/metadata`))}handleRetryClick(e){const t=this.state.activeDataset.files.map(t=>(t.alias_name===e&&(t.progress=null,t.error=""),t)),n={...this.state.activeDataset,files:t};this.setState({activeDataset:n})}renderFileInputs(){if(this.state.activeDataset)return this.state.activeDataset.files.map((e,t)=>a.a.createElement(Ps,{label:e.alias_name,type:"file",id:"dataset-upload-"+t.toString(),key:t,accept:".xls, .xlsx, .csv",url:e.url||null,extension:e.extension||null,error:e.error||null,progress:e.progress>=0?e.progress:null,onRetry:this.handleRetryClick}))}renderSubmittedScreen(){return a.a.createElement("div",null,a.a.createElement("p",{className:"margin-bottom--2"},"Your files are being processed."),a.a.createElement("h2",{className:"margin-bottom--1"},"What happens now?"),a.a.createElement("ul",{className:"list margin-bottom--2"},a.a.createElement("li",{className:"list__item"},"Please ",a.a.createElement("a",{href:"mailto:publishing.support.team@ons.gov.uk"},"contact publishing")," to let them know your files have been submitted or if you have any questions."),a.a.createElement("li",{className:"list__item"},"The publishing team can prepare the dataset landing page which includes the files and associated metadata when the upload is complete.")))}renderCompletedScreen(){return a.a.createElement("div",null,a.a.createElement("p",{className:"margin-bottom--2"},"Your files have been processed and are available to the publishing team."),a.a.createElement("h2",{className:"margin-bottom--1"},"What happens now?"),a.a.createElement("ul",{className:"list margin-bottom--2"},a.a.createElement("li",{className:"list__item"},"Please ",a.a.createElement("a",{href:"mailto:publishing.support.team@ons.gov.uk"},"contact publishing")," to let them know your files have been submitted or if you have any questions."),a.a.createElement("li",{className:"list__item"},"The publishing team can prepare the dataset landing page which includes the files and associated metadata.")),a.a.createElement("h2",{className:"margin-bottom--1"},"Dimensions",this.state.activeDataset.dimensions&&this.state.activeDataset.dimensions.length>0&&a.a.createElement("span",null," (",this.state.activeDataset.dimensions.length,")")),a.a.createElement("div",{className:"margin-bottom--2"},this.state.activeDataset.dimensions?a.a.createElement("ul",{className:"list"},this.state.activeDataset.dimensions.map((e,t)=>a.a.createElement("li",{key:t,className:"list__item"},e))):a.a.createElement("p",null,"Dimensions are currently being processed. This could take some time.")))}renderDatasetState(){switch(this.state.activeDataset.status){case"created":return a.a.createElement("div",null,a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement(ye,{to:An.resolve("../")},"Back")),a.a.createElement("h1",{className:"margin-top--1"},"Upload new file(s)"),a.a.createElement("form",{onSubmit:this.handleFormSubmit},this.renderFileInputs(),a.a.createElement("button",{className:"btn btn--positive",type:"submit"},"Save and continue")));case"submitted":return a.a.createElement("div",null,a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement(ye,{to:An.resolve("../")},"Return")),a.a.createElement("h1",{className:"margin-top--1"},"Your dataset has been submitted"),this.renderSubmittedScreen());case"completed":return a.a.createElement("div",null,a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement(ye,{to:An.resolve("../")},"Return")),a.a.createElement("h1",{className:"margin-top--1"},"Your dataset upload is complete"),this.renderCompletedScreen());case"error":return a.a.createElement("div",null,a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement(ye,{to:An.resolve("../")},"Return")),a.a.createElement("h1",{className:"margin-top--1"},"An error has occurred"),a.a.createElement("p",{className:"margin-bottom--1"},"It appears as though as an error has occurred whilst submitting your dataset to publishing"),a.a.createElement("p",null,"Please ",a.a.createElement("a",{href:"mailto:publishing.support.team@ons.gov.uk"},"contact publishing support")," and inform them of this error"))}}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-6"},this.state.activeDataset&&this.renderDatasetState(),this.state.isFetchingDataset&&a.a.createElement("div",{className:"grid--align-center grid--align-self-center"},a.a.createElement("div",{className:"loader loader--large loader--dark"}))))}}As.propTypes=Is;var Ms=Object(o.connect)(function(e){return{datasets:e.state.datasets.all,jobs:e.state.datasets.jobs}})(As);const js={dispatch:h.a.func.isRequired,recipes:h.a.arrayOf(h.a.shape({})),job:h.a.object,params:h.a.shape({jobID:h.a.string.isRequired}).isRequired};class Ls extends r.Component{constructor(e){super(e),this.state={isFetchingData:!1,isSubmittingData:!1,selectedEdition:null,editionError:null},this.handleEditionChange=this.handleEditionChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}componentWillMount(){const e=[Promise.resolve(),Promise.resolve()];(0===this.props.recipes.length||mr()(this.props.job))&&this.setState({isFetchingData:!0}),0===this.props.recipes.length&&(e[0]=Vi.getAll()),(mr()(this.props.job)||this.props.job.id!==this.props.params.jobID)&&(e[1]=gs.get(this.props.params.jobID)),Promise.all(e).then(e=>{0===this.props.recipes.length&&this.props.dispatch(It(e[0].items)),(mr()(this.props.job)||this.props.job.id!==this.props.params.jobID)&&this.props.dispatch(function(e){return{type:ct,job:e}}(e[1])),this.setState({isFetchingData:!1})}).catch(e=>{switch(e.status){case 403:{const e={type:"warning",message:"You do not permission to view all datasets.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to get all datasets.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to get all datasets. Please check you internet connection and try again in a few moments.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to get all datasets.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get all datasets.",isDismissable:!0};En.add(e);break}}this.setState({isFetchingData:!1}),console.error("Error fetching all recipes",e)})}mapEditionsToSelect(){return this.props.recipes.find(e=>e.id===this.props.job.recipe).output_instances[0].editions.map(e=>({id:e,name:e}))}handleEditionChange(e){e.preventDefault(),this.setState({selectedEdition:e.target.value,editionError:null})}handleFormSubmit(e){e.preventDefault(),this.state.selectedEdition?(this.setState({isSubmittingData:!0}),ya.updateInstanceEdition(this.props.job.links.instances[0].id,this.state.selectedEdition).then(()=>gs.updateStatus(this.props.params.jobID,"submitted").then(()=>{const e={...this.state.activeDataset,status:"submitted"};this.setState({activeDataset:e})})).then(()=>{this.setState({isSubmittingData:!1}),this.props.dispatch(Object(Me.push)(An.resolve("../")))}).catch(e=>{switch(e.status){case 400:{const e={type:"warning",message:"There was a problem with the data you tried to submit. Please check the information, fix any errors and try again.",isDismissable:!0};En.add(e);break}case 404:{const e={type:"warning",message:`The job '${this.props.params.jobID}' was not recognised. Please check that it hasn't been submitted or deleted by someone else.`,isDismissable:!0};En.add(e);break}case 403:{const e={type:"warning",message:"You do not permission to submit this dataset to the publishing team.",isDismissable:!0};En.add(e);break}case"RESPONSE_ERR":{const e={type:"warning",message:"An error's occurred whilst trying to submit to the publishing team.",isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:"There's been a network error whilst trying to submit to the publishing team. Please check you internet connection and try again.",isDismissable:!0};En.add(e);break}case"UNEXPECTED_ERR":{const e={type:"warning",message:"An unexpected error has occurred whilst trying to submit to the publishing team.",isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to submit to the publishing team.",isDismissable:!0};En.add(e);break}}this.setState({isSubmittingData:!1}),console.error("Error trying to submit edition to publishing team",e)})):this.setState({editionError:"An edition must be selected"})}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-6"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement(ye,{to:An.resolve("../")},"Return")),a.a.createElement("h1",{className:"margin-top--1"},"Dataset upload details"),this.state.isFetchingData?a.a.createElement("div",{className:"loader loader--dark"}):a.a.createElement("form",{onSubmit:this.handleFormSubmit},a.a.createElement("p",{className:"margin-bottom--1"},"Last updated by ... on ",Ar()(this.props.job.last_updated,"HH:MM:ss dd/mm/yy")),a.a.createElement("div",{className:"grid__col-6"},a.a.createElement(Fn,{id:"editions",label:"Edition",contents:this.mapEditionsToSelect(),onChange:this.handleEditionChange,error:this.state.editionError})),a.a.createElement("button",{className:"btn btn--positive margin-top--2",disabled:this.state.isSubmittingData},"Submit to publishing"),this.state.isSubmittingData&&a.a.createElement("div",{className:"loader loader--centre loader--dark margin-left--1"}))))}}Ls.propTypes=js;var Fs=Object(o.connect)(function(e){return{recipes:e.state.datasets.recipes,job:e.state.datasets.activeJob}})(Ls);const Us={id:h.a.string,label:h.a.string,onChange:h.a.func,error:h.a.string,isChecked:h.a.bool,disabled:h.a.bool};class qs extends r.Component{constructor(e){super(e),this.state={isFocused:!1,value:!1},this.handleFocus=this.handleFocus.bind(this),this.handleChange=this.handleChange.bind(this)}componentWillMount(){this.props.isChecked&&this.setState({value:this.props.isChecked})}handleChange(e){const t=e.target.checked;this.setState({value:t}),this.props.onChange(t)}handleFocus(){this.state.isFocused?this.setState({isFocused:!1}):this.setState({isFocused:!0})}render(){return a.a.createElement("div",{className:"form__input"+(this.props.error?" form__input--error":"")},this.props.error&&a.a.createElement("div",{className:"error-msg"},this.props.error),a.a.createElement("div",{className:"checkbox"},a.a.createElement("input",{className:"checkbox__input",type:"checkbox",checked:this.state.value,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleFocus,disabled:this.props.disabled,id:this.props.id}),a.a.createElement("label",{htmlFor:this.props.id,className:"checkbox__label"},this.props.label)))}}qs.propTypes=Us;var $s=qs;const Bs={title:h.a.string,type:h.a.string,id:h.a.string,onEdit:h.a.func.isRequired,onDelete:h.a.func.isRequired,disabled:h.a.bool};class Hs extends r.Component{constructor(e){super(e),this.handleEditClick=this.handleEditClick.bind(this),this.handleDeleteClick=this.handleDeleteClick.bind(this)}handleEditClick(){this.props.onEdit(this.props.type,this.props.id)}handleDeleteClick(){this.props.onDelete(this.props.type,this.props.id)}render(){return a.a.createElement("li",{className:"card margin-bottom--1",key:this.props.id},a.a.createElement("div",{className:"card__body"},a.a.createElement("div",{className:"card__title"},this.props.title)),a.a.createElement("div",{className:"card__actions"},a.a.createElement("button",{disabled:this.props.disabled,type:"button",className:"btn btn--link",onClick:this.handleEditClick},"Edit"),a.a.createElement("button",{disabled:this.props.disabled,type:"button",className:"margin-left--1 btn btn--link",onClick:this.handleDeleteClick},"Delete")))}}Hs.propTypes=Bs;var Vs=Hs;const Ws={contents:h.a.arrayOf(h.a.shape({title:h.a.string,id:h.a.string})),type:h.a.string.isRequired,onEdit:h.a.func.isRequired,onDelete:h.a.func.isRequired,disabled:h.a.bool};class Ys extends r.Component{constructor(e){super(e)}render(){return a.a.createElement("div",null,a.a.createElement("ul",{className:"list--neutral margin-bottom--0"},this.props.contents.map(e=>a.a.createElement(Vs,{title:e.title,key:e.id,id:e.id,type:this.props.type,onEdit:this.props.onEdit,onDelete:this.props.onDelete,disabled:this.props.disabled}))))}}Ys.propTypes=Ws;var zs=Ys;const Xs={formTitle:h.a.string,titleLabel:h.a.string,titleInput:h.a.string,urlLabel:h.a.string,urlInput:h.a.string,descLabel:h.a.string,descInput:h.a.string,name:h.a.string.isRequired,isPosting:h.a.bool,onCancel:h.a.func.isRequired,onFormSubmit:h.a.func.isRequired,onFormInput:h.a.func.isRequired,titleError:h.a.string,urlError:h.a.string,descError:h.a.string,requiresDescription:h.a.bool,requiresURL:h.a.bool};class Js extends r.Component{constructor(e){super(e),this.state={formTitle:"",titleLabel:"",titleInput:"",urlLabel:"",urlInput:"",descLabel:"",descInput:""}}componentWillMount(){(this.props.urlInput||this.props.titleInput||this.props.descInput)&&this.setState({titleInput:this.props.titleInput,urlInput:this.props.urlInput,descInput:this.props.descInput,titleLabel:this.props.titleLabel,urlLabel:this.props.urlLabel,descLabel:this.props.descLabel,formTitle:this.props.formTitle})}render(){return a.a.createElement("form",{className:"form",onSubmit:this.props.onFormSubmit},a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,this.props.formTitle,":")),a.a.createElement("div",{className:"modal__body"},a.a.createElement(Xn,{type:"text",label:this.props.titleLabel,id:"add-related-content-title",name:"add-related-content-title",error:this.props.titleError,onChange:this.props.onFormInput,onCancel:this.props.onCancel,isFocused:!0,value:this.props.titleInput}),this.props.requiresURL&&a.a.createElement(Xn,{type:"text",label:this.props.urlLabel,error:this.props.urlError,id:"add-related-content-url",name:"add-related-content-url",value:this.props.urlInput,onChange:this.props.onFormInput,onCancel:this.props.onCancel}),this.props.requiresDescription&&a.a.createElement(Xn,{type:"textarea",label:this.props.descLabel,error:this.props.descError,id:"add-related-content-desc",name:"add-related-content-desc",value:this.props.descInput,onChange:this.props.onFormInput,onCancel:this.props.onCancel})),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{disabled:this.props.isPosting,className:"btn btn--primary btn--margin-right"},"Add"),a.a.createElement("button",{type:"button",disabled:this.props.isPosting,className:"btn",onClick:this.props.onCancel},"Cancel"),this.props.isPosting&&a.a.createElement("div",{className:"loader"})))}}Js.propTypes=Xs;var Gs=Js;function Ks(e={},t={},n,r,a){if(401===t.status||401===e.status)return!0;if(t.status&&e.status&&t.status!==e.status){const i={type:"warning",message:Qs(e,{},n,r,a),isDismissable:!0,autoDismiss:8e3},s={type:"warning",message:Qs({},t,n,r,a),isDismissable:!0,autoDismiss:8e3};return En.add(i),void En.add(s)}if(e.status||t.status){const i={type:"warning",message:Qs(e,t,n,r,a),isDismissable:!0,autoDismiss:8e3};return En.add(i),!0}return!1}function Qs(e,t,n,r,a){const i=function(e,t,n,r){const a=e.status,i=t.status;let s="the next state";return i&&n&&(s="review"),i&&r&&(s="approval"),i&&a?`submit for ${s} and save your metadata updates`:i&&!a?`submit for ${s}`:!i&&a?"save your metadata updates":void 0}(e,t,n,r);switch(t.status||e.status){case 400:return`Unable to ${i} due to invalid values being submitted. Please check your updates for any issues and try again`;case 403:return`Unable to ${i} because you do not have the correct permissions`;case 404:return`Unable to ${i} because this ${t.status?"collection ("+a+")":""}${t.status&&e.status?" and ":""}${e.status?"dataset":""} couldn't be found`;case"FETCH_ERR":return`Unable to ${i} due to a network issue. Please check your internet connection and try again`;default:return`Unable to ${i} due to an unexpected error`}}const Zs={areDisabled:h.a.bool,includeSaveLabels:h.a.bool,reviewState:h.a.string,userEmail:h.a.string.isRequired,lastEditedBy:h.a.string,onSubmit:h.a.func,onApprove:h.a.func,notInCollectionYet:h.a.bool};class eo extends r.Component{constructor(e){super(e)}renderSubmit(){return a.a.createElement("button",{id:"submit-for-review",type:"button",onClick:this.props.onSubmit,disabled:this.props.areDisabled,className:"btn btn--positive"},this.props.includeSaveLabels?"Save and submit for review":"Submit for review")}renderApprove(){return a.a.createElement("button",{id:"mark-as-reviewed",type:"button",onClick:this.props.onApprove,disabled:this.props.areDisabled,className:"btn btn--positive"},this.props.includeSaveLabels?"Save and submit for approval":"Submit for approval")}render(){return"reviewed"===this.props.reviewState?a.a.createElement("span",null):this.props.notInCollectionYet||"inProgress"===this.props.reviewState?this.renderSubmit():this.props.userEmail===this.props.lastEditedBy&&"complete"===this.props.reviewState?this.renderSubmit():this.props.userEmail!==this.props.lastEditedBy&&"complete"===this.props.reviewState?this.renderApprove():a.a.createElement("span",null)}}eo.propTypes=Zs;var to=eo;const no={params:h.a.shape({datasetID:h.a.string.isRequired}).isRequired,dispatch:h.a.func.isRequired,rootPath:h.a.string.isRequired,userEmail:h.a.string.isRequired,collectionID:h.a.string,router:h.a.shape({listenBefore:h.a.func.isRequired}).isRequired,datasets:h.a.arrayOf(h.a.shape({next:h.a.shape({title:h.a.string}),current:h.a.shape({title:h.a.string})})),dataset:h.a.shape({title:h.a.string,id:h.a.string,description:h.a.string,keywords:h.a.array,license:h.a.string,national_statistic:h.a.bool,collection_id:h.a.string,contacts:h.a.arrayOf(h.a.shape({name:h.a.string,email:h.a.string,telephone:h.a.string})),qmi:h.a.shape({href:h.a.string}),related_datasets:h.a.arrayOf(h.a.shape({href:h.a.string,title:h.a.string})),publications:h.a.arrayOf(h.a.shape({href:h.a.string,title:h.a.string})),methodologies:h.a.arrayOf(h.a.shape({href:h.a.string,title:h.a.string,description:h.a.string})),release_frequency:h.a.string,state:h.a.string,links:h.a.shape({latest_version:h.a.shape({href:h.a.string})}),reviewState:h.a.string,lastEditedBy:h.a.string})};class ro extends r.Component{constructor(e){super(e),this.state={isFetchingDataset:!1,isFetchingCollectionData:!1,isReadOnly:!1,isSavingData:!1,hasChanges:!1,error:null,showModal:!1,modalType:"",title:"",description:"",relatedBulletins:[],relatedQMI:"",relatedLinks:[],relatedMethodologies:[],keywords:"",titleInput:"",urlInput:"",descInput:"",editKey:"",contactName:"",contactEmail:"",contactPhone:"",releaseFrequency:"",isNationalStat:!1,titleError:"",urlError:"",descError:"",latestVersion:"",status:"",license:"",nextRelease:""},this.handleSelectChange=this.handleSelectChange.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleToggleChange=this.handleToggleChange.bind(this),this.handleBackButton=this.handleBackButton.bind(this),this.handleModalSubmit=this.handleModalSubmit.bind(this),this.handleRelatedContentCancel=this.handleRelatedContentCancel.bind(this),this.handleRelatedContentSubmit=this.handleRelatedContentSubmit.bind(this),this.handleSave=this.handleSave.bind(this),this.handleSaveAndSubmitForReview=this.handleSaveAndSubmitForReview.bind(this),this.handleSaveAndMarkAsReviewed=this.handleSaveAndMarkAsReviewed.bind(this),this.handleAddRelatedClick=this.handleAddRelatedClick.bind(this),this.handleDeleteRelatedClick=this.handleDeleteRelatedClick.bind(this),this.handleEditRelatedClick=this.handleEditRelatedClick.bind(this),this.editRelatedLink=this.editRelatedLink.bind(this)}componentWillMount(){this.removeRouteListener=this.props.router.listenBefore((e,t)=>this.handleRouteChange(e,t)),this.setState({isFetchingDataset:!0}),ya.get(this.props.params.datasetID).then(e=>{const t=e.next||e.current;if(this.props.dispatch(Ot(t)),!this.props.collectionID){this.setState({isReadOnly:!0});const e={type:"neutral",message:"You are not in a collection, so cannot edit this dataset.",isDismissable:!0};En.add(e),sr.add(rr.runtimeWarning,{message:`Attempt to edit/view dataset (${this.props.params.datasetID}) without being in collection.`}),console.warn(`Attempt to edit/view dataset (${this.props.params.datasetID}) without being in collection.`)}if(this.props.collectionID&&t.collection_id&&this.props.collectionID!==t.collection_id){this.setState({isReadOnly:!0});const e={type:"neutral",message:"This dataset is already in a different collection, so can't be edited.",isDismissable:!0};En.add(e),sr.add(rr.runtimeWarning,{message:`Attempt to edit/view dataset that is already in collection '${t.collection_id}' but current collection is '${this.props.collectionID}'`}),console.warn("Dataset is already in collection '"+t.collection_id+"'")}if(this.props.dataset.collection_id&&this.props.collectionID&&this.updateReviewStateData(),this.setState({latestVersion:t.links.latest_version?t.links.latest_version.href:"",status:t.state}),t&&t.title&&this.setState({title:t.title}),t&&t.next_release&&this.setState({nextRelease:t.next_release}),t&&t.description&&this.setState({description:t.description}),t&&t.license&&this.setState({license:t.license}),t&&t.release_frequency&&this.setState({releaseFrequency:t.release_frequency}),t&&t.national_statistic&&this.setState({isNationalStat:t.national_statistic}),t.keywords&&t.keywords.length>0&&this.setState({keywords:t.keywords.join(", ")}),t.contacts&&t.contacts.length>0){const e=t.contacts[0];this.setState({contactName:e.name,contactEmail:e.email,contactPhone:e.telephone})}if(t.qmi&&""!==t.qmi.href&&this.setState({relatedQMI:t.qmi.href}),t.publications&&t.publications.length>0){const e=t.publications.map(e=>({title:e.title,href:e.href,key:Ht()()}));this.setState({relatedBulletins:e})}if(t.related_datasets&&t.related_datasets.length>0){const e=t.related_datasets.map(e=>({title:e.title,href:e.href,key:Ht()()}));this.setState({relatedLinks:e})}if(t.methodologies&&t.methodologies.length>0){const e=t.methodologies.map(e=>({title:e.title,href:e.href,description:e.description,key:Ht()()}));this.setState({relatedMethodologies:e})}this.setState({isFetchingDataset:!1})}).catch(e=>{switch(this.setState({isFetchingDataset:!1,isReadOnly:!0}),e.status){case 403:{const e={type:"info",message:"You do not permission to view this dataset",isDismissable:!0};En.add(e);break}case 404:{const e={type:"info",message:`Dataset ID '${this.props.params.datasetID}' was not recognised. You've been redirected to the datasets home screen`,isDismissable:!0};En.add(e);const t=An.resolve("/datasets"+(this.props.collectionID?"?collection="+this.props.collectionID:""));this.props.dispatch(Object(Me.push)(t));break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get this dataset",isDismissable:!0};En.add(e);break}}sr.add(rr.unexpectedRuntimeError,{message:"Error getting dataset "+this.props.params.datasetID+". Error: "+JSON.stringify(e)}),console.error("Error has occurred:\n",e)})}shouldComponentUpdate(e,t){return!t.isFetchingDataset&&(!this.props.dataset||null!==e.dataset)}componentWillUnmount(){this.removeRouteListener()}handleRouteChange(e,t){e.pathname!==An.resolve("preview")?(this.props.dispatch({type:at}),t()):t()}getCollection(e){return gr.get(e).then(e=>[null,e]).catch(e=>[e,null])}async updateReviewStateData(){this.setState({isFetchingCollectionData:!0});const e=this.props.collectionID,t=this.props.params.datasetID;try{const[n,r]=await this.getCollection(e);if(n)throw n;const a=r.datasets.find(e=>e.id===t);if(!a)return void this.setState({isFetchingCollectionData:!1});const i=a.lastEditedBy,s=a.state.charAt(0).toLowerCase()+a.state.slice(1);this.props.dispatch(Pt(i,s)),this.setState({isFetchingCollectionData:!1})}catch(t){switch(this.setState({isFetchingCollectionData:!1,isReadOnly:!0}),t.status){case 401:break;case 403:{const t={type:"neutral",message:`You do not permission to get details for collection '${e}'`,isDismissable:!0};En.add(t);break}case 404:{const t={type:"warning",message:`Could not find collection '${e}'`,isDismissable:!0};En.add(t);break}default:{const t={type:"warning",message:`An unexpected error's occurred whilst trying to get the collection '${e}'`,isDismissable:!0};En.add(t);break}}sr.add(rr.unexpectedRuntimeError,{message:"Unable to update metadata screen with version's review/edit status in collection "+e+". Error: "+JSON.stringify(t)}),console.error("Unable to update metadata screen with version's review/edit status in collection '"+e+"'",t)}}mapStateToAPIRequest(){return{contacts:[{email:this.state.contactEmail,name:this.state.contactName,telephone:this.state.contactPhone}],description:this.state.description,next_release:this.state.nextRelease,release_frequency:this.state.releaseFrequency,title:this.state.title,license:this.state.license,national_statistic:this.state.isNationalStat,keywords:this.splitKeywordsString(this.state.keywords),qmi:{href:this.state.relatedQMI},publications:[...this.state.relatedBulletins],methodologies:[...this.state.relatedMethodologies],related_datasets:[...this.state.relatedLinks]}}mapReleaseFreqToSelectOptions(){return["Weekly","Monthly","Annually"].map(e=>({id:e.toLowerCase(),name:e}))}handleSelectChange(e){this.setState({error:"",releaseFrequency:e.target.value,hasChanges:!0})}handleModalSubmit(e){e.preventDefault(),this.setState({showModal:!1});const t=An.resolve("/datasets"+(this.props.collectionID?"?collection="+this.props.collectionID:""));this.props.dispatch(Object(Me.push)(t))}handleToggleChange(e){this.setState({isNationalStat:e,hasChanges:!0})}handleInputChange(e){const t=e.target,n=t.value,r=t.name;this.state.hasChanges||this.setState({hasChanges:!0}),"add-related-content-title"===r?(this.setState({titleInput:n}),null!=this.state.titleError&&this.setState({titleError:null})):"add-related-content-url"===r?(this.setState({urlInput:n}),null!=this.state.urlError&&this.setState({urlError:null})):"add-related-content-desc"===r?(this.setState({descInput:n}),null!=this.state.descError&&this.setState({descError:null})):this.setState({[r]:n})}handleBackButton(){if(!this.state.isReadOnly&&this.state.hasChanges)return void this.setState({showModal:!0});const e=An.resolve("/datasets"+(this.props.collectionID?"?collection="+this.props.collectionID:""));this.props.dispatch(Object(Me.push)(e))}handleRelatedContentCancel(){this.setState({showModal:!1,modalType:"",editKey:"",urlInput:"",descInput:"",titleInput:""})}handleAddRelatedClick(e){this.setState({showModal:!0,modalType:e})}handleEditRelatedClick(e,t){let n;"bulletin"===e&&(n=this.state.relatedBulletins.find(e=>e.key===t)),"link"===e&&(n=this.state.relatedLinks.find(e=>e.key===t)),"methodologies"===e&&(n=this.state.relatedMethodologies.find(e=>e.key===t)),this.setState({showModal:!0,modalType:e,editKey:t,urlInput:n.href||"",titleInput:n.title||"",descInput:n.description||""})}handleDeleteRelatedClick(e,t){function n(e,t){return e.filter(e=>e.key!==t)}"bulletin"!==e?"link"!==e?"methodologies"!==e?(console.warn("Attempt to remove a related content type that is not recognised",e),sr.add(rr.unexpectedRuntimeError,`Attempt to remove a related content type that is not recognised: '${e}'`)):this.setState({relatedMethodologies:n(this.state.relatedMethodologies,t)}):this.setState({relatedLinks:n(this.state.relatedLinks,t)}):this.setState({relatedBulletins:n(this.state.relatedBulletins,t)})}editRelatedLink(e,t){const n=e=>e.map(e=>e.key!==t?e:{...e,title:this.state.titleInput,href:this.state.urlInput,description:this.state.descInput});"bulletin"!==e?"link"!==e?"methodologies"!==e?(console.warn("Attempt to edit a related content type that is not recognised",e),sr.add(rr.unexpectedRuntimeError,`Attempt to edit a related content type that is not recognised: '${e}'`)):this.setState({relatedMethodologies:n(this.state.relatedMethodologies)}):this.setState({relatedLinks:n(this.state.relatedLinks)}):this.setState({relatedBulletins:n(this.state.relatedBulletins)})}mapTypeContentsToCard(e){return e.map(e=>({title:e.title,id:e.key}))}splitKeywordsString(e){return e.split(",").map(e=>e.trim())}addDatasetToCollection(e){return gr.addDataset(this.props.collectionID,e).catch(t=>(sr.add(rr.unexpectedRuntimeError,{message:`Error adding dataset '${e}' to collection '${this.props.collectionID}'. Error: ${JSON.stringify(t)}`}),console.error(`Error adding dataset '${e}' to collection '${this.props.collectionID}'`,t),t))}updateDatasetReviewState(e,t,n){let r=Promise.resolve;return this.setState({isSavingData:!0}),t&&(r=gr.setDatasetStatusToComplete),n&&(r=gr.setDatasetStatusToReviewed),r(this.props.collectionID,e).catch(r=>(sr.add(rr.unexpectedRuntimeError,{message:`Error updating review state for dataset '${e}' to '${t?"Complete":""}${n?"Reviewed":""}' in collection '${this.props.collectionID}'. Error: ${JSON.stringify(r)}`}),console.error(`Error updating review state for dataset '${e}' to '${t?"Complete":""}${n?"Reviewed":""}' in collection '${this.props.collectionID}'`,r),r))}updateDatasetMetadata(e){return ya.updateDatasetMetadata(e,this.mapStateToAPIRequest()).catch(t=>(sr.add(rr.unexpectedRuntimeError,{message:`Error updating metadata for dataset '${e}'. Error: ${JSON.stringify(t)}`}),console.error(`Error updating metadata for dataset '${e}'`,t),t))}handleRelatedContentSubmit(e){if(e.preventDefault(),""==this.state.titleInput||""==this.state.urlInput)""==this.state.titleInput&&this.setState({titleError:"You must provide a title"}),""==this.state.urlInput&&this.setState({urlError:"You must provide a url"});else{if("bulletin"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("bulletin",this.state.editKey);else{const e=this.state.relatedBulletins.concat({title:this.state.titleInput,href:this.state.urlInput,key:Ht()()});this.setState({relatedBulletins:e})}else if("link"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("link",this.state.editKey);else{const e=this.state.relatedLinks.concat({title:this.state.titleInput,href:this.state.urlInput,key:Ht()()});this.setState({relatedLinks:e})}else if("methodologies"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("methodologies",this.state.editKey);else{const e=this.state.relatedMethodologies.concat({title:this.state.titleInput,href:this.state.urlInput,description:this.state.descInput,key:Ht()()});this.setState({relatedMethodologies:e})}this.setState({showModal:!1,modalType:"",editKey:"",titleInput:"",urlInput:"",descInput:""})}}async handleSave(e,t,n){const r=t||n,a=!this.props.dataset.collection_id&&!r;e.preventDefault(),this.setState({isSavingData:!0});const i=this.updateDatasetMetadata(this.props.params.datasetID);let s;const o=r?this.updateDatasetReviewState(this.props.params.datasetID,t,n):Promise.resolve();let l;const c=a?this.addDatasetToCollection(this.props.params.datasetID):Promise.resolve();let u;[s,l,u]=[await i,await o,await c];const d={isSavingData:!1};if(s||(d.hasChanges=!1),this.setState(d),Ks(s,l||u,t,n,this.props.collectionID),!u&&a)return this.props.dispatch((p=this.props.collectionID,{type:st,collectionID:p})),void this.props.dispatch(Pt(this.props.userEmail,"inProgress"));var p;l||!r||this.props.dispatch(Object(Me.push)(An.resolve(`/collections/${this.props.collectionID}`)))}handleSaveAndSubmitForReview(){this.handleSave(event,!0,!1)}handleSaveAndMarkAsReviewed(){this.handleSave(event,!1,!0)}renderReviewActions(){if(!this.state.isReadOnly&&!this.state.isFetchingCollectionData)return a.a.createElement(to,{areDisabled:this.state.isSavingData||this.state.isReadOnly,includeSaveLabels:!0,reviewState:this.props.dataset.reviewState,userEmail:this.props.userEmail,lastEditedBy:this.props.dataset.lastEditedBy,onSubmit:this.handleSaveAndSubmitForReview,onApprove:this.handleSaveAndMarkAsReviewed,notInCollectionYet:!this.props.dataset.collection_id})}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-4"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),a.a.createElement("p",{className:"margin-top--1"},"Dataset: ",a.a.createElement("strong",null,this.state.title||this.props.params.datasetID+" (title not available)")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Dataset details"),a.a.createElement("p",{className:"margin-bottom--1"},"This information is common across all editions of the dataset.",a.a.createElement("br",null),"Changing it will affect all previous editions."),this.state.isFetchingDataset?a.a.createElement("div",{className:"loader loader--dark"}):a.a.createElement("div",null,a.a.createElement("h2",{className:"margin-top--1 margin-bottom--1"},"Dataset"),a.a.createElement("div",{className:"margin-bottom--1"},a.a.createElement("strong",null,"ID"),a.a.createElement("span",{className:"inline-block margin-left--1"},this.props.params.datasetID||"Fetching dataset ID...")),a.a.createElement("form",{className:"margin-bottom--4",onSubmit:this.handleSave},a.a.createElement(Xn,{value:this.state.title,id:"title",label:"Title",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement(Xn,{value:this.state.description,type:"textarea",id:"description",label:"About this dataset",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement(Xn,{value:this.state.nextRelease,id:"nextRelease",label:"Next release date",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement(Xn,{value:this.state.keywords,id:"keywords",label:"Keywords",placeholder:"e.g. housing, inflation",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement("div",{className:"grid__col-6 margin-top--2"},a.a.createElement($s,{isChecked:this.state.isNationalStat,onChange:this.handleToggleChange,disabled:this.state.isReadOnly||this.state.isSavingData,label:"National statistic",id:"national-statistic"})),a.a.createElement("div",{className:"grid__col-6 margin-bottom--1"},a.a.createElement(Fn,{contents:this.mapReleaseFreqToSelectOptions(),selectedOption:this.state.releaseFrequency,onChange:this.handleSelectChange,error:this.state.error,label:"Release frequency",id:"release-frequency",disabled:this.state.isReadOnly||this.state.isSavingData})),a.a.createElement("h3",{className:"margin-bottom--1"},"Contact"),a.a.createElement(Xn,{value:this.state.contactName,id:"contactName",label:"Contact name",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement(Xn,{value:this.state.contactEmail,id:"contactEmail",label:"Contact email",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement(Xn,{value:this.state.contactPhone,id:"contactPhone",label:"Contact telephone",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement("h2",{className:"margin-top--2 margin-bottom--1"},"Related content"),a.a.createElement("div",{className:"margin-bottom--1"},a.a.createElement("p",null," These are common across all editions of the dataset. Changing them will affect all previous editions.")),a.a.createElement("div",{className:"margin-bottom--2 related-datasets"},a.a.createElement("h3",null," Related datasets "),a.a.createElement(zs,{contents:this.mapTypeContentsToCard(this.state.relatedLinks),type:"link",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement("button",{disabled:this.state.isReadOnly||this.state.isSavingData,type:"button",className:"btn btn--link",onClick:()=>{this.handleAddRelatedClick("link")}}," Add related link")),a.a.createElement("div",{className:"margin-bottom--2 related-documents"},a.a.createElement("h3",null," Bulletins, articles and compendia "),a.a.createElement(zs,{contents:this.mapTypeContentsToCard(this.state.relatedBulletins),type:"bulletin",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement("button",{disabled:this.state.isReadOnly||this.state.isSavingData,type:"button",className:"btn btn--link",onClick:()=>{this.handleAddRelatedClick("bulletin")}}," Add document")),a.a.createElement("div",{className:"margin-bottom--2"},a.a.createElement("h3",null," Quality and methodology information "),a.a.createElement("span",null,"Copy the QMI web address for the dataset and paste it here"),a.a.createElement(Xn,{value:this.state.relatedQMI,id:"relatedQMI",label:"",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData})),a.a.createElement("div",{className:"margin-bottom--2 related-methodologies"},a.a.createElement("h3",null," Methodologies "),a.a.createElement(zs,{contents:this.mapTypeContentsToCard(this.state.relatedMethodologies),type:"methodologies",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement("button",{disabled:this.state.isReadOnly||this.state.isSavingData,type:"button",className:"btn btn--link",onClick:()=>{this.handleAddRelatedClick("methodologies")}}," Add methodology")),a.a.createElement("div",{className:"margin-bottom--2"},a.a.createElement("h3",null," Usage information "),a.a.createElement("span",null,"State if the data is free for public use or if there are restrictions on usage.",a.a.createElement("br",null),"State what text the user should use to correctly cite the data."),a.a.createElement(Xn,{value:this.state.license,type:"textarea",id:"license",label:"",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData})),a.a.createElement("button",{id:"btn-save",type:"submit",className:"btn btn--primary margin-bottom--1",disabled:this.state.isReadOnly||this.state.isFetchingCollectionData||this.state.isSavingData},"Save"),a.a.createElement("span",{className:"margin-left--1"},this.renderReviewActions()),this.state.isSavingData&&a.a.createElement("div",{className:"loader loader--inline loader--dark margin-left--1"}),this.state.latestVersion&&a.a.createElement(ye,{className:"margin-left--1",to:An.resolve(`preview?collection=${this.props.collectionID}`,!this.props.collectionID)},"Preview")))),this.state.showModal&&a.a.createElement(Zn,{sizeClass:"grid__col-3"},this.state.modalType?a.a.createElement(Gs,{name:"related-content-modal",formTitle:"Add related content",titleLabel:"Page title",titleInput:this.state.titleInput,urlLabel:"Page URL",urlInput:this.state.urlInput,descLabel:"Description",descInput:this.state.descInput,onCancel:this.handleRelatedContentCancel,onFormInput:this.handleInputChange,onFormSubmit:this.handleRelatedContentSubmit,titleError:this.state.titleError,urlError:this.state.urlError,requiresDescription:"methodologies"===this.state.modalType,requiresURL:!0}):a.a.createElement("div",null,a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,"Warning!")),a.a.createElement("div",{className:"modal__body"},a.a.createElement("p",null,"You will lose any changes by going back without saving. "),a.a.createElement("br",null),a.a.createElement("p",null,'Click "Continue" to lose changes and go back to the previous page or click "Cancel" to stay on the current page.')),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{type:"button",className:"btn btn--primary btn--margin-right",onClick:this.handleModalSubmit},"Continue"),a.a.createElement("button",{type:"button",className:"btn",onClick:this.handleRelatedContentCancel},"Cancel")))))}}ro.propTypes=no;var ao=Object(o.connect)(function(e){return{rootPath:e.state.rootPath,userEmail:e.state.user.email,collectionID:e.routing.locationBeforeTransitions.query.collection,datasets:e.state.datasets.all,dataset:e.state.datasets.activeDataset}})(ro);const io={errors:h.a.arrayOf(h.a.string)};class so extends r.Component{constructor(e){super(e)}render(){return this.props.errors.length?a.a.createElement("div",{className:"error-summary",role:"alert","aria-labelledby":"error-summary-heading"},a.a.createElement("h2",{id:"error-summary-heading"},"Errors"),a.a.createElement("p",null,"Before saving please correct the following"),a.a.createElement("ul",{className:"error-summary__list"},this.props.errors.map((e,t)=>a.a.createElement("li",{key:t,className:"error-summary__list-item"},e)))):null}}so.propTypes=io;var oo=so;const lo={date:h.a.shape({onChange:h.a.func.isRequired,value:h.a.string,errorMsg:h.a.string}).isRequired,description:h.a.shape({onChange:h.a.func.isRequired,value:h.a.string,errorMsg:h.a.string}).isRequired,isCorrection:h.a.shape({onChange:h.a.func.isRequired,value:h.a.bool}).isRequired,onCancel:h.a.func.isRequired,onSave:h.a.func.isRequired,isEditing:h.a.bool};class co extends r.Component{constructor(e){super(e)}render(){return a.a.createElement(Zn,{sizeClass:"grid__col-lg-5 grid__col-md-8 grid__col-xs-10"},a.a.createElement("form",{onSubmit:this.props.onSave},a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,this.props.isEditing?"Edit":"Add"," alert")),a.a.createElement("div",{className:"modal__body"},a.a.createElement("div",{className:"grid__col-md-5 grid__col-sm-6 grid__col-sm-8"},a.a.createElement(Xn,{id:"alert-date",type:"datetime-local",value:this.props.date.value,error:this.props.date.errorMsg,label:"Date",onChange:this.props.date.onChange})),a.a.createElement(Xn,{type:"textarea",id:"alert-description",value:this.props.description.value,error:this.props.description.errorMsg,label:"Description",onChange:this.props.description.onChange}),a.a.createElement($s,{id:"alert-is-correction",onChange:this.props.isCorrection.onChange,isChecked:this.props.isCorrection.value,label:"Correction"})),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{className:"btn btn--primary",type:"submit"},"Save"),a.a.createElement("button",{className:"btn margin-left--1",type:"button",onClick:this.props.onCancel},"Cancel"))))}}co.propTypes=lo;var uo=co;const po={date:h.a.string,description:h.a.string,isCorrection:h.a.bool,onCancel:h.a.func.isRequired,onSave:h.a.func.isRequired,id:h.a.string};class ho extends r.Component{constructor(e){super(e),this.state={currentDate:"",newDate:{value:"",errorMsg:""},newDescription:{value:"",errorMsg:""},newID:"",newIsCorrectionBoolean:null},this.maximumAlertDate=Mr.format(Mr.addYear(10),"yyyy-mm-dd"),this.handleDateChange=this.handleDateChange.bind(this),this.handleDescriptionChange=this.handleDescriptionChange.bind(this),this.handleIsCorrectionChange=this.handleIsCorrectionChange.bind(this),this.handleSave=this.handleSave.bind(this)}componentWillMount(){this.props.id||this.setState({newID:Ht()()}),this.props.date?this.setState({currentDate:this.formatDateToInput(new Date(this.props.date))}):this.setState({currentDate:this.formatDateToInput(new Date)})}formatDateToInput(e){return Mr.format(e.toISOString(),"yyyy-mm-dd'T'HH:MM")}handleDateChange(e){this.setState({newDate:{value:e.target.value||"",errorMsg:""},currentDate:""})}handleDescriptionChange(e){this.setState({newDescription:{value:e.target.value||"",errorMsg:""}})}handleIsCorrectionChange(e){this.setState({newIsCorrectionBoolean:e})}handleSave(e){e.preventDefault();let t=!1,n={};if(this.state.newDate.value||this.state.currentDate||(n={...n,newDate:{...this.state.newDate,errorMsg:"A date and time must be chosen"}},t=!0),this.state.newDescription.value||this.props.description||(n={...n,newDescription:{...this.state.newDescription,errorMsg:"An alert must have a description"}},t=!0),t)return void this.setState(n);let r=this.props.isCorrection||!1;null!==this.state.newIsCorrectionBoolean&&(r=this.state.newIsCorrectionBoolean);const a={description:this.state.newDescription.value||this.props.description||"",date:new Date(this.state.newDate.value||this.state.currentDate).toISOString(),isCorrection:r,id:this.props.id||this.state.newID};this.props.onSave(a)}render(){return a.a.createElement(uo,{date:{value:this.state.newDate.value||this.state.currentDate,errorMsg:this.state.newDate.errorMsg,onChange:this.handleDateChange},description:{value:this.state.newDescription.value||this.props.description,errorMsg:this.state.newDescription.errorMsg,onChange:this.handleDescriptionChange},isCorrection:{value:this.state.newIsCorrectionBoolean||this.props.isCorrection,onChange:this.handleIsCorrectionChange},onSave:this.handleSave,onCancel:this.props.onCancel,isEditing:Boolean(this.props.date)||Boolean(this.props.description)})}}ho.propTypes=po;var fo=ho;const mo={onCancel:h.a.func.isRequired,onSave:h.a.func.isRequired,title:h.a.string,note:h.a.string,id:h.a.string.isRequired};class go extends r.Component{constructor(e){super(e),this.state={title:e.title,note:e.note,id:e.id||Ht()()},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e,t){this.setState({[e]:t.target.value})}handleSubmit(e){e.preventDefault(),this.props.onSave({id:this.state.id,title:this.state.title,note:this.state.note})}render(){return a.a.createElement(Zn,{sizeClass:"grid__col-lg-5 grid__col-md-8 grid__col-xs-10"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,"Usage note:")),a.a.createElement("div",{className:"modal__body"},a.a.createElement(Xn,{id:"usage-note-title",label:"Title",value:this.state.title,onChange:e=>this.handleChange("title",e)}),a.a.createElement(Xn,{id:"usage-note-description",label:"Note",value:this.state.note,onChange:e=>this.handleChange("note",e),type:"textarea"})),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{className:"btn btn--primary",type:"submit"},"Save"),a.a.createElement("button",{className:"btn margin-left--1",type:"button",onClick:this.props.onCancel},"Cancel"))))}}go.propTypes=mo;var vo=go;const yo={dispatch:h.a.func.isRequired,rootPath:h.a.string.isRequired,userEmail:h.a.string.isRequired,collectionID:h.a.string.isRequired,router:h.a.shape({listenBefore:h.a.func.isRequired}).isRequired,location:h.a.shape({query:h.a.shape({collection:h.a.string}).isRequired}).isRequired,params:h.a.shape({datasetID:h.a.string.isRequired,instanceID:h.a.string,edition:h.a.string,version:h.a.string}).isRequired,recipes:h.a.arrayOf(h.a.shape({output_instances:h.a.arrayOf(h.a.shape({editions:h.a.arrayOf(h.a.string).isRequired,id:h.a.string}))})),dataset:h.a.shape({title:h.a.string,collection_id:h.a.string}),instance:h.a.shape({edition:h.a.string,version:h.a.number,release_date:h.a.string,state:h.a.string,id:h.a.string,usage_notes:h.a.arrayOf(h.a.shape({note:h.a.string,title:h.a.string})),dimensions:h.a.arrayOf(h.a.object),alerts:h.a.arrayOf(h.a.object),latest_changes:h.a.arrayOf(h.a.object)}),version:h.a.shape({edition:h.a.string,state:h.a.string,version:h.a.number,dimensions:h.a.arrayOf(h.a.object),release_date:h.a.string,id:h.a.string,usage_notes:h.a.arrayOf(h.a.shape({note:h.a.string,title:h.a.string})),alerts:h.a.arrayOf(h.a.object),latest_changes:h.a.arrayOf(h.a.object),lastEditedBy:h.a.string,reviewState:h.a.string}),isInstance:h.a.string};class bo extends r.Component{constructor(e){super(e),this.state={isFetchingData:!1,isSavingData:!1,isReadOnly:!1,isFetchingCollectionData:!1,isFetchingDimensionsData:!1,isInstance:null,hasChanges:!1,edition:null,title:null,releaseDate:"",releaseDateError:"",dimensions:[],versionID:"",showModal:!1,modalType:"",modalTitle:"",alerts:[],changes:[],editKey:"",titleInput:"",descInput:"",checkboxInput:!1,formErrors:[],usageNotes:[]},this.handleSelectChange=this.handleSelectChange.bind(this),this.handleRelatedContentSubmit=this.handleRelatedContentSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleReleaseDateChange=this.handleReleaseDateChange.bind(this),this.handleAddRelatedClick=this.handleAddRelatedClick.bind(this),this.handleDeleteRelatedClick=this.handleDeleteRelatedClick.bind(this),this.handleEditRelatedClick=this.handleEditRelatedClick.bind(this),this.editRelatedLink=this.editRelatedLink.bind(this),this.handleSave=this.handleSave.bind(this),this.handleSaveAndSubmitForReview=this.handleSaveAndSubmitForReview.bind(this),this.handleSaveAndMarkAsReviewed=this.handleSaveAndMarkAsReviewed.bind(this),this.handleRelatedContentCancel=this.handleRelatedContentCancel.bind(this),this.handleAlertSave=this.handleAlertSave.bind(this),this.handleUsageNoteSave=this.handleUsageNoteSave.bind(this),this.handleBackButton=this.handleBackButton.bind(this),this.populateDimensionInputs=this.populateDimensionInputs.bind(this)}componentWillMount(){this.removeRouteListener=this.props.router.listenBefore((e,t)=>this.handleRouteChange(e,t)),this.setState({isFetchingData:!0,activeCollectionID:this.props.collectionID});const e=[Promise.resolve(),Promise.resolve(),Promise.resolve()];if(!this.props.collectionID){this.setState({isReadOnly:!0});const e={type:"neutral",message:"You are not in a collection, so cannot edit this version.",isDismissable:!0};En.add(e),sr.add(rr.runtimeWarning,{message:`Attempt to edit/view version (${this.props.params.datasetID}) without being in collection.`}),console.warn(`Attempt to edit/view version (${this.props.params.datasetID}) without being in collection.`)}!this.props.params.instanceID&&this.props.collectionID&&this.updateReviewStateData(),this.props.params.instanceID?(e[1]=ya.getInstance(this.props.params.instanceID),this.setState({isInstance:!0})):(e[1]=ya.getVersion(this.props.params.datasetID,this.props.params.edition,this.props.params.version),this.setState({isInstance:!1})),e[0]=Vi.getAll(),e[2]=ya.get(this.props.params.datasetID),Promise.all(e).then(e=>{const t=e[2].next||e[2].current,n=e[1];if(0===this.props.recipes.length&&this.props.dispatch(It(e[0].items)),this.props.params.instanceID&&(this.props.dispatch(function(e){return{type:dt,instance:e}}(e[1])),this.setState({dimensions:this.props.instance.dimensions,edition:this.props.instance.edition}),this.populateDimensionInputs()),this.props.params.version){this.props.dispatch(At(e[1]));let t=[];this.props.version.alerts&&this.props.version.alerts.map(e=>{e.key=Ht()(),t.push(e)});let n=[];this.props.version.latest_changes&&this.props.version.latest_changes.map(e=>{e.key=Ht()(),n.push(e)});let r=[];this.props.version.usage_notes&&this.props.version.usage_notes.map(e=>{e.key=Ht()(),r.push(e)}),this.setState({dimensions:this.props.version.dimensions,edition:this.props.version.edition,state:this.props.version.state,versionID:this.props.version.id,alerts:t,changes:n,releaseDate:this.props.version.release_date?new Date(this.props.version.release_date):"",usageNotes:r})}if(this.props.collectionID&&n.collection_id&&this.props.collectionID!==n.collection_id){this.setState({isReadOnly:!0});const e={type:"neutral",message:"This dataset is already in a different collection, so can't be edited.",isDismissable:!0};En.add(e),sr.add(rr.runtimeWarning,{message:`Attempt to edit/view dataset version that is already in collection 'dataset.collection_id' but current collection is '${this.props.collectionID}'`}),console.warn(`Dataset version is already in collection '${t.collection_id}' but current collection is '${this.props.collectionID}'`)}this.setState({title:t.title,isFetchingData:!1})}).catch(e=>{switch(e.status){case 403:{const e={type:"neutral",message:"You do not permission to access the metadata for this dataset",isDismissable:!0};En.add(e);break}case 404:{const e={type:"neutral",message:`Dataset ID '${this.props.params.datasetID}' was not recognised. You've been redirected to the datasets home screen`,isDismissable:!0};En.add(e),this.props.dispatch(Object(Me.push)(An.resolve("/datasets")));break}default:{const e={type:"warning",message:"An unexpected error's occurred whilst trying to get this dataset",isDismissable:!0};En.add(e);break}}console.error("Error has occurred:\n",e)})}shouldComponentUpdate(e,t){return!t.isFetchingData&&(!this.props.version||null!==e.version)}componentWillUnmount(){this.removeRouteListener()}handleRouteChange(e,t){e.pathname!==An.resolve("preview")?(this.state.isInstance?this.props.dispatch({type:ht}):this.props.dispatch({type:mt}),t()):t()}populateDimensionInputs(){this.setState({isFetchingDimensionsData:!0}),ya.getLatestVersion(this.props.params.datasetID).then(e=>{e?this.setState({dimensions:e.dimensions.map(e=>({...e,hasChanged:!0})),isFetchingDimensionsData:!1}):this.setState({isFetchingDimensionsData:!1})}).catch(e=>{this.setState({isFetchingDimensionsData:!1}),this.handleRequestError("auto-populate the dimension metadata",e.status),console.error("Error getting latest published version to auto-populate dimensions inputs",e),sr.add(rr.unexpectedRuntimeError,{message:`Error getting latest published version to auto-populate dimensions inputs. Error: ${JSON.stringify(e)}`})})}async updateReviewStateData(){this.setState({isFetchingCollectionData:!0});const e=this.props.collectionID,t=this.props.params;try{const n=(await gr.get(e)).datasetVersions.find(e=>e.id===t.datasetID&&e.edition===t.edition&&e.version===t.version);if(!n)return void this.setState({isFetchingCollectionData:!1});const r=n.lastEditedBy,a=n.state.charAt(0).toLowerCase()+n.state.slice(1);this.props.dispatch(Mt(r,a)),this.setState({isFetchingCollectionData:!1})}catch(t){switch(this.setState({isFetchingCollectionData:!1,isReadOnly:!0}),t.status){case 401:break;case 403:{const t={type:"neutral",message:`You do not permission to get details for collection '${e}'`,isDismissable:!0};En.add(t);break}case 404:{const t={type:"warning",message:`Could not find collection '${e}'`,isDismissable:!0};En.add(t);break}default:{const t={type:"warning",message:`An unexpected error's occurred whilst trying to get the collection '${e}'`,isDismissable:!0};En.add(t);break}}sr.add(rr.unexpectedRuntimeError,{message:"Unable to update metadata screen with version's review/edit status in collection "+e+". Error: "+JSON.stringify(t)}),console.error("Unable to update metadata screen with version's review/edit status in collection "+e,t)}}handleRequestError(e,t){switch(t){case 401:break;case 400:{const t={type:"warning",message:`Unable to ${e} due to invalid values being submitted. Please check your updates for any issues and try again`,isDismissable:!0,autoDismiss:1e4};En.add(t);break}case 403:{const t={type:"neutral",message:`Unable to ${e} because you do not have the correct permissions`,isDismissable:!0,autoDismiss:1e4};En.add(t);break}case 404:{const t={type:"warning",message:`Unable to ${e} because this version couldn't be found`,isDismissable:!0,autoDismiss:1e4};En.add(t);break}case"FETCH_ERR":{const t={type:"warning",message:`Unable to ${e} due to a network issue. Please check your internet connection and try again`,isDismissable:!0,autoDismiss:1e4};En.add(t);break}default:{const t={type:"warning",message:`Unable to ${e} due to an unexpected error`,isDismissable:!0,autoDismiss:1e4};En.add(t);break}}}updateVersionReviewState(e,t,n,r,a){let i=Promise.resolve();return this.setState({isSavingData:!0}),r&&(i=gr.setDatasetVersionStatusToComplete),a&&(i=gr.setDatasetVersionStatusToReviewed),i(this.props.collectionID,e,t,n).catch(i=>(this.handleRequestError(`submit version for ${r?"review":""}${a?"approval":""}`,i.status),sr.add(rr.unexpectedRuntimeError,{message:`Error updating review state for version ${e}/editions/${t}/versions/${n} to '${r?"Complete":""}${a?"Reviewed":""}' in collection '${this.props.collectionID}'. Error: ${JSON.stringify(i)}`}),console.error(`Error updating review state for version ${e}/editions/${t}/versions/${n} to '${r?"Complete":""}${a?"Reviewed":""}' in collection '${this.props.collectionID}'`,i),i))}updateVersionMetadata(e,t,n,r){return ya.updateVersionMetadata(this.props.params.datasetID,this.props.params.edition,this.props.params.version,r).catch(e=>(this.handleRequestError("save version metadata updates",e.status),console.error(`Unable to save version metadata updates for '${this.state.versionID}'`,e),sr.add(rr.unexpectedRuntimeError,{message:`Unable to save version metadata updates for '${this.state.versionID}'. Error: ${JSON.stringify(e)}`}),e))}updateDimensions(e){return this.state.dimensions.some(e=>e.hasChanged)?ya.updateInstanceDimensions(e,this.state.dimensions).catch(t=>(this.handleRequestError("save updates to dimensions",t.status),console.error(`Unable to save version dimension updates for dimensions - '${e}'`,t),sr.add(rr.unexpectedRuntimeError,{message:`Unable to save version dimension updates for dimensions - '${e}'. Error: ${JSON.stringify(t)}`}),t)):Promise.resolve()}confirmEditionAndCreateVersion(e,t,n){return ya.confirmEditionAndCreateVersion(e,t,n).catch(t=>(this.handleRequestError("save version metadata updates",t.status),console.error(`Unable to confirm instance edition for '${e}'`,t),sr.add(rr.unexpectedRuntimeError,{message:`Unable to confirm instance edition for '${e}'. Error: ${JSON.stringify(t)}`}),t))}getNewVersion(e){return ya.getInstance(e).then(e=>[null,e]).catch(e=>{this.handleRequestError("get details for this version",e.status),console.error(`Unable to get version '${this.state.versionID}'`,e),sr.add(rr.unexpectedRuntimeError,{message:`Unable to get version '${this.state.versionID}'. Error: ${JSON.stringify(e)}`})})}addVersionToCollection(e,t,n){return gr.addDatasetVersion(this.props.collectionID,e,t,n).catch(r=>(this.handleRequestError("add version to this collection",r.status),console.error(`Unable to add version 'datasets/${e}/editions/${t}/versions/${n}' to the collection '${this.props.collectionID}'`,r),sr.add(rr.unexpectedRuntimeError,{message:`Unable to add version 'datasets/${e}/editions/${t}/versions/${n}' to the collection '${this.props.collectionID}'. Error: ${JSON.stringify(r)}`}),r))}async updateInstanceVersion(e,t,n){const r=t||n,a=this.props.params.datasetID;if(this.setState({isSavingData:!0}),this.state.isInstance){const[i,s]=[await this.confirmEditionAndCreateVersion(this.props.params.instanceID,this.state.selectedEdition,e),await this.updateDimensions(this.props.params.instanceID)];if(r&&i&&this.handleRequestError(`submit version for ${t?"review":""}${n?"approval":""}`,void 0),s&&i)return void this.setState({isSavingData:!1});if(i)return void this.setState({isSavingData:!1});const[o,l]=await this.getNewVersion(this.props.params.instanceID);if(o)return void this.setState({isSavingData:!1});const c=l.edition,u=l.version;if(this.state.isInstance&&!r){return await this.addVersionToCollection(a,c,u)?void this.setState({isSavingData:!1}):void this.props.dispatch(Object(Me.push)(An.resolve(`/datasets/${a}/editions/${c}/versions/${u}/metadata?collection=${this.props.collectionID}`)))}if(!r)return void this.setState({isSavingData:!1});const d=await this.updateVersionReviewState(a,c,u,t,n);return d?(console.log("updateReviewStateErr: "+d),void this.setState({isSavingData:!1})):(this.setState({isSavingData:!1}),void this.props.dispatch(Object(Me.push)(An.resolve(`/collections/${this.props.collectionID}`))))}const i=this.props.params.edition,s=this.props.params.version,[o,l]=[await this.updateVersionMetadata(a,i,s,e),r?await this.updateVersionReviewState(a,i,s,t,n):await Promise.resolve(),await this.updateDimensions(this.state.versionID)];o?this.setState({isSavingData:!1}):l?this.setState({isSavingData:!1}):(this.setState({isSavingData:!1}),r&&this.props.dispatch(Object(Me.push)(An.resolve(`/collections/${this.props.collectionID}`))))}mapTypeContentsToCard(e,t){return"usageNotes"===t?e.map(e=>({title:e.title,id:e.key})):e.map(e=>({title:"alerts"===t?Mr.format(e.date,"dddd, dd/mm/yyyy h:MMTT"):e.name,id:e.key}))}mapEditionsToSelectOptions(){return this.props.recipes.find(e=>e.output_instances[0].dataset_id===this.props.params.datasetID).output_instances[0].editions.map(e=>({id:e,name:e}))}mapDimensionsToInputs(e){return e.map(e=>a.a.createElement("div",{key:e.id},a.a.createElement(Xn,{value:e.label?e.label:e.name.charAt(0).toUpperCase()+e.name.slice(1),id:e.name,name:"dimension-name",label:"Dimension title",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData||this.state.isFetchingDimensionsData}),a.a.createElement(Xn,{value:e.description,type:"textarea",id:e.name,name:"dimension-description",label:"Learn more (optional)",onChange:this.handleInputChange,disabled:this.state.isReadOnly||this.state.isSavingData||this.state.isFetchingDimensionsData})))}handleEditRelatedClick(e,t){let n,r={showModal:!0,modalType:e,editKey:t,hasChanges:!0};if("alerts"===e&&(n=this.state.alerts.find(e=>e.key===t),r={...r,titleInput:n.date,descInput:n.description,checkboxInput:!0}),"changes"===e&&(n=this.state.changes.find(e=>e.key===t),r={...r,titleInput:n.name,descInput:n.description}),"usageNotes"===e&&(n=this.state.usageNotes.find(e=>e.key===t),r={...r,titleInput:n.title,descInput:n.note}),!n)return console.error("Unable to find data for content item:",e,t),void sr.add(rr.runtimeWarning,{message:`Unable to find data for content item. Type: '${e}', key: '${t}'`});this.setState(r)}handleDeleteRelatedClick(e,t){function n(e,t){return e.filter(e=>e.key!==t)}"alerts"!==e?"changes"!==e?"usageNotes"!==e?(console.warn("Attempt to remove a related content type that is not recognised",e),sr.add(rr.unexpectedRuntimeError,`Attempt to remove a related content type that is not recognised: '${e}'`)):this.setState({usageNotes:n(this.state.usageNotes,t),hasChanges:!0}):this.setState({changes:n(this.state.changes,t),hasChanges:!0}):this.setState({alerts:n(this.state.alerts,t),hasChanges:!0})}editRelatedLink(e,t){const n=n=>n.map(n=>n.key!==t?n:"alerts"===e?{...n,date:this.state.titleInput,description:this.state.descInput,type:"alert",hasChanged:!0}:"changes"===e?{...n,name:this.state.titleInput,description:this.state.descInput,type:"summary of changes",hasChanged:!0}:void 0);"alerts"!==e?("changes"===e&&this.setState({changes:n(this.state.changes),hasChanges:!0}),console.warn("Attempt to edit a related content type that is not recognised",e),sr.add(rr.unexpectedRuntimeError,`Attempt to edit a related content type that is not recognised: '${e}'`)):this.setState({alerts:n(this.state.alerts),hasChanges:!0})}handleBackButton(){if(this.state.hasChanges)return void this.setState({showModal:!0});const e=An.resolve("/datasets"+(this.props.collectionID?"?collection="+this.props.collectionID:""));this.props.dispatch(Object(Me.push)(e))}handleRelatedContentCancel(){this.setState({showModal:!1,modalType:"",editKey:"",descInput:"",titleInput:""})}handleAddRelatedClick(e,t){this.setState({showModal:!0,modalType:e,modalTitle:t})}handleInputChange(e){const t=e.target,n=t.value,r=t.name,a=t.id;if("add-related-content-title"===r)this.setState({titleInput:n}),null!=this.state.titleError&&this.setState({titleError:null});else if("add-related-content-desc"===r)this.setState({descInput:n}),null!=this.state.descError&&this.setState({descError:null});else if("dimension-name"===r){let e;e=this.state.dimensions.map(e=>e.name===a?{...e,label:n,hasChanged:!0}:e),this.setState({dimensions:e})}else if("dimension-description"===r){let e;e=this.state.dimensions.map(e=>e.name===a?{...e,description:n,hasChanged:!0}:e),this.setState({dimensions:e})}else this.setState({[r]:n});this.state.hasChanges||this.setState({hasChanges:!0})}handleSelectChange(e){const t=e.target,n=t.id;let r=t.value;"default-option"===r&&(r=""),this.setState({[n]:r,hasChanges:!0})}handleReleaseDateChange(e){const t=e.target.value,n=t?new Date(t):"";this.setState({releaseDateError:"",releaseDate:n,hasChanges:!0})}handleRelatedContentSubmit(e){if(e.preventDefault(),""==this.state.titleInput||""==this.state.descInput)""==this.state.titleInput&&this.setState({titleError:"You must provide a value"}),""==this.state.descInput&&this.setState({descError:"You must provide a description"});else{if("alerts"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("alerts",this.state.editKey);else{const e=this.state.alerts.concat({date:this.state.titleInput,description:this.state.descInput,key:Ht()(),hasChanged:!0,type:"alert"});this.setState({alerts:e})}else if("changes"===this.state.modalType)if(""!=this.state.editKey)this.editRelatedLink("changes",this.state.editKey);else{const e=this.state.changes.concat({name:this.state.titleInput,description:this.state.descInput,key:Ht()(),hasChanged:!0,type:"summary of changes"});this.setState({changes:e})}this.setState({showModal:!1,modalType:"",editKey:"",titleInput:"",descInput:"",hasChanges:!0})}}handleUsageNoteSave(e){const t={showModal:!1,modalType:"",editKey:"",titleInput:"",descInput:"",checkboxInput:!1,hasChanges:!0};if(!this.state.usageNotes||0===this.state.usageNotes.length){const n=[{key:e.id,title:e.title,note:e.note,hasChanged:!0,type:"usageNotes"}];return void this.setState({...t,usageNotes:n})}if(this.state.usageNotes.some(t=>t.key===e.id)){const n=this.state.usageNotes.map(t=>t.key!==e.id?t:{...t,hasChanged:!0,title:e.title,note:e.note,type:"usageNotes"});return void this.setState({...t,usageNotes:n})}const n=[...this.state.usageNotes];n.push({key:e.id,title:e.title,note:e.note,hasChanged:!0,type:"usageNotes"}),this.setState({...t,usageNotes:n})}handleAlertSave(e){const t={showModal:!1,modalType:"",editKey:"",titleInput:"",descInput:"",checkboxInput:!1,hasChanges:!0};if(!this.state.alerts||0===this.state.alerts.length){const n=[{key:e.id,date:e.date,description:e.description,hasChanged:!0,type:e.isCorrection?"correction":""}];return void this.setState({...t,alerts:n})}if(this.state.alerts.some(t=>t.key===e.id)){const n=this.state.alerts.map(t=>t.key!==e.id?t:{...t,hasChanged:!0,date:e.date,description:e.description,type:e.isCorrection?"correction":""});return void this.setState({...t,alerts:n})}const n=[...this.state.alerts];n.push({key:e.id,date:e.date,description:e.description,hasChanged:!0,type:e.isCorrection?"correction":""}),this.setState({...t,alerts:n})}addErrorToSummary(e,t){return t.some(t=>t===e)?t:[...t,e]}removeErrorFromSummary(e,t){if(t.some(t=>t===e)){return t.filter(t=>t!==e)}return t}handleSave(e,t,n){e.preventDefault();let r=!1,a=this.state.formErrors;this.state.edition?a=this.removeErrorFromSummary("You must select an edition",a):(this.setState({editionError:"You must select an edition"}),a=this.addErrorToSummary("You must select an edition",a),r=!0),this.state.releaseDate?a=this.removeErrorFromSummary("You must add a release date",a):(this.setState({releaseDateError:"You must add a release date"}),a=this.addErrorToSummary("You must add a release date",a),r=!0),this.setState({formErrors:a}),a.length&&window.scrollTo(0,0);const i=this.state.alerts.filter(e=>e.hasChanged),s=this.state.changes.filter(e=>e.hasChanged);if(this.state.edition&&this.state.isInstance&&!r){const e={edition:this.state.edition,alerts:i,latest_changes:s,usage_notes:this.state.usageNotes};return this.state.releaseDate&&(e.release_date=this.state.releaseDate.toISOString()),void this.updateInstanceVersion(e,t,n)}this.state.isInstance||r||this.updateInstanceVersion({release_date:this.state.releaseDate.toISOString(),alerts:i,latest_changes:s,usage_notes:this.state.usageNotes},t,n)}handleSaveAndSubmitForReview(e){this.handleSave(e,!0,!1)}handleSaveAndMarkAsReviewed(e){this.handleSave(e,!1,!0)}renderReviewActions(){if(!this.props.instance&&!this.props.version)return;const e=this.state.isInstance?this.props.instance:this.props.version;return this.state.isReadOnly||this.state.isFetchingCollectionData?void 0:a.a.createElement(to,{areDisabled:this.state.isSavingData||this.state.isReadOnly,includeSaveLabels:!0,reviewState:e.reviewState,userEmail:this.props.userEmail,lastEditedBy:e.lastEditedBy,onSubmit:this.handleSaveAndSubmitForReview,onApprove:this.handleSaveAndMarkAsReviewed,notInCollectionYet:!e.collection_id})}renderModal(){if(!0===this.state.showModal)return"alerts"===this.state.modalType?a.a.createElement(fo,{date:this.state.titleInput,description:this.state.descInput,isCorrection:this.state.checkboxInput,onSave:this.handleAlertSave,onCancel:this.handleRelatedContentCancel,id:this.state.editKey}):"usageNotes"===this.state.modalType?a.a.createElement(vo,{title:this.state.titleInput,note:this.state.descInput,onSave:this.handleUsageNoteSave,onCancel:this.handleRelatedContentCancel,id:this.state.editKey}):this.state.modalType?a.a.createElement(Zn,{sizeClass:"grid__col-lg-5 grid__col-md-8 grid__col-xs-10"},a.a.createElement(Gs,{name:"related-content-modal",formTitle:this.state.modalTitle,titleInput:this.state.titleInput,descInput:this.state.descInput,titleLabel:"Name",descLabel:"Description",onCancel:this.handleRelatedContentCancel,onFormInput:this.handleInputChange,onFormSubmit:this.handleRelatedContentSubmit,titleError:this.state.titleError,descError:this.state.descError,requiresDescription:!0,requiresURL:!1})):a.a.createElement(Zn,{sizeClass:"grid__col-lg-5 grid__col-md-8 grid__col-xs-10"},a.a.createElement("div",null,a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,"Warning!")),a.a.createElement("div",{className:"modal__body"},a.a.createElement("p",null,"You will lose any changes by going back without saving. "),a.a.createElement("br",null),a.a.createElement("p",null,'Click "Continue" to lose changes and go back to the previous page or click "Cancel" to stay on the current page.')),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{type:"button",className:"btn btn--primary btn--margin-right",onClick:this.handleModalSubmit},"Continue"),a.a.createElement("button",{type:"button",className:"btn",onClick:this.handleRelatedContentCancel},"Cancel"))))}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-xs-10 grid__col-md-6 grid__col-lg-4"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Metadata"),a.a.createElement("p",null,"This information is specific to this new data and can be updated each time new data is added."),this.state.isFetchingData?a.a.createElement("div",{className:"margin-top--2"},a.a.createElement("div",{className:"loader loader--dark"})):a.a.createElement("div",{className:"padding-bottom--2"},a.a.createElement("h2",{className:"margin-top--1"},this.state.title||this.props.params.datasetID+" (title not available)"),a.a.createElement(oo,{errors:this.state.formErrors}),a.a.createElement("form",{onSubmit:this.handleSave},a.a.createElement("div",{className:"margin-bottom--2"},a.a.createElement("div",{className:"grid__col-6"},a.a.createElement(Fn,{id:"edition",label:"Edition",contents:this.mapEditionsToSelectOptions(),onChange:this.handleSelectChange,error:this.state.editionError,selectedOption:this.state.edition,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement(Xn,{id:"release_date",label:"Release date",type:"date",value:this.state.releaseDate&&this.state.releaseDate.toISOString().substring(0,10),onChange:this.handleReleaseDateChange,error:this.state.releaseDateError,selectedOption:this.state.edition,disabled:this.state.isReadOnly||this.state.isSavingData})),a.a.createElement("div",{className:"grid grid--justify-space-between"},a.a.createElement("h2",{className:"inline-block"}," In this dataset "),a.a.createElement("div",null,a.a.createElement("button",{onClick:this.populateDimensionInputs,className:"btn btn--primary margin-left--1",type:"button"},"Fill from latest version"))),this.mapDimensionsToInputs(this.state.dimensions),a.a.createElement("div",{className:"margin-bottom--1"},a.a.createElement("h2",{className:"margin-top--2 margin-bottom--1"},"What's changed"),a.a.createElement("p",null,"The information below can change with each edition/version."),a.a.createElement("div",{className:"margin-bottom--1"},a.a.createElement("h3",{className:"margin-top--1 margin-bottom--1"},"Alerts and corrections"),a.a.createElement(zs,{contents:this.mapTypeContentsToCard(this.state.alerts,"alerts"),type:"alerts",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick,disabled:this.state.isReadOnly||this.state.isSavingData}),a.a.createElement("button",{disabled:this.state.isReadOnly||this.state.isSavingData,type:"button",className:"btn btn--link",onClick:()=>{this.handleAddRelatedClick("alerts")}},"Add an alert")),a.a.createElement("div",{className:"margin-bottom--1"},a.a.createElement("h3",{className:"margin-top--1 margin-bottom--1"},"Summary of changes"),a.a.createElement(zs,{contents:this.mapTypeContentsToCard(this.state.changes,"changes"),type:"changes",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick}),a.a.createElement("button",{disabled:this.state.isSavingData||this.state.isReadOnly,type:"button",className:"btn btn--link",onClick:()=>{this.handleAddRelatedClick("changes","Add a change")}},"Add change"))),a.a.createElement("div",{className:"margin-bottom--1"},a.a.createElement("h2",{className:"margin-top--2 margin-bottom--1"},"Usage notes"),a.a.createElement(zs,{contents:this.mapTypeContentsToCard(this.state.usageNotes,"usageNotes"),type:"usageNotes",onEdit:this.handleEditRelatedClick,onDelete:this.handleDeleteRelatedClick}),a.a.createElement("button",{disabled:this.state.isSavingData||this.state.isReadOnly,type:"button",className:"btn btn--link",onClick:()=>{this.handleAddRelatedClick("usageNotes","Add a usage note")}},"Add usage note"))),a.a.createElement("button",{type:"submit",className:"btn btn--primary margin-bottom--1",disabled:this.state.isReadOnly||this.state.isFetchingCollectionData||this.state.isSavingData},"Save"),a.a.createElement("span",{className:"margin-left--1"},this.renderReviewActions()),this.state.isSavingData&&a.a.createElement("div",{className:"loader loader--dark loader--inline margin-left--1"}),!this.state.isInstance&&a.a.createElement(ye,{className:"margin-left--1",to:An.resolve(`preview?collection=${this.props.collectionID}`,!this.props.collectionID)},"Preview")))),!0===this.state.showModal&&this.renderModal())}}bo.propTypes=yo;var Eo=Object(o.connect)(function(e){return{rootPath:e.state.rootPath,userEmail:e.state.user.email,collectionID:e.routing.locationBeforeTransitions.query.collection,instance:e.state.datasets.activeInstance,version:e.state.datasets.activeVersion,recipes:e.state.datasets.recipes,dataset:e.state.datasets.activeDataset}})(bo);const wo={children:h.a.node,created:h.a.string.isRequired,type:h.a.string.isRequired,location:h.a.string.isRequired,instanceID:h.a.string.isRequired,isFailure:h.a.bool};class Co extends r.Component{constructor(e){super(e)}render(){const e=new Date(this.props.created),t=Ar()(e,"HH:MM:ss.L, ddd d mmm yyyy");return a.a.createElement("div",{className:"log"+(this.props.isFailure?" log--failure":"")},a.a.createElement("div",{className:"log__type"+(this.props.isFailure?" log__type--failure":"")},this.props.type.replace("_"," ").toLowerCase()),a.a.createElement("div",{className:"log__date"},"Logged: ",t),a.a.createElement("div",null,"Location: ",this.props.location),a.a.createElement("div",null,"Session ID: ",this.props.instanceID),this.props.children)}}Co.propTypes=wo;var _o=Co;const So={children:h.a.node,created:h.a.string.isRequired,type:h.a.string.isRequired,location:h.a.string.isRequired,instanceID:h.a.string.isRequired,payload:h.a.shape({pathname:h.a.string,search:h.a.string})};class Do extends r.Component{constructor(e){super(e)}render(){return a.a.createElement(_o,this.props,a.a.createElement("div",null,"Routed to: ",this.props.payload.pathname,this.props.payload.search))}}Do.propTypes=So;var Ro=Do;const ko={children:h.a.node,created:h.a.string.isRequired,type:h.a.string.isRequired,location:h.a.string.isRequired,instanceID:h.a.string.isRequired,payload:h.a.shape({status:h.a.number,message:h.a.string,URI:h.a.string,method:h.a.string,retryCount:h.a.number,willRetry:h.a.bool})};class To extends r.Component{constructor(e){super(e)}render(){return a.a.createElement(_o,this.props,this.props.payload.URI&&a.a.createElement("div",null,"URI: ",this.props.payload.URI),this.props.payload.method&&a.a.createElement("div",null,"Method: ",this.props.payload.method),this.props.payload.status&&a.a.createElement("div",null,"Status: ",this.props.payload.status),this.props.payload.message&&a.a.createElement("div",null,"Message: ",this.props.payload.message))}}To.propTypes=ko;var xo=To;const No={children:h.a.node,created:h.a.string.isRequired,type:h.a.string.isRequired,location:h.a.string.isRequired,instanceID:h.a.string.isRequired,payload:h.a.shape({type:h.a.string||h.a.number,message:h.a.string})};class Oo extends r.Component{constructor(e){super(e)}render(){return a.a.createElement(_o,this.props,a.a.createElement("div",null,"Type: ",this.props.payload.type),a.a.createElement("div",null,"Message: ",this.props.payload.message))}}Oo.propTypes=No;var Po=Oo;const Io={children:h.a.node,created:h.a.string.isRequired,type:h.a.string.isRequired,location:h.a.string.isRequired,instanceID:h.a.string.isRequired,payload:h.a.shape({message:h.a.string.isRequired}).isRequired};class Ao extends r.Component{constructor(e){super(e)}render(){return a.a.createElement(_o,this.props,a.a.createElement("div",null,"Error message: ",this.props.payload.message))}}Ao.propTypes=Io;var Mo=Ao;function jo(){return(jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Lo={location:h.a.shape({pathname:h.a.string.isRequired,query:h.a.object.isRequired}).isRequired,page:h.a.string,dispatch:h.a.func.isRequired};class Fo extends r.Component{constructor(e){super(e),this.state={isFetchingLogs:!1,logs:null,logCount:null,pageSize:10,logsTimestamp:parseInt(this.props.location.query.timestamp)||(new Date).getTime()}}componentWillMount(){if(!this.props.location.query.timestamp){const e={...this.props.location,query:{...this.props.location.query,timestamp:this.state.logsTimestamp}};this.props.dispatch(Object(Me.push)(e))}this.setState({isFetchingLogs:!0}),sr.length().then(e=>{this.setState({logCount:e}),this.props.page&&"1"!==this.props.page?sr.getAll(10*(this.props.page-1),this.state.pageSize,this.state.logsTimestamp).then(e=>{this.setState({isFetchingLogs:!1,logs:e})}):e>10?sr.getAll(0,10,this.state.logsTimestamp).then(e=>{this.setState({isFetchingLogs:!1,logs:e})}):sr.getAll(null,null,this.state.logsTimestamp).then(e=>{this.setState({isFetchingLogs:!1,logs:e})})})}componentWillReceiveProps(e){if(this.props.page!==e.page&&"1"===e.page)return this.setState({isFetchingLogs:!0}),void sr.getAll(0,10,this.state.logsTimestamp).then(e=>{this.setState({isFetchingLogs:!1,logs:e})});this.props.page!==e.page&&(this.setState({isFetchingLogs:!0}),sr.getAll(10*(e.page-1),this.state.pageSize,this.state.logsTimestamp).then(e=>{this.setState({isFetchingLogs:!1,logs:e})}))}mapLogToComponent(e,t){const n=[rr.pingFailed,rr.requestFailed,rr.socketError,rr.passwordChangeError,rr.unexpectedRuntimeError,rr.socketBufferFull],r={};if(r[rr.changedRoute]=Ro,r[rr.shownNotification]=Po,r[rr.shownWarning]=Po,r[rr.pingFailed]=xo,r[rr.requestSent]=xo,r[rr.requestReceived]=xo,r[rr.requestFailed]=xo,r[rr.unexpectedRuntimeError]=Mo,r[e.type]){const i=r[e.type];return a.a.createElement(i,jo({key:t},e,{isFailure:n.includes(e.type)}))}return a.a.createElement(_o,jo({key:t},e,{isFailure:n.includes(e.type)}))}renderPagination(){const e=Math.ceil(this.state.logCount/10),t=[...Array(e)].map((e,t)=>a.a.createElement("li",{className:"pagination__item",key:t},this.renderPageLink(t+1)));return a.a.createElement("ul",{className:"pagination"},t)}renderPageLink(e){return 1===e&&!this.props.page||e===parseInt(this.props.page)?a.a.createElement("span",{className:"pagination__link pagination__link--active"},e):a.a.createElement(ye,{className:"pagination__link",to:`${this.props.location.pathname}?page=${e}&timestamp=${this.state.logsTimestamp}`},e)}render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-4"},this.state.isFetchingLogs?a.a.createElement("div",{className:"margin-top--2"},a.a.createElement("div",{className:"loader loader--dark"})):a.a.createElement("div",{className:"logs"},this.state.logs.map((e,t)=>this.mapLogToComponent(e,t)),this.state.logCount>10&&this.renderPagination(),0===this.state.logCount&&a.a.createElement("p",null,"No logs to display"))))}}Fo.propTypes=Lo;var Uo=Object(o.connect)(function(e){return{page:e.routing.locationBeforeTransitions.query.page}})(Fo);n(983);class qo extends r.Component{constructor(e){super(e)}handleClick(e){console.log(e)}render(){const e={columns:[{heading:"Heading 1",width:"12"}],activeRowID:"002",handleItemClick:this.handleClick,isUpdating:!0,rows:[{id:"001",columnValues:["Item 1"],returnValue:{id:"001"},status:{neutral:!1,warning:!1,success:!1,message:""}},{id:"002",columnValues:["Item 2"],returnValue:{id:"002"},status:{neutral:!1,warning:!1,success:!1,message:""}}]},t={numberOfColumns:2,columns:[{heading:"Heading 1",width:"6"},{heading:"Heading 2",width:"6"}],activeRowID:"",handleItemClick:this.handleClick,isUpdating:!0,rows:[{id:"001",columnValues:["Item 1","Item 1 date"],returnValue:{id:"001"},status:{neutral:!1,warning:!1,success:!1,message:""}},{id:"002",columnValues:["Item 2","Item 2 date"],returnValue:{id:"002"},status:{neutral:!1,warning:!1,success:!1,message:""}}]},n={columns:[{heading:"Heading 1",width:"6"},{heading:"Heading 2",width:"3"},{heading:"Heading 3",width:"3"}],activeRowID:"",handleItemClick:this.handleClick,isUpdating:!0,rows:[{id:"001",columnValues:["Item 1","Item 1 date","Item 1 other"],returnValue:{id:"001"},status:{neutral:!1,warning:!0,success:!1,message:"YAY!"}},{id:"002",columnValues:["Item 2","Item 2 date","Item 2 other"],returnValue:{id:"002"},status:{neutral:!1,warning:!1,success:!1,message:""}},{id:"003",columnValues:["Item 3","Item 3 date","Item 3 other"],returnValue:{id:"003"},status:{neutral:!1,warning:!1,success:!1,message:""}}]};return a.a.createElement("div",{className:"grid grid--justify-space-around"},a.a.createElement("div",{className:"grid__col-10 margin-top--2"},a.a.createElement(Or,e)),a.a.createElement("div",{className:"grid__col-10 margin-top--2"},a.a.createElement(Or,t)),a.a.createElement("div",{className:"grid__col-10 margin-top--2 margin-bottom--2"},a.a.createElement(Or,n)))}}const $o={path:h.a.string,onChange:h.a.func,onLoad:h.a.func,hidden:h.a.bool};class Bo extends r.Component{constructor(e){super(e),this.bindWindowOnMessage()}shouldComponentUpdate(e){return e.path!==this.props.path}bindWindowOnMessage(){window.addEventListener("message",this.handleIframeMessage,!1)}handleIframeMessage(e){"load"===e.message&&this.props.onChange(document.getElementById("iframe").contentWindow.document.location.pathname)}returnHiddenValue(){return this.props.hidden?"none":"block"}render(){return a.a.createElement("iframe",{style:{display:this.returnHiddenValue()},id:"iframe",className:"preview__iframe",src:this.props.path,onLoad:this.props.onLoad})}}Bo.propTypes=$o,Bo.defaultProps={path:"/"};const Ho={isReadOnly:h.a.bool,isFetchingCollectionData:h.a.bool,isSavingData:h.a.bool,isLoadingPreview:h.a.bool,collectionID:h.a.string,previewURL:h.a.string,userEmail:h.a.string.isRequired,dataset:h.a.shape({collection_id:h.a.string,lastEditedBy:h.a.string,reviewState:h.a.string}),title:h.a.string.isRequired,backLinkPath:h.a.string.isRequired,onSubmitForReview:h.a.func,onMarkAsReviewed:h.a.func};class Vo extends r.Component{constructor(e){super(e)}renderReviewActions(){if(!this.props.isReadOnly&&!this.props.isFetchingCollectionData)return a.a.createElement(to,{areDisabled:this.props.isSavingData||this.props.isReadOnly,includeSaveLabels:!1,reviewState:this.props.dataset.reviewState,userEmail:this.props.userEmail,lastEditedBy:this.props.dataset.lastEditedBy,onSubmit:this.props.onSubmitForReview,onApprove:this.props.onMarkAsReviewed,notInCollectionYet:!this.props.dataset.collection_id})}render(){return a.a.createElement("div",{className:"preview"},a.a.createElement("div",{className:"preview__header grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-6 margin-top--1 margin-bottom--1"},a.a.createElement("form",null,"◀ ",a.a.createElement(ye,{to:this.props.backLinkPath},"Back"),a.a.createElement("h2",{className:"inline-block margin-left--1"},this.props.title),a.a.createElement("div",null,this.renderReviewActions()),this.props.isSavingData&&a.a.createElement("div",{className:"loader loader--dark loader--centre margin-left--1"})))),this.props.isLoadingPreview&&a.a.createElement("div",{className:"grid grid--align-content-center grid--full-height grid--direction-column grid--justify-center grid--align-center"},a.a.createElement("p",{className:"font-size--16 font-weight--600 margin-bottom--1"},"Loading preview"),a.a.createElement("div",{className:"loader loader--dark loader--centre loader--large"})),this.props.previewURL&&a.a.createElement(Bo,{hidden:!1,path:this.props.previewURL}))}}Vo.propTypes=Ho;var Wo=Vo;const Yo={dispatch:h.a.func.isRequired,userEmail:h.a.string.isRequired,params:h.a.shape({datasetID:h.a.string.isRequired,edition:h.a.string.isRequired,version:h.a.string.isRequired}).isRequired,versionURL:h.a.string,collectionID:h.a.string,version:h.a.shape({title:h.a.string,collection_id:h.a.string,links:h.a.shape({latest_version:h.a.shape({href:h.a.string})}),reviewState:h.a.string,lastEditedBy:h.a.string}),dataset:h.a.shape({id:h.a.string.isRequired,title:h.a.string.isRequired})};class zo extends r.Component{constructor(e){super(e),this.state={isSavingData:!1,isReadOnly:!1,isLoadingPreview:!1,isFetchingCollectionData:!1,isFetchingDatasetData:!1,errorFetchingDataset:!1},this.handleSubmitForReview=this.handleSubmitForReview.bind(this),this.handleMarkAsReviewed=this.handleMarkAsReviewed.bind(this),this.handlePreviewLoad=this.handlePreviewLoad.bind(this),this.backLinkPath=An.resolve(`metadata?collection=${this.props.collectionID}`,!this.props.collectionID)}componentWillMount(){this.setState({isLoadingPreview:!0}),this.props.collectionID||this.setState({isReadOnly:!0}),this.props.version.reviewState||this.updateReviewStateData(),this.props.dataset&&this.props.dataset.id===this.props.params.datasetID||this.updateDatasetData(),ya.getVersion(this.props.params.datasetID,this.props.params.edition,this.props.params.version).then(e=>{this.setState({isLoadingPreview:!1}),this.props.dispatch(At(e))}).catch(e=>{const t=`/datasets/${this.props.params.datasetID}/editions/${this.props.params.edition}/versions/${this.props.params.version}`;switch(e.status){case 401:break;case 403:{const e={type:"neutral",message:`You do not have permission to view dataset version '${t}'`};En.add(e);break}case 404:{const e={type:"warning",message:`Dataset version '${t}' can't be found`};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:`There was a network error whilst getting dataset version '${t}'. Please check your connection and try again`};En.add(e);break}default:{const e={type:"warning",message:`An unexpected error occurred whilst getting dataset version '${t}'`};En.add(e)}}this.setState({isLoadingPreview:!1}),console.error(`Error fetching dataset version '${t}'`,e)})}updateDatasetData(){this.setState({isFetchingDatasetData:!0});const e=this.props.params.datasetID;ya.get(e).then(e=>{const t=e.next||e.current;this.props.dispatch(Ot(t)),this.setState({isFetchingDatasetData:!1})}).catch(e=>{console.error("Error fetching dataset on version preview screen",e),sr.add(rr.unexpectedRuntimeError,{message:`Error fetching dataset on version preview screen. Error:${JSON.stringify(e)}`}),this.setState({isFetchingDatasetData:!1,errorFetchingDataset:!0})})}getCollection(e){return gr.get(e).then(e=>[null,e]).catch(e=>[e,null])}async updateReviewStateData(){this.setState({isFetchingCollectionData:!0});const e=this.props.collectionID,t=this.props.params.datasetID,n=this.props.params.edition,r=this.props.params.version;try{const[a,i]=await this.getCollection(e);if(a)throw a;const s=i.datasetVersions.find(e=>e.id===t&&e.edition===n&&e.version===r);if(!s)return void this.setState({isFetchingCollectionData:!1});const o=s.lastEditedBy,l=s.state.charAt(0).toLowerCase()+s.state.slice(1);this.props.dispatch(Mt(o,l)),this.setState({isFetchingCollectionData:!1})}catch(t){switch(this.setState({isFetchingCollectionData:!1,isReadOnly:!0}),t.status){case 401:break;case 403:{const t={type:"neutral",message:`You do not permission to get details for collection '${e}'`,isDismissable:!0};En.add(t);break}case 404:{const t={type:"warning",message:`Could not find collection '${e}'`,isDismissable:!0};En.add(t);break}default:{const t={type:"warning",message:`An unexpected error's occurred whilst trying to get the collection '${e}'`,isDismissable:!0};En.add(t);break}}sr.add(rr.unexpectedRuntimeError,{message:"Unable to update metadata screen with version's review/edit status in collection "+e+". Error: "+JSON.stringify(t)}),console.error("Unable to update metadata screen with version's review/edit status in collection '"+e+"'",t)}}updateDatasetReviewState(e,t){let n=Promise.resolve;return e&&(n=gr.setDatasetVersionStatusToComplete),t&&(n=gr.setDatasetVersionStatusToReviewed),n(this.props.collectionID,this.props.params.datasetID,this.props.params.edition,this.props.params.version).catch(n=>(sr.add(rr.unexpectedRuntimeError,{message:`Error updating review state for dataset version '${this.props.versionURL}' to '${e?"Complete":""}${t?"Reviewed":""}' in collection '${this.props.collectionID}'. Error: ${JSON.stringify(n)}`}),console.error(`Error updating review state for dataset '${this.props.versionURL}' to '${e?"Complete":""}${t?"Reviewed":""}' in collection '${this.props.collectionID}'`,n),n))}async handleUpdateReviewState(e,t){this.setState({isSavingData:!0});const n=await this.updateDatasetReviewState(e,t);if(n)return Ks(void 0,n,e,t,this.props.collectionID),void this.setState({isSavingData:!1});this.props.dispatch(Object(Me.push)(An.resolve(`/collections/${this.props.collectionID}`)))}handleSubmitForReview(){this.handleUpdateReviewState(!0,!1)}handleMarkAsReviewed(){this.handleUpdateReviewState(!1,!0)}handlePreviewLoad(){this.setState({isLoadingPreview:!1})}renderDatasetTitle(){return this.state.isFetchingDatasetData?"Loading dataset title...":!this.state.errorFetchingDataset&&this.props.dataset&&this.props.dataset.title?`${this.props.dataset.title}: ${this.props.params.edition} (version ${this.props.params.version})`:`[failed to get dataset title]: ${this.props.params.edition} (version ${this.props.params.version})`}render(){return a.a.createElement(Wo,{onSubmitForReview:this.handleSubmitForReview,onMarkAsReviewed:this.handleMarkAsReviewed,isReadOnly:this.state.isReadOnly,isFetchingCollectionData:this.state.isFetchingCollectionData,isSavingData:this.state.isSavingData,isLoadingPreview:this.state.isLoadingPreview,collectionID:this.props.collectionID,previewURL:this.props.versionURL?`//${location.host}${this.props.versionURL}`:null,userEmail:this.props.userEmail,dataset:this.props.version,title:this.renderDatasetTitle(),backLinkPath:this.backLinkPath})}}function Xo(e){try{return`/datasets/${e.links.dataset.id}/editions/${e.edition}/versions/${e.version}`}catch(t){return console.error("Error attempting to build path for a dataset version",t,e),sr.add(rr.unexpectedRuntimeError,{message:`Error attempting to build path for a dataset version. Error: ${JSON.stringify(t)}. Version data: ${JSON.stringify}`}),En.add({type:"warning",message:"Unable to build path for this version, so some functionality may not work as expected",autoDismiss:6e3,isDismissable:!0}),""}}zo.propTypes=Yo;var Jo=Object(o.connect)(function(e){return{version:e.state.datasets.activeVersion||{},dataset:e.state.datasets.activeDataset,versionURL:e.state.datasets.activeVersion?Xo(e.state.datasets.activeVersion):null,collectionID:e.routing.locationBeforeTransitions.query.collection,userEmail:e.state.user.email}})(zo);const Go={path:h.a.string,onChange:h.a.func};class Ko extends r.Component{constructor(e){super(e),this.bindWindowOnMessage()}shouldComponentUpdate(e){return e.path!==this.props.path}bindWindowOnMessage(){window.addEventListener("message",this.handleIframeMessage,!1)}handleIframeMessage(e){"load"===e.message&&this.props.onChange(document.getElementById("iframe").contentWindow.document.location.pathname)}render(){return a.a.createElement("iframe",{id:"iframe",className:"preview__iframe",src:this.props.path})}}Ko.propTypes=Go,Ko.defaultProps={path:"/"};const Qo={selectedPageUri:h.a.string,workingOn:h.a.shape({id:h.a.string.isRequired,name:h.a.string}),rootPath:h.a.string.isRequired,routeParams:h.a.object.isRequired,dispatch:h.a.func.isRequired};class Zo extends r.Component{constructor(e){super(e)}componentWillMount(){const e=this.props.routeParams.collectionID;this.fetchCollectionAndPages(e),this.props.workingOn&&this.props.workingOn.id||this.props.dispatch(xt(e,""));const t=new URL(window.location.href).searchParams.get("url");t&&this.props.dispatch($t(t)),Wt.get("collection")||Wt.add("collection",e,null)}componentWillUnmount(){this.props.dispatch({type:Xe}),this.props.dispatch({type:Ct,selectedPage:{}})}fetchCollectionAndPages(e){this.fetchCollection(e).then(t=>{const n=[...t.inProgress,...t.complete,...t.reviewed],r={collectionID:e,name:t.name,pages:n};this.props.dispatch(function(e){return{type:bt,preview:e}}(r)),this.props.workingOn&&this.props.workingOn.name||this.props.dispatch(xt(e,t.name))}).catch(t=>{const n={type:"warning",message:"There was an error getting data for this collection. Please try refreshing the page",isDismissable:!0};switch(t.status){case 401:return n.message="You do not have permission to view this data, so you have been redirected to the collections screen",n.type="neutral",En.add(n),this.props.dispatch(Object(Me.replace)(`${this.props.rootPath}/collections/`)),void Wt.remove("collection");case 404:return n.message="That collection doesn't appear to exist, so you have been redirected to the collections screen",En.add(n),void this.props.dispatch(Object(Me.replace)(`${this.props.rootPath}/collections/`))}En.add(n),console.error(`Error fetching ${e}:\n`,t)})}fetchCollection(e){return Cn.get(`/zebedee/collectionDetails/${e}`,!0,!0)}render(){return a.a.createElement("div",{className:"preview"},a.a.createElement(Ko,{path:this.props.selectedPageUri||"/"}))}}Zo.propTypes=Qo;var el=Object(o.connect)(function(e){return{selectedPageUri:e.state.preview.selectedPage,workingOn:e.state.global.workingOn,rootPath:e.state.rootPath}})(Zo);function tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nl={params:h.a.shape({collectionID:h.a.string.isRequired,datasetID:h.a.string.isRequired,editionID:h.a.string.isRequired,versionID:h.a.string.isRequired}),dispatch:h.a.func.isRequired};class rl extends r.Component{constructor(e){super(e),tl(this,"getDataset",e=>(this.setState({isFetchingDataset:!0}),ya.get(e).then(e=>{this.setState({isFetchingDataset:!1,dataset:this.mapDatasetToState(e)})}).catch(e=>{switch(e.status){case 403:{const e={type:"neutral",message:`You do not have permission to view dataset '${this.props.params.datasetID}'`,isDismissable:!0};En.add(e);break}case 404:{const e={type:"warning",message:`Dataset ID '${this.props.params.datasetID}' can't be found`,isDismissable:!0};En.add(e);break}case"FETCH_ERR":{const e={type:"warning",message:`There was a network error whilst getting dataset '${this.props.params.datasetID}'. Please check your connection and try again`,isDismissable:!0};En.add(e);break}default:{const e={type:"warning",message:`An unexpected error occurred whilst getting dataset '${this.props.params.datasetID}'`,isDismissable:!0};En.add(e)}}this.setState({isFetchingDataset:!1}),console.error(`Error fetching dataset ID '${this.props.params.datasetID}'`,e)}))),tl(this,"mapDatasetToState",e=>{try{return{title:(e.current||e.next||e).title}}catch(e){const t={type:"warning",message:"An unexpected error occurred when trying to get dataset details, so some functionality in Florence may not work as expected. Try refreshing the page",isDismissable:!0};En.add(t),console.error("Error getting dataset details to state:\n",e)}}),tl(this,"handleBackButton",()=>{const e=An.resolve("../");this.props.dispatch(Object(Me.push)(e))}),this.state={isFetchingDataset:!1,dataset:{}}}componentWillMount(){this.getDataset(this.props.params.datasetID)}render(){return a.a.createElement("div",null,a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-6 margin-bottom--1"},a.a.createElement("div",{className:"margin-top--2"},"◀ ",a.a.createElement("button",{type:"button",className:"btn btn--link",onClick:this.handleBackButton},"Back")),a.a.createElement("h1",{className:"margin-top--1 margin-bottom--1"},"Preview"),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Dataset"),": ",this.state.dataset.title?this.state.dataset.title:"loading..."),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Edition"),": ",this.props.params.editionID),a.a.createElement("p",{className:"margin-bottom--1 font-size--18"},a.a.createElement("span",{className:"font-weight--600"},"Version"),": ",this.props.params.versionID))),a.a.createElement("div",{className:"preview--half preview--borders"},a.a.createElement(Ko,{path:`/datasets/${this.props.params.datasetID}/editions/${this.props.params.editionID}/versions/${this.props.params.versionID}`})),a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("div",{className:"grid__col-6"},a.a.createElement("div",{className:"margin-top--1 margin-bottom--1"},a.a.createElement(ye,{className:"btn btn--positive margin-right--1",to:window.location.origin+"/florence/collections/"+this.props.params.collectionID},"Continue")))))}}rl.propTypes=nl;var al=rl;function il(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const sl={params:h.a.shape({metadataField:h.a.string.isRequired}),data:h.a.shape({id:h.a.string,type:h.a.string,description:h.a.string,href:h.a.string,date:h.a.string,title:h.a.string}),handleSuccessClick:h.a.func.isRequired,handleCancelClick:h.a.func.isRequired};class ol extends r.Component{constructor(e){super(e),il(this,"handleSuccessClick",()=>{this.props.handleSuccessClick(this.state,this.props.params.metadataField)}),il(this,"handleInputChange",e=>{const t=e.target.value,n=e.target.name;this.setState({[n]:t})}),il(this,"handleSelectChange",e=>{const t=e.target.value,n=e.target.name;this.setState({[n]:t})}),il(this,"handleDateInputChange",e=>{const t=e.target.name,n=e.target.value,r=new Date(n).toISOString();this.setState({[t]:r})}),il(this,"renderModalBody",()=>{switch(this.props.params.metadataField){case"notices":return a.a.createElement("div",null,a.a.createElement(Fn,{id:"type",selectedOption:this.state.type,label:"Type",contents:[{id:"alert",name:"Alert"},{id:"correction",name:"Correction"}],onChange:this.handleSelectChange}),a.a.createElement(Xn,{id:"date",type:"date",label:"Date",value:this.state.date&&Mr.format(this.state.date,"yyyy-mm-dd"),onChange:this.handleDateInputChange}),a.a.createElement(Xn,{id:"description",type:"textarea",label:"Description",value:this.state.description,onChange:this.handleInputChange}));case"relatedDatasets":case"relatedPublications":case"relatedMethodologies":return a.a.createElement("div",null,a.a.createElement(Xn,{id:"title",type:"input",label:"Title",value:this.state.title,onChange:this.handleInputChange}),a.a.createElement(Xn,{id:"href",type:"input",label:"URL",value:this.state.href,onChange:this.handleInputChange}),a.a.createElement(Xn,{id:"description",type:"textarea",label:"Description",value:this.state.description,onChange:this.handleInputChange}));case"usageNotes":case"latestChanges":return a.a.createElement("div",null,a.a.createElement(Xn,{id:"title",type:"input",label:"Title",value:this.state.title,onChange:this.handleInputChange}),a.a.createElement(Xn,{id:"description",type:"textarea",label:"Description",value:this.state.description,onChange:this.handleInputChange}));default:return a.a.createElement("p",null,"Something went wrong: unsupported field type")}}),this.state={id:this.props.data?this.props.data.id:null,type:this.props.data?this.props.data.type:"",description:this.props.data?this.props.data.description:"",href:this.props.data?this.props.data.href:"",date:this.props.data?this.props.data.date:"",title:this.props.data?this.props.data.title:""}}render(){return a.a.createElement(Zn,null,a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,"Add an item")),a.a.createElement("div",{className:"modal__body"},this.renderModalBody()),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{type:"button",className:"btn btn--primary btn--margin-right",onClick:this.handleSuccessClick},"Continue"),a.a.createElement("button",{type:"button",className:"btn",onClick:this.props.handleCancelClick},"Cancel")))}}function ll(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ol.propTypes=sl;const cl={dispatch:h.a.func.isRequired,params:h.a.shape({userID:h.a.string.isRequired}).isRequired,loggedInUser:h.a.shape({isAdmin:h.a.bool.isRequired,email:h.a.string.isRequired}).isRequired,rootPath:h.a.string.isRequired};class ul extends r.Component{constructor(e){super(e),ll(this,"handleCancel",()=>{this.props.dispatch(Object(Me.push)(An.resolve("../")))}),ll(this,"handleInputChange",(e,t)=>{t?this.setState({[t]:{value:e,error:""}}):console.warn("No input ID given to change handle function")}),ll(this,"handleSubmit",e=>{e.preventDefault();let t=!1,n={...this.state};this.props.loggedInUser.isAdmin||this.state.currentPassword.value||(n={...n,currentPassword:{...n.currentPassword,error:"You must enter your current password"}},t=!0);const r=lr(this.state.newPassword.value);if(r.isValid||(n={...n,newPassword:{...n.newPassword,error:r.error}},t=!0),t)return void this.setState(n);const a={oldPassword:this.state.currentPassword.value,password:this.state.newPassword.value,email:this.props.params.userID};return this.setState({isSubmitting:!0}),_n.updatePassword(a).then(()=>{this.props.dispatch(Object(Me.push)(An.resolve("../"))),En.add({type:"positive",isDismissable:!0,autoDismiss:7e3,message:"Password successfully changed"})}).catch(e=>{if(this.setState({isSubmitting:!1}),401===e.status&&!this.props.loggedInUser.isAdmin)return void this.setState(e=>({currentPassword:{...e.currentPassword,error:"Incorrect password"}}));if(401===e.status&&this.props.loggedInUser.isAdmin)return void _n.logOut();let t={type:"warning",isDismissable:!0,message:"Unable to change user's password due to an unexpected error"};switch(e.status){case 403:t.message="Unable to change user's password because you don't have permissions to do so";break;case 404:t.message="Unable to change user's password because this user doesn't exist";break;case"FETCH_ERR":t.message="Unable to changes user's password due to a network error. Please check your connection and try again."}console.error("Error changing a user's password",e),Zt.event("Error changing a user's password",Zt.error(e)),En.add(t)})}),ll(this,"formInputs",()=>{let e=[{id:"new-password",label:"New password",type:"password",onChange:e=>this.handleInputChange(e.target.value,"newPassword"),error:this.state.newPassword.error}];return this.props.loggedInUser.isAdmin||e.splice(0,0,{id:"current-password",label:"Current password",type:"password",onChange:e=>this.handleInputChange(e.target.value,"currentPassword"),error:this.state.currentPassword.error}),e}),this.state={currentPassword:{value:"",error:""},newPassword:{value:"",error:""},isSubmitting:!1}}componentWillMount(){this.props.loggedInUser.isAdmin||this.props.params.userID===this.props.loggedInUser.email||this.props.dispatch(Object(Me.replace)(`${this.props.rootPath}/users/${this.props.params.userID}`))}render(){return a.a.createElement(Zn,{sizeClass:"grid__col-xs-10 grid__col-md-6 grid__col-lg-4"},a.a.createElement(nr,{formData:{inputs:this.formInputs(),onSubmit:this.handleSubmit,onCancel:this.handleCancel,isSubmitting:this.state.isSubmitting}}))}}ul.propTypes=cl;var dl=Object(o.connect)(function(e){return{rootPath:e.state.rootPath,loggedInUser:e.state.user}})(ul);function pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hl={dispatch:h.a.func.isRequired,params:h.a.shape({userID:h.a.string.isRequired}).isRequired,loggedInUser:h.a.shape({isAdmin:h.a.bool.isRequired}).isRequired};class fl extends r.Component{constructor(e){super(e),pl(this,"handleClose",()=>{this.props.dispatch(Object(Me.push)(An.resolve("../")))}),pl(this,"handleChange",e=>{this.setState({email:e.target.value,error:""})}),pl(this,"handleSubmit",async e=>{e.preventDefault();const t=this.props.params.userID;if(!this.state.email)return void this.setState({error:"You must enter the user's email address"});if(this.state.email!==t)return void this.setState({error:`Email address must match '${t}'`});this.setState({isSavingDelete:!0});const n=await this.deleteUser(t);this.setState({isSavingDelete:!1}),n.error?this.handleDeleteUserError(n.error):(En.add({type:"positive",message:"User successfully deleted",autoDismiss:7e3,isDismissable:!0}),this.props.dispatch(function(e){return{type:Ke,userID:e}}(t)),this.props.dispatch(Object(Me.push)(An.resolve("../../"))))}),this.state={email:"",error:"",isSavingDelete:!1}}componentWillMount(){this.props.loggedInUser.isAdmin||this.props.dispatch(Object(Me.replace)(An.resolve("../")))}deleteUser(e){return new Promise(async(t,n)=>{_n.remove(e).then(e=>{t({response:e,error:null})}).catch(e=>n(e))}).catch(t=>(console.error(`Error deleting user '${e}'`,t),Zt.event(`Error deleting user '${e}'`,Zt.error(t)),{response:null,error:t}))}handleDeleteUserError(e){let t={type:"warning",isDismissable:!0,message:""};switch(e.status){case 401:break;case 403:t.message="Unable to delete user because you do not have permission to do so";break;case 404:t.message="Unable to delete user because it no longer exists";break;case"FETCH_ERR":t.message="Unable to delete user due to a network error. Check your connection and try again.";break;default:t.message="Unable to delete user due to an unexpected error"}En.add(t)}render(){return a.a.createElement(Zn,{sizeClass:"grid__col-xs-10 grid__col-md-6 grid__col-lg-4"},a.a.createElement("div",{className:"modal__header"},a.a.createElement("h2",null,"Confirm delete")),a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("div",{className:"modal__body"},a.a.createElement(Xn,{id:"confirm-delete",label:"Enter the email address of the user you want to delete",onChange:this.handleChange,error:this.state.error,disabled:this.state.isSavingDelete,isFocused:!0})),a.a.createElement("div",{className:"modal__footer"},a.a.createElement("button",{disabled:this.state.isSavingDelete,className:"btn btn--warning",type:"submit"},"Delete"),a.a.createElement("button",{disabled:this.state.isSavingDelete,className:"btn margin-left--1",type:"button",onClick:this.handleClose},"Cancel"),this.state.isSavingDelete&&a.a.createElement("div",{className:"form__loader loader loader--dark margin-left--1"}))))}}fl.propTypes=hl;var ml=Object(o.connect)(function(e){return{loggedInUser:e.state.user}})(fl);const gl=window.getEnv();yn.dispatch({type:Le,config:gl});const vl=yn.getState().state.rootPath,yl=Object(je.connectedReduxRedirect)({authenticatedSelector:e=>Mn.isAuthenticated(e.state.user),redirectAction:Me.routerActions.replace,wrapperDisplayName:"UserIsAuthenticated",redirectPath:`${vl}/login`}),bl=Object(je.connectedReduxRedirect)({authenticatedSelector:e=>Mn.isAdminOrEditor(e.state.user),redirectAction:Me.routerActions.replace,wrapperDisplayName:"userisAdminOrEditor",redirectPath:`${vl}/collections`,allowRedirectBack:!1});class El extends r.Component{render(){return a.a.createElement("div",{className:"grid grid--justify-center"},a.a.createElement("h1",null,"Sorry, this page couldnt be found"))}}s.a.render(a.a.createElement(class extends r.Component{render(){return a.a.createElement(o.Provider,{store:yn},a.a.createElement(fe,{history:bn},a.a.createElement(Se,{component:In},a.a.createElement(Se,{component:Yn},a.a.createElement(we,{from:`${vl}`,to:`${vl}/collections`}),a.a.createElement(Se,{path:`${vl}/collections`,component:yl(Na)},a.a.createElement(Se,{path:":collectionID",component:yl(Na)},a.a.createElement(Se,{path:"edit",component:yl(Na)}),a.a.createElement(Se,{path:"restore-content",component:yl(Na)}))),a.a.createElement(Se,{path:`${vl}/collections/:collectionID/preview`,component:yl(el)}),!0===gl.enableDatasetImport&&a.a.createElement(Se,{path:`${vl}/collections/:collectionID/datasets`},a.a.createElement(_e,{component:yl(mi)}),a.a.createElement(Se,{path:":datasetID"},a.a.createElement(_e,{component:yl(bi)}),a.a.createElement(Se,{path:"editions",component:yl(Xi)}),a.a.createElement(Se,{path:"editions/:editionID"},a.a.createElement(Se,{path:"instances",component:yl(Hi)}),a.a.createElement(_e,{component:yl(_i)}),a.a.createElement(Se,{path:"versions/:versionID",component:yl(Ui)},a.a.createElement(Se,{path:"edit/:metadataField/:metadataItemID",component:yl(ol)})),a.a.createElement(Se,{path:"versions/:versionID/preview",component:yl(al)})))),a.a.createElement(Se,{path:`${vl}/teams`,component:yl(bl(si))},a.a.createElement(Se,{path:":team",component:yl(si)},a.a.createElement(Se,{path:"edit",component:yl(si)}),a.a.createElement(Se,{path:"delete",component:yl(si)}))),a.a.createElement(Se,{path:`${vl}/users`,component:yl(bl(ts))},a.a.createElement(Se,{path:":userID",component:yl(bl(us))},a.a.createElement(Se,{path:"change-password",component:yl(bl(dl))}),a.a.createElement(Se,{path:"confirm-delete",component:yl(bl(ml))}))),!0===gl.enableDatasetImport&&a.a.createElement(Se,null,a.a.createElement(Se,{path:`${vl}/uploads`},a.a.createElement(Ce,{to:"data"}),a.a.createElement(Se,{path:"data"},a.a.createElement(_e,{component:yl(bl(ks))}),a.a.createElement(Se,{path:":jobID"},a.a.createElement(_e,{component:yl(bl(Ms))}),a.a.createElement(Se,{path:"metadata",component:yl(bl(Fs))})))),a.a.createElement(Se,{path:`${vl}/datasets`},a.a.createElement(_e,{component:yl(bl(ms))}),a.a.createElement(Se,{path:":datasetID"},a.a.createElement(Ce,{to:`${vl}/datasets`}),a.a.createElement(Se,{path:"preview",component:yl(bl(al))}),a.a.createElement(Se,{path:"metadata",component:yl(bl(ao))}),a.a.createElement(Se,{path:"editions/:edition/versions/:version"},a.a.createElement(Ce,{to:"metadata"}),a.a.createElement(Se,{path:"metadata",component:yl(bl(Eo))}),a.a.createElement(Se,{path:"preview",component:yl(bl(Jo))})),a.a.createElement(Se,{path:"instances"},a.a.createElement(Ce,{to:`${vl}/datasets`}),a.a.createElement(Se,{path:":instanceID/metadata",component:yl(bl(Eo))}))))),a.a.createElement(Se,{path:`${vl}/selectable-list`,component:qo}),a.a.createElement(Se,{path:`${vl}/logs`,component:Uo}),a.a.createElement(Se,{path:`${vl}/login`,component:hr}),a.a.createElement(Se,{path:"*",component:El})))))}},null),document.getElementById("app"))},function(e,t){}]);