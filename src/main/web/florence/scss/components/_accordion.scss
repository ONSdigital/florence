/** ACCORDION **/

.accordion {

    // If more than one accordion put a border between them
    &:not(:first-of-type) {
        border-top: 3px solid transparent;
    }

    &__title {
        height: $lineheight * 3;
        background: $gray-chateau;
        box-sizing: border-box;
        position: relative;
        padding: 0 $col--2;
        cursor: pointer;
        //border-bottom: 3px solid $gray-chateau; // Add on border and remove it when active to stop jump from border on content when it appears

        &.active {
            //border-bottom: 3px solid $gray-chateau;
        }

        // Handle different headings in accordion title
        h3 {
            margin: 0;
            padding: ($lineheight / 2) $gutter;
        }
        h4 {
            margin-top: 0;
        }

        // Arrows on accordion title
        &:before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            top: $lineheight + 6;
            right: $col--2;
            background-color: transparent;
            border-top: 10px solid $emperor;
            border-left: 10px solid transparent;
            border-right:10px solid transparent;
        }

        &.active:before {
            border-top: 0 solid transparent;
            border-bottom: 10px solid $emperor;
            border-left: 10px solid transparent;
            border-right:10px solid transparent;
        }

        &:hover {
            background-color: darken($gray-chateau, 10%);
        }
    }

    &__content {
        overflow: scroll;
        animation-name: accordion-hide;
        animation-fill-mode: forwards;
        animation-duration: 0.4s;
        animation-timing-function: ease-in-out;

        // Stop animation showing on initial render of the accordion - class removed on click
        &.disable-animation {
            display: none;
        }

        &.active {
            display: block;
            animation-name: accordion-show;
            animation-fill-mode: forwards;
            animation-duration: 0.4s;
            animation-timing-function: ease-in-out;
        }

        &--padded {
            padding: 0 $col--2;
        }

        // Add borders to the accordion content (currently used on single accordions)
        &--borders {
            border-left: 3px solid $gray-chateau;
            border-right: 3px solid $gray-chateau;
            animation-name: accordion-hide--borders;
            animation-fill-mode: forwards;
            animation-duration: 0.4s;
            animation-timing-function: ease-in-out;
        }

        &--borders.active {
            animation-name: accordion-show--borders;
            animation-fill-mode: forwards;
            animation-duration: 0.4s;
            animation-timing-function: ease-in-out;
        }
    }
}

/* Accordion animation */
@keyframes accordion-show {
    from {max-height: 0;}
    to {max-height: ($lineheight * 17);}
}
@keyframes accordion-hide {
    from {max-height: ($lineheight * 17);}
    to {max-height: 0;}
}

// Modifier to add border to accordion
@keyframes accordion-show--borders {
    from {max-height: 0; border-bottom: 0;}
    to {max-height: ($lineheight * 17); border-bottom: 3px solid $gray-chateau;}
}
@keyframes accordion-hide--borders {
    from {max-height: ($lineheight * 17); border-bottom: 3px solid $gray-chateau;}
    to {max-height: 0; border-bottom: 0;}
}
